(()=>{var TI=Object.create;var dm=Object.defineProperty;var wI=Object.getOwnPropertyDescriptor;var NI=Object.getOwnPropertyNames;var kI=Object.getPrototypeOf,OI=Object.prototype.hasOwnProperty;var MI=(n,t)=>()=>(n&&(t=n(n=0)),t);var vo=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),an=(n,t)=>{for(var e in t)dm(n,e,{get:t[e],enumerable:!0})},RI=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of NI(t))!OI.call(n,r)&&r!==e&&dm(n,r,{get:()=>t[r],enumerable:!(i=wI(t,r))||i.enumerable});return n};var So=(n,t,e)=>(e=n!=null?TI(kI(n)):{},RI(t||!n||!n.__esModule?dm(e,"default",{value:n,enumerable:!0}):e,n));var tA=vo((db,hb)=>{(function(n,t){typeof db=="object"&&typeof hb<"u"?hb.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=t()})(db,function(){"use strict";var n=1e3,t=6e4,e=36e5,i="millisecond",r="second",s="minute",o="hour",a="day",l="week",c="month",u="quarter",d="year",h="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var N=["th","st","nd","rd"],R=w%100;return"["+w+(N[(R-20)%10]||N[R]||N[0])+"]"}},b=function(w,N,R){var k=String(w);return!k||k.length>=N?w:""+Array(N+1-k.length).join(R)+w},_={s:b,z:function(w){var N=-w.utcOffset(),R=Math.abs(N),k=Math.floor(R/60),D=R%60;return(N<=0?"+":"-")+b(k,2,"0")+":"+b(D,2,"0")},m:function w(N,R){if(N.date()<R.date())return-w(R,N);var k=12*(R.year()-N.year())+(R.month()-N.month()),D=N.clone().add(k,c),F=R-D<0,z=N.clone().add(k+(F?-1:1),c);return+(-(k+(R-D)/(F?D-z:z-D))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:c,y:d,w:l,d:a,D:h,h:o,m:s,s:r,ms:i,Q:u}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},x="en",y={};y[x]=p;var v="$isDayjsObject",S=function(w){return w instanceof $||!(!w||!w[v])},C=function w(N,R,k){var D;if(!N)return x;if(typeof N=="string"){var F=N.toLowerCase();y[F]&&(D=F),R&&(y[F]=R,D=F);var z=N.split("-");if(!D&&z.length>1)return w(z[0])}else{var U=N.name;y[U]=N,D=U}return!k&&D&&(x=D),D||!k&&x},A=function(w,N){if(S(w))return w.clone();var R=typeof N=="object"?N:{};return R.date=w,R.args=arguments,new $(R)},E=_;E.l=C,E.i=S,E.w=function(w,N){return A(w,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var $=function(){function w(R){this.$L=C(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[v]=!0}var N=w.prototype;return N.parse=function(R){this.$d=function(k){var D=k.date,F=k.utc;if(D===null)return new Date(NaN);if(E.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var z=D.match(g);if(z){var U=z[2]-1||0,X=(z[7]||"0").substring(0,3);return F?new Date(Date.UTC(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,X)):new Date(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,X)}}return new Date(D)}(R),this.init()},N.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},N.$utils=function(){return E},N.isValid=function(){return this.$d.toString()!==f},N.isSame=function(R,k){var D=A(R);return this.startOf(k)<=D&&D<=this.endOf(k)},N.isAfter=function(R,k){return A(R)<this.startOf(k)},N.isBefore=function(R,k){return this.endOf(k)<A(R)},N.$g=function(R,k,D){return E.u(R)?this[k]:this.set(D,R)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(R,k){var D=this,F=!!E.u(k)||k,z=E.p(R),U=function(bt,q){var vt=E.w(D.$u?Date.UTC(D.$y,q,bt):new Date(D.$y,q,bt),D);return F?vt:vt.endOf(a)},X=function(bt,q){return E.w(D.toDate()[bt].apply(D.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(q)),D)},G=this.$W,Q=this.$M,st=this.$D,ut="set"+(this.$u?"UTC":"");switch(z){case d:return F?U(1,0):U(31,11);case c:return F?U(1,Q):U(0,Q+1);case l:var at=this.$locale().weekStart||0,et=(G<at?G+7:G)-at;return U(F?st-et:st+(6-et),Q);case a:case h:return X(ut+"Hours",0);case o:return X(ut+"Minutes",1);case s:return X(ut+"Seconds",2);case r:return X(ut+"Milliseconds",3);default:return this.clone()}},N.endOf=function(R){return this.startOf(R,!1)},N.$set=function(R,k){var D,F=E.p(R),z="set"+(this.$u?"UTC":""),U=(D={},D[a]=z+"Date",D[h]=z+"Date",D[c]=z+"Month",D[d]=z+"FullYear",D[o]=z+"Hours",D[s]=z+"Minutes",D[r]=z+"Seconds",D[i]=z+"Milliseconds",D)[F],X=F===a?this.$D+(k-this.$W):k;if(F===c||F===d){var G=this.clone().set(h,1);G.$d[U](X),G.init(),this.$d=G.set(h,Math.min(this.$D,G.daysInMonth())).$d}else U&&this.$d[U](X);return this.init(),this},N.set=function(R,k){return this.clone().$set(R,k)},N.get=function(R){return this[E.p(R)]()},N.add=function(R,k){var D,F=this;R=Number(R);var z=E.p(k),U=function(Q){var st=A(F);return E.w(st.date(st.date()+Math.round(Q*R)),F)};if(z===c)return this.set(c,this.$M+R);if(z===d)return this.set(d,this.$y+R);if(z===a)return U(1);if(z===l)return U(7);var X=(D={},D[s]=t,D[o]=e,D[r]=n,D)[z]||1,G=this.$d.getTime()+R*X;return E.w(G,this)},N.subtract=function(R,k){return this.add(-1*R,k)},N.format=function(R){var k=this,D=this.$locale();if(!this.isValid())return D.invalidDate||f;var F=R||"YYYY-MM-DDTHH:mm:ssZ",z=E.z(this),U=this.$H,X=this.$m,G=this.$M,Q=D.weekdays,st=D.months,ut=D.meridiem,at=function(q,vt,kt,Un){return q&&(q[vt]||q(k,F))||kt[vt].slice(0,Un)},et=function(q){return E.s(U%12||12,q,"0")},bt=ut||function(q,vt,kt){var Un=q<12?"AM":"PM";return kt?Un.toLowerCase():Un};return F.replace(m,function(q,vt){return vt||function(kt){switch(kt){case"YY":return String(k.$y).slice(-2);case"YYYY":return E.s(k.$y,4,"0");case"M":return G+1;case"MM":return E.s(G+1,2,"0");case"MMM":return at(D.monthsShort,G,st,3);case"MMMM":return at(st,G);case"D":return k.$D;case"DD":return E.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return at(D.weekdaysMin,k.$W,Q,2);case"ddd":return at(D.weekdaysShort,k.$W,Q,3);case"dddd":return Q[k.$W];case"H":return String(U);case"HH":return E.s(U,2,"0");case"h":return et(1);case"hh":return et(2);case"a":return bt(U,X,!0);case"A":return bt(U,X,!1);case"m":return String(X);case"mm":return E.s(X,2,"0");case"s":return String(k.$s);case"ss":return E.s(k.$s,2,"0");case"SSS":return E.s(k.$ms,3,"0");case"Z":return z}return null}(q)||z.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(R,k,D){var F,z=this,U=E.p(k),X=A(R),G=(X.utcOffset()-this.utcOffset())*t,Q=this-X,st=function(){return E.m(z,X)};switch(U){case d:F=st()/12;break;case c:F=st();break;case u:F=st()/3;break;case l:F=(Q-G)/6048e5;break;case a:F=(Q-G)/864e5;break;case o:F=Q/e;break;case s:F=Q/t;break;case r:F=Q/n;break;default:F=Q}return D?F:E.a(F)},N.daysInMonth=function(){return this.endOf(c).$D},N.$locale=function(){return y[this.$L]},N.locale=function(R,k){if(!R)return this.$L;var D=this.clone(),F=C(R,k,!0);return F&&(D.$L=F),D},N.clone=function(){return E.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},w}(),L=$.prototype;return A.prototype=L,[["$ms",i],["$s",r],["$m",s],["$H",o],["$W",a],["$M",c],["$y",d],["$D",h]].forEach(function(w){L[w[1]]=function(N){return this.$g(N,w[0],w[1])}}),A.extend=function(w,N){return w.$i||(w(N,$,A),w.$i=!0),A},A.locale=C,A.isDayjs=S,A.unix=function(w){return A(1e3*w)},A.en=y[x],A.Ls=y,A.p={},A})});var W1=vo((X8,H1)=>{var Ax=class{constructor(t){let e=document.getElementById(t.id);if(!e)return;let i=t.datasets.length>1;e.innerHTML="";let r=document.createElement("canvas");e.appendChild(r);let s=r.getContext("2d"),o={type:t.type,data:{labels:t.labels,datasets:t.datasets},options:{layout:{padding:{top:20,left:20,right:20,bottom:20}},responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:i,position:"top",align:"center"},tooltip:{enabled:!0}},scales:{x:{display:!0,ticks:{maxRotation:65,font:{size:15}},grid:{display:!1}},y:{display:!0,grid:{display:!1}}},onClick:(a,l)=>{if(!l.length)return;let c=l[0];emit("markerClick",{seriesIndex:c.datasetIndex,dataPointIndex:c.index})}}};t.compact&&(o.options.plugins.legend.display=!1,o.options.scales.x.display=!1,o.options.scales.y.display=!1,o.options.layout.padding.top=8,o.options.layout.padding.left=0,o.options.layout.padding.right=0,o.options.layout.padding.bottom=6,t.type==="line"&&(o.options.layout.padding.top=10,o.options.layout.padding.bottom=6)),ChartJs.defaults.elements.line.tension=.4,ChartJs.defaults.elements.line.borderCapStyle="round",ChartJs.defaults.elements.bar.borderRadius=6,ChartJs.defaults.elements.bar.borderSkipped=!1,ChartJs.defaults.font.family="'Source Sans 3', system-ui, sans-serif",ChartJs.defaults.font.size=14,ChartJs.defaults.color="#4a4a4a",new ChartJs(s,o)}};H1.exports=Ax});var U1=vo((Ex,Tx)=>{(function(n,t){typeof Ex=="object"&&typeof Tx<"u"?Tx.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self).dayjs=t()})(Ex,function(){"use strict";var n=1e3,t=6e4,e=36e5,i="millisecond",r="second",s="minute",o="hour",a="day",l="week",c="month",u="quarter",d="year",h="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(L,w,N){var R=String(L);return!R||R.length>=w?L:""+Array(w+1-R.length).join(N)+L},_={s:b,z:function(L){var w=-L.utcOffset(),N=Math.abs(w),R=Math.floor(N/60),k=N%60;return(w<=0?"+":"-")+b(R,2,"0")+":"+b(k,2,"0")},m:function L(w,N){if(w.date()<N.date())return-L(N,w);var R=12*(N.year()-w.year())+(N.month()-w.month()),k=w.clone().add(R,c),D=N-k<0,F=w.clone().add(R+(D?-1:1),c);return+(-(R+(N-k)/(D?k-F:F-k))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:c,y:d,w:l,d:a,D:h,h:o,m:s,s:r,ms:i,Q:u}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},x="en",y={};y[x]=p;var v=function(L){return L instanceof E},S=function(L,w,N){var R;if(!L)return x;if(typeof L=="string")y[L]&&(R=L),w&&(y[L]=w,R=L);else{var k=L.name;y[k]=L,R=k}return!N&&R&&(x=R),R||!N&&x},C=function(L,w){if(v(L))return L.clone();var N=typeof w=="object"?w:{};return N.date=L,N.args=arguments,new E(N)},A=_;A.l=S,A.i=v,A.w=function(L,w){return C(L,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var E=function(){function L(N){this.$L=S(N.locale,null,!0),this.parse(N)}var w=L.prototype;return w.parse=function(N){this.$d=function(R){var k=R.date,D=R.utc;if(k===null)return new Date(NaN);if(A.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var F=k.match(g);if(F){var z=F[2]-1||0,U=(F[7]||"0").substring(0,3);return D?new Date(Date.UTC(F[1],z,F[3]||1,F[4]||0,F[5]||0,F[6]||0,U)):new Date(F[1],z,F[3]||1,F[4]||0,F[5]||0,F[6]||0,U)}}return new Date(k)}(N),this.$x=N.x||{},this.init()},w.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},w.$utils=function(){return A},w.isValid=function(){return this.$d.toString()!==f},w.isSame=function(N,R){var k=C(N);return this.startOf(R)<=k&&k<=this.endOf(R)},w.isAfter=function(N,R){return C(N)<this.startOf(R)},w.isBefore=function(N,R){return this.endOf(R)<C(N)},w.$g=function(N,R,k){return A.u(N)?this[R]:this.set(k,N)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(N,R){var k=this,D=!!A.u(R)||R,F=A.p(N),z=function(et,bt){var q=A.w(k.$u?Date.UTC(k.$y,bt,et):new Date(k.$y,bt,et),k);return D?q:q.endOf(a)},U=function(et,bt){return A.w(k.toDate()[et].apply(k.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(bt)),k)},X=this.$W,G=this.$M,Q=this.$D,st="set"+(this.$u?"UTC":"");switch(F){case d:return D?z(1,0):z(31,11);case c:return D?z(1,G):z(0,G+1);case l:var ut=this.$locale().weekStart||0,at=(X<ut?X+7:X)-ut;return z(D?Q-at:Q+(6-at),G);case a:case h:return U(st+"Hours",0);case o:return U(st+"Minutes",1);case s:return U(st+"Seconds",2);case r:return U(st+"Milliseconds",3);default:return this.clone()}},w.endOf=function(N){return this.startOf(N,!1)},w.$set=function(N,R){var k,D=A.p(N),F="set"+(this.$u?"UTC":""),z=(k={},k[a]=F+"Date",k[h]=F+"Date",k[c]=F+"Month",k[d]=F+"FullYear",k[o]=F+"Hours",k[s]=F+"Minutes",k[r]=F+"Seconds",k[i]=F+"Milliseconds",k)[D],U=D===a?this.$D+(R-this.$W):R;if(D===c||D===d){var X=this.clone().set(h,1);X.$d[z](U),X.init(),this.$d=X.set(h,Math.min(this.$D,X.daysInMonth())).$d}else z&&this.$d[z](U);return this.init(),this},w.set=function(N,R){return this.clone().$set(N,R)},w.get=function(N){return this[A.p(N)]()},w.add=function(N,R){var k,D=this;N=Number(N);var F=A.p(R),z=function(G){var Q=C(D);return A.w(Q.date(Q.date()+Math.round(G*N)),D)};if(F===c)return this.set(c,this.$M+N);if(F===d)return this.set(d,this.$y+N);if(F===a)return z(1);if(F===l)return z(7);var U=(k={},k[s]=t,k[o]=e,k[r]=n,k)[F]||1,X=this.$d.getTime()+N*U;return A.w(X,this)},w.subtract=function(N,R){return this.add(-1*N,R)},w.format=function(N){var R=this,k=this.$locale();if(!this.isValid())return k.invalidDate||f;var D=N||"YYYY-MM-DDTHH:mm:ssZ",F=A.z(this),z=this.$H,U=this.$m,X=this.$M,G=k.weekdays,Q=k.months,st=function(bt,q,vt,kt){return bt&&(bt[q]||bt(R,D))||vt[q].substr(0,kt)},ut=function(bt){return A.s(z%12||12,bt,"0")},at=k.meridiem||function(bt,q,vt){var kt=bt<12?"AM":"PM";return vt?kt.toLowerCase():kt},et={YY:String(this.$y).slice(-2),YYYY:this.$y,M:X+1,MM:A.s(X+1,2,"0"),MMM:st(k.monthsShort,X,Q,3),MMMM:st(Q,X),D:this.$D,DD:A.s(this.$D,2,"0"),d:String(this.$W),dd:st(k.weekdaysMin,this.$W,G,2),ddd:st(k.weekdaysShort,this.$W,G,3),dddd:G[this.$W],H:String(z),HH:A.s(z,2,"0"),h:ut(1),hh:ut(2),a:at(z,U,!0),A:at(z,U,!1),m:String(U),mm:A.s(U,2,"0"),s:String(this.$s),ss:A.s(this.$s,2,"0"),SSS:A.s(this.$ms,3,"0"),Z:F};return D.replace(m,function(bt,q){return q||et[bt]||F.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(N,R,k){var D,F=A.p(R),z=C(N),U=(z.utcOffset()-this.utcOffset())*t,X=this-z,G=A.m(this,z);return G=(D={},D[d]=G/12,D[c]=G,D[u]=G/3,D[l]=(X-U)/6048e5,D[a]=(X-U)/864e5,D[o]=X/e,D[s]=X/t,D[r]=X/n,D)[F]||X,k?G:A.a(G)},w.daysInMonth=function(){return this.endOf(c).$D},w.$locale=function(){return y[this.$L]},w.locale=function(N,R){if(!N)return this.$L;var k=this.clone(),D=S(N,R,!0);return D&&(k.$L=D),k},w.clone=function(){return A.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},L}(),$=E.prototype;return C.prototype=$,[["$ms",i],["$s",r],["$m",s],["$H",o],["$W",a],["$M",c],["$y",d],["$D",h]].forEach(function(L){$[L[1]]=function(w){return this.$g(w,L[0],L[1])}}),C.extend=function(L,w){return L.$i||(L(w,E,C),L.$i=!0),C},C.locale=S,C.isDayjs=v,C.unix=function(L){return C(1e3*L)},C.en=y[x],C.Ls=y,C.p={},C})});var j1=vo((Z8,K1)=>{var bH=U1(),wx=class{buildDate(){return bH().format("MM/DD HH:mm").toString()}buildMessage(t,e,i){let r=`[${this.buildDate()}] [${i.toUpperCase()}]`;return e&&(r+=` (${e})`),r=r.concat(" - ").concat(t),r}stylesForBrowser(t){let e="1.5;",i="14px;",r="2px;",s="background-color:#3498db;color:#ffffff;",o="background-color:#f1c40f;color:#000000;",a="background-color:#e74c3c;color:#ffffff;",l="background-color:#c0392b;color:#fff394;",c="background-color:##48c774;color:#000000;",u="";switch(t){case"info":u=s;break;case"warn":u=o;break;case"error":u=a;break;case"fatal":u=l;break;case"success":u=c;break}return u+="padding:"+r,u+="font-size:"+i,u+="line-height:"+e,u}print_r(t,e=1){let i=Array.isArray(t),r=",",s="",o="",a="",l=`
`;for(let c=0;c<4*e;c++)a+=" ";if(e>1&&(o=a.slice(0,a.length-4)),typeof t=="object"&&!Array.isArray(t)){s+=o+"{"+l;for(let c in t)typeof t[c]=="object"?s+=a+c+": "+this.print_r(t[c],e+1)+r+l:s+=a+c+": "+t[c]+r+l;s+=o+"}"}if(typeof t=="object"&&Array.isArray(t)){s+="["+l;for(let c in t)typeof t[c]=="object"?s+=this.print_r(t[c],e+1)+r+l:s+=a+t[c]+l;s+=o+"]"}return s}};K1.exports=new wx});var G1=vo((Q8,V1)=>{var fi=j1(),Nx=class{build(t,e,i){return fi.buildMessage(t,e,i)}log(t,e=null){console.log(fi.buildMessage(t,e,"log"))}msg(t,e=null){console.log(fi.buildMessage(t,e,"msg"))}info(t,e=null){console.info("%c"+fi.buildMessage(t,e,"info"),fi.stylesForBrowser("info"))}success(t,e=null){console.log(fi.buildMessage(t,e,"msg"))}warn(t,e=null){console.warn("%c"+fi.buildMessage(t,e,"warn"),fi.stylesForBrowser("warn"))}error(t,e=null){console.error("%c"+fi.buildMessage(t,e,"error"),fi.stylesForBrowser("error"))}fatal(t,e=null){console.error("%c"+fi.buildMessage(t,e,"error"),fi.stylesForBrowser("fatal"))}message(t,e,i=null){console.log("%c"+t,"color:#3689e6;font-size:35px;font-weight:600;line-height:1;"),typeof e=="string"&&(e=[e]),console.log("%c"+e.join(`
`),"background-color:#ffffff;color:#1a1a1a;font-size:18px;font-weight:400;line-height:1.1;"),i&&console.log("%c"+i,"background-color:#ffffff;color:#1a1a1a;font-size:14px;font-weight:400;line-height:2;")}lesli_message_warning(t="LESLI",e="For mor information contact your system administrator"){this.message(t,["This is a browser feature intended for developers.","For security reasons, DO NOT copy or paste any information, text, or code here."],e)}};V1.exports=new Nx});var Y1=vo((tK,q1)=>{q1.exports=G1()});var Du=vo((eK,jf)=>{var _H=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var ot=function(n){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,e=0,i={},r={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function m(p){return p instanceof s?new s(p.type,m(p.content),p.alias):Array.isArray(p)?p.map(m):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(m){return Object.prototype.toString.call(m).slice(8,-1)},objId:function(m){return m.__id||Object.defineProperty(m,"__id",{value:++e}),m.__id},clone:function m(p,b){b=b||{};var _,x;switch(r.util.type(p)){case"Object":if(x=r.util.objId(p),b[x])return b[x];_={},b[x]=_;for(var y in p)p.hasOwnProperty(y)&&(_[y]=m(p[y],b));return _;case"Array":return x=r.util.objId(p),b[x]?b[x]:(_=[],b[x]=_,p.forEach(function(v,S){_[S]=m(v,b)}),_);default:return p}},getLanguage:function(m){for(;m;){var p=t.exec(m.className);if(p)return p[1].toLowerCase();m=m.parentElement}return"none"},setLanguage:function(m,p){m.className=m.className.replace(RegExp(t,"gi"),""),m.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(_){var m=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(_.stack)||[])[1];if(m){var p=document.getElementsByTagName("script");for(var b in p)if(p[b].src==m)return p[b]}return null}},isActive:function(m,p,b){for(var _="no-"+p;m;){var x=m.classList;if(x.contains(p))return!0;if(x.contains(_))return!1;m=m.parentElement}return!!b}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(m,p){var b=r.util.clone(r.languages[m]);for(var _ in p)b[_]=p[_];return b},insertBefore:function(m,p,b,_){_=_||r.languages;var x=_[m],y={};for(var v in x)if(x.hasOwnProperty(v)){if(v==p)for(var S in b)b.hasOwnProperty(S)&&(y[S]=b[S]);b.hasOwnProperty(v)||(y[v]=x[v])}var C=_[m];return _[m]=y,r.languages.DFS(r.languages,function(A,E){E===C&&A!=m&&(this[A]=y)}),y},DFS:function m(p,b,_,x){x=x||{};var y=r.util.objId;for(var v in p)if(p.hasOwnProperty(v)){b.call(p,v,p[v],_||v);var S=p[v],C=r.util.type(S);C==="Object"&&!x[y(S)]?(x[y(S)]=!0,m(S,b,null,x)):C==="Array"&&!x[y(S)]&&(x[y(S)]=!0,m(S,b,v,x))}}},plugins:{},highlightAll:function(m,p){r.highlightAllUnder(document,m,p)},highlightAllUnder:function(m,p,b){var _={callback:b,container:m,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",_),_.elements=Array.prototype.slice.apply(_.container.querySelectorAll(_.selector)),r.hooks.run("before-all-elements-highlight",_);for(var x=0,y;y=_.elements[x++];)r.highlightElement(y,p===!0,_.callback)},highlightElement:function(m,p,b){var _=r.util.getLanguage(m),x=r.languages[_];r.util.setLanguage(m,_);var y=m.parentElement;y&&y.nodeName.toLowerCase()==="pre"&&r.util.setLanguage(y,_);var v=m.textContent,S={element:m,language:_,grammar:x,code:v};function C(E){S.highlightedCode=E,r.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,r.hooks.run("after-highlight",S),r.hooks.run("complete",S),b&&b.call(S.element)}if(r.hooks.run("before-sanity-check",S),y=S.element.parentElement,y&&y.nodeName.toLowerCase()==="pre"&&!y.hasAttribute("tabindex")&&y.setAttribute("tabindex","0"),!S.code){r.hooks.run("complete",S),b&&b.call(S.element);return}if(r.hooks.run("before-highlight",S),!S.grammar){C(r.util.encode(S.code));return}if(p&&n.Worker){var A=new Worker(r.filename);A.onmessage=function(E){C(E.data)},A.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else C(r.highlight(S.code,S.grammar,S.language))},highlight:function(m,p,b){var _={code:m,grammar:p,language:b};if(r.hooks.run("before-tokenize",_),!_.grammar)throw new Error('The language "'+_.language+'" has no grammar.');return _.tokens=r.tokenize(_.code,_.grammar),r.hooks.run("after-tokenize",_),s.stringify(r.util.encode(_.tokens),_.language)},tokenize:function(m,p){var b=p.rest;if(b){for(var _ in b)p[_]=b[_];delete p.rest}var x=new l;return c(x,x.head,m),a(m,x,p,x.head,0),d(x)},hooks:{all:{},add:function(m,p){var b=r.hooks.all;b[m]=b[m]||[],b[m].push(p)},run:function(m,p){var b=r.hooks.all[m];if(!(!b||!b.length))for(var _=0,x;x=b[_++];)x(p)}},Token:s};n.Prism=r;function s(m,p,b,_){this.type=m,this.content=p,this.alias=b,this.length=(_||"").length|0}s.stringify=function m(p,b){if(typeof p=="string")return p;if(Array.isArray(p)){var _="";return p.forEach(function(C){_+=m(C,b)}),_}var x={type:p.type,content:m(p.content,b),tag:"span",classes:["token",p.type],attributes:{},language:b},y=p.alias;y&&(Array.isArray(y)?Array.prototype.push.apply(x.classes,y):x.classes.push(y)),r.hooks.run("wrap",x);var v="";for(var S in x.attributes)v+=" "+S+'="'+(x.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+x.tag+' class="'+x.classes.join(" ")+'"'+v+">"+x.content+"</"+x.tag+">"};function o(m,p,b,_){m.lastIndex=p;var x=m.exec(b);if(x&&_&&x[1]){var y=x[1].length;x.index+=y,x[0]=x[0].slice(y)}return x}function a(m,p,b,_,x,y){for(var v in b)if(!(!b.hasOwnProperty(v)||!b[v])){var S=b[v];S=Array.isArray(S)?S:[S];for(var C=0;C<S.length;++C){if(y&&y.cause==v+","+C)return;var A=S[C],E=A.inside,$=!!A.lookbehind,L=!!A.greedy,w=A.alias;if(L&&!A.pattern.global){var N=A.pattern.toString().match(/[imsuy]*$/)[0];A.pattern=RegExp(A.pattern.source,N+"g")}for(var R=A.pattern||A,k=_.next,D=x;k!==p.tail&&!(y&&D>=y.reach);D+=k.value.length,k=k.next){var F=k.value;if(p.length>m.length)return;if(!(F instanceof s)){var z=1,U;if(L){if(U=o(R,D,m,$),!U||U.index>=m.length)break;var st=U.index,X=U.index+U[0].length,G=D;for(G+=k.value.length;st>=G;)k=k.next,G+=k.value.length;if(G-=k.value.length,D=G,k.value instanceof s)continue;for(var Q=k;Q!==p.tail&&(G<X||typeof Q.value=="string");Q=Q.next)z++,G+=Q.value.length;z--,F=m.slice(D,G),U.index-=D}else if(U=o(R,0,F,$),!U)continue;var st=U.index,ut=U[0],at=F.slice(0,st),et=F.slice(st+ut.length),bt=D+F.length;y&&bt>y.reach&&(y.reach=bt);var q=k.prev;at&&(q=c(p,q,at),D+=at.length),u(p,q,z);var vt=new s(v,E?r.tokenize(ut,E):ut,w,ut);if(k=c(p,q,vt),et&&c(p,k,et),z>1){var kt={cause:v+","+C,reach:bt};a(m,p,b,k.prev,D,kt),y&&kt.reach>y.reach&&(y.reach=kt.reach)}}}}}}function l(){var m={value:null,prev:null,next:null},p={value:null,prev:m,next:null};m.next=p,this.head=m,this.tail=p,this.length=0}function c(m,p,b){var _=p.next,x={value:b,prev:p,next:_};return p.next=x,_.prev=x,m.length++,x}function u(m,p,b){for(var _=p.next,x=0;x<b&&_!==m.tail;x++)_=_.next;p.next=_,_.prev=p,m.length-=x}function d(m){for(var p=[],b=m.head.next;b!==m.tail;)p.push(b.value),b=b.next;return p}if(!n.document)return n.addEventListener&&(r.disableWorkerMessageHandler||n.addEventListener("message",function(m){var p=JSON.parse(m.data),b=p.language,_=p.code,x=p.immediateClose;n.postMessage(r.highlight(_,r.languages[b],b)),x&&n.close()},!1)),r;var h=r.util.currentScript();h&&(r.filename=h.src,h.hasAttribute("data-manual")&&(r.manual=!0));function f(){r.manual||r.highlightAll()}if(!r.manual){var g=document.readyState;g==="loading"||g==="interactive"&&h&&h.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return r}(_H);typeof jf<"u"&&jf.exports&&(jf.exports=ot);typeof global<"u"&&(global.Prism=ot);ot.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};ot.languages.markup.tag.inside["attr-value"].inside.entity=ot.languages.markup.entity;ot.languages.markup.doctype.inside["internal-subset"].inside=ot.languages.markup;ot.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))});Object.defineProperty(ot.languages.markup.tag,"addInlined",{value:function(t,e){var i={};i["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:ot.languages[e]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};r["language-"+e]={pattern:/[\s\S]+/,inside:ot.languages[e]};var s={};s[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:r},ot.languages.insertBefore("markup","cdata",s)}});Object.defineProperty(ot.languages.markup.tag,"addAttribute",{value:function(n,t){ot.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:ot.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});ot.languages.html=ot.languages.markup;ot.languages.mathml=ot.languages.markup;ot.languages.svg=ot.languages.markup;ot.languages.xml=ot.languages.extend("markup",{});ot.languages.ssml=ot.languages.xml;ot.languages.atom=ot.languages.xml;ot.languages.rss=ot.languages.xml;(function(n){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var e=n.languages.markup;e&&(e.tag.addInlined("style","css"),e.tag.addAttribute("style","css"))})(ot);ot.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};ot.languages.javascript=ot.languages.extend("clike",{"class-name":[ot.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});ot.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;ot.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:ot.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:ot.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:ot.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:ot.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:ot.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});ot.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:ot.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});ot.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});ot.languages.markup&&(ot.languages.markup.tag.addInlined("script","javascript"),ot.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));ot.languages.js=ot.languages.javascript;(function(){if(typeof ot>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading\u2026",t=function(h,f){return"\u2716 Error "+h+" while fetching file: "+f},e="\u2716 Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},r="data-src-status",s="loading",o="loaded",a="failed",l="pre[data-src]:not(["+r+'="'+o+'"]):not(['+r+'="'+s+'"])';function c(h,f,g){var m=new XMLHttpRequest;m.open("GET",h,!0),m.onreadystatechange=function(){m.readyState==4&&(m.status<400&&m.responseText?f(m.responseText):m.status>=400?g(t(m.status,m.statusText)):g(e))},m.send(null)}function u(h){var f=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(h||"");if(f){var g=Number(f[1]),m=f[2],p=f[3];return m?p?[g,Number(p)]:[g,void 0]:[g,g]}}ot.hooks.add("before-highlightall",function(h){h.selector+=", "+l}),ot.hooks.add("before-sanity-check",function(h){var f=h.element;if(f.matches(l)){h.code="",f.setAttribute(r,s);var g=f.appendChild(document.createElement("CODE"));g.textContent=n;var m=f.getAttribute("data-src"),p=h.language;if(p==="none"){var b=(/\.(\w+)$/.exec(m)||[,"none"])[1];p=i[b]||b}ot.util.setLanguage(g,p),ot.util.setLanguage(f,p);var _=ot.plugins.autoloader;_&&_.loadLanguages(p),c(m,function(x){f.setAttribute(r,o);var y=u(f.getAttribute("data-range"));if(y){var v=x.split(/\r\n?|\n/g),S=y[0],C=y[1]==null?v.length:y[1];S<0&&(S+=v.length),S=Math.max(0,Math.min(S-1,v.length)),C<0&&(C+=v.length),C=Math.max(0,Math.min(C,v.length)),x=v.slice(S,C).join(`
`),f.hasAttribute("data-start")||f.setAttribute("data-start",String(S+1))}g.textContent=x,ot.highlightElement(g)},function(x){f.setAttribute(r,a),g.textContent=x})}}),ot.plugins.fileHighlight={highlight:function(f){for(var g=(f||document).querySelectorAll(l),m=0,p;p=g[m++];)ot.highlightElement(p)}};var d=!1;ot.fileHighlight=function(){d||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),d=!0),ot.plugins.fileHighlight.highlight.apply(this,arguments)}})()});var iI={};an(iI,{DirectUpload:()=>Xp,DirectUploadController:()=>Zp,DirectUploadsController:()=>Qp,start:()=>eI});function V7(n){let t=ZD(document.head,`meta[name="${n}"]`);if(t)return t.getAttribute("content")}function G7(n,t){typeof n=="string"&&(t=n,n=document);let e=n.querySelectorAll(t);return tI(e)}function ZD(n,t){return typeof n=="string"&&(t=n,n=document),n.querySelector(t)}function QD(n,t,e={}){let{disabled:i}=n,{bubbles:r,cancelable:s,detail:o}=e,a=document.createEvent("Event");a.initEvent(t,r||!0,s||!0),a.detail=o||{};try{n.disabled=!1,n.dispatchEvent(a)}finally{n.disabled=i}return a}function tI(n){return Array.isArray(n)?n:Array.from?Array.from(n):[].slice.call(n)}function YD(n,t,...e){if(n&&typeof n[t]=="function")return n[t](...e)}function eI(){JD||(JD=!0,document.addEventListener("click",J7,!0),document.addEventListener("submit",X7,!0),document.addEventListener("ajax:before",Z7))}function J7(n){let t=n.target.closest("button, input");t&&t.type==="submit"&&t.form&&yS.set(t.form,t)}function X7(n){nI(n)}function Z7(n){n.target.tagName=="FORM"&&nI(n)}function nI(n){let t=n.target;if(t.hasAttribute(mS)){n.preventDefault();return}let e=new Qp(t),{inputs:i}=e;i.length&&(n.preventDefault(),t.setAttribute(mS,""),i.forEach(t8),e.start(r=>{t.removeAttribute(mS),r?i.forEach(e8):Q7(t)}))}function Q7(n){let t=yS.get(n)||ZD(n,"input[type=submit], button[type=submit]");if(t){let{disabled:e}=t;t.disabled=!1,t.focus(),t.click(),t.disabled=e}else t=document.createElement("input"),t.type="submit",t.style.display="none",n.appendChild(t),t.click(),n.removeChild(t);yS.delete(n)}function t8(n){n.disabled=!0}function e8(n){n.disabled=!1}function n8(){window.ActiveStorage&&eI()}var XD,K7,j7,bS,_S,xS,q7,Xp,Zp,Y7,Qp,mS,yS,JD,rI=MI(()=>{XD={exports:{}};(function(n,t){(function(e){n.exports=e()})(function(e){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(b,_){var x=b[0],y=b[1],v=b[2],S=b[3];x+=(y&v|~y&S)+_[0]-680876936|0,x=(x<<7|x>>>25)+y|0,S+=(x&y|~x&v)+_[1]-389564586|0,S=(S<<12|S>>>20)+x|0,v+=(S&x|~S&y)+_[2]+606105819|0,v=(v<<17|v>>>15)+S|0,y+=(v&S|~v&x)+_[3]-1044525330|0,y=(y<<22|y>>>10)+v|0,x+=(y&v|~y&S)+_[4]-176418897|0,x=(x<<7|x>>>25)+y|0,S+=(x&y|~x&v)+_[5]+1200080426|0,S=(S<<12|S>>>20)+x|0,v+=(S&x|~S&y)+_[6]-1473231341|0,v=(v<<17|v>>>15)+S|0,y+=(v&S|~v&x)+_[7]-45705983|0,y=(y<<22|y>>>10)+v|0,x+=(y&v|~y&S)+_[8]+1770035416|0,x=(x<<7|x>>>25)+y|0,S+=(x&y|~x&v)+_[9]-1958414417|0,S=(S<<12|S>>>20)+x|0,v+=(S&x|~S&y)+_[10]-42063|0,v=(v<<17|v>>>15)+S|0,y+=(v&S|~v&x)+_[11]-1990404162|0,y=(y<<22|y>>>10)+v|0,x+=(y&v|~y&S)+_[12]+1804603682|0,x=(x<<7|x>>>25)+y|0,S+=(x&y|~x&v)+_[13]-40341101|0,S=(S<<12|S>>>20)+x|0,v+=(S&x|~S&y)+_[14]-1502002290|0,v=(v<<17|v>>>15)+S|0,y+=(v&S|~v&x)+_[15]+1236535329|0,y=(y<<22|y>>>10)+v|0,x+=(y&S|v&~S)+_[1]-165796510|0,x=(x<<5|x>>>27)+y|0,S+=(x&v|y&~v)+_[6]-1069501632|0,S=(S<<9|S>>>23)+x|0,v+=(S&y|x&~y)+_[11]+643717713|0,v=(v<<14|v>>>18)+S|0,y+=(v&x|S&~x)+_[0]-373897302|0,y=(y<<20|y>>>12)+v|0,x+=(y&S|v&~S)+_[5]-701558691|0,x=(x<<5|x>>>27)+y|0,S+=(x&v|y&~v)+_[10]+38016083|0,S=(S<<9|S>>>23)+x|0,v+=(S&y|x&~y)+_[15]-660478335|0,v=(v<<14|v>>>18)+S|0,y+=(v&x|S&~x)+_[4]-405537848|0,y=(y<<20|y>>>12)+v|0,x+=(y&S|v&~S)+_[9]+568446438|0,x=(x<<5|x>>>27)+y|0,S+=(x&v|y&~v)+_[14]-1019803690|0,S=(S<<9|S>>>23)+x|0,v+=(S&y|x&~y)+_[3]-187363961|0,v=(v<<14|v>>>18)+S|0,y+=(v&x|S&~x)+_[8]+1163531501|0,y=(y<<20|y>>>12)+v|0,x+=(y&S|v&~S)+_[13]-1444681467|0,x=(x<<5|x>>>27)+y|0,S+=(x&v|y&~v)+_[2]-51403784|0,S=(S<<9|S>>>23)+x|0,v+=(S&y|x&~y)+_[7]+1735328473|0,v=(v<<14|v>>>18)+S|0,y+=(v&x|S&~x)+_[12]-1926607734|0,y=(y<<20|y>>>12)+v|0,x+=(y^v^S)+_[5]-378558|0,x=(x<<4|x>>>28)+y|0,S+=(x^y^v)+_[8]-2022574463|0,S=(S<<11|S>>>21)+x|0,v+=(S^x^y)+_[11]+1839030562|0,v=(v<<16|v>>>16)+S|0,y+=(v^S^x)+_[14]-35309556|0,y=(y<<23|y>>>9)+v|0,x+=(y^v^S)+_[1]-1530992060|0,x=(x<<4|x>>>28)+y|0,S+=(x^y^v)+_[4]+1272893353|0,S=(S<<11|S>>>21)+x|0,v+=(S^x^y)+_[7]-155497632|0,v=(v<<16|v>>>16)+S|0,y+=(v^S^x)+_[10]-1094730640|0,y=(y<<23|y>>>9)+v|0,x+=(y^v^S)+_[13]+681279174|0,x=(x<<4|x>>>28)+y|0,S+=(x^y^v)+_[0]-358537222|0,S=(S<<11|S>>>21)+x|0,v+=(S^x^y)+_[3]-722521979|0,v=(v<<16|v>>>16)+S|0,y+=(v^S^x)+_[6]+76029189|0,y=(y<<23|y>>>9)+v|0,x+=(y^v^S)+_[9]-640364487|0,x=(x<<4|x>>>28)+y|0,S+=(x^y^v)+_[12]-421815835|0,S=(S<<11|S>>>21)+x|0,v+=(S^x^y)+_[15]+530742520|0,v=(v<<16|v>>>16)+S|0,y+=(v^S^x)+_[2]-995338651|0,y=(y<<23|y>>>9)+v|0,x+=(v^(y|~S))+_[0]-198630844|0,x=(x<<6|x>>>26)+y|0,S+=(y^(x|~v))+_[7]+1126891415|0,S=(S<<10|S>>>22)+x|0,v+=(x^(S|~y))+_[14]-1416354905|0,v=(v<<15|v>>>17)+S|0,y+=(S^(v|~x))+_[5]-57434055|0,y=(y<<21|y>>>11)+v|0,x+=(v^(y|~S))+_[12]+1700485571|0,x=(x<<6|x>>>26)+y|0,S+=(y^(x|~v))+_[3]-1894986606|0,S=(S<<10|S>>>22)+x|0,v+=(x^(S|~y))+_[10]-1051523|0,v=(v<<15|v>>>17)+S|0,y+=(S^(v|~x))+_[1]-2054922799|0,y=(y<<21|y>>>11)+v|0,x+=(v^(y|~S))+_[8]+1873313359|0,x=(x<<6|x>>>26)+y|0,S+=(y^(x|~v))+_[15]-30611744|0,S=(S<<10|S>>>22)+x|0,v+=(x^(S|~y))+_[6]-1560198380|0,v=(v<<15|v>>>17)+S|0,y+=(S^(v|~x))+_[13]+1309151649|0,y=(y<<21|y>>>11)+v|0,x+=(v^(y|~S))+_[4]-145523070|0,x=(x<<6|x>>>26)+y|0,S+=(y^(x|~v))+_[11]-1120210379|0,S=(S<<10|S>>>22)+x|0,v+=(x^(S|~y))+_[2]+718787259|0,v=(v<<15|v>>>17)+S|0,y+=(S^(v|~x))+_[9]-343485551|0,y=(y<<21|y>>>11)+v|0,b[0]=x+b[0]|0,b[1]=y+b[1]|0,b[2]=v+b[2]|0,b[3]=S+b[3]|0}function s(b){var _=[],x;for(x=0;x<64;x+=4)_[x>>2]=b.charCodeAt(x)+(b.charCodeAt(x+1)<<8)+(b.charCodeAt(x+2)<<16)+(b.charCodeAt(x+3)<<24);return _}function o(b){var _=[],x;for(x=0;x<64;x+=4)_[x>>2]=b[x]+(b[x+1]<<8)+(b[x+2]<<16)+(b[x+3]<<24);return _}function a(b){var _=b.length,x=[1732584193,-271733879,-1732584194,271733878],y,v,S,C,A,E;for(y=64;y<=_;y+=64)r(x,s(b.substring(y-64,y)));for(b=b.substring(y-64),v=b.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0;y<v;y+=1)S[y>>2]|=b.charCodeAt(y)<<(y%4<<3);if(S[y>>2]|=128<<(y%4<<3),y>55)for(r(x,S),y=0;y<16;y+=1)S[y]=0;return C=_*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),A=parseInt(C[2],16),E=parseInt(C[1],16)||0,S[14]=A,S[15]=E,r(x,S),x}function l(b){var _=b.length,x=[1732584193,-271733879,-1732584194,271733878],y,v,S,C,A,E;for(y=64;y<=_;y+=64)r(x,o(b.subarray(y-64,y)));for(b=y-64<_?b.subarray(y-64):new Uint8Array(0),v=b.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0;y<v;y+=1)S[y>>2]|=b[y]<<(y%4<<3);if(S[y>>2]|=128<<(y%4<<3),y>55)for(r(x,S),y=0;y<16;y+=1)S[y]=0;return C=_*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),A=parseInt(C[2],16),E=parseInt(C[1],16)||0,S[14]=A,S[15]=E,r(x,S),x}function c(b){var _="",x;for(x=0;x<4;x+=1)_+=i[b>>x*8+4&15]+i[b>>x*8&15];return _}function u(b){var _;for(_=0;_<b.length;_+=1)b[_]=c(b[_]);return b.join("")}u(a("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function b(_,x){return _=_|0||0,_<0?Math.max(_+x,0):Math.min(_,x)}ArrayBuffer.prototype.slice=function(_,x){var y=this.byteLength,v=b(_,y),S=y,C,A,E,$;return x!==e&&(S=b(x,y)),v>S?new ArrayBuffer(0):(C=S-v,A=new ArrayBuffer(C),E=new Uint8Array(A),$=new Uint8Array(this,v,C),E.set($),A)}}();function d(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function h(b,_){var x=b.length,y=new ArrayBuffer(x),v=new Uint8Array(y),S;for(S=0;S<x;S+=1)v[S]=b.charCodeAt(S);return _?v:y}function f(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function g(b,_,x){var y=new Uint8Array(b.byteLength+_.byteLength);return y.set(new Uint8Array(b)),y.set(new Uint8Array(_),b.byteLength),x?y:y.buffer}function m(b){var _=[],x=b.length,y;for(y=0;y<x-1;y+=2)_.push(parseInt(b.substr(y,2),16));return String.fromCharCode.apply(String,_)}function p(){this.reset()}return p.prototype.append=function(b){return this.appendBinary(d(b)),this},p.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var _=this._buff.length,x;for(x=64;x<=_;x+=64)r(this._hash,s(this._buff.substring(x-64,x)));return this._buff=this._buff.substring(x-64),this},p.prototype.end=function(b){var _=this._buff,x=_.length,y,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S;for(y=0;y<x;y+=1)v[y>>2]|=_.charCodeAt(y)<<(y%4<<3);return this._finish(v,x),S=u(this._hash),b&&(S=m(S)),this.reset(),S},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(b,_){var x=_,y,v,S;if(b[x>>2]|=128<<(x%4<<3),x>55)for(r(this._hash,b),x=0;x<16;x+=1)b[x]=0;y=this._length*8,y=y.toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(y[2],16),S=parseInt(y[1],16)||0,b[14]=v,b[15]=S,r(this._hash,b)},p.hash=function(b,_){return p.hashBinary(d(b),_)},p.hashBinary=function(b,_){var x=a(b),y=u(x);return _?m(y):y},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(b){var _=g(this._buff.buffer,b,!0),x=_.length,y;for(this._length+=b.byteLength,y=64;y<=x;y+=64)r(this._hash,o(_.subarray(y-64,y)));return this._buff=y-64<x?new Uint8Array(_.buffer.slice(y-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(b){var _=this._buff,x=_.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v,S;for(v=0;v<x;v+=1)y[v>>2]|=_[v]<<(v%4<<3);return this._finish(y,x),S=u(this._hash),b&&(S=m(S)),this.reset(),S},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var b=p.prototype.getState.call(this);return b.buff=f(b.buff),b},p.ArrayBuffer.prototype.setState=function(b){return b.buff=h(b.buff,!0),p.prototype.setState.call(this,b)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(b,_){var x=l(new Uint8Array(b)),y=u(x);return _?m(y):y},p})})(XD);K7=XD.exports,j7=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,bS=class n{static create(t,e){new n(t).create(e)}constructor(t){this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(t){this.callback=t,this.md5Buffer=new K7.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",e=>this.fileReaderDidLoad(e)),this.fileReader.addEventListener("error",e=>this.fileReaderDidError(e)),this.readNextChunk()}fileReaderDidLoad(t){if(this.md5Buffer.append(t.target.result),!this.readNextChunk()){let e=this.md5Buffer.end(!0),i=btoa(e);this.callback(null,i)}}fileReaderDidError(t){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let t=this.chunkIndex*this.chunkSize,e=Math.min(t+this.chunkSize,this.file.size),i=j7.call(this.file,t,e);return this.fileReader.readAsArrayBuffer(i),this.chunkIndex++,!0}else return!1}};_S=class{constructor(t,e,i,r={}){this.file=t,this.attributes={filename:t.name,content_type:t.type||"application/octet-stream",byte_size:t.size,checksum:e},this.xhr=new XMLHttpRequest,this.xhr.open("POST",i,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach(o=>{this.xhr.setRequestHeader(o,r[o])});let s=V7("csrf-token");s!=null&&this.xhr.setRequestHeader("X-CSRF-Token",s),this.xhr.addEventListener("load",o=>this.requestDidLoad(o)),this.xhr.addEventListener("error",o=>this.requestDidError(o))}get status(){return this.xhr.status}get response(){let{responseType:t,response:e}=this.xhr;return t=="json"?e:JSON.parse(e)}create(t){this.callback=t,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(t){if(this.status>=200&&this.status<300){let{response:e}=this,{direct_upload:i}=e;delete e.direct_upload,this.attributes=e,this.directUploadData=i,this.callback(null,this.toJSON())}else this.requestDidError(t)}requestDidError(t){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let t={};for(let e in this.attributes)t[e]=this.attributes[e];return t}},xS=class{constructor(t){this.blob=t,this.file=t.file;let{url:e,headers:i}=t.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",e,!0),this.xhr.responseType="text";for(let r in i)this.xhr.setRequestHeader(r,i[r]);this.xhr.addEventListener("load",r=>this.requestDidLoad(r)),this.xhr.addEventListener("error",r=>this.requestDidError(r))}create(t){this.callback=t,this.xhr.send(this.file.slice())}requestDidLoad(t){let{status:e,response:i}=this.xhr;e>=200&&e<300?this.callback(null,i):this.requestDidError(t)}requestDidError(t){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}},q7=0,Xp=class{constructor(t,e,i,r={}){this.id=++q7,this.file=t,this.url=e,this.delegate=i,this.customHeaders=r}create(t){bS.create(this.file,(e,i)=>{if(e){t(e);return}let r=new _S(this.file,i,this.url,this.customHeaders);YD(this.delegate,"directUploadWillCreateBlobWithXHR",r.xhr),r.create(s=>{if(s)t(s);else{let o=new xS(r);YD(this.delegate,"directUploadWillStoreFileWithXHR",o.xhr),o.create(a=>{a?t(a):t(null,r.toJSON())})}})})}};Zp=class{constructor(t,e){this.input=t,this.file=e,this.directUpload=new Xp(this.file,this.url,this),this.dispatch("initialize")}start(t){let e=document.createElement("input");e.type="hidden",e.name=this.input.name,this.input.insertAdjacentElement("beforebegin",e),this.dispatch("start"),this.directUpload.create((i,r)=>{i?(e.parentNode.removeChild(e),this.dispatchError(i)):e.value=r.signed_id,this.dispatch("end"),t(i)})}uploadRequestDidProgress(t){let e=t.loaded/t.total*100;e&&this.dispatch("progress",{progress:e})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(t,e={}){return e.file=this.file,e.id=this.directUpload.id,QD(this.input,`direct-upload:${t}`,{detail:e})}dispatchError(t){this.dispatch("error",{error:t}).defaultPrevented||alert(t)}directUploadWillCreateBlobWithXHR(t){this.dispatch("before-blob-request",{xhr:t})}directUploadWillStoreFileWithXHR(t){this.dispatch("before-storage-request",{xhr:t}),t.upload.addEventListener("progress",e=>this.uploadRequestDidProgress(e))}},Y7="input[type=file][data-direct-upload-url]:not([disabled])",Qp=class{constructor(t){this.form=t,this.inputs=G7(t,Y7).filter(e=>e.files.length)}start(t){let e=this.createDirectUploadControllers(),i=()=>{let r=e.shift();r?r.start(s=>{s?(t(s),this.dispatch("end")):i()}):(t(),this.dispatch("end"))};this.dispatch("start"),i()}createDirectUploadControllers(){let t=[];return this.inputs.forEach(e=>{tI(e.files).forEach(i=>{let r=new Zp(e,i);t.push(r)})}),t}dispatch(t,e={}){return QD(this.form,`direct-uploads:${t}`,{detail:e})}},mS="data-direct-uploads-processing",yS=new WeakMap,JD=!1;setTimeout(n8,1)});var LI="2.1.15",To="[data-trix-attachment]",nb={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},_n={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(n){return VS(n.parentNode)===_n[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(n){return VS(n.parentNode)===_n[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},VS=n=>{var t;return n==null||(t=n.tagName)===null||t===void 0?void 0:t.toLowerCase()},GS=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),hm=GS&&parseInt(GS[1]),tu={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:hm&&hm>12,samsungAndroid:hm&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(n=>n in InputEvent.prototype)},NC={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},_t={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},DI=[_t.bytes,_t.KB,_t.MB,_t.GB,_t.TB,_t.PB],kC={prefix:"IEC",precision:2,formatter(n){switch(n){case 0:return"0 ".concat(_t.bytes);case 1:return"1 ".concat(_t.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);let e=Math.floor(Math.log(n)/Math.log(t)),i=(n/Math.pow(t,e)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat(DI[e])}}},$h="\uFEFF",_s="\xA0",OC=function(n){for(let t in n){let e=n[t];this[t]=e}return this},ib=document.documentElement,II=ib.matches,ge=function(n){let{onElement:t,matchingSelector:e,withCallback:i,inPhase:r,preventDefault:s,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t||ib,l=e,c=r==="capturing",u=function(d){o!=null&&--o==0&&u.destroy();let h=ys(d.target,{matchingSelector:l});h!=null&&(i?.call(h,d,h),s&&d.preventDefault())};return u.destroy=()=>a.removeEventListener(n,u,c),a.addEventListener(n,u,c),u},jc=function(n){let{onElement:t,bubbles:e,cancelable:i,attributes:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t??ib;e=e!==!1,i=i!==!1;let o=document.createEvent("Events");return o.initEvent(n,e,i),r!=null&&OC.call(o,r),s.dispatchEvent(o)},MC=function(n,t){if(n?.nodeType===1)return II.call(n,t)},ys=function(n){let{matchingSelector:t,untilNode:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;if(n!=null){if(t==null)return n;if(n.closest&&e==null)return n.closest(t);for(;n&&n!==e;){if(MC(n,t))return n;n=n.parentNode}}},rb=n=>document.activeElement!==n&&Eo(n,document.activeElement),Eo=function(n,t){if(n&&t)for(;t;){if(t===n)return!0;t=t.parentNode}},fm=function(n){var t;if((t=n)===null||t===void 0||!t.parentNode)return;let e=0;for(n=n.previousSibling;n;)e++,n=n.previousSibling;return e},vs=n=>{var t;return n==null||(t=n.parentNode)===null||t===void 0?void 0:t.removeChild(n)},mh=function(n){let{onlyNodesOfType:t,usingFilter:e,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(n,r,e??null,i===!0)},bn=n=>{var t;return n==null||(t=n.tagName)===null||t===void 0?void 0:t.toLowerCase()},St=function(n){let t,e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof n=="object"?(i=n,n=i.tagName):i={attributes:i};let r=document.createElement(n);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(t in i.attributes)e=i.attributes[t],r.setAttribute(t,e);if(i.style)for(t in i.style)e=i.style[t],r.style[t]=e;if(i.data)for(t in i.data)e=i.data[t],r.dataset[t]=e;return i.className&&i.className.split(" ").forEach(s=>{r.classList.add(s)}),i.textContent&&(r.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(s=>{r.appendChild(s)}),r},Fc,Vc=function(){if(Fc!=null)return Fc;Fc=[];for(let n in _n){let t=_n[n];t.tagName&&Fc.push(t.tagName)}return Fc},gm=n=>Va(n?.firstChild),qS=function(n){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?Va(n):Va(n)||!Va(n.firstChild)&&function(e){return Vc().includes(bn(e))&&!Vc().includes(bn(e.firstChild))}(n)},Va=n=>PI(n)&&n?.data==="block",PI=n=>n?.nodeType===Node.COMMENT_NODE,Ga=function(n){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n)return Gc(n)?n.data===$h?!t||n.parentNode.dataset.trixCursorTarget===t:void 0:Ga(n.firstChild)},wo=n=>MC(n,To),RC=n=>Gc(n)&&n?.data==="",Gc=n=>n?.nodeType===Node.TEXT_NODE,sb={level2Enabled:!0,getLevel(){return this.level2Enabled&&tu.supportsInputEvents?2:0},pickFiles(n){let t=St("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{n(t.files),vs(t)}),vs(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}},fh={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},Oo={bold:{tagName:"strong",inheritable:!0,parser(n){let t=window.getComputedStyle(n);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:n=>window.getComputedStyle(n).fontStyle==="italic"},href:{groupTagName:"a",parser(n){let t="a:not(".concat(To,")"),e=n.closest(t);if(e)return e.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},LC={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(_t.bold,'" tabindex="-1">').concat(_t.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(_t.italic,'" tabindex="-1">').concat(_t.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(_t.strike,'" tabindex="-1">').concat(_t.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(_t.link,'" tabindex="-1">').concat(_t.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(_t.heading1,'" tabindex="-1">').concat(_t.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(_t.quote,'" tabindex="-1">').concat(_t.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(_t.code,'" tabindex="-1">').concat(_t.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(_t.bullets,'" tabindex="-1">').concat(_t.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(_t.numbers,'" tabindex="-1">').concat(_t.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(_t.outdent,'" tabindex="-1">').concat(_t.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(_t.indent,'" tabindex="-1">').concat(_t.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(_t.attachFiles,'" tabindex="-1">').concat(_t.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(_t.undo,'" tabindex="-1">').concat(_t.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(_t.redo,'" tabindex="-1">').concat(_t.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(_t.urlPlaceholder,'" aria-label="').concat(_t.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(_t.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(_t.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},$m={interval:5e3},eu=Object.freeze({__proto__:null,attachments:nb,blockAttributes:_n,browser:tu,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:NC,fileSize:kC,input:sb,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:_t,parser:fh,textAttributes:Oo,toolbar:LC,undo:$m}),_e=class{static proxyMethod(t){let{name:e,toMethod:i,toProperty:r,optional:s}=FI(t);this.prototype[e]=function(){let o,a;var l,c;return i?a=s?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():r&&(a=this[r]),s?(o=(c=a)===null||c===void 0?void 0:c[e],o?YS.call(o,a,arguments):void 0):(o=a[e],YS.call(o,a,arguments))}}},FI=function(n){let t=n.match($I);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(n));let e={name:t[4]};return t[2]!=null?e.toMethod=t[1]:e.toProperty=t[1],t[3]!=null&&(e.optional=!0),e},{apply:YS}=Function.prototype,$I=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),pm,mm,bm,Mo=class extends _e{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t?.toString())}static fromUCS2String(t){return new this(t,Bm(t))}static fromCodepoints(t){return new this(zm(t),t)}constructor(t,e){super(...arguments),this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return zm(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return Bm(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},BI=((pm=Array.from)===null||pm===void 0?void 0:pm.call(Array,"\u{1F47C}").length)===1,zI=((mm=" ".codePointAt)===null||mm===void 0?void 0:mm.call(" ",0))!=null,HI=((bm=String.fromCodePoint)===null||bm===void 0?void 0:bm.call(String,32,128124))===" \u{1F47C}",Bm,zm;Bm=BI&&zI?n=>Array.from(n).map(t=>t.codePointAt(0)):function(n){let t=[],e=0,{length:i}=n;for(;e<i;){let r=n.charCodeAt(e++);if(55296<=r&&r<=56319&&e<i){let s=n.charCodeAt(e++);(64512&s)==56320?r=((1023&r)<<10)+(1023&s)+65536:e--}t.push(r)}return t},zm=HI?n=>String.fromCodePoint(...Array.from(n||[])):function(n){return(()=>{let t=[];return Array.from(n).forEach(e=>{let i="";e>65535&&(e-=65536,i+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t.push(i+String.fromCharCode(e))}),t})().join("")};var WI=0,Pr=class extends _e{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++WI}hasSameConstructorAs(t){return this.constructor===t?.constructor}isEqualTo(t){return this===t}inspect(){let t=[],e=this.contentsForInspection()||{};for(let i in e){let r=e[i];t.push("".concat(i,"=").concat(r))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Mo.box(this)}getCacheKey(){return this.id.toString()}},Ro=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0},ob=function(n){let t=n.slice(0);for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return t.splice(...i),t},UI=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,KI=function(){let n=St("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=St("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),e=St("form");e.appendChild(n),e.appendChild(t);let i=function(){try{return new FormData(e).has(t.dirName)}catch{return!1}}(),r=function(){try{return n.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(s){return t.value=s,new FormData(e).get(t.dirName)}:r?function(s){return n.value=s,n.matches(":dir(rtl)")?"rtl":"ltr"}:function(s){let o=s.trim().charAt(0);return UI.test(o)?"rtl":"ltr"}}(),_m=null,xm=null,ym=null,ah=null,Hm=()=>(_m||(_m=VI().concat(jI())),_m),Se=n=>_n[n],jI=()=>(xm||(xm=Object.keys(_n)),xm),Wm=n=>Oo[n],VI=()=>(ym||(ym=Object.keys(Oo)),ym),DC=function(n,t){GI(n).textContent=t.replace(/%t/g,n)},GI=function(n){let t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",n.toLowerCase());let e=qI();return e&&t.setAttribute("nonce",e),document.head.insertBefore(t,document.head.firstChild),t},qI=function(){let n=JS("trix-csp-nonce")||JS("csp-nonce");if(n){let{nonce:t,content:e}=n;return t==""?e:t}},JS=n=>document.head.querySelector("meta[name=".concat(n,"]")),XS={"application/x-trix-feature-detection":"test"},IC=function(n){let t=n.getData("text/plain"),e=n.getData("text/html");if(!t||!e)return t?.length;{let{body:i}=new DOMParser().parseFromString(e,"text/html");if(i.textContent===t)return!i.querySelector("*")}},PC=/Mac|^iP/.test(navigator.platform)?n=>n.metaKey:n=>n.ctrlKey,ab=n=>setTimeout(n,1),FC=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={};for(let e in n){let i=n[e];t[e]=i}return t},nl=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(n).length!==Object.keys(t).length)return!1;for(let e in n)if(n[e]!==t[e])return!1;return!0},jt=function(n){if(n!=null)return Array.isArray(n)||(n=[n,n]),[ZS(n[0]),ZS(n[1]!=null?n[1]:n[0])]},Ir=function(n){if(n==null)return;let[t,e]=jt(n);return Um(t,e)},bh=function(n,t){if(n==null||t==null)return;let[e,i]=jt(n),[r,s]=jt(t);return Um(e,r)&&Um(i,s)},ZS=function(n){return typeof n=="number"?n:FC(n)},Um=function(n,t){return typeof n=="number"?n===t:nl(n,t)},_h=class extends _e{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(e=>e!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},Lo=new _h,$C=function(){let n=window.getSelection();if(n.rangeCount>0)return n},qc=function(){var n;let t=(n=$C())===null||n===void 0?void 0:n.getRangeAt(0);if(t&&!YI(t))return t},BC=function(n){let t=window.getSelection();return t.removeAllRanges(),t.addRange(n),Lo.update()},YI=n=>QS(n.startContainer)||QS(n.endContainer),QS=n=>!Object.getPrototypeOf(n),Kc=n=>n.replace(new RegExp("".concat($h),"g"),"").replace(new RegExp("".concat(_s),"g")," "),lb=new RegExp("[^\\S".concat(_s,"]")),cb=n=>n.replace(new RegExp("".concat(lb.source),"g")," ").replace(/\ {2,}/g," "),tC=function(n,t){if(n.isEqualTo(t))return["",""];let e=vm(n,t),{length:i}=e.utf16String,r;if(i){let{offset:s}=e,o=n.codepoints.slice(0,s).concat(n.codepoints.slice(s+i));r=vm(t,Mo.fromCodepoints(o))}else r=vm(t,n);return[e.utf16String.toString(),r.utf16String.toString()]},vm=function(n,t){let e=0,i=n.length,r=t.length;for(;e<i&&n.charAt(e).isEqualTo(t.charAt(e));)e++;for(;i>e+1&&n.charAt(i-1).isEqualTo(t.charAt(r-1));)i--,r--;return{utf16String:n.slice(e,i),offset:e}},Ci=class n extends Pr{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let e=$c(t[0]),i=e.getKeys();return t.slice(1).forEach(r=>{i=e.getKeysCommonToHash($c(r)),e=e.slice(i)}),e}static box(t){return $c(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=gh(t)}add(t,e){return this.merge(JI(t,e))}remove(t){return new n(gh(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new n(XI(this.values,ZI(t)))}slice(t){let e={};return Array.from(t).forEach(i=>{this.has(i)&&(e[i]=this.values[i])}),new n(e)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=$c(t),this.getKeys().filter(e=>this.values[e]===t.values[e])}isEqualTo(t){return Ro(this.toArray(),$c(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let t=[];for(let e in this.values){let i=this.values[e];t.push(t.push(e,i))}this.array=t.slice(0)}return this.array}toObject(){return gh(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},JI=function(n,t){let e={};return e[n]=t,e},XI=function(n,t){let e=gh(n);for(let i in t){let r=t[i];e[i]=r}return e},gh=function(n,t){let e={};return Object.keys(n).sort().forEach(i=>{i!==t&&(e[i]=n[i])}),e},$c=function(n){return n instanceof Ci?n:new Ci(n)},ZI=function(n){return n instanceof Ci?n.values:n},Jc=class{static groupObjects(){let t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r&&i==null&&(i=0);let s=[];return Array.from(e).forEach(o=>{var a;if(t){var l,c,u;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(c=(u=t[t.length-1]).canBeGroupedWith)!==null&&c!==void 0&&c.call(u,o,i))return void t.push(o);s.push(new this(t,{depth:i,asTree:r})),t=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,i)?t=[o]:s.push(o)}),t&&s.push(new this(t,{depth:i,asTree:r})),s}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:e,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=t,i&&(this.depth=e,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let t=["objectGroup"];return Array.from(this.getObjects()).forEach(e=>{t.push(e.getCacheKey())}),t.join("/")}},Km=class extends _e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(e=>{let i=JSON.stringify(e);this.objects[i]==null&&(this.objects[i]=e)})}find(t){let e=JSON.stringify(t);return this.objects[e]}},jm=class{constructor(t){this.reset(t)}add(t){let e=eC(t);this.elements[e]=t}remove(t){let e=eC(t),i=this.elements[e];if(i)return delete this.elements[e],i}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(e=>{this.add(e)}),t}},eC=n=>n.dataset.trixStoreKey,qa=class extends _e{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,e)=>(this.performing=!0,this.perform((i,r)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?t(r):e(r)})))),this.promise}perform(t){return t(!1)}release(){var t,e;(t=this.promise)===null||t===void 0||(e=t.cancel)===null||e===void 0||e.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};qa.proxyMethod("getPromise().then"),qa.proxyMethod("getPromise().catch");var Fr=class extends _e{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=e,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var e;return(e=this.findViewForObject(t))===null||e===void 0?void 0:e.invalidate()}findOrCreateCachedChildView(t,e,i){let r=this.getCachedViewForObject(e);return r?this.recordChildView(r):(r=this.createChildView(...arguments),this.cacheViewForObject(r,e)),r}createChildView(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e instanceof Jc&&(i.viewClass=t,t=Vm);let r=new t(e,i);return this.recordChildView(r)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(e=>{t.push(e),t=t.concat(e.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){let e=t?.id;if(e)return this.rootView.element.querySelector("[data-trix-id='".concat(e,"']"))}findViewForObject(t){for(let e of this.getAllChildViews())if(e.object===t)return e}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var e;return(e=this.getViewCache())===null||e===void 0?void 0:e[t.getCacheKey()]}cacheViewForObject(t,e){let i=this.getViewCache();i&&(i[e.getCacheKey()]=t)}garbageCollectCachedViews(){let t=this.getViewCache();if(t){let e=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(let i in t)e.includes(i)||delete t[i]}}},Vm=class extends Fr{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){let t=this.createContainerElement();return this.getChildViews().forEach(e=>{Array.from(e.getNodes()).forEach(i=>{t.appendChild(i)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}};var{entries:zC,setPrototypeOf:nC,isFrozen:QI,getPrototypeOf:tP,getOwnPropertyDescriptor:eP}=Object,{freeze:yn,seal:ci,create:HC}=Object,{apply:Gm,construct:qm}=typeof Reflect<"u"&&Reflect;yn||(yn=function(n){return n}),ci||(ci=function(n){return n}),Gm||(Gm=function(n,t,e){return n.apply(t,e)}),qm||(qm=function(n,t){return new n(...t)});var lh=vn(Array.prototype.forEach),nP=vn(Array.prototype.lastIndexOf),iC=vn(Array.prototype.pop),Bc=vn(Array.prototype.push),iP=vn(Array.prototype.splice),ph=vn(String.prototype.toLowerCase),Sm=vn(String.prototype.toString),rC=vn(String.prototype.match),zc=vn(String.prototype.replace),rP=vn(String.prototype.indexOf),sP=vn(String.prototype.trim),vi=vn(Object.prototype.hasOwnProperty),mn=vn(RegExp.prototype.test),Hc=(sC=TypeError,function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return qm(sC,t)}),sC;function vn(n){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return Gm(n,t,i)}}function Et(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ph;nC&&nC(n,null);let i=t.length;for(;i--;){let r=t[i];if(typeof r=="string"){let s=e(r);s!==r&&(QI(t)||(t[i]=s),r=s)}n[r]=!0}return n}function oP(n){for(let t=0;t<n.length;t++)vi(n,t)||(n[t]=null);return n}function Ao(n){let t=HC(null);for(let[e,i]of zC(n))vi(n,e)&&(Array.isArray(i)?t[e]=oP(i):i&&typeof i=="object"&&i.constructor===Object?t[e]=Ao(i):t[e]=i);return t}function Wc(n,t){for(;n!==null;){let e=eP(n,t);if(e){if(e.get)return vn(e.get);if(typeof e.value=="function")return vn(e.value)}n=tP(n)}return function(){return null}}var oC=yn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cm=yn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Am=yn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aP=yn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Em=yn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lP=yn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),aC=yn(["#text"]),lC=yn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Tm=yn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cC=yn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ch=yn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cP=ci(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uP=ci(/<%[\w\W]*|[\w\W]*%>/gm),dP=ci(/\$\{[\w\W]*/gm),hP=ci(/^data-[\-\w.\u00B7-\uFFFF]+$/),fP=ci(/^aria-[\-\w]+$/),WC=ci(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gP=ci(/^(?:\w+script|data):/i),pP=ci(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),UC=ci(/^html$/i),mP=ci(/^[a-z][.\w]*(-[.\w]+)+$/i),uC=Object.freeze({__proto__:null,ARIA_ATTR:fP,ATTR_WHITESPACE:pP,CUSTOM_ELEMENT:mP,DATA_ATTR:hP,DOCTYPE_NAME:UC,ERB_EXPR:uP,IS_ALLOWED_URI:WC,IS_SCRIPT_OR_DATA:gP,MUSTACHE_EXPR:cP,TMPLIT_EXPR:dP}),bP=1,_P=3,xP=7,yP=8,vP=9,SP=function(){return typeof window>"u"?null:window},xh=function n(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SP(),e=M=>n(M);if(e.version="3.2.5",e.removed=[],!t||!t.document||t.document.nodeType!==vP||!t.Element)return e.isSupported=!1,e;let{document:i}=t,r=i,s=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:g}=t,m=c.prototype,p=Wc(m,"cloneNode"),b=Wc(m,"remove"),_=Wc(m,"nextSibling"),x=Wc(m,"childNodes"),y=Wc(m,"parentNode");if(typeof a=="function"){let M=i.createElement("template");M.content&&M.content.ownerDocument&&(i=M.content.ownerDocument)}let v,S="",{implementation:C,createNodeIterator:A,createDocumentFragment:E,getElementsByTagName:$}=i,{importNode:L}=r,w={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};e.isSupported=typeof zC=="function"&&typeof y=="function"&&C&&C.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:N,ERB_EXPR:R,TMPLIT_EXPR:k,DATA_ATTR:D,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:X}=uC,{IS_ALLOWED_URI:G}=uC,Q=null,st=Et({},[...oC,...Cm,...Am,...Em,...aC]),ut=null,at=Et({},[...lC,...Tm,...cC,...ch]),et=Object.seal(HC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bt=null,q=null,vt=!0,kt=!0,Un=!1,wr=!0,Ne=!1,ri=!0,Ke=!1,je=!1,Nr=!1,pn=!1,Kn=!1,jn=!1,po=!0,Nc=!1,kc=!0,kr=!1,si={},Vn=null,Gn=Et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fa=null,Oc=Et({},["audio","video","img","source","image","track"]),$a=null,Ba=Et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mo="http://www.w3.org/1998/Math/MathML",Or="http://www.w3.org/2000/svg",Ln="http://www.w3.org/1999/xhtml",on=Ln,Gi=!1,bo=null,Mc=Et({},[mo,Or,Ln],Sm),za=Et({},["mi","mo","mn","ms","mtext"]),Mr=Et({},["annotation-xml"]),Ha=Et({},["title","style","font","a","script"]),_o=null,xo=["application/xhtml+xml","text/html"],Ae=null,ms=null,ve=i.createElement("form"),Rr=function(M){return M instanceof RegExp||M instanceof Function},Rc=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!ms||ms!==M){if(M&&typeof M=="object"||(M={}),M=Ao(M),_o=xo.indexOf(M.PARSER_MEDIA_TYPE)===-1?"text/html":M.PARSER_MEDIA_TYPE,Ae=_o==="application/xhtml+xml"?Sm:ph,Q=vi(M,"ALLOWED_TAGS")?Et({},M.ALLOWED_TAGS,Ae):st,ut=vi(M,"ALLOWED_ATTR")?Et({},M.ALLOWED_ATTR,Ae):at,bo=vi(M,"ALLOWED_NAMESPACES")?Et({},M.ALLOWED_NAMESPACES,Sm):Mc,$a=vi(M,"ADD_URI_SAFE_ATTR")?Et(Ao(Ba),M.ADD_URI_SAFE_ATTR,Ae):Ba,Fa=vi(M,"ADD_DATA_URI_TAGS")?Et(Ao(Oc),M.ADD_DATA_URI_TAGS,Ae):Oc,Vn=vi(M,"FORBID_CONTENTS")?Et({},M.FORBID_CONTENTS,Ae):Gn,bt=vi(M,"FORBID_TAGS")?Et({},M.FORBID_TAGS,Ae):{},q=vi(M,"FORBID_ATTR")?Et({},M.FORBID_ATTR,Ae):{},si=!!vi(M,"USE_PROFILES")&&M.USE_PROFILES,vt=M.ALLOW_ARIA_ATTR!==!1,kt=M.ALLOW_DATA_ATTR!==!1,Un=M.ALLOW_UNKNOWN_PROTOCOLS||!1,wr=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=M.SAFE_FOR_TEMPLATES||!1,ri=M.SAFE_FOR_XML!==!1,Ke=M.WHOLE_DOCUMENT||!1,pn=M.RETURN_DOM||!1,Kn=M.RETURN_DOM_FRAGMENT||!1,jn=M.RETURN_TRUSTED_TYPE||!1,Nr=M.FORCE_BODY||!1,po=M.SANITIZE_DOM!==!1,Nc=M.SANITIZE_NAMED_PROPS||!1,kc=M.KEEP_CONTENT!==!1,kr=M.IN_PLACE||!1,G=M.ALLOWED_URI_REGEXP||WC,on=M.NAMESPACE||Ln,za=M.MATHML_TEXT_INTEGRATION_POINTS||za,Mr=M.HTML_INTEGRATION_POINTS||Mr,et=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&Rr(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(et.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&Rr(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(et.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(et.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(kt=!1),Kn&&(pn=!0),si&&(Q=Et({},aC),ut=[],si.html===!0&&(Et(Q,oC),Et(ut,lC)),si.svg===!0&&(Et(Q,Cm),Et(ut,Tm),Et(ut,ch)),si.svgFilters===!0&&(Et(Q,Am),Et(ut,Tm),Et(ut,ch)),si.mathMl===!0&&(Et(Q,Em),Et(ut,cC),Et(ut,ch))),M.ADD_TAGS&&(Q===st&&(Q=Ao(Q)),Et(Q,M.ADD_TAGS,Ae)),M.ADD_ATTR&&(ut===at&&(ut=Ao(ut)),Et(ut,M.ADD_ATTR,Ae)),M.ADD_URI_SAFE_ATTR&&Et($a,M.ADD_URI_SAFE_ATTR,Ae),M.FORBID_CONTENTS&&(Vn===Gn&&(Vn=Ao(Vn)),Et(Vn,M.FORBID_CONTENTS,Ae)),kc&&(Q["#text"]=!0),Ke&&Et(Q,["html","head","body"]),Q.table&&(Et(Q,["tbody"]),delete bt.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Hc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Hc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=M.TRUSTED_TYPES_POLICY,S=v.createHTML("")}else v===void 0&&(v=function(tt,Y){if(typeof tt!="object"||typeof tt.createPolicy!="function")return null;let K=null,T="data-tt-policy-suffix";Y&&Y.hasAttribute(T)&&(K=Y.getAttribute(T));let B="dompurify"+(K?"#"+K:"");try{return tt.createPolicy(B,{createHTML:V=>V,createScriptURL:V=>V})}catch{return console.warn("TrustedTypes policy "+B+" could not be created."),null}}(g,s)),v!==null&&typeof S=="string"&&(S=v.createHTML(""));yn&&yn(M),ms=M}},Lc=Et({},[...Cm,...Am,...aP]),Wa=Et({},[...Em,...lP]),qn=function(M){Bc(e.removed,{element:M});try{y(M).removeChild(M)}catch{b(M)}},yo=function(M,tt){try{Bc(e.removed,{attribute:tt.getAttributeNode(M),from:tt})}catch{Bc(e.removed,{attribute:null,from:tt})}if(tt.removeAttribute(M),M==="is")if(pn||Kn)try{qn(tt)}catch{}else try{tt.setAttribute(M,"")}catch{}},sh=function(M){let tt=null,Y=null;if(Nr)M="<remove></remove>"+M;else{let B=rC(M,/^[\r\n\t ]+/);Y=B&&B[0]}_o==="application/xhtml+xml"&&on===Ln&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");let K=v?v.createHTML(M):M;if(on===Ln)try{tt=new f().parseFromString(K,_o)}catch{}if(!tt||!tt.documentElement){tt=C.createDocument(on,"template",null);try{tt.documentElement.innerHTML=Gi?S:K}catch{}}let T=tt.body||tt.documentElement;return M&&Y&&T.insertBefore(i.createTextNode(Y),T.childNodes[0]||null),on===Ln?$.call(tt,Ke?"html":"body")[0]:Ke?tt.documentElement:T},Yn=function(M){return A.call(M.ownerDocument||M,M,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},yi=function(M){return M instanceof h&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof d)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},Dc=function(M){return typeof l=="function"&&M instanceof l};function oi(M,tt,Y){lh(M,K=>{K.call(e,tt,Y,ms)})}let Ua=function(M){let tt=null;if(oi(w.beforeSanitizeElements,M,null),yi(M))return qn(M),!0;let Y=Ae(M.nodeName);if(oi(w.uponSanitizeElement,M,{tagName:Y,allowedTags:Q}),M.hasChildNodes()&&!Dc(M.firstElementChild)&&mn(/<[/\w!]/g,M.innerHTML)&&mn(/<[/\w!]/g,M.textContent)||M.nodeType===xP||ri&&M.nodeType===yP&&mn(/<[/\w]/g,M.data))return qn(M),!0;if(!Q[Y]||bt[Y]){if(!bt[Y]&&ai(Y)&&(et.tagNameCheck instanceof RegExp&&mn(et.tagNameCheck,Y)||et.tagNameCheck instanceof Function&&et.tagNameCheck(Y)))return!1;if(kc&&!Vn[Y]){let K=y(M)||M.parentNode,T=x(M)||M.childNodes;if(T&&K)for(let B=T.length-1;B>=0;--B){let V=p(T[B],!0);V.__removalCount=(M.__removalCount||0)+1,K.insertBefore(V,_(M))}}return qn(M),!0}return M instanceof c&&!function(K){let T=y(K);T&&T.tagName||(T={namespaceURI:on,tagName:"template"});let B=ph(K.tagName),V=ph(T.tagName);return!!bo[K.namespaceURI]&&(K.namespaceURI===Or?T.namespaceURI===Ln?B==="svg":T.namespaceURI===mo?B==="svg"&&(V==="annotation-xml"||za[V]):!!Lc[B]:K.namespaceURI===mo?T.namespaceURI===Ln?B==="math":T.namespaceURI===Or?B==="math"&&Mr[V]:!!Wa[B]:K.namespaceURI===Ln?!(T.namespaceURI===Or&&!Mr[V])&&!(T.namespaceURI===mo&&!za[V])&&!Wa[B]&&(Ha[B]||!Lc[B]):!(_o!=="application/xhtml+xml"||!bo[K.namespaceURI]))}(M)?(qn(M),!0):Y!=="noscript"&&Y!=="noembed"&&Y!=="noframes"||!mn(/<\/no(script|embed|frames)/i,M.innerHTML)?(Ne&&M.nodeType===_P&&(tt=M.textContent,lh([N,R,k],K=>{tt=zc(tt,K," ")}),M.textContent!==tt&&(Bc(e.removed,{element:M.cloneNode()}),M.textContent=tt)),oi(w.afterSanitizeElements,M,null),!1):(qn(M),!0)},Ic=function(M,tt,Y){if(po&&(tt==="id"||tt==="name")&&(Y in i||Y in ve))return!1;if(!(kt&&!q[tt]&&mn(D,tt))){if(!(vt&&mn(F,tt))){if(!ut[tt]||q[tt]){if(!(ai(M)&&(et.tagNameCheck instanceof RegExp&&mn(et.tagNameCheck,M)||et.tagNameCheck instanceof Function&&et.tagNameCheck(M))&&(et.attributeNameCheck instanceof RegExp&&mn(et.attributeNameCheck,tt)||et.attributeNameCheck instanceof Function&&et.attributeNameCheck(tt))||tt==="is"&&et.allowCustomizedBuiltInElements&&(et.tagNameCheck instanceof RegExp&&mn(et.tagNameCheck,Y)||et.tagNameCheck instanceof Function&&et.tagNameCheck(Y))))return!1}else if(!$a[tt]){if(!mn(G,zc(Y,U,""))){if((tt!=="src"&&tt!=="xlink:href"&&tt!=="href"||M==="script"||rP(Y,"data:")!==0||!Fa[M])&&!(Un&&!mn(z,zc(Y,U,"")))){if(Y)return!1}}}}}return!0},ai=function(M){return M!=="annotation-xml"&&rC(M,X)},Pc=function(M){oi(w.beforeSanitizeAttributes,M,null);let{attributes:tt}=M;if(!tt||yi(M))return;let Y={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ut,forceKeepAttr:void 0},K=tt.length;for(;K--;){let T=tt[K],{name:B,namespaceURI:V,value:Rt}=T,Jt=Ae(B),Ot=B==="value"?Rt:sP(Rt);if(Y.attrName=Jt,Y.attrValue=Ot,Y.keepAttr=!0,Y.forceKeepAttr=void 0,oi(w.uponSanitizeAttribute,M,Y),Ot=Y.attrValue,!Nc||Jt!=="id"&&Jt!=="name"||(yo(B,M),Ot="user-content-"+Ot),ri&&mn(/((--!?|])>)|<\/(style|title)/i,Ot)){yo(B,M);continue}if(Y.forceKeepAttr||(yo(B,M),!Y.keepAttr))continue;if(!wr&&mn(/\/>/i,Ot)){yo(B,M);continue}Ne&&lh([N,R,k],li=>{Ot=zc(Ot,li," ")});let Ve=Ae(M.nodeName);if(Ic(Ve,Jt,Ot)){if(v&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!V)switch(g.getAttributeType(Ve,Jt)){case"TrustedHTML":Ot=v.createHTML(Ot);break;case"TrustedScriptURL":Ot=v.createScriptURL(Ot)}try{V?M.setAttributeNS(V,B,Ot):M.setAttribute(B,Ot),yi(M)?qn(M):iC(e.removed)}catch{}}}oi(w.afterSanitizeAttributes,M,null)},oh=function M(tt){let Y=null,K=Yn(tt);for(oi(w.beforeSanitizeShadowDOM,tt,null);Y=K.nextNode();)oi(w.uponSanitizeShadowNode,Y,null),Ua(Y),Pc(Y),Y.content instanceof o&&M(Y.content);oi(w.afterSanitizeShadowDOM,tt,null)};return e.sanitize=function(M){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=null,K=null,T=null,B=null;if(Gi=!M,Gi&&(M="<!-->"),typeof M!="string"&&!Dc(M)){if(typeof M.toString!="function")throw Hc("toString is not a function");if(typeof(M=M.toString())!="string")throw Hc("dirty is not a string, aborting")}if(!e.isSupported)return M;if(je||Rc(tt),e.removed=[],typeof M=="string"&&(kr=!1),kr){if(M.nodeName){let Jt=Ae(M.nodeName);if(!Q[Jt]||bt[Jt])throw Hc("root node is forbidden and cannot be sanitized in-place")}}else if(M instanceof l)Y=sh("<!---->"),K=Y.ownerDocument.importNode(M,!0),K.nodeType===bP&&K.nodeName==="BODY"||K.nodeName==="HTML"?Y=K:Y.appendChild(K);else{if(!pn&&!Ne&&!Ke&&M.indexOf("<")===-1)return v&&jn?v.createHTML(M):M;if(Y=sh(M),!Y)return pn?null:jn?S:""}Y&&Nr&&qn(Y.firstChild);let V=Yn(kr?M:Y);for(;T=V.nextNode();)Ua(T),Pc(T),T.content instanceof o&&oh(T.content);if(kr)return M;if(pn){if(Kn)for(B=E.call(Y.ownerDocument);Y.firstChild;)B.appendChild(Y.firstChild);else B=Y;return(ut.shadowroot||ut.shadowrootmode)&&(B=L.call(r,B,!0)),B}let Rt=Ke?Y.outerHTML:Y.innerHTML;return Ke&&Q["!doctype"]&&Y.ownerDocument&&Y.ownerDocument.doctype&&Y.ownerDocument.doctype.name&&mn(UC,Y.ownerDocument.doctype.name)&&(Rt="<!DOCTYPE "+Y.ownerDocument.doctype.name+`>
`+Rt),Ne&&lh([N,R,k],Jt=>{Rt=zc(Rt,Jt," ")}),v&&jn?v.createHTML(Rt):Rt},e.setConfig=function(){Rc(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),je=!0},e.clearConfig=function(){ms=null,je=!1},e.isValidAttribute=function(M,tt,Y){ms||Rc({});let K=Ae(M),T=Ae(tt);return Ic(K,T,Y)},e.addHook=function(M,tt){typeof tt=="function"&&Bc(w[M],tt)},e.removeHook=function(M,tt){if(tt!==void 0){let Y=nP(w[M],tt);return Y===-1?void 0:iP(w[M],Y,1)[0]}return iC(w[M])},e.removeHooks=function(M){w[M]=[]},e.removeAllHooks=function(){w={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},e}();xh.addHook("uponSanitizeAttribute",function(n,t){/^data-trix-/.test(t.attrName)&&(t.forceKeepAttr=!0)});var CP="style href src width height language class".split(" "),AP="javascript:".split(" "),EP="script iframe form noscript".split(" "),Ya=class extends _e{static setHTML(t,e,i){let r=new this(e,i).sanitize(),s=r.getHTML?r.getHTML():r.outerHTML;t.innerHTML=s}static sanitize(t,e){let i=new this(t,e);return i.sanitize(),i}constructor(t){let{allowedAttributes:e,forbiddenProtocols:i,forbiddenElements:r,purifyOptions:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=e||CP,this.forbiddenProtocols=i||AP,this.forbiddenElements=r||EP,this.purifyOptions=s||{},this.body=TP(t)}sanitize(){this.sanitizeElements(),this.normalizeListElementNesting();let t=Object.assign({},NC,this.purifyOptions);return xh.setConfig(t),this.body=xh.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let t=mh(this.body),e=[];for(;t.nextNode();){let i=t.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?e.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:e.push(i)}}return e.forEach(i=>vs(i)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(e=>{let{name:i}=e;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||t.removeAttribute(i)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{let e=t.previousElementSibling;e&&bn(e)==="li"&&e.appendChild(t)}),this.body}elementIsRemovable(t){if(t?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(bn(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!wo(t)}},TP=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";n=n.replace(/<\/html[^>]*>[^]*$/i,"</html>");let t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=n,Array.from(t.head.querySelectorAll("style")).forEach(e=>{t.body.appendChild(e)}),t.body},{css:bs}=eu,Xc=class extends Fr{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t,e=t=St({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(t=St({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),e.appendChild(t)),this.attachment.hasContent()?Ya.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(r=>{t.appendChild(r)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=St({tagName:"progress",attributes:{class:bs.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[dC("left"),e,dC("right")]}createCaptionElement(){let t=St({tagName:"figcaption",className:bs.attachmentCaption}),e=this.attachmentPiece.getCaption();if(e)t.classList.add("".concat(bs.attachmentCaption,"--edited")),t.textContent=e;else{let i,r,s=this.getCaptionConfig();if(s.name&&(i=this.attachment.getFilename()),s.size&&(r=this.attachment.getFormattedFilesize()),i){let o=St({tagName:"span",className:bs.attachmentName,textContent:i});t.appendChild(o)}if(r){i&&t.appendChild(document.createTextNode(" "));let o=St({tagName:"span",className:bs.attachmentSize,textContent:r});t.appendChild(o)}}return t}getClassName(){let t=[bs.attachment,"".concat(bs.attachment,"--").concat(this.attachment.getType())],e=this.attachment.getExtension();return e&&t.push("".concat(bs.attachment,"--").concat(e)),t.join(" ")}getData(){let t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:e}=this.attachmentPiece;return e.isEmpty()||(t.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!wP(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;let e=this.attachment.getType(),i=FC((t=nb[e])===null||t===void 0?void 0:t.caption);return e==="file"&&(i.name=!0),i}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){let t=this.attachment.getUploadProgress(),e=this.findProgressElement();e&&(e.value=t)}},dC=n=>St({tagName:"span",textContent:$h,data:{trixCursorTarget:n,trixSerialize:!1}}),wP=function(n,t){let e=St("div");return Ya.setHTML(e,n||""),e.querySelector(t)},yh=class extends Xc{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=St({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",_t.captionPlaceholder),t}refresh(t){var e;if(t||(t=(e=this.findElement())===null||e===void 0?void 0:e.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){let e=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(t.src=i||e,i===e)t.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:e});t.setAttribute("data-trix-serialized-attributes",a)}let r=this.attachment.getWidth(),s=this.attachment.getHeight();r!=null&&(t.width=r),s!=null&&(t.height=s);let o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},vh=class extends Fr{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes(),e=this.createElement();if(e){let i=function(r){for(;(s=r)!==null&&s!==void 0&&s.firstElementChild;){var s;r=r.firstElementChild}return r}(e);Array.from(t).forEach(r=>{i.appendChild(r)}),t=[e]}return t}createAttachmentNodes(){let t=this.attachment.isPreviewable()?yh:Xc;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{let e=[],i=this.string.split(`
`);for(let r=0;r<i.length;r++){let s=i[r];if(r>0){let o=St("br");e.push(o)}if(s.length){let o=document.createTextNode(this.preserveSpaces(s));e.push(o)}}return e}}createElement(){let t,e,i,r={};for(e in this.attributes){i=this.attributes[e];let o=Wm(e);if(o){if(o.tagName){var s;let a=St(o.tagName);s?(s.appendChild(a),s=a):t=s=a}if(o.styleProperty&&(r[o.styleProperty]=i),o.style)for(e in o.style)i=o.style[e],r[e]=i}}if(Object.keys(r).length)for(e in t||(t=St("span")),r)i=r[e],t.style[e]=i;return t}createContainerElement(){for(let t in this.attributes){let e=this.attributes[t],i=Wm(t);if(i&&i.groupTagName){let r={};return r[t]=e,St(i.groupTagName,r)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,_s)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(_s," $2")).replace(/\ {2}/g,"".concat(_s," ")).replace(/\ {2}/g," ".concat(_s)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,_s)),t}},Sh=class extends Fr{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let t=[],e=Jc.groupObjects(this.getPieces()),i=e.length-1;for(let s=0;s<e.length;s++){let o=e[s],a={};s===0&&(a.isFirst=!0),s===i&&(a.isLast=!0),NP(r)&&(a.followsWhitespace=!0);let l=this.findOrCreateCachedChildView(vh,o,{textConfig:this.textConfig,context:a});t.push(...Array.from(l.getNodes()||[]));var r=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}},NP=n=>/\s$/.test(n?.toString()),{css:hC}=eu,Ch=class extends Fr{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let t=[document.createComment("block")];if(this.block.isEmpty())t.push(St("br"));else{var e;let i=(e=Se(this.block.getLastAttribute()))===null||e===void 0?void 0:e.text,r=this.findOrCreateCachedChildView(Sh,this.block.text,{textConfig:i});t.push(...Array.from(r.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push(St("br"))}if(this.attributes.length)return t;{let i,{tagName:r}=_n.default;this.block.isRTL()&&(i={dir:"rtl"});let s=St({tagName:r,attributes:i});return t.forEach(o=>s.appendChild(o)),[s]}}createContainerElement(t){let e={},i,r=this.attributes[t],{tagName:s,htmlAttributes:o=[]}=Se(r);if(t===0&&this.block.isRTL()&&Object.assign(e,{dir:"rtl"}),r==="attachmentGallery"){let a=this.block.getBlockBreakPosition();i="".concat(hC.attachmentGallery," ").concat(hC.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,c]=a;o.includes(l)&&(e[l]=c)}),St({tagName:s,className:i,attributes:e})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},Ja=class extends Fr{static render(t){let e=St("div"),i=new this(t,{element:e});return i.render(),i.sync(),e}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new jm,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=St("div"),!this.document.isEmpty()){let t=Jc.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(e=>{let i=this.findOrCreateCachedChildView(Ch,e);Array.from(i.getNodes()).map(r=>this.shadowElement.appendChild(r))})}}isSynced(){return kP(this.shadowElement,this.element)}sync(){let t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(fC(this.element)),ab(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),Array.from(fC(t)).forEach(e=>{let i=this.elementStore.remove(e);i&&e.parentNode.replaceChild(i,e)}),t}},fC=n=>n.querySelectorAll("[data-trix-store-key]"),kP=(n,t)=>gC(n.innerHTML)===gC(t.innerHTML),gC=n=>n.replace(/&nbsp;/g," ");function uh(n){var t,e;function i(s,o){try{var a=n[s](o),l=a.value,c=l instanceof OP;Promise.resolve(c?l.v:l).then(function(u){if(c){var d=s==="return"?"return":"next";if(!l.k||u.done)return i(d,u);u=n[d](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?i(t.key,t.arg):e=null}this._invoke=function(s,o){return new Promise(function(a,l){var c={key:s,arg:o,resolve:a,reject:l,next:null};e?e=e.next=c:(t=e=c,i(s,o))})},typeof n.return!="function"&&(this.return=void 0)}function OP(n,t){this.v=n,this.k=t}function xn(n,t,e){return(t=MP(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function MP(n){var t=function(e,i){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,i||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(n,"string");return typeof t=="symbol"?t:String(t)}uh.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},uh.prototype.next=function(n){return this._invoke("next",n)},uh.prototype.throw=function(n){return this._invoke("throw",n)},uh.prototype.return=function(n){return this._invoke("return",n)};function ee(n,t){return RP(n,KC(n,t,"get"))}function ub(n,t,e){return LP(n,KC(n,t,"set"),e),e}function KC(n,t,e){if(!t.has(n))throw new TypeError("attempted to "+e+" private field on non-instance");return t.get(n)}function RP(n,t){return t.get?t.get.call(n):t.value}function LP(n,t,e){if(t.set)t.set.call(n,e);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=e}}function dh(n,t,e){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return e}function jC(n,t){if(t.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yc(n,t,e){jC(n,t),t.set(n,e)}var $r=class extends Pr{static registerType(t,e){e.type=t,this.types[t]=e}static fromJSON(t){let e=this.types[t.type];if(e)return e.fromJSON(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Ci.box(e)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}};xn($r,"types",{});var Ah=class extends qa{constructor(t){super(...arguments),this.url=t}perform(t){let e=new Image;e.onload=()=>(e.width=this.width=e.naturalWidth,e.height=this.height=e.naturalHeight,t(!0,e)),e.onerror=()=>t(!1),e.src=this.url}},Xa=class n extends Pr{static attachmentForFile(t){let e=new this(this.attributesForFile(t));return e.setFile(t),e}static attributesForFile(t){return new Ci({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=Ci.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this.attributes.merge(t);var i,r,s,o;if(!this.attributes.isEqualTo(e))return this.attributes=e,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(r=i.attachmentDidChangeAttributes)===null||r===void 0||r.call(i,this),(s=this.delegate)===null||s===void 0||(o=s.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(s,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):n.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let t=this.attributes.get("filesize");return typeof t=="number"?kC.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){var e,i;if(this.uploadProgress!==t)return this.uploadProgress=t,(e=this.uploadProgressDelegate)===null||e===void 0||(i=e.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(e,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var e,i,r,s;if(t!==this.getPreviewURL())return this.previewURL=t,(e=this.previewDelegate)===null||e===void 0||(i=e.attachmentDidChangeAttributes)===null||i===void 0||i.call(e,this),(r=this.delegate)===null||r===void 0||(s=r.attachmentDidChangePreviewURL)===null||s===void 0?void 0:s.call(r,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,e){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new Ah(t).then(i=>{let{width:r,height:s}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:r,height:s}),this.preloadingURL=null,this.setPreviewURL(t),e?.()}).catch(()=>(this.preloadingURL=null,e?.()))}};xn(Xa,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var Za=class n extends $r{static fromJSON(t){return new this(Xa.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){let t=this.attributes.slice(n.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var e;return super.isEqualTo(t)&&this.attachment.id===(t==null||(e=t.attachment)===null||e===void 0?void 0:e.id)}toString(){return"\uFFFC"}toJSON(){let t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};xn(Za,"permittedAttributes",["caption","presentation"]),$r.registerType("attachment",Za);var Zc=class extends $r{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(e=>e.replace(/\r\n?/g,`
`))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let e,i;return t===0?(e=null,i=this):t===this.length?(e=this,i=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),i=new this.constructor(this.string.slice(t),this.attributes)),[e,i]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"\u2026"),JSON.stringify(t.toString())}};$r.registerType("string",Zc);var Qa=class extends Pr{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return new this.constructor(ob(this.objects,...e))}eachObject(t){return this.objects.map((e,i)=>t(e,i))}insertObjectAtIndex(t,e){return this.splice(e,0,t)}insertSplittableListAtIndex(t,e){return this.splice(e,0,...t.objects)}insertSplittableListAtPosition(t,e){let[i,r]=this.splitObjectAtPosition(e);return new this.constructor(i).insertSplittableListAtIndex(t,r)}editObjectAtIndex(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)}replaceObjectAtIndex(t,e){return this.splice(e,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){let[e,i,r]=this.splitObjectsAtRange(t);return new this.constructor(e.slice(i,r+1))}selectSplittableList(t){let e=this.objects.filter(i=>t(i));return new this.constructor(e)}removeObjectsInRange(t){let[e,i,r]=this.splitObjectsAtRange(t);return new this.constructor(e).splice(i,r-i+1)}transformObjectsInRange(t,e){let[i,r,s]=this.splitObjectsAtRange(t),o=i.map((a,l)=>r<=l&&l<=s?e(a):a);return new this.constructor(o)}splitObjectsAtRange(t){let e,[i,r,s]=this.splitObjectAtPosition(IP(t));return[i,e]=new this.constructor(i).splitObjectAtPosition(PP(t)+s),[i,r,e-1]}getObjectAtPosition(t){let{index:e}=this.findIndexAndOffsetAtPosition(t);return this.objects[e]}splitObjectAtPosition(t){let e,i,{index:r,offset:s}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(r!=null)if(s===0)e=r,i=0;else{let a=this.getObjectAtIndex(r),[l,c]=a.splitAtOffset(s);o.splice(r,1,l,c),e=r+1,i=l.getLength()-s}else e=o.length,i=0;return[o,e,i]}consolidate(){let t=[],e=this.objects[0];return this.objects.slice(1).forEach(i=>{var r,s;(r=(s=e).canBeConsolidatedWith)!==null&&r!==void 0&&r.call(s,i)?e=e.consolidateWith(i):(t.push(e),e=i)}),e&&t.push(e),new this.constructor(t)}consolidateFromIndexToIndex(t,e){let i=this.objects.slice(0).slice(t,e+1),r=new this.constructor(i).consolidate().toArray();return this.splice(t,i.length,...r)}findIndexAndOffsetAtPosition(t){let e,i=0;for(e=0;e<this.objects.length;e++){let r=i+this.objects[e].getLength();if(i<=t&&t<r)return{index:e,offset:t-i};i=r}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,e){let i=0;for(let r=0;r<this.objects.length;r++){let s=this.objects[r];if(r<t)i+=s.getLength();else if(r===t){i+=e;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||DP(this.objects,t?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}},DP=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(n.length!==t.length)return!1;let e=!0;for(let i=0;i<n.length;i++){let r=n[i];e&&!r.isEqualTo(t[i])&&(e=!1)}return e},IP=n=>n[0],PP=n=>n[1],Jn=class extends Pr{static textForAttachmentWithAttributes(t,e){return new this([new Za(t,e)])}static textForStringWithAttributes(t,e){return new this([new Zc(t,e)])}static fromJSON(t){return new this(Array.from(t).map(e=>$r.fromJSON(e)))}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let e=t.filter(i=>!i.isEmpty());this.pieceList=new Qa(e)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){let e=this.getPieces().map(i=>t.find(i)||i);return new this.constructor(e)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])}moveTextFromRangeToPosition(t,e){if(t[0]<=e&&e<=t[1])return;let i=this.getTextAtRange(t),r=i.getLength();return t[0]<e&&(e-=r),this.removeTextAtRange(t).insertTextAtPosition(i,e)}addAttributeAtRange(t,e,i){let r={};return r[t]=e,this.addAttributesAtRange(r,i)}addAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithoutAttribute(t)))}setAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,i=>i.copyWithAttributes(t)))}getAttributesAtPosition(t){var e;return((e=this.pieceList.getObjectAtPosition(t))===null||e===void 0?void 0:e.getAttributes())||{}}getCommonAttributes(){let t=Array.from(this.pieceList.toArray()).map(e=>e.getAttributes());return Ci.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,e){let i,r=i=e,s=this.getLength();for(;r>0&&this.getCommonAttributesAtRange([r-1,i])[t];)r--;for(;i<s&&this.getCommonAttributesAtRange([e,i+1])[t];)i++;return[r,i]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){let e=this.getLength();return this.getStringAtRange([e-t.length,e])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let e=0;for(let r of this.pieceList.toArray()){var i;if(((i=r.attachment)===null||i===void 0?void 0:i.id)===t)return{attachment:r.attachment,position:e};e+=r.length}return{attachment:null,position:null}}getAttachmentById(t){let{attachment:e}=this.getAttachmentAndPositionById(t);return e}getRangeOfAttachment(t){let e=this.getAttachmentAndPositionById(t.id),i=e.position;if(t=e.attachment)return[i,i+1]}updateAttributesForAttachment(t,e){let i=this.getRangeOfAttachment(e);return i?this.addAttributesAtRange(t,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var e;return super.isEqualTo(t)||(t==null||(e=t.pieceList)===null||e===void 0?void 0:e.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let t=this.pieceList.selectSplittableList(e=>e.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return KI(this.toString())}isRTL(){return this.getDirection()==="rtl"}},xs=class n extends Pr{static fromJSON(t){return new this(Jn.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,e,i){super(...arguments),this.text=FP(t||new Jn),this.attributes=e||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(t?.text)&&Ro(this.attributes,t?.attributes)&&nl(this.htmlAttributes,t?.htmlAttributes)}copyWithText(t){return new n(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new n(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){let e=t.find(this.text);return e?this.copyWithText(e):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){let e=this.attributes.concat(pC(t));return this.copyWithAttributes(e)}addHTMLAttribute(t,e){let i=Object.assign({},this.htmlAttributes,{[t]:e});return new n(this.text,this.attributes,i)}removeAttribute(t){let{listAttribute:e}=Se(t),i=bC(bC(this.attributes,t),e);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return mC(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return mC(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>Se(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){let t=this.getLastNestableAttribute();if(t){let e=this.attributes.lastIndexOf(t),i=ob(this.attributes,e+1,0,...pC(t));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(t=>Se(t).listAttribute)}isListItem(){var t;return(t=Se(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=Se(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=Se(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,e){let i=this.toString(),r;switch(t){case"forward":r=i.indexOf(`
`,e);break;case"backward":r=i.slice(0,e).lastIndexOf(`
`)}if(r!==-1)return r}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){let e=Jn.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(e);return this.copyWithText(i.appendText(t.text))}splitAtOffset(t){let e,i;return t===0?(e=null,i=this):t===this.getLength()?(e=this,i=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),i=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return VC(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,e){let i=t.getAttributes(),r=i[e],s=this.attributes[e];return s===r&&!(Se(s).group===!1&&!(()=>{if(!ah){ah=[];for(let o in _n){let{listAttribute:a}=_n[o];a!=null&&ah.push(a)}}return ah})().includes(i[e+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}},FP=function(n){return n=$P(n),n=zP(n)},$P=function(n){let t=!1,e=n.getPieces(),i=e.slice(0,e.length-1),r=e[e.length-1];return r?(i=i.map(s=>s.isBlockBreak()?(t=!0,HP(s)):s),t?new Jn([...i,r]):n):n},BP=Jn.textForStringWithAttributes(`
`,{blockBreak:!0}),zP=function(n){return VC(n)?n:n.appendText(BP)},VC=function(n){let t=n.getLength();return t===0?!1:n.getTextAtRange([t-1,t]).isBlockBreak()},HP=n=>n.copyWithoutAttribute("blockBreak"),pC=function(n){let{listAttribute:t}=Se(n);return t?[t,n]:[n]},mC=n=>n.slice(-1)[0],bC=function(n,t){let e=n.lastIndexOf(t);return e===-1?n:ob(n,e,1)},Dn=class extends Pr{static fromJSON(t){return new this(Array.from(t).map(e=>xs.fromJSON(e)))}static fromString(t,e){let i=Jn.textForStringWithAttributes(t,e);return new this([new xs(i)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new xs]),this.blockList=Qa.box(t)}isEmpty(){let t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){let t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){let e=new Km(t.getObjects());return this.copyUsingObjectMap(e)}copyUsingObjectMap(t){let e=this.getBlocks().map(i=>t.find(i)||i.copyUsingObjectMap(t));return new this.constructor(e)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this.getBlocks().map(i=>{let r=t.concat(i.getAttributes());return i.copyWithAttributes(r)});return new this.constructor(e)}replaceBlock(t,e){let i=this.blockList.indexOf(t);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,i))}insertDocumentAtRange(t,e){let{blockList:i}=t;e=jt(e);let[r]=e,{index:s,offset:o}=this.locationFromPosition(r),a=this,l=this.getBlockAtPosition(r);return Ir(e)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(s)):l.getBlockBreakPosition()===o&&r++,a=a.removeTextAtRange(e),new this.constructor(a.blockList.insertSplittableListAtPosition(i,r))}mergeDocumentAtRange(t,e){let i,r;e=jt(e);let[s]=e,o=this.locationFromPosition(s),a=this.getBlockAtIndex(o.index).getAttributes(),l=t.getBaseBlockAttributes(),c=a.slice(-l.length);if(Ro(l,c)){let h=a.slice(0,-l.length);i=t.copyWithBaseBlockAttributes(h)}else i=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let u=i.getBlockCount(),d=i.getBlockAtIndex(0);if(Ro(a,d.getAttributes())){let h=d.getTextWithoutBlockBreak();if(r=this.insertTextAtRange(h,e),u>1){i=new this.constructor(i.getBlocks().slice(1));let f=s+h.getLength();r=r.insertDocumentAtRange(i,f)}}else r=this.insertDocumentAtRange(i,e);return r}insertTextAtRange(t,e){e=jt(e);let[i]=e,{index:r,offset:s}=this.locationFromPosition(i),o=this.removeTextAtRange(e);return new this.constructor(o.blockList.editObjectAtIndex(r,a=>a.copyWithText(a.text.insertTextAtPosition(t,s))))}removeTextAtRange(t){let e;t=jt(t);let[i,r]=t;if(Ir(t))return this;let[s,o]=Array.from(this.locationRangeFromRange(t)),a=s.index,l=s.offset,c=this.getBlockAtIndex(a),u=o.index,d=o.offset,h=this.getBlockAtIndex(u);if(r-i==1&&c.getBlockBreakPosition()===l&&h.getBlockBreakPosition()!==d&&h.text.getStringAtPosition(d)===`
`)e=this.blockList.editObjectAtIndex(u,f=>f.copyWithText(f.text.removeTextAtRange([d,d+1])));else{let f,g=c.text.getTextAtRange([0,l]),m=h.text.getTextAtRange([d,h.getLength()]),p=g.appendText(m);f=a!==u&&l===0&&c.getAttributeLevel()>=h.getAttributeLevel()?h.copyWithText(p):c.copyWithText(p);let b=u+1-a;e=this.blockList.splice(a,b,f)}return new this.constructor(e)}moveTextFromRangeToPosition(t,e){let i;t=jt(t);let[r,s]=t;if(r<=e&&e<=s)return this;let o=this.getDocumentAtRange(t),a=this.removeTextAtRange(t),l=r<e;l&&(e-=o.getLength());let[c,...u]=o.getBlocks();return u.length===0?(i=c.getTextWithoutBlockBreak(),l&&(e+=1)):i=c.text,a=a.insertTextAtRange(i,e),u.length===0?a:(o=new this.constructor(u),e+=i.getLength(),a.insertDocumentAtRange(o,e))}addAttributeAtRange(t,e,i){let{blockList:r}=this;return this.eachBlockAtRange(i,(s,o,a)=>r=r.editObjectAtIndex(a,function(){return Se(t)?s.addAttribute(t,e):o[0]===o[1]?s:s.copyWithText(s.text.addAttributeAtRange(t,e,o))})),new this.constructor(r)}addAttribute(t,e){let{blockList:i}=this;return this.eachBlock((r,s)=>i=i.editObjectAtIndex(s,()=>r.addAttribute(t,e))),new this.constructor(i)}removeAttributeAtRange(t,e){let{blockList:i}=this;return this.eachBlockAtRange(e,function(r,s,o){Se(t)?i=i.editObjectAtIndex(o,()=>r.removeAttribute(t)):s[0]!==s[1]&&(i=i.editObjectAtIndex(o,()=>r.copyWithText(r.text.removeAttributeAtRange(t,s))))}),new this.constructor(i)}updateAttributesForAttachment(t,e){let i=this.getRangeOfAttachment(e),[r]=Array.from(i),{index:s}=this.locationFromPosition(r),o=this.getTextAtIndex(s);return new this.constructor(this.blockList.editObjectAtIndex(s,a=>a.copyWithText(o.updateAttributesForAttachment(t,e))))}removeAttributeForAttachment(t,e){let i=this.getRangeOfAttachment(e);return this.removeAttributeAtRange(t,i)}setHTMLAttributeAtPosition(t,e,i){let r=this.getBlockAtPosition(t),s=r.addHTMLAttribute(e,i);return this.replaceBlock(r,s)}insertBlockBreakAtRange(t){let e;t=jt(t);let[i]=t,{offset:r}=this.locationFromPosition(i),s=this.removeTextAtRange(t);return r===0&&(e=[new xs]),new this.constructor(s.blockList.insertSplittableListAtPosition(new Qa(e),i))}applyBlockAttributeAtRange(t,e,i){let r=this.expandRangeToLineBreaksAndSplitBlocks(i),s=r.document;i=r.range;let o=Se(t);if(o.listAttribute){s=s.removeLastListAttributeAtRange(i,{exceptAttributeName:t});let a=s.convertLineBreaksToBlockBreaksInRange(i);s=a.document,i=a.range}else s=o.exclusive?s.removeBlockAttributesAtRange(i):o.terminal?s.removeLastTerminalAttributeAtRange(i):s.consolidateBlocksAtRange(i);return s.addAttributeAtRange(t,e,i)}removeLastListAttributeAtRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(t,function(r,s,o){let a=r.getLastAttribute();a&&Se(a).listAttribute&&a!==e.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>r.removeAttribute(a)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(i,r,s){let o=i.getLastAttribute();o&&Se(o).terminal&&(e=e.editObjectAtIndex(s,()=>i.removeAttribute(o)))}),new this.constructor(e)}removeBlockAttributesAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(i,r,s){i.hasAttributes()&&(e=e.editObjectAtIndex(s,()=>i.copyWithoutAttributes()))}),new this.constructor(e)}expandRangeToLineBreaksAndSplitBlocks(t){let e;t=jt(t);let[i,r]=t,s=this.locationFromPosition(i),o=this.locationFromPosition(r),a=this,l=a.getBlockAtIndex(s.index);if(s.offset=l.findLineBreakInDirectionFromPosition("backward",s.offset),s.offset!=null&&(e=a.positionFromLocation(s),a=a.insertBlockBreakAtRange([e,e+1]),o.index+=1,o.offset-=a.getBlockAtIndex(s.index).getLength(),s.index+=1),s.offset=0,o.offset===0&&o.index>s.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let c=a.getBlockAtIndex(o.index);c.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=c.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==c.getBlockBreakPosition()&&(e=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([e,e+1]))}return i=a.positionFromLocation(s),r=a.positionFromLocation(o),{document:a,range:t=jt([i,r])}}convertLineBreaksToBlockBreaksInRange(t){t=jt(t);let[e]=t,i=this.getStringAtRange(t).slice(0,-1),r=this;return i.replace(/.*?\n/g,function(s){e+=s.length,r=r.insertBlockBreakAtRange([e-1,e])}),{document:r,range:t}}consolidateBlocksAtRange(t){t=jt(t);let[e,i]=t,r=this.locationFromPosition(e).index,s=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(r,s))}getDocumentAtRange(t){t=jt(t);let e=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(e)}getStringAtRange(t){let e,i=t=jt(t);return i[i.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getBlockAtIndex(e)}getTextAtIndex(t){var e;return(e=this.getBlockAtIndex(t))===null||e===void 0?void 0:e.text}getTextAtPosition(t){let{index:e}=this.locationFromPosition(t);return this.getTextAtIndex(e)}getPieceAtPosition(t){let{index:e,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(e).getPieceAtPosition(i)}getCharacterAtPosition(t){let{index:e,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(e).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,e){let i,r;t=jt(t);let[s,o]=t,a=this.locationFromPosition(s),l=this.locationFromPosition(o);if(a.index===l.index)return i=this.getBlockAtIndex(a.index),r=[a.offset,l.offset],e(i,r,a.index);for(let c=a.index;c<=l.index;c++)if(i=this.getBlockAtIndex(c),i){switch(c){case a.index:r=[a.offset,i.text.getLength()];break;case l.index:r=[0,l.offset];break;default:r=[0,i.text.getLength()]}e(i,r,c)}}getCommonAttributesAtRange(t){t=jt(t);let[e]=t;if(Ir(t))return this.getCommonAttributesAtPosition(e);{let i=[],r=[];return this.eachBlockAtRange(t,function(s,o){if(o[0]!==o[1])return i.push(s.text.getCommonAttributesAtRange(o)),r.push(_C(s))}),Ci.fromCommonAttributesOfObjects(i).merge(Ci.fromCommonAttributesOfObjects(r)).toObject()}}getCommonAttributesAtPosition(t){let e,i,{index:r,offset:s}=this.locationFromPosition(t),o=this.getBlockAtIndex(r);if(!o)return{};let a=_C(o),l=o.text.getAttributesAtPosition(s),c=o.text.getAttributesAtPosition(s-1),u=Object.keys(Oo).filter(d=>Oo[d].inheritable);for(e in c)i=c[e],(i===l[e]||u.includes(e))&&(a[e]=i);return a}getRangeOfCommonAttributeAtPosition(t,e){let{index:i,offset:r}=this.locationFromPosition(e),s=this.getTextAtIndex(i),[o,a]=Array.from(s.getExpandedRangeForAttributeAtOffset(t,r)),l=this.positionFromLocation({index:i,offset:o}),c=this.positionFromLocation({index:i,offset:a});return jt([l,c])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let e=1;e<this.getBlockCount();e++){let i=this.getBlockAtIndex(e).getAttributes(),r=Math.min(t.length,i.length);t=(()=>{let s=[];for(let o=0;o<r&&i[o]===t[o];o++)s.push(i[o]);return s})()}return t}getAttachmentById(t){for(let e of this.getAttachments())if(e.id===t)return e}getAttachmentPieces(){let t=[];return this.blockList.eachObject(e=>{let{text:i}=e;return t=t.concat(i.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let e=0,i=this.blockList.toArray();for(let r=0;r<i.length;r++){let{text:s}=i[r],o=s.getRangeOfAttachment(t);if(o)return jt([e+o[0],e+o[1]]);e+=s.getLength()}}getLocationRangeOfAttachment(t){let e=this.getRangeOfAttachment(t);return this.locationRangeFromRange(e)}getAttachmentPieceForAttachment(t){for(let e of this.getAttachmentPieces())if(e.attachment===t)return e}findRangesForBlockAttribute(t){let e=0,i=[];return this.getBlocks().forEach(r=>{let s=r.getLength();r.hasAttribute(t)&&i.push([e,e+s]),e+=s}),i}findRangesForTextAttribute(t){let{withValue:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,r=[],s=[];return this.getPieces().forEach(o=>{let a=o.getLength();(function(l){return e?l.getAttribute(t)===e:l.hasAttribute(t)})(o)&&(r[1]===i?r[1]=i+a:s.push(r=[i,i+a])),i+=a}),s}locationFromPosition(t){let e=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(e.index!=null)return e;{let i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return jt(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=jt(t)))return;let[e,i]=Array.from(t),r=this.locationFromPosition(e),s=this.locationFromPosition(i);return jt([r,s])}rangeFromLocationRange(t){let e;t=jt(t);let i=this.positionFromLocation(t[0]);return Ir(t)||(e=this.positionFromLocation(t[1])),jt([i,e])}isEqualTo(t){return this.blockList.isEqualTo(t?.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){let t=[];return Array.from(this.getTexts()).forEach(e=>{t.push(...Array.from(e.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let t=[];return this.blockList.eachObject(e=>t.push(e.copyWithText(e.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}},_C=function(n){let t={},e=n.getLastAttribute();return e&&(t[e]=!0),t},wm=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:n=Kc(n),attributes:t,type:"string"}},xC=(n,t)=>{try{return JSON.parse(n.getAttribute("data-trix-".concat(t)))}catch{return{}}},Do=class extends _e{static parse(t,e){let i=new this(t,e);return i.parse(),i}constructor(t){let{referenceElement:e,purifyOptions:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=e,this.purifyOptions=i,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return Dn.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),Ya.setHTML(this.containerElement,this.html,{purifyOptions:this.purifyOptions});let t=mh(this.containerElement,{usingFilter:UP});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=St({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return vs(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){let e=t.parentNode;if(e===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(e===this.containerElement||this.isBlockElement(e)){var i;let r=this.getBlockAttributes(e),s=this.getBlockHTMLAttributes(e);Ro(r,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(r,e,s),this.currentBlockElement=e)}}appendBlockForElement(t){let e=this.isBlockElement(t),i=Eo(this.currentBlockElement,t);if(e&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){let r=this.getBlockAttributes(t),s=this.getBlockHTMLAttributes(t);if(t.firstChild){if(i&&Ro(r,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(r,t,s),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!i&&!e){let r=this.findParentBlockElement(t);if(r)return this.appendBlockForElement(r);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:e}=t;for(;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&this.blockElements.includes(e))return e;e=e.parentElement}return null}processTextNode(t){let e=t.data;var i;return yC(t.parentNode)||(e=cb(e),GC((i=t.previousSibling)===null||i===void 0?void 0:i.textContent)&&(e=KP(e))),this.appendStringWithAttributes(e,this.getTextAttributes(t.parentNode))}processElement(t){let e;if(wo(t)){if(e=xC(t,"attachment"),Object.keys(e).length){let i=this.getTextAttributes(t);this.appendAttachmentWithAttributes(e,i),t.innerHTML=""}return this.processedElements.push(t)}switch(bn(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":e={url:t.getAttribute("src"),contentType:"image"};let i=(r=>{let s=r.getAttribute("width"),o=r.getAttribute("height"),a={};return s&&(a.width=parseInt(s,10)),o&&(a.height=parseInt(o,10)),a})(t);for(let r in i){let s=i[r];e[r]=s}return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(fh.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(fh.tableCellSeparator)}}appendBlockForAttributesWithElement(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(e);let r=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(t,i);return this.blocks.push(r),r}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,e){return this.appendPiece(wm(t,e))}appendAttachmentWithAttributes(t,e){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(t,e))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,e){let{text:i}=this.blocks[e],r=i[i.length-1];if(r?.type!=="string")return i.push(wm(t));r.string+=t}prependStringToTextAtIndex(t,e){let{text:i}=this.blocks[e],r=i[0];if(r?.type!=="string")return i.unshift(wm(t));r.string=t+r.string}getTextAttributes(t){let e,i={};for(let r in Oo){let s=Oo[r];if(s.tagName&&ys(t,{matchingSelector:s.tagName,untilNode:this.containerElement}))i[r]=!0;else if(s.parser){if(e=s.parser(t),e){let o=!1;for(let a of this.findBlockElementAncestors(t))if(s.parser(a)===e){o=!0;break}o||(i[r]=e)}}else s.styleProperty&&(e=t.style[s.styleProperty],e&&(i[r]=e))}if(wo(t)){let r=xC(t,"attributes");for(let s in r)e=r[s],i[s]=e}return i}getBlockAttributes(t){let e=[];for(;t&&t!==this.containerElement;){for(let r in _n){let s=_n[r];var i;s.parse!==!1&&bn(t)===s.tagName&&((i=s.test)!==null&&i!==void 0&&i.call(s,t)||!s.test)&&(e.push(r),s.listAttribute&&e.push(s.listAttribute))}t=t.parentNode}return e.reverse()}getBlockHTMLAttributes(t){let e={},i=Object.values(_n).find(r=>r.tagName===bn(t));return(i?.htmlAttributes||[]).forEach(r=>{t.hasAttribute(r)&&(e[r]=t.getAttribute(r))}),e}findBlockElementAncestors(t){let e=[];for(;t&&t!==this.containerElement;){let i=bn(t);Vc().includes(i)&&e.push(t),t=t.parentNode}return e}isBlockElement(t){if(t?.nodeType===Node.ELEMENT_NODE&&!wo(t)&&!ys(t,{matchingSelector:"td",untilNode:this.containerElement}))return Vc().includes(bn(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if(t?.nodeType!==Node.TEXT_NODE||!jP(t.data))return;let{parentNode:e,previousSibling:i,nextSibling:r}=t;return WP(e.previousSibling)&&!this.isBlockElement(e.previousSibling)||yC(e)?void 0:!i||this.isBlockElement(i)||!r||this.isBlockElement(r)}isExtraBR(t){return bn(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(fh.removeBlankTableCells){var e;let i=(e=t.previousSibling)===null||e===void 0?void 0:e.textContent;return i&&/\S/.test(i)}return t.previousSibling}translateBlockElementMarginsToNewlines(){let t=this.getMarginOfDefaultBlockElement();for(let e=0;e<this.blocks.length;e++){let i=this.getMarginOfBlockElementAtIndex(e);i&&(i.top>2*t.top&&this.prependStringToTextAtIndex(`
`,e),i.bottom>2*t.bottom&&this.appendStringToTextAtIndex(`
`,e))}}getMarginOfBlockElementAtIndex(t){let e=this.blockElements[t];if(e&&e.textContent&&!Vc().includes(bn(e))&&!this.processedElements.includes(e))return vC(e)}getMarginOfDefaultBlockElement(){let t=St(_n.default.tagName);return this.containerElement.appendChild(t),vC(t)}},yC=function(n){let{whiteSpace:t}=window.getComputedStyle(n);return["pre","pre-wrap","pre-line"].includes(t)},WP=n=>n&&!GC(n.textContent),vC=function(n){let t=window.getComputedStyle(n);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},UP=function(n){return bn(n)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},KP=n=>n.replace(new RegExp("^".concat(lb.source,"+")),""),jP=n=>new RegExp("^".concat(lb.source,"*$")).test(n),GC=n=>/\s$/.test(n),VP=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Ym="data-trix-serialized-attributes",GP="[".concat(Ym,"]"),qP=new RegExp("<!--block-->","g"),YP={"application/json":function(n){let t;if(n instanceof Dn)t=n;else{if(!(n instanceof HTMLElement))throw new Error("unserializable object");t=Do.parse(n.innerHTML).getDocument()}return t.toSerializableDocument().toJSONString()},"text/html":function(n){let t;if(n instanceof Dn)t=Ja.render(n);else{if(!(n instanceof HTMLElement))throw new Error("unserializable object");t=n.cloneNode(!0)}return Array.from(t.querySelectorAll("[data-trix-serialize=false]")).forEach(e=>{vs(e)}),VP.forEach(e=>{Array.from(t.querySelectorAll("[".concat(e,"]"))).forEach(i=>{i.removeAttribute(e)})}),Array.from(t.querySelectorAll(GP)).forEach(e=>{try{let i=JSON.parse(e.getAttribute(Ym));e.removeAttribute(Ym);for(let r in i){let s=i[r];e.setAttribute(r,s)}}catch{}}),t.innerHTML.replace(qP,"")}},JP=Object.freeze({__proto__:null}),fe=class extends _e{constructor(t,e){super(...arguments),this.attachmentManager=t,this.attachment=e,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};fe.proxyMethod("attachment.getAttribute"),fe.proxyMethod("attachment.hasAttribute"),fe.proxyMethod("attachment.setAttribute"),fe.proxyMethod("attachment.getAttributes"),fe.proxyMethod("attachment.setAttributes"),fe.proxyMethod("attachment.isPending"),fe.proxyMethod("attachment.isPreviewable"),fe.proxyMethod("attachment.getURL"),fe.proxyMethod("attachment.getHref"),fe.proxyMethod("attachment.getFilename"),fe.proxyMethod("attachment.getFilesize"),fe.proxyMethod("attachment.getFormattedFilesize"),fe.proxyMethod("attachment.getExtension"),fe.proxyMethod("attachment.getContentType"),fe.proxyMethod("attachment.getFile"),fe.proxyMethod("attachment.setFile"),fe.proxyMethod("attachment.releaseFile"),fe.proxyMethod("attachment.getUploadProgress"),fe.proxyMethod("attachment.setUploadProgress");var Eh=class extends _e{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(e=>{this.manageAttachment(e)})}getAttachments(){let t=[];for(let e in this.managedAttachments){let i=this.managedAttachments[e];t.push(i)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new fe(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var e,i;if(this.attachmentIsManaged(t))return(e=this.delegate)===null||e===void 0||(i=e.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(e,t)}unmanageAttachment(t){let e=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],e}},Th=class{constructor(t){this.composition=t,this.document=this.composition.document;let e=this.composition.getSelectedRange();this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},Yi=class extends _e{constructor(){super(...arguments),this.document=new Dn,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var e,i;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(e,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var e,i,r,s;let{document:o,selectedRange:a}=t;return(e=this.delegate)===null||e===void 0||(i=e.compositionWillLoadSnapshot)===null||i===void 0||i.call(e),this.setDocument(o??new Dn),this.setSelection(a??[0,0]),(r=this.delegate)===null||r===void 0||(s=r.compositionDidLoadSnapshot)===null||s===void 0?void 0:s.call(r)}insertText(t){let{updatePosition:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,i));let r=i[0],s=r+t.getLength();return e&&this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new xs,e=new Dn([t]);return this.insertDocument(e)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Dn,e=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,e));let i=e[0],r=i+t.getLength();return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([i,r])}insertString(t,e){let i=this.getCurrentTextAttributes(),r=Jn.textForStringWithAttributes(t,i);return this.insertText(r,e)}insertBlockBreak(){let t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));let e=t[0],i=e+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([e,i])}insertLineBreak(){let t=new Th(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){let e=new Dn([t.block.copyWithoutText()]);return this.insertDocument(e)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){let e=Do.parse(t,{purifyOptions:{SAFE_FOR_XML:!0}}).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(e,i));let r=i[0],s=r+e.getLength()-1;return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}replaceHTML(t){let e=Do.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(i);return this.setDocument(e),this.setSelection(r)}insertFile(t){return this.insertFiles([t])}insertFiles(t){let e=[];return Array.from(t).forEach(i=>{var r;if((r=this.delegate)!==null&&r!==void 0&&r.compositionShouldAcceptFile(i)){let s=Xa.attachmentForFile(i);e.push(s)}}),this.insertAttachments(e)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let e=new Jn;return Array.from(t).forEach(i=>{var r;let s=i.getType(),o=(r=nb[s])===null||r===void 0?void 0:r.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let l=Jn.textForAttachmentWithAttributes(i,a);e=e.appendText(l)}),this.insertText(e)}shouldManageDeletingInDirection(t){let e=this.getLocationRange();if(Ir(e)){if(t==="backward"&&e[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1}deleteInDirection(t){let e,i,r,{length:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getLocationRange(),a=this.getSelectedRange(),l=Ir(a);if(l?i=t==="backward"&&o[0].offset===0:r=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){let c=this.getBlock();if(c.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),c.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(t,{length:s}),t==="backward"&&(e=this.getAttachmentAtRange(a))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!i&&!r&&void 0)}moveTextFromRange(t){let[e]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)}removeAttachment(t){let e=this.document.getRangeOfAttachment(t);if(e)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])}removeLastBlockAttribute(){let[t,e]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(e);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){let e=this.currentAttributes[t];return e!=null&&e!==!1}toggleCurrentAttribute(t){let e=!this.currentAttributes[t];return e?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return Se(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){let e=this.getSelectedDocument();if(e){for(let i of Array.from(e.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){let e=this.getBlock();if(e)return!e.isTerminalBlock()}setCurrentAttribute(t,e){return Se(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,e,i){var r;let s=this.document.getBlockAtPosition(t),o=(r=Se(s.getLastAttribute()))===null||r===void 0?void 0:r.htmlAttributes;if(s&&o!=null&&o.includes(e)){let a=this.document.setHTMLAttributeAtPosition(t,e,i);this.setDocument(a)}}setTextAttribute(t,e){let i=this.getSelectedRange();if(!i)return;let[r,s]=Array.from(i);if(r!==s)return this.setDocument(this.document.addAttributeAtRange(t,e,i));if(t==="href"){let o=Jn.textForStringWithAttributes(e,{href:e});return this.insertText(o)}}setBlockAttribute(t,e){let i=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,e,i)),this.setSelection(i)}removeCurrentAttribute(t){return Se(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){let e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}removeBlockAttribute(t){let e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;let e=this.getBlock();if(e){if((t=Se(e.getLastNestableAttribute()))===null||t===void 0||!t.listAttribute)return e.getNestingLevel()>0;{let i=this.getPreviousBlock();if(i)return function(){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ro((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,r.length),r)}(i.getListItemAttributes(),e.getListItemAttributes())}}}decreaseNestingLevel(){let t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){let t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;let e=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(e)return this.removeCurrentAttribute(e)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange()),{index:e}=this.document.locationFromPosition(t),i=e,r=this.getBlock().getAttributeLevel(),s=this.document.getBlockAtIndex(i+1);for(;s&&s.isListItem()&&!(s.getAttributeLevel()<=r);)i++,s=this.document.getBlockAtIndex(i+1);t=this.document.positionFromLocation({index:e,offset:0});let o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){let t=this.getSelectedRange({ignoreLock:!0});if(t){let e=this.document.getCommonAttributesAtRange(t);if(Array.from(Hm()).forEach(i=>{e[i]||this.canSetCurrentAttribute(i)||(e[i]=!1)}),!nl(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return OC.call({},this.currentAttributes)}getCurrentTextAttributes(){let t={};for(let e in this.currentAttributes){let i=this.currentAttributes[e];i!==!1&&Wm(e)&&(t[e]=i)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var e;let i=this.document.locationRangeFromRange(t);return(e=this.delegate)===null||e===void 0?void 0:e.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){let t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){let e=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(e)}getPosition(){let t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||jt({index:0,offset:0})}withTargetLocationRange(t,e){let i;this.targetLocationRange=t;try{i=e()}finally{this.targetLocationRange=null}return i}withTargetRange(t,e){let i=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(i,e)}withTargetDOMRange(t,e){let i=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(i,e)}getExpandedRangeInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,r]=Array.from(this.getSelectedRange());return t==="backward"?e?i-=e:i=this.translateUTF16PositionFromOffset(i,-1):e?r+=e:r=this.translateUTF16PositionFromOffset(r,1),jt([i,r])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;let e=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(e)!=null}moveCursorInDirection(t){let e,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{let r=this.getSelectedRange();i=this.getExpandedRangeInDirection(t),e=!bh(r,i)}if(t==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),e){let r=this.getAttachmentAtRange(i);if(r)return this.editAttachment(r)}}expandSelectionInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getExpandedRangeInDirection(t,{length:e});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){let e=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(t,e);return this.setSelectedRange(i)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){let e=this.document.locationFromPosition(t);if(e)return this.locationIsCursorTarget(e)}positionIsBlockBreak(t){var e;return(e=this.document.getPieceAtPosition(t))===null||e===void 0?void 0:e.isBlockBreak()}getSelectedDocument(){let t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let t=this.document.getAttachments(),{added:e,removed:i}=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=[],l=new Set;r.forEach(u=>{l.add(u)});let c=new Set;return s.forEach(u=>{c.add(u),l.has(u)||o.push(u)}),r.forEach(u=>{c.has(u)||a.push(u)}),{added:o,removed:a}}(this.attachments,t);return this.attachments=t,Array.from(i).forEach(r=>{var s,o;r.delegate=null,(s=this.delegate)===null||s===void 0||(o=s.compositionDidRemoveAttachment)===null||o===void 0||o.call(s,r)}),(()=>{let r=[];return Array.from(e).forEach(s=>{var o,a;s.delegate=this,r.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,s))}),r})()}attachmentDidChangeAttributes(t){var e,i;return this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(e,t)}attachmentDidChangePreviewURL(t){var e,i;return this.revision++,(e=this.delegate)===null||e===void 0||(i=e.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(e,t)}editAttachment(t,e){var i,r;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(i=this.delegate)===null||i===void 0||(r=i.compositionDidStartEditingAttachment)===null||r===void 0?void 0:r.call(i,this.editingAttachment,e)}stopEditingAttachment(){var t,e;this.editingAttachment&&((t=this.delegate)===null||t===void 0||(e=t.compositionDidStopEditingAttachment)===null||e===void 0||e.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))}removeAttributeForAttachment(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))}breakFormattedBlock(t){let{document:e}=t,{block:i}=t,r=t.startPosition,s=[r-1,r];i.getBlockBreakPosition()===t.startLocation.offset?(i.breaksOnReturn()&&t.nextCharacter===`
`?r+=1:e=e.removeTextAtRange(s),s=[r,r]):t.nextCharacter===`
`?t.previousCharacter===`
`?s=[r-1,r+1]:(s=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1);let o=new Dn([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(e.insertDocumentAtRange(o,s)),this.setSelection(r)}getPreviousBlock(){let t=this.getLocationRange();if(t){let{index:e}=t[0];if(e>0)return this.document.getBlockAtIndex(e-1)}}getBlock(){let t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){let e=this.document.getDocumentAtRange(t);if(e.toString()==="".concat("\uFFFC",`
`))return e.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.compositionDidChangeCurrentAttributes)===null||e===void 0?void 0:e.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(e,t)}translateUTF16PositionFromOffset(t,e){let i=this.document.toUTF16String(),r=i.offsetFromUCS2Offset(t);return i.offsetToUCS2Offset(r+e)}};Yi.proxyMethod("getSelectionManager().getPointRange"),Yi.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),Yi.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),Yi.proxyMethod("getSelectionManager().locationIsCursorTarget"),Yi.proxyMethod("getSelectionManager().selectionIsExpanded"),Yi.proxyMethod("delegate?.getSelectionManager");var Qc=class extends _e{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:e,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.undoEntries.slice(-1)[0];if(!i||!XP(r,t,e)){let s=this.createEntry({description:t,context:e});this.undoEntries.push(s),this.redoEntries=[]}}undo(){let t=this.undoEntries.pop();if(t){let e=this.createEntry(t);return this.redoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}redo(){let t=this.redoEntries.pop();if(t){let e=this.createEntry(t);return this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t?.toString(),context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}}},XP=(n,t,e)=>n?.description===t?.toString()&&n?.context===JSON.stringify(e),Nm="attachmentGallery",wh=class{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(Nm,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(e=>{e[1]-e[0]>1&&(e[0]+=t,e[1]+=t,this.document.getCharacterAtPosition(e[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[1]),e[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),e[1]++,t++),e[0]!==0&&this.document.getCharacterAtPosition(e[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[0]),e[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),e[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(Nm,!0,e))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(Nm)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},qC=function(n){let t=new wh(n);return t.perform(),t.getSnapshot()},ZP=[qC],Nh=class{constructor(t,e,i){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=e,this.element=i,this.undoManager=new Qc(this.composition),this.filters=ZP.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=Do.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(e)}loadJSON(t){let{document:e,selectedRange:i}=t;return e=Dn.fromJSON(e),this.loadSnapshot({document:e,selectedRange:i})}loadSnapshot(t){return this.undoManager=new Qc(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){let e=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(e)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(t,e)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,e,i){this.composition.setHTMLAtributeAtPosition(t,e,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:e,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:e,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},kh=class{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,e){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},r=0,s=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(t);a&&(t=a.parentNode,e=fm(a));let l=mh(this.element,{usingFilter:YC});for(;l.nextNode();){let c=l.currentNode;if(c===t&&Gc(t)){Ga(c)||(o.offset+=e);break}if(c.parentNode===t){if(r++===e)break}else if(!Eo(t,c)&&r>0)break;qS(c,{strict:i})?(s&&o.index++,o.offset=0,s=!0):o.offset+=km(c)}return o}findContainerAndOffsetFromLocation(t){let e,i;if(t.index===0&&t.offset===0){for(e=this.element,i=0;e.firstChild;)if(e=e.firstChild,gm(e)){i=1;break}return[e,i]}let[r,s]=this.findNodeAndOffsetFromLocation(t);if(r){if(Gc(r))km(r)===0?(e=r.parentNode.parentNode,i=fm(r.parentNode),Ga(r,{name:"right"})&&i++):(e=r,i=t.offset-s);else{if(e=r.parentNode,!qS(r.previousSibling)&&!gm(e))for(;r===e.lastChild&&(r=e,e=e.parentNode,!gm(e)););i=fm(r),t.offset!==0&&i++}return[e,i]}}findNodeAndOffsetFromLocation(t){let e,i,r=0;for(let s of this.getSignificantNodesForIndex(t.index)){let o=km(s);if(t.offset<=r+o)if(Gc(s)){if(e=s,i=r,t.offset===i&&Ga(e))break}else e||(e=s,i=r);if(r+=o,r>t.offset)break}return[e,i]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(wo(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){let e=[],i=mh(this.element,{usingFilter:QP}),r=!1;for(;i.nextNode();){let o=i.currentNode;var s;if(Va(o)){if(s!=null?s++:s=0,s===t)r=!0;else if(r)break}else r&&e.push(o)}return e}},km=function(n){return n.nodeType===Node.TEXT_NODE?Ga(n)?0:n.textContent.length:bn(n)==="br"||wo(n)?1:0},QP=function(n){return tF(n)===NodeFilter.FILTER_ACCEPT?YC(n):NodeFilter.FILTER_REJECT},tF=function(n){return RC(n)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},YC=function(n){return wo(n.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Oh=class{createDOMRangeFromPoint(t){let e,{x:i,y:r}=t;if(document.caretPositionFromPoint){let{offsetNode:s,offset:o}=document.caretPositionFromPoint(i,r);return e=document.createRange(),e.setStart(s,o),e}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,r);if(document.body.createTextRange){let s=qc();try{let o=document.body.createTextRange();o.moveToPoint(i,r),o.select()}catch{}return e=qc(),BC(s),e}}getClientRectsForDOMRange(t){let e=Array.from(t.getClientRects());return[e[0],e[e.length-1]]}},Dr=class extends _e{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new kh(this.element),this.pointMapper=new Oh,this.lockCount=0,ge("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange(qc()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=jt(t);let e=this.createDOMRangeFromLocationRange(t);e&&(BC(e),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=jt(t);let e=this.getLocationAtPoint(t[0]),i=this.getLocationAtPoint(t[1]);this.setLocationRange([e,i])}getClientRectAtLocationRange(t){let e=this.createDOMRangeFromLocationRange(t);if(e)return this.getClientRectsForDOMRange(e)[1]}locationIsCursorTarget(t){let e=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return Ga(e)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=$C())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=qc())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,e){if(t==null||!this.domRangeWithinElement(t))return;let i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e);if(!i)return;let r=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e);return jt([i,r])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;let e=()=>{if(this.paused=!1,clearTimeout(i),Array.from(t).forEach(r=>{r.destroy()}),Eo(document,this.element))return this.selectionDidChange()},i=setTimeout(e,200);t=["mousemove","keydown"].map(r=>ge(r,{onElement:document,withCallback:e}))}selectionDidChange(){if(!this.paused&&!rb(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var e,i;if((t??(t=this.createLocationRangeFromDOMRange(qc())))&&!bh(t,this.currentLocationRange))return this.currentLocationRange=t,(e=this.delegate)===null||e===void 0||(i=e.locationRangeDidChange)===null||i===void 0?void 0:i.call(e,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){let e=this.findContainerAndOffsetFromLocation(t[0]),i=Ir(t)?e:this.findContainerAndOffsetFromLocation(t[1])||e;if(e!=null&&i!=null){let r=document.createRange();return r.setStart(...Array.from(e||[])),r.setEnd(...Array.from(i||[])),r}}getLocationAtPoint(t){let e=this.createDOMRangeFromPoint(t);var i;if(e)return(i=this.createLocationRangeFromDOMRange(e))===null||i===void 0?void 0:i[0]}domRangeWithinElement(t){return t.collapsed?Eo(this.element,t.startContainer):Eo(this.element,t.startContainer)&&Eo(this.element,t.endContainer)}};Dr.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Dr.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Dr.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Dr.proxyMethod("pointMapper.createDOMRangeFromPoint"),Dr.proxyMethod("pointMapper.getClientRectsForDOMRange");var JC=Object.freeze({__proto__:null,Attachment:Xa,AttachmentManager:Eh,AttachmentPiece:Za,Block:xs,Composition:Yi,Document:Dn,Editor:Nh,HTMLParser:Do,HTMLSanitizer:Ya,LineBreakInsertion:Th,LocationMapper:kh,ManagedAttachment:fe,Piece:$r,PointMapper:Oh,SelectionManager:Dr,SplittableList:Qa,StringPiece:Zc,Text:Jn,UndoManager:Qc}),eF=Object.freeze({__proto__:null,ObjectView:Fr,AttachmentView:Xc,BlockView:Ch,DocumentView:Ja,PieceView:vh,PreviewableAttachmentView:yh,TextView:Sh}),{lang:Om,css:Co,keyNames:nF}=eu,Mm=function(n){return function(){let t=n.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}},Mh=class extends _e{constructor(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),xn(this,"makeElementMutable",Mm(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),xn(this,"addToolbar",Mm(()=>{let s=St({tagName:"div",className:Co.attachmentToolbar,data:{trixMutable:!0},childNodes:St({tagName:"div",className:"trix-button-row",childNodes:St({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:St({tagName:"button",className:"trix-button trix-button--remove",textContent:Om.remove,attributes:{title:Om.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&s.appendChild(St({tagName:"div",className:Co.attachmentMetadataContainer,childNodes:St({tagName:"span",className:Co.attachmentMetadata,childNodes:[St({tagName:"span",className:Co.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),St({tagName:"span",className:Co.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),ge("click",{onElement:s,withCallback:this.didClickToolbar}),ge("click",{onElement:s,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),jc("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:s,attachment:this.attachment}}),{do:()=>this.element.appendChild(s),undo:()=>vs(s)}})),xn(this,"installCaptionEditor",Mm(()=>{let s=St({tagName:"textarea",className:Co.attachmentCaptionEditor,attributes:{placeholder:Om.captionPlaceholder},data:{trixMutable:!0}});s.value=this.attachmentPiece.getCaption();let o=s.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=s.value,s.style.height=o.scrollHeight+"px"};ge("input",{onElement:s,withCallback:a}),ge("input",{onElement:s,withCallback:this.didInputCaption}),ge("keydown",{onElement:s,withCallback:this.didKeyDownCaption}),ge("change",{onElement:s,withCallback:this.didChangeCaption}),ge("blur",{onElement:s,withCallback:this.didBlurCaption});let l=this.element.querySelector("figcaption"),c=l.cloneNode();return{do:()=>{if(l.style.display="none",c.appendChild(s),c.appendChild(o),c.classList.add("".concat(Co.attachmentCaption,"--editing")),l.parentElement.insertBefore(c,l),a(),this.options.editCaption)return ab(()=>s.focus())},undo(){vs(c),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=e,this.container=i,this.options=r,this.attachment=this.attachmentPiece.attachment,bn(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let e=this.undos.pop();for(this.savePendingCaption();e;)e(),e=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let s=this.pendingCaption;var t,e,i,r;this.pendingCaption=null,s?(t=this.delegate)===null||t===void 0||(e=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||e===void 0||e.call(t,{caption:s},this.attachment):(i=this.delegate)===null||i===void 0||(r=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||r===void 0||r.call(i,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var e;if(t.target.getAttribute("data-trix-action")==="remove")return(e=this.delegate)===null||e===void 0?void 0:e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var e,i;if(nF[t.keyCode]==="return")return t.preventDefault(),this.savePendingCaption(),(e=this.delegate)===null||e===void 0||(i=e.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(e,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}},Rh=class extends _e{constructor(t,e){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=e,this.documentView=new Ja(this.composition.document,{element:this.element}),ge("focus",{onElement:this.element,withCallback:this.didFocus}),ge("blur",{onElement:this.element,withCallback:this.didBlur}),ge("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),ge("mousedown",{onElement:this.element,matchingSelector:To,withCallback:this.didClickAttachment}),ge("click",{onElement:this.element,matchingSelector:"a".concat(To),preventDefault:!0})}didFocus(t){var e;let i=()=>{var r,s;if(!this.focused)return this.focused=!0,(r=this.delegate)===null||r===void 0||(s=r.compositionControllerDidFocus)===null||s===void 0?void 0:s.call(r)};return((e=this.blurPromise)===null||e===void 0?void 0:e.then(i))||i()}didBlur(t){this.blurPromise=new Promise(e=>ab(()=>{var i,r;return rb(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(r=i.compositionControllerDidBlur)===null||r===void 0||r.call(i)),this.blurPromise=null,e()}))}didClickAttachment(t,e){var i,r;let s=this.findAttachmentForElement(e),o=!!ys(t.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerDidSelectAttachment)===null||r===void 0?void 0:r.call(i,s,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,e,i,r,s,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillSyncDocumentView)===null||r===void 0||r.call(i),this.documentView.sync(),(s=this.delegate)===null||s===void 0||(o=s.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(s)),(t=this.delegate)===null||t===void 0||(e=t.compositionControllerDidRender)===null||e===void 0?void 0:e.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,e){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===t)return;let r=this.documentView.findElementForObject(t);if(!r)return;this.uninstallAttachmentEditor();let s=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new Mh(s,r,this.element,e),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,e){var i,r;return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(i,e),this.composition.updateAttributesForAttachment(t,e)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,e){var i,r;return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(i,e),this.composition.removeAttributeForAttachment(t,e)}attachmentEditorDidRequestRemovalOfAttachment(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(e,t)}attachmentEditorDidRequestDeselectingAttachment(t){var e,i;return(e=this.delegate)===null||e===void 0||(i=e.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(e,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}},Lh=class extends _e{},XC="data-trix-mutable",iF="[".concat(XC,"]"),rF={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},Dh=class extends _e{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,rF)}stop(){return this.observer.disconnect()}didMutate(t){var e,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return(e=this.delegate)===null||e===void 0||(i=e.elementDidMutate)===null||i===void 0||i.call(e,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(e=>this.mutationIsSignificant(e))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(let e of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(e))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!RC(t)}nodeIsMutable(t){return ys(t,{matchingSelector:iF})}nodesModifiedByMutation(t){let e=[];switch(t.type){case"attributes":t.attributeName!==XC&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push(...Array.from(t.addedNodes||[])),e.push(...Array.from(t.removedNodes||[]))}return e}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:t,deletions:e}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(a=>{Array.from(t).includes(a)||t.push(a)}),e.push(...Array.from(i.deletions||[]));let r={},s=t.join("");s&&(r.textAdded=s);let o=e.join("");return o&&(r.textDeleted=o),r}getMutationsByType(t){return Array.from(this.mutations).filter(e=>e.type===t)}getTextChangesFromChildList(){let t,e,i=[],r=[];Array.from(this.getMutationsByType("childList")).forEach(a=>{i.push(...Array.from(a.addedNodes||[])),r.push(...Array.from(a.removedNodes||[]))}),i.length===0&&r.length===1&&Va(r[0])?(t=[],e=[`
`]):(t=Jm(i),e=Jm(r));let s=t.filter((a,l)=>a!==e[l]).map(Kc),o=e.filter((a,l)=>a!==t[l]).map(Kc);return{additions:s,deletions:o}}getTextChangesFromCharacterData(){let t,e,i=this.getMutationsByType("characterData");if(i.length){let r=i[0],s=i[i.length-1],o=function(a,l){let c,u;return a=Mo.box(a),(l=Mo.box(l)).length<a.length?[u,c]=tC(a,l):[c,u]=tC(l,a),{added:c,removed:u}}(Kc(r.oldValue),Kc(s.target.data));t=o.added,e=o.removed}return{additions:t?[t]:[],deletions:e?[e]:[]}}},Jm=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];for(let e of Array.from(n))switch(e.nodeType){case Node.TEXT_NODE:t.push(e.data);break;case Node.ELEMENT_NODE:bn(e)==="br"?t.push(`
`):t.push(...Array.from(Jm(e.childNodes)||[]))}return t},Ih=class extends qa{constructor(t){super(...arguments),this.file=t}perform(t){let e=new FileReader;return e.onerror=()=>t(!1),e.onload=()=>{e.onerror=null;try{e.abort()}catch{}return t(!0,this.file)},e.readAsArrayBuffer(this.file)}},Xm=class{constructor(t){this.element=t}shouldIgnore(t){return!!tu.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&sF(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((t=this.event.data)===null||t===void 0?void 0:t.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var t,e;return((t=this.previousEvent)===null||t===void 0?void 0:t.type)==="keydown"&&((e=this.previousEvent)===null||e===void 0?void 0:e.key)==="Unidentified"}},sF=(n,t)=>SC(n)===SC(t),oF=new RegExp("(".concat("\uFFFC","|").concat($h,"|").concat(_s,"|\\s)+"),"g"),SC=n=>n.replace(oF," ").trim(),tl=class extends _e{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Dh(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new Xm(this.element);for(let e in this.constructor.events)ge(e,{onElement:this.element,withCallback:this.handlerFor(e)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestRender)===null||e===void 0?void 0:e.call(t)}requestReparse(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestReparse)===null||e===void 0||e.call(t),this.requestRender()}attachFiles(t){let e=Array.from(t).map(i=>new Ih(i));return Promise.all(e).then(i=>{this.handleInput(function(){var r,s;return(r=this.delegate)===null||r===void 0||r.inputControllerWillAttachFiles(),(s=this.responder)===null||s===void 0||s.insertFiles(i),this.requestRender()})})}handlerFor(t){return e=>{e.defaultPrevented||this.handleInput(()=>{if(!rb(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(e))return;this.eventName=t,this.constructor.events[t].call(this,e)}})}}handleInput(t){try{var e;(e=this.delegate)===null||e===void 0||e.inputControllerWillHandleInput(),t.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(t,e){let i=document.createElement("a");return i.href=t,i.textContent=e||t,i.outerHTML}},Rm;xn(tl,"events",{});var{browser:aF,keyNames:ZC}=eu,lF=0,Si=class extends tl{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let e in t){let i=t[e];this.inputSummary[e]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Lo.reset()}elementDidMutate(t){var e,i;return this.isComposing()?(e=this.delegate)===null||e===void 0||(i=e.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(e):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:e,textDeleted:i}=t;if(this.inputSummary.preferDocument)return!0;let r=e!=null?e===this.inputSummary.textAdded:!this.inputSummary.textAdded,s=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(e)&&!r,a=i===`
`&&!s;if(o&&!a||a&&!o){let c=this.getSelectedRange();if(c){var l;let u=o?e.replace(/\n$/,"").length||-1:e?.length||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(c[1]+u))return!0}}return r&&s}mutationIsSignificant(t){var e;let i=Object.keys(t).length>0,r=((e=this.compositionInput)===null||e===void 0?void 0:e.getEndData())==="";return i||!r}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new qi(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,e){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(t))!==!1?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var e;if(!function(r){if(r==null||!r.setData)return!1;for(let s in XS){let o=XS[s];try{if(r.setData(s,o),!r.getData(s)===o)return!1}catch{return!1}}return!0}(t))return;let i=(e=this.responder)===null||e===void 0?void 0:e.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(i)),t.setData("text/html",Ja.render(i).innerHTML),t.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){let e={};return Array.from(t?.types||[]).forEach(i=>{e[i]=!0}),e.Files||e["application/x-trix-document"]||e["text/html"]||e["text/plain"]}getPastedHTMLUsingHiddenElement(t){let e=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},r=St({style:i,tagName:"div",editable:!0});return document.body.appendChild(r),r.focus(),requestAnimationFrame(()=>{let s=r.innerHTML;return vs(r),this.setSelectedRange(e),t(s)})}};xn(Si,"events",{keydown(n){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let t=ZC[n.keyCode];if(t){var e;let r=this.keys;["ctrl","alt","shift","meta"].forEach(s=>{var o;n["".concat(s,"Key")]&&(s==="ctrl"&&(s="control"),r=(o=r)===null||o===void 0?void 0:o[s])}),((e=r)===null||e===void 0?void 0:e[t])!=null&&(this.setInputSummary({keyName:t}),Lo.reset(),r[t].call(this,n))}if(PC(n)){let r=String.fromCharCode(n.keyCode).toLowerCase();if(r){var i;let s=["alt","shift"].map(o=>{if(n["".concat(o,"Key")])return o}).filter(o=>o);s.push(r),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(s)&&n.preventDefault()}}},keypress(n){if(this.inputSummary.eventName!=null||n.metaKey||n.ctrlKey&&!n.altKey)return;let t=dF(n);var e,i;return t?((e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})):void 0},textInput(n){let{data:t}=n,{textAdded:e}=this.inputSummary;if(e&&e!==t&&e.toUpperCase()===t){var i;let r=this.getSelectedRange();return this.setSelectedRange([r[0],r[1]+e.length]),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(r)}},dragenter(n){n.preventDefault()},dragstart(n){var t,e;return this.serializeSelectionToDataTransfer(n.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidStartDrag)===null||e===void 0?void 0:e.call(t)},dragover(n){if(this.draggedRange||this.canAcceptDataTransfer(n.dataTransfer)){n.preventDefault();let i={x:n.clientX,y:n.clientY};var t,e;if(!nl(i,this.draggingPoint))return this.draggingPoint=i,(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidReceiveDragOverPoint)===null||e===void 0?void 0:e.call(t,this.draggingPoint)}},dragend(n){var t,e;(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidCancelDrag)===null||e===void 0||e.call(t),this.draggedRange=null,this.draggingPoint=null},drop(n){var t,e;n.preventDefault();let i=(t=n.dataTransfer)===null||t===void 0?void 0:t.files,r=n.dataTransfer.getData("application/x-trix-document"),s={x:n.clientX,y:n.clientY};if((e=this.responder)===null||e===void 0||e.setLocationRangeFromPointRange(s),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var l;let c=Dn.fromJSONString(r);(l=this.responder)===null||l===void 0||l.insertDocument(c),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(n){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(n.clipboardData)&&n.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillCutText(),this.deleteInDirection("backward"),n.defaultPrevented))return this.requestRender()},copy(n){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(n.clipboardData)&&n.preventDefault()},paste(n){let t=n.clipboardData||n.testClipboardData,e={clipboard:t};if(!t||hF(n))return void this.getPastedHTMLUsingHiddenElement(y=>{var v,S,C;return e.type="text/html",e.html=y,(v=this.delegate)===null||v===void 0||v.inputControllerWillPaste(e),(S=this.responder)===null||S===void 0||S.insertHTML(e.html),this.requestRender(),(C=this.delegate)===null||C===void 0?void 0:C.inputControllerDidPaste(e)});let i=t.getData("URL"),r=t.getData("text/html"),s=t.getData("public.url-name");if(i){var o,a,l;let y;e.type="text/html",y=s?cb(s).trim():i,e.html=this.createLinkHTML(i,y),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.setInputSummary({textAdded:y,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(e.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(e)}else if(IC(t)){var c,u,d;e.type="text/plain",e.string=t.getData("text/plain"),(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(e),this.setInputSummary({textAdded:e.string,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertString(e.string),this.requestRender(),(d=this.delegate)===null||d===void 0||d.inputControllerDidPaste(e)}else if(r){var h,f,g;e.type="text/html",e.html=r,(h=this.delegate)===null||h===void 0||h.inputControllerWillPaste(e),(f=this.responder)===null||f===void 0||f.insertHTML(e.html),this.requestRender(),(g=this.delegate)===null||g===void 0||g.inputControllerDidPaste(e)}else if(Array.from(t.types).includes("Files")){var m,p;let y=(m=t.items)===null||m===void 0||(m=m[0])===null||m===void 0||(p=m.getAsFile)===null||p===void 0?void 0:p.call(m);if(y){var b,_,x;let v=cF(y);!y.name&&v&&(y.name="pasted-file-".concat(++lF,".").concat(v)),e.type="File",e.file=y,(b=this.delegate)===null||b===void 0||b.inputControllerWillAttachFiles(),(_=this.responder)===null||_===void 0||_.insertFile(e.file),this.requestRender(),(x=this.delegate)===null||x===void 0||x.inputControllerDidPaste(e)}}n.preventDefault()},compositionstart(n){return this.getCompositionInput().start(n.data)},compositionupdate(n){return this.getCompositionInput().update(n.data)},compositionend(n){return this.getCompositionInput().end(n.data)},beforeinput(n){this.inputSummary.didInput=!0},input(n){return this.inputSummary.didInput=!0,n.stopPropagation()}}),xn(Si,"keys",{backspace(n){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",n)},delete(n){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",n)},return(n){var t,e;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()},tab(n){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.requestRender(),n.preventDefault())},left(n){var t;if(this.selectionIsInCursorTarget())return n.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},right(n){var t;if(this.selectionIsInCursorTarget())return n.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},control:{d(n){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",n)},h(n){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",n)},o(n){var t,e;return n.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(n){var t,e;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`),this.requestRender(),n.preventDefault()},tab(n){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.requestRender(),n.preventDefault())},left(n){if(this.selectionIsInCursorTarget())return n.preventDefault(),this.expandSelectionInDirection("backward")},right(n){if(this.selectionIsInCursorTarget())return n.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(n){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(n){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}}),Si.proxyMethod("responder?.getSelectedRange"),Si.proxyMethod("responder?.setSelectedRange"),Si.proxyMethod("responder?.expandSelectionInDirection"),Si.proxyMethod("responder?.selectionIsInCursorTarget"),Si.proxyMethod("responder?.selectionIsExpanded");var cF=n=>{var t;return(t=n.type)===null||t===void 0||(t=t.match(/\/(\w+)$/))===null||t===void 0?void 0:t[1]},uF=!((Rm=" ".codePointAt)===null||Rm===void 0||!Rm.call(" ",0)),dF=function(n){if(n.key&&uF&&n.key.codePointAt(0)===n.keyCode)return n.key;{let t;if(n.which===null?t=n.keyCode:n.which!==0&&n.charCode!==0&&(t=n.charCode),t!=null&&ZC[t]!=="escape")return Mo.fromCodepoints([t]).toString()}},hF=function(n){let t=n.clipboardData;if(t){if(t.types.includes("text/html")){for(let e of t.types){let i=/^CorePasteboardFlavorType/.test(e),r=/^dyn\./.test(e)&&t.getData(e);if(i||r)return!0}return!1}{let e=t.types.includes("com.apple.webarchive"),i=t.types.includes("com.apple.flat-rtfd");return e||i}}},qi=class extends _e{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var e,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){let e=this.selectPlaceholder();e&&(this.forgetPlaceholder(),this.range=e)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(r=this.responder)===null||r===void 0||r.insertString(this.data.end),(s=this.responder)===null||s===void 0?void 0:s.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var e,i,r,s}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!aF.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,e;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((e=this.data.end)===null||e===void 0?void 0:e.length)>0&&this.range}};qi.proxyMethod("inputController.setInputSummary"),qi.proxyMethod("inputController.requestRender"),qi.proxyMethod("inputController.requestReparse"),qi.proxyMethod("responder?.selectionIsExpanded"),qi.proxyMethod("responder?.insertPlaceholder"),qi.proxyMethod("responder?.selectPlaceholder"),qi.proxyMethod("responder?.forgetPlaceholder");var No=class extends tl{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidAllowUnhandledInput)===null||e===void 0?void 0:e.call(t):void 0:this.reparse();var t,e}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,e;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(e=this.delegate)===null||e===void 0||e.render(),(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.insertString(e,i)})}toggleAttributeIfSupported(t){var e;if(Hm().includes(t))return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,e){var i;if(Hm().includes(t))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.setCurrentAttribute(t,e)})}deleteInDirection(t){let{recordUndoEntry:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;e&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());let r=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(t)},s=this.getTargetDOMRange({minLength:this.composing?1:2});return s?this.withTargetDOMRange(s,r):r()}withTargetDOMRange(t,e){var i;return typeof t=="function"&&(e=t,t=this.getTargetDOMRange()),t?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(t,e.bind(this)):(Lo.reset(),e.call(this))}getTargetDOMRange(){var t,e;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},r=(t=(e=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(e);if(r&&r.length){let s=fF(r[0]);if(i===0||s.toString().length>=i)return s}}withEvent(t,e){let i;this.event=t;try{i=e.call(this)}finally{this.event=null}return i}};xn(No,"events",{keydown(n){if(PC(n)){var t;let e=mF(n);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(e)&&n.preventDefault()}else{let e=n.key;n.altKey&&(e+="+Alt"),n.shiftKey&&(e+="+Shift");let i=this.constructor.keys[e];if(i)return this.withEvent(n,i)}},paste(n){var t;let e,i=(t=n.clipboardData)===null||t===void 0?void 0:t.getData("URL");return QC(n)?(n.preventDefault(),this.attachFiles(n.clipboardData.files)):pF(n)?(n.preventDefault(),e={type:"text/plain",string:n.clipboardData.getData("text/plain")},(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),(s=this.responder)===null||s===void 0||s.insertString(e.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(e)):i?(n.preventDefault(),e={type:"text/html",html:this.createLinkHTML(i)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),(l=this.responder)===null||l===void 0||l.insertHTML(e.html),this.render(),(c=this.delegate)===null||c===void 0?void 0:c.inputControllerDidPaste(e)):void 0;var r,s,o,a,l,c},beforeinput(n){let t=this.constructor.inputTypes[n.inputType],e=(i=n,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&i.inputType!=="insertParagraph"));var i;t&&(this.withEvent(n,t),e||this.scheduleRender()),e&&this.render()},input(n){Lo.reset()},dragstart(n){var t,e;(t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()&&(n.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange(),point:Dm(n)})},dragenter(n){Lm(n)&&n.preventDefault()},dragover(n){if(this.dragging){n.preventDefault();let e=Dm(n);var t;if(!nl(e,this.dragging.point))return this.dragging.point=e,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(e)}else Lm(n)&&n.preventDefault()},drop(n){var t,e;if(this.dragging)return n.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(e=this.responder)===null||e===void 0||e.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Lm(n)){var i;n.preventDefault();let r=Dm(n);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(r),this.attachFiles(n.dataTransfer.files)}},dragend(){var n;this.dragging&&((n=this.responder)===null||n===void 0||n.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(n){this.composing&&(this.composing=!1,tu.recentAndroid||this.scheduleRender())}}),xn(No,"keys",{ArrowLeft(){var n,t;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},ArrowRight(){var n,t;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},Backspace(){var n,t,e;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.deleteInDirection("backward"),this.render()},Tab(){var n,t;if((n=this.responder)!==null&&n!==void 0&&n.canIncreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()},"Tab+Shift"(){var n,t;if((n=this.responder)!==null&&n!==void 0&&n.canDecreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}),xn(No,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var n;this.deleteByDragRange=(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var n;if((n=this.responder)!==null&&n!==void 0&&n.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var n;if((n=this.responder)!==null&&n!==void 0&&n.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let e in(n=this.responder)===null||n===void 0?void 0:n.getCurrentAttributes()){var n,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(e)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var n;return(n=this.delegate)===null||n===void 0?void 0:n.inputControllerWillPerformRedo()},historyUndo(){var n;return(n=this.delegate)===null||n===void 0?void 0:n.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let n=this.deleteByDragRange;var t;if(n)return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.moveTextFromRange(n)})},insertFromPaste(){let{dataTransfer:n}=this.event,t={dataTransfer:n},e=n.getData("URL"),i=n.getData("text/html");if(e){var r;let l;this.event.preventDefault(),t.type="text/html";let c=n.getData("public.url-name");l=c?cb(c).trim():e,t.html=this.createLinkHTML(e,l),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var u;return(u=this.responder)===null||u===void 0?void 0:u.insertHTML(t.html)}),this.afterRender=()=>{var u;return(u=this.delegate)===null||u===void 0?void 0:u.inputControllerDidPaste(t)}}else if(IC(n)){var s;t.type="text/plain",t.string=n.getData("text/plain"),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(t.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(gF(this.event)){var o;t.type="File",t.file=n.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(t.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(i){var a;this.event.preventDefault(),t.type="text/html",t.html=i,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(t.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var n;return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){let n=this.event.dataTransfer.getData("text/plain"),t=this.event.getTargetRanges()[0];this.withTargetDOMRange(t,()=>{this.insertString(n,{updatePosition:!1})})},insertText(){var n;return this.insertString(this.event.data||((n=this.event.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var fF=function(n){let t=document.createRange();return t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),t},Lm=n=>{var t;return Array.from(((t=n.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},gF=n=>{var t;return((t=n.dataTransfer.files)===null||t===void 0?void 0:t[0])&&!QC(n)&&!(e=>{let{dataTransfer:i}=e;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(n)},QC=function(n){let t=n.clipboardData;if(t)return Array.from(t.types).filter(e=>e.match(/file/i)).length===t.types.length&&t.files.length>=1},pF=function(n){let t=n.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},mF=function(n){let t=[];return n.altKey&&t.push("alt"),n.shiftKey&&t.push("shift"),t.push(n.key),t},Dm=n=>({x:n.clientX,y:n.clientY}),Zm="[data-trix-attribute]",Qm="[data-trix-action]",bF="".concat(Zm,", ").concat(Qm),Bh="[data-trix-dialog]",_F="".concat(Bh,"[data-trix-active]"),xF="".concat(Bh," [data-trix-method]"),CC="".concat(Bh," [data-trix-input]"),AC=(n,t)=>(t||(t=ja(n)),n.querySelector("[data-trix-input][name='".concat(t,"']"))),EC=n=>n.getAttribute("data-trix-action"),ja=n=>n.getAttribute("data-trix-attribute")||n.getAttribute("data-trix-dialog-attribute"),Ph=class extends _e{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),ge("mousedown",{onElement:this.element,matchingSelector:Qm,withCallback:this.didClickActionButton}),ge("mousedown",{onElement:this.element,matchingSelector:Zm,withCallback:this.didClickAttributeButton}),ge("click",{onElement:this.element,matchingSelector:bF,preventDefault:!0}),ge("click",{onElement:this.element,matchingSelector:xF,withCallback:this.didClickDialogButton}),ge("keydown",{onElement:this.element,matchingSelector:CC,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,e){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();let r=EC(e);return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0?void 0:s.toolbarDidInvokeAction(r,e);var s}didClickAttributeButton(t,e){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();let r=ja(e);var s;return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0||s.toolbarDidToggleAttribute(r),this.refreshAttributeButtons()}didClickDialogButton(t,e){let i=ys(e,{matchingSelector:Bh});return this[e.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(t,e){if(t.keyCode===13){t.preventDefault();let i=e.getAttribute("name"),r=this.getDialog(i);this.setAttribute(r)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,e)=>{t.disabled=this.actions[e]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Qm)).map(e=>t(e,EC(e)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,e)=>(t.disabled=this.attributes[e]===!1,this.attributes[e]||this.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(Zm)).map(e=>t(e,ja(e)))}applyKeyboardCommand(t){let e=JSON.stringify(t.sort());for(let i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let r=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(r.sort())===e)return jc("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(t){let e=this.getDialog(t);if(e)return e.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var e,i;this.hideDialog(),(e=this.delegate)===null||e===void 0||e.toolbarWillShowDialog();let r=this.getDialog(t);r.setAttribute("data-trix-active",""),r.classList.add("trix-active"),Array.from(r.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let s=ja(r);if(s){let o=AC(r,t);o&&(o.value=this.attributes[s]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(t)}setAttribute(t){var e;let i=ja(t),r=AC(t,i);return!r.willValidate||(r.setCustomValidity(""),r.checkValidity()&&this.isSafeAttribute(r))?((e=this.delegate)===null||e===void 0||e.toolbarDidUpdateAttribute(i,r.value),this.hideDialog()):(r.setCustomValidity("Invalid value"),r.setAttribute("data-trix-validate",""),r.classList.add("trix-validate"),r.focus())}isSafeAttribute(t){return!t.hasAttribute("data-trix-validate-href")||xh.isValidAttribute("a","href",t.value)}removeAttribute(t){var e;let i=ja(t);return(e=this.delegate)===null||e===void 0||e.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){let t=this.element.querySelector(_F);var e;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(e=this.delegate)===null||e===void 0?void 0:e.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(CC)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}},ko=class extends Lh{constructor(t){let{editorElement:e,document:i,html:r}=t;super(...arguments),this.editorElement=e,this.selectionManager=new Dr(this.editorElement),this.selectionManager.delegate=this,this.composition=new Yi,this.composition.delegate=this,this.attachmentManager=new Eh(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=sb.getLevel()===2?new No(this.editorElement):new Si(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Rh(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Ph(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Nh(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(r)}registerSelectionManager(){return Lo.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Lo.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:e})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);let e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){let e=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:e})}compositionDidStartEditingAttachment(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)}compositionControllerDidRequestDeselectingAttachment(t){let e=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(e[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!bh(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,e){return this.invokeAction(t,e)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,e){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!((e=this.actions[t])===null||e===void 0||(e=e.test)===null||e===void 0||!e.call(this));var e}invokeAction(t,e){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:e}):(i=this.actions[t])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){let t={};for(let e in this.actions)t[e]=this.canInvokeAction(e);return t}updateCurrentActions(){let t=this.getCurrentActions();if(!nl(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(r=>{let{document:s,selectedRange:o}=t;t=r.call(this.editor,t)||{},t.document||(t.document=s),t.selectedRange||(t.selectedRange=o)}),e=t,i=this.composition.getSnapshot(),!bh(e.selectedRange,i.selectedRange)||!e.document.isEqualTo(i.document))return this.composition.loadSnapshot(t);var e,i}updateInputElement(){let t=function(e,i){let r=YP[i];if(r)return r(e);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(t)}notifyEditorElement(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){let e=Se(t),i=this.selectionManager.getLocationRange();if(e||!Ir(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(e)]}getLocationContext(){let t=this.selectionManager.getLocationRange();return Ir(t)?t[0].index:t}getTimeContext(){return $m.interval>0?Math.floor(new Date().getTime()/$m.interval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};xn(ko,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return sb.pickFiles(this.editor.insertFiles)}}}),ko.proxyMethod("getSelectionManager().setLocationRange"),ko.proxyMethod("getSelectionManager().getLocationRange");var yF=Object.freeze({__proto__:null,AttachmentEditorController:Mh,CompositionController:Rh,Controller:Lh,EditorController:ko,InputController:tl,Level0InputController:Si,Level2InputController:No,ToolbarController:Ph}),vF=Object.freeze({__proto__:null,MutationObserver:Dh,SelectionChangeObserver:_h}),SF=Object.freeze({__proto__:null,FileVerificationOperation:Ih,ImagePreloadOperation:Ah});DC("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var Fh=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=LC.getDefaultHTML())}},CF=0,AF=function(n){if(!n.hasAttribute("contenteditable"))return n.setAttribute("contenteditable",""),function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.times=1,ge(t,e)}("focus",{onElement:n,withCallback:()=>EF(n)})},EF=function(n){return TF(n),wF(n)},TF=function(n){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),ge("mscontrolselect",{onElement:n,preventDefault:!0})},wF=function(n){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"DefaultParagraphSeparator")){let{tagName:i}=_n.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},TC=tu.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};DC("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(To,` figcaption textarea {
    resize: none;
}

%t `).concat(To,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(To,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(TC.display,` !important;
    width: `).concat(TC.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Lr=new WeakMap,Uc=new WeakSet,tb=class{constructor(t){var e,i;jC(e=this,i=Uc),i.add(e),Yc(this,Lr,{writable:!0,value:void 0}),this.element=t,ub(this,Lr,t.attachInternals())}connectedCallback(){dh(this,Uc,hh).call(this)}disconnectedCallback(){}get labels(){return ee(this,Lr).labels}get disabled(){var t;return(t=this.element.inputElement)===null||t===void 0?void 0:t.disabled}set disabled(t){this.element.toggleAttribute("disabled",t)}get required(){return this.element.hasAttribute("required")}set required(t){this.element.toggleAttribute("required",t),dh(this,Uc,hh).call(this)}get validity(){return ee(this,Lr).validity}get validationMessage(){return ee(this,Lr).validationMessage}get willValidate(){return ee(this,Lr).willValidate}setFormValue(t){dh(this,Uc,hh).call(this)}checkValidity(){return ee(this,Lr).checkValidity()}reportValidity(){return ee(this,Lr).reportValidity()}setCustomValidity(t){dh(this,Uc,hh).call(this,t)}};function hh(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",{required:t,value:e}=this.element,i=t&&!e,r=!!n,s=St("input",{required:t}),o=n||s.validationMessage;ee(this,Lr).setValidity({valueMissing:i,customError:r},o)}var Im=new WeakMap,Pm=new WeakMap,Fm=new WeakMap,eb=class{constructor(t){Yc(this,Im,{writable:!0,value:void 0}),Yc(this,Pm,{writable:!0,value:e=>{e.defaultPrevented||e.target===this.element.form&&this.element.reset()}}),Yc(this,Fm,{writable:!0,value:e=>{if(e.defaultPrevented||this.element.contains(e.target))return;let i=ys(e.target,{matchingSelector:"label"});i&&Array.from(this.labels).includes(i)&&this.element.focus()}}),this.element=t}connectedCallback(){ub(this,Im,function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;let e=function(){let i=Array.from(t.labels).map(s=>{if(!s.contains(t))return s.textContent}).filter(s=>s),r=i.join(" ");return r?t.setAttribute("aria-label",r):t.removeAttribute("aria-label")};return e(),ge("focus",{onElement:t,withCallback:e})}(this.element)),window.addEventListener("reset",ee(this,Pm),!1),window.addEventListener("click",ee(this,Fm),!1)}disconnectedCallback(){var t;(t=ee(this,Im))===null||t===void 0||t.destroy(),window.removeEventListener("reset",ee(this,Pm),!1),window.removeEventListener("click",ee(this,Fm),!1)}get labels(){let t=[];this.element.id&&this.element.ownerDocument&&t.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));let e=ys(this.element,{matchingSelector:"label"});return e&&[this.element,null].includes(e.control)&&t.push(e),t}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(t){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(t){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(t){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(t){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}},ln=new WeakMap,el=class extends HTMLElement{constructor(){super(),Yc(this,ln,{writable:!0,value:void 0}),ub(this,ln,this.constructor.formAssociated?new tb(this):new eb(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++CF),this.trixId)}get labels(){return ee(this,ln).labels}get disabled(){return ee(this,ln).disabled}set disabled(t){ee(this,ln).disabled=t}get required(){return ee(this,ln).required}set required(t){ee(this,ln).required=t}get validity(){return ee(this,ln).validity}get validationMessage(){return ee(this,ln).validationMessage}get willValidate(){return ee(this,ln).willValidate}get type(){return this.localName}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let e="trix-toolbar-".concat(this.trixId);return this.setAttribute("toolbar",e),this.internalToolbar=St("trix-toolbar",{id:e}),this.parentNode.insertBefore(this.internalToolbar,this),this.internalToolbar}}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){let e="trix-input-".concat(this.trixId);this.setAttribute("input",e);let i=St("input",{type:"hidden",id:e});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var e;this.defaultValue=t,(e=this.editor)===null||e===void 0||e.loadHTML(this.defaultValue)}attributeChangedCallback(t,e,i){t==="connected"&&this.isConnected&&e!=null&&e!==i&&requestAnimationFrame(()=>this.reconnect())}notify(t,e){if(this.editorController)return jc("trix-".concat(t),{onElement:this,attributes:e})}setFormValue(t){this.inputElement&&(this.inputElement.value=t,ee(this,ln).setFormValue(t))}connectedCallback(){this.hasAttribute("data-trix-internal")||(AF(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),this.editorController||(jc("trix-before-initialize",{onElement:this}),this.editorController=new ko({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>jc("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),ee(this,ln).connectedCallback(),this.toggleAttribute("connected",!0),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),ee(this,ln).disconnectedCallback(),this.toggleAttribute("connected",!1)}reconnect(){this.removeInternalToolbar(),this.disconnectedCallback(),this.connectedCallback()}removeInternalToolbar(){var t;(t=this.internalToolbar)===null||t===void 0||t.remove(),this.internalToolbar=null}checkValidity(){return ee(this,ln).checkValidity()}reportValidity(){return ee(this,ln).reportValidity()}setCustomValidity(t){ee(this,ln).setCustomValidity(t)}formDisabledCallback(t){this.inputElement&&(this.inputElement.disabled=t),this.toggleAttribute("contenteditable",!t)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};xn(el,"formAssociated","ElementInternals"in window),xn(el,"observedAttributes",["connected"]);var wC={VERSION:LI,config:eu,core:JP,models:JC,views:eF,controllers:yF,observers:vF,operations:SF,elements:Object.freeze({__proto__:null,TrixEditorElement:el,TrixToolbarElement:Fh}),filters:Object.freeze({__proto__:null,Filter:wh,attachmentGalleryFilter:qC})};Object.assign(wC,JC),window.Trix=wC,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Fh),customElements.get("trix-editor")||customElements.define("trix-editor",el)},0);var AI=So(tA());var _b=!1,xb=!1,Fo=[],yb=-1;function NF(n){kF(n)}function kF(n){Fo.includes(n)||Fo.push(n),MF()}function OF(n){let t=Fo.indexOf(n);t!==-1&&t>yb&&Fo.splice(t,1)}function MF(){!xb&&!_b&&(_b=!0,queueMicrotask(RF))}function RF(){_b=!1,xb=!0;for(let n=0;n<Fo.length;n++)Fo[n](),yb=n;Fo.length=0,yb=-1,xb=!1}var sl,Wo,ol,pA,vb=!0;function LF(n){vb=!1,n(),vb=!0}function DF(n){sl=n.reactive,ol=n.release,Wo=t=>n.effect(t,{scheduler:e=>{vb?NF(e):e()}}),pA=n.raw}function eA(n){Wo=n}function IF(n){let t=()=>{};return[i=>{let r=Wo(i);return n._x_effects||(n._x_effects=new Set,n._x_runEffects=()=>{n._x_effects.forEach(s=>s())}),n._x_effects.add(r),t=()=>{r!==void 0&&(n._x_effects.delete(r),ol(r))},r},()=>{t()}]}function mA(n,t){let e=!0,i,r=Wo(()=>{let s=n();JSON.stringify(s),e?i=s:queueMicrotask(()=>{t(s,i),i=s}),e=!1});return()=>ol(r)}var bA=[],_A=[],xA=[];function PF(n){xA.push(n)}function Ib(n,t){typeof t=="function"?(n._x_cleanups||(n._x_cleanups=[]),n._x_cleanups.push(t)):(t=n,_A.push(t))}function yA(n){bA.push(n)}function vA(n,t,e){n._x_attributeCleanups||(n._x_attributeCleanups={}),n._x_attributeCleanups[t]||(n._x_attributeCleanups[t]=[]),n._x_attributeCleanups[t].push(e)}function SA(n,t){n._x_attributeCleanups&&Object.entries(n._x_attributeCleanups).forEach(([e,i])=>{(t===void 0||t.includes(e))&&(i.forEach(r=>r()),delete n._x_attributeCleanups[e])})}function FF(n){for(n._x_effects?.forEach(OF);n._x_cleanups?.length;)n._x_cleanups.pop()()}var Pb=new MutationObserver(zb),Fb=!1;function $b(){Pb.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Fb=!0}function CA(){$F(),Pb.disconnect(),Fb=!1}var nu=[];function $F(){let n=Pb.takeRecords();nu.push(()=>n.length>0&&zb(n));let t=nu.length;queueMicrotask(()=>{if(nu.length===t)for(;nu.length>0;)nu.shift()()})}function pe(n){if(!Fb)return n();CA();let t=n();return $b(),t}var Bb=!1,Gh=[];function BF(){Bb=!0}function zF(){Bb=!1,zb(Gh),Gh=[]}function zb(n){if(Bb){Gh=Gh.concat(n);return}let t=[],e=new Set,i=new Map,r=new Map;for(let s=0;s<n.length;s++)if(!n[s].target._x_ignoreMutationObserver&&(n[s].type==="childList"&&(n[s].removedNodes.forEach(o=>{o.nodeType===1&&o._x_marker&&e.add(o)}),n[s].addedNodes.forEach(o=>{if(o.nodeType===1){if(e.has(o)){e.delete(o);return}o._x_marker||t.push(o)}})),n[s].type==="attributes")){let o=n[s].target,a=n[s].attributeName,l=n[s].oldValue,c=()=>{i.has(o)||i.set(o,[]),i.get(o).push({name:a,value:o.getAttribute(a)})},u=()=>{r.has(o)||r.set(o,[]),r.get(o).push(a)};o.hasAttribute(a)&&l===null?c():o.hasAttribute(a)?(u(),c()):u()}r.forEach((s,o)=>{SA(o,s)}),i.forEach((s,o)=>{bA.forEach(a=>a(o,s))});for(let s of e)t.some(o=>o.contains(s))||_A.forEach(o=>o(s));for(let s of t)s.isConnected&&xA.forEach(o=>o(s));t=null,e=null,i=null,r=null}function AA(n){return uu(il(n))}function cu(n,t,e){return n._x_dataStack=[t,...il(e||n)],()=>{n._x_dataStack=n._x_dataStack.filter(i=>i!==t)}}function il(n){return n._x_dataStack?n._x_dataStack:typeof ShadowRoot=="function"&&n instanceof ShadowRoot?il(n.host):n.parentNode?il(n.parentNode):[]}function uu(n){return new Proxy({objects:n},HF)}var HF={ownKeys({objects:n}){return Array.from(new Set(n.flatMap(t=>Object.keys(t))))},has({objects:n},t){return t==Symbol.unscopables?!1:n.some(e=>Object.prototype.hasOwnProperty.call(e,t)||Reflect.has(e,t))},get({objects:n},t,e){return t=="toJSON"?WF:Reflect.get(n.find(i=>Reflect.has(i,t))||{},t,e)},set({objects:n},t,e,i){let r=n.find(o=>Object.prototype.hasOwnProperty.call(o,t))||n[n.length-1],s=Object.getOwnPropertyDescriptor(r,t);return s?.set&&s?.get?s.set.call(i,e)||!0:Reflect.set(r,t,e)}};function WF(){return Reflect.ownKeys(this).reduce((t,e)=>(t[e]=Reflect.get(this,e),t),{})}function EA(n){let t=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,e=(i,r="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([s,{value:o,enumerable:a}])=>{if(a===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let l=r===""?s:`${r}.${s}`;typeof o=="object"&&o!==null&&o._x_interceptor?i[s]=o.initialize(n,l,s):t(o)&&o!==i&&!(o instanceof Element)&&e(o,l)})};return e(n)}function TA(n,t=()=>{}){let e={initialValue:void 0,_x_interceptor:!0,initialize(i,r,s){return n(this.initialValue,()=>UF(i,r),o=>Sb(i,r,o),r,s)}};return t(e),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let r=e.initialize.bind(e);e.initialize=(s,o,a)=>{let l=i.initialize(s,o,a);return e.initialValue=l,r(s,o,a)}}else e.initialValue=i;return e}}function UF(n,t){return t.split(".").reduce((e,i)=>e[i],n)}function Sb(n,t,e){if(typeof t=="string"&&(t=t.split(".")),t.length===1)n[t[0]]=e;else{if(t.length===0)throw error;return n[t[0]]||(n[t[0]]={}),Sb(n[t[0]],t.slice(1),e)}}var wA={};function Ei(n,t){wA[n]=t}function Cb(n,t){let e=KF(t);return Object.entries(wA).forEach(([i,r])=>{Object.defineProperty(n,`$${i}`,{get(){return r(t,e)},enumerable:!1})}),n}function KF(n){let[t,e]=LA(n),i={interceptor:TA,...t};return Ib(n,e),i}function jF(n,t,e,...i){try{return e(...i)}catch(r){lu(r,n,t)}}function lu(n,t,e=void 0){n=Object.assign(n??{message:"No error message given."},{el:t,expression:e}),console.warn(`Alpine Expression Error: ${n.message}

${e?'Expression: "'+e+`"

`:""}`,t),setTimeout(()=>{throw n},0)}var jh=!0;function NA(n){let t=jh;jh=!1;let e=n();return jh=t,e}function $o(n,t,e={}){let i;return Sn(n,t)(r=>i=r,e),i}function Sn(...n){return kA(...n)}var kA=OA;function VF(n){kA=n}function OA(n,t){let e={};Cb(e,n);let i=[e,...il(n)],r=typeof t=="function"?GF(i,t):YF(i,t,n);return jF.bind(null,n,t,r)}function GF(n,t){return(e=()=>{},{scope:i={},params:r=[]}={})=>{let s=t.apply(uu([i,...n]),r);qh(e,s)}}var fb={};function qF(n,t){if(fb[n])return fb[n];let e=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(n.trim())||/^(let|const)\s/.test(n.trim())?`(async()=>{ ${n} })()`:n,s=(()=>{try{let o=new e(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${n}`}),o}catch(o){return lu(o,t,n),Promise.resolve()}})();return fb[n]=s,s}function YF(n,t,e){let i=qF(t,e);return(r=()=>{},{scope:s={},params:o=[]}={})=>{i.result=void 0,i.finished=!1;let a=uu([s,...n]);if(typeof i=="function"){let l=i(i,a).catch(c=>lu(c,e,t));i.finished?(qh(r,i.result,a,o,e),i.result=void 0):l.then(c=>{qh(r,c,a,o,e)}).catch(c=>lu(c,e,t)).finally(()=>i.result=void 0)}}}function qh(n,t,e,i,r){if(jh&&typeof t=="function"){let s=t.apply(e,i);s instanceof Promise?s.then(o=>qh(n,o,e,i)).catch(o=>lu(o,r,t)):n(s)}else typeof t=="object"&&t instanceof Promise?t.then(s=>n(s)):n(t)}var Hb="x-";function al(n=""){return Hb+n}function JF(n){Hb=n}var Yh={};function Ee(n,t){return Yh[n]=t,{before(e){if(!Yh[e]){console.warn(String.raw`Cannot find directive \`${e}\`. \`${n}\` will use the default order of execution`);return}let i=Po.indexOf(e);Po.splice(i>=0?i:Po.indexOf("DEFAULT"),0,n)}}}function XF(n){return Object.keys(Yh).includes(n)}function Wb(n,t,e){if(t=Array.from(t),n._x_virtualDirectives){let s=Object.entries(n._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=MA(s);s=s.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),t=t.concat(s)}let i={};return t.map(PA((s,o)=>i[s]=o)).filter($A).map(t2(i,e)).sort(e2).map(s=>QF(n,s))}function MA(n){return Array.from(n).map(PA()).filter(t=>!$A(t))}var Ab=!1,su=new Map,RA=Symbol();function ZF(n){Ab=!0;let t=Symbol();RA=t,su.set(t,[]);let e=()=>{for(;su.get(t).length;)su.get(t).shift()();su.delete(t)},i=()=>{Ab=!1,e()};n(e),i()}function LA(n){let t=[],e=a=>t.push(a),[i,r]=IF(n);return t.push(r),[{Alpine:du,effect:i,cleanup:e,evaluateLater:Sn.bind(Sn,n),evaluate:$o.bind($o,n)},()=>t.forEach(a=>a())]}function QF(n,t){let e=()=>{},i=Yh[t.type]||e,[r,s]=LA(n);vA(n,t.original,s);let o=()=>{n._x_ignore||n._x_ignoreSelf||(i.inline&&i.inline(n,t,r),i=i.bind(i,n,t,r),Ab?su.get(RA).push(i):i())};return o.runCleanups=s,o}var DA=(n,t)=>({name:e,value:i})=>(e.startsWith(n)&&(e=e.replace(n,t)),{name:e,value:i}),IA=n=>n;function PA(n=()=>{}){return({name:t,value:e})=>{let{name:i,value:r}=FA.reduce((s,o)=>o(s),{name:t,value:e});return i!==t&&n(i,t),{name:i,value:r}}}var FA=[];function Ub(n){FA.push(n)}function $A({name:n}){return BA().test(n)}var BA=()=>new RegExp(`^${Hb}([^:^.]+)\\b`);function t2(n,t){return({name:e,value:i})=>{let r=e.match(BA()),s=e.match(/:([a-zA-Z0-9\-_:]+)/),o=e.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=t||n[e]||e;return{type:r?r[1]:null,value:s?s[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:i,original:a}}}var Eb="DEFAULT",Po=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Eb,"teleport"];function e2(n,t){let e=Po.indexOf(n.type)===-1?Eb:n.type,i=Po.indexOf(t.type)===-1?Eb:t.type;return Po.indexOf(e)-Po.indexOf(i)}function ou(n,t,e={}){n.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0,cancelable:!0}))}function Ho(n,t){if(typeof ShadowRoot=="function"&&n instanceof ShadowRoot){Array.from(n.children).forEach(r=>Ho(r,t));return}let e=!1;if(t(n,()=>e=!0),e)return;let i=n.firstElementChild;for(;i;)Ho(i,t,!1),i=i.nextElementSibling}function ui(n,...t){console.warn(`Alpine Warning: ${n}`,...t)}var nA=!1;function n2(){nA&&ui("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),nA=!0,document.body||ui("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ou(document,"alpine:init"),ou(document,"alpine:initializing"),$b(),PF(t=>Br(t,Ho)),Ib(t=>cl(t)),yA((t,e)=>{Wb(t,e).forEach(i=>i())});let n=t=>!Xh(t.parentElement,!0);Array.from(document.querySelectorAll(WA().join(","))).filter(n).forEach(t=>{Br(t)}),ou(document,"alpine:initialized"),setTimeout(()=>{o2()})}var Kb=[],zA=[];function HA(){return Kb.map(n=>n())}function WA(){return Kb.concat(zA).map(n=>n())}function UA(n){Kb.push(n)}function KA(n){zA.push(n)}function Xh(n,t=!1){return ll(n,e=>{if((t?WA():HA()).some(r=>e.matches(r)))return!0})}function ll(n,t){if(n){if(t(n))return n;if(n._x_teleportBack&&(n=n._x_teleportBack),!!n.parentElement)return ll(n.parentElement,t)}}function i2(n){return HA().some(t=>n.matches(t))}var jA=[];function r2(n){jA.push(n)}var s2=1;function Br(n,t=Ho,e=()=>{}){ll(n,i=>i._x_ignore)||ZF(()=>{t(n,(i,r)=>{i._x_marker||(e(i,r),jA.forEach(s=>s(i,r)),Wb(i,i.attributes).forEach(s=>s()),i._x_ignore||(i._x_marker=s2++),i._x_ignore&&r())})})}function cl(n,t=Ho){t(n,e=>{FF(e),SA(e),delete e._x_marker})}function o2(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,e,i])=>{XF(e)||i.some(r=>{if(document.querySelector(r))return ui(`found "${r}", but missing ${t} plugin`),!0})})}var Tb=[],jb=!1;function Vb(n=()=>{}){return queueMicrotask(()=>{jb||setTimeout(()=>{wb()})}),new Promise(t=>{Tb.push(()=>{n(),t()})})}function wb(){for(jb=!1;Tb.length;)Tb.shift()()}function a2(){jb=!0}function Gb(n,t){return Array.isArray(t)?iA(n,t.join(" ")):typeof t=="object"&&t!==null?l2(n,t):typeof t=="function"?Gb(n,t()):iA(n,t)}function iA(n,t){let e=s=>s.split(" ").filter(Boolean),i=s=>s.split(" ").filter(o=>!n.classList.contains(o)).filter(Boolean),r=s=>(n.classList.add(...s),()=>{n.classList.remove(...s)});return t=t===!0?t="":t||"",r(i(t))}function l2(n,t){let e=a=>a.split(" ").filter(Boolean),i=Object.entries(t).flatMap(([a,l])=>l?e(a):!1).filter(Boolean),r=Object.entries(t).flatMap(([a,l])=>l?!1:e(a)).filter(Boolean),s=[],o=[];return r.forEach(a=>{n.classList.contains(a)&&(n.classList.remove(a),o.push(a))}),i.forEach(a=>{n.classList.contains(a)||(n.classList.add(a),s.push(a))}),()=>{o.forEach(a=>n.classList.add(a)),s.forEach(a=>n.classList.remove(a))}}function Zh(n,t){return typeof t=="object"&&t!==null?c2(n,t):u2(n,t)}function c2(n,t){let e={};return Object.entries(t).forEach(([i,r])=>{e[i]=n.style[i],i.startsWith("--")||(i=d2(i)),n.style.setProperty(i,r)}),setTimeout(()=>{n.style.length===0&&n.removeAttribute("style")}),()=>{Zh(n,e)}}function u2(n,t){let e=n.getAttribute("style",t);return n.setAttribute("style",t),()=>{n.setAttribute("style",e||"")}}function d2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nb(n,t=()=>{}){let e=!1;return function(){e?t.apply(this,arguments):(e=!0,n.apply(this,arguments))}}Ee("transition",(n,{value:t,modifiers:e,expression:i},{evaluate:r})=>{typeof i=="function"&&(i=r(i)),i!==!1&&(!i||typeof i=="boolean"?f2(n,e,t):h2(n,i,t))});function h2(n,t,e){VA(n,Gb,""),{enter:r=>{n._x_transition.enter.during=r},"enter-start":r=>{n._x_transition.enter.start=r},"enter-end":r=>{n._x_transition.enter.end=r},leave:r=>{n._x_transition.leave.during=r},"leave-start":r=>{n._x_transition.leave.start=r},"leave-end":r=>{n._x_transition.leave.end=r}}[e](t)}function f2(n,t,e){VA(n,Zh);let i=!t.includes("in")&&!t.includes("out")&&!e,r=i||t.includes("in")||["enter"].includes(e),s=i||t.includes("out")||["leave"].includes(e);t.includes("in")&&!i&&(t=t.filter((b,_)=>_<t.indexOf("out"))),t.includes("out")&&!i&&(t=t.filter((b,_)=>_>t.indexOf("out")));let o=!t.includes("opacity")&&!t.includes("scale"),a=o||t.includes("opacity"),l=o||t.includes("scale"),c=a?0:1,u=l?iu(t,"scale",95)/100:1,d=iu(t,"delay",0)/1e3,h=iu(t,"origin","center"),f="opacity, transform",g=iu(t,"duration",150)/1e3,m=iu(t,"duration",75)/1e3,p="cubic-bezier(0.4, 0.0, 0.2, 1)";r&&(n._x_transition.enter.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:f,transitionDuration:`${g}s`,transitionTimingFunction:p},n._x_transition.enter.start={opacity:c,transform:`scale(${u})`},n._x_transition.enter.end={opacity:1,transform:"scale(1)"}),s&&(n._x_transition.leave.during={transformOrigin:h,transitionDelay:`${d}s`,transitionProperty:f,transitionDuration:`${m}s`,transitionTimingFunction:p},n._x_transition.leave.start={opacity:1,transform:"scale(1)"},n._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}function VA(n,t,e={}){n._x_transition||(n._x_transition={enter:{during:e,start:e,end:e},leave:{during:e,start:e,end:e},in(i=()=>{},r=()=>{}){kb(n,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,r)},out(i=()=>{},r=()=>{}){kb(n,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,r)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(n,t,e,i){let r=document.visibilityState==="visible"?requestAnimationFrame:setTimeout,s=()=>r(e);if(t){n._x_transition&&(n._x_transition.enter||n._x_transition.leave)?n._x_transition.enter&&(Object.entries(n._x_transition.enter.during).length||Object.entries(n._x_transition.enter.start).length||Object.entries(n._x_transition.enter.end).length)?n._x_transition.in(e):s():n._x_transition?n._x_transition.in(e):s();return}n._x_hidePromise=n._x_transition?new Promise((o,a)=>{n._x_transition.out(()=>{},()=>o(i)),n._x_transitioning&&n._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let o=GA(n);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(n)):r(()=>{let a=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([u])=>u?.());return delete l._x_hidePromise,delete l._x_hideChildren,c};a(n).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function GA(n){let t=n.parentNode;if(t)return t._x_hidePromise?t:GA(t)}function kb(n,t,{during:e,start:i,end:r}={},s=()=>{},o=()=>{}){if(n._x_transitioning&&n._x_transitioning.cancel(),Object.keys(e).length===0&&Object.keys(i).length===0&&Object.keys(r).length===0){s(),o();return}let a,l,c;g2(n,{start(){a=t(n,i)},during(){l=t(n,e)},before:s,end(){a(),c=t(n,r)},after:o,cleanup(){l(),c()}})}function g2(n,t){let e,i,r,s=Nb(()=>{pe(()=>{e=!0,i||t.before(),r||(t.end(),wb()),t.after(),n.isConnected&&t.cleanup(),delete n._x_transitioning})});n._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:Nb(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();s()}),finish:s},pe(()=>{t.start(),t.during()}),a2(),requestAnimationFrame(()=>{if(e)return;let o=Number(getComputedStyle(n).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(n).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(n).animationDuration.replace("s",""))*1e3),pe(()=>{t.before()}),i=!0,requestAnimationFrame(()=>{e||(pe(()=>{t.end()}),wb(),setTimeout(n._x_transitioning.finish,o+a),r=!0)})})}function iu(n,t,e){if(n.indexOf(t)===-1)return e;let i=n[n.indexOf(t)+1];if(!i||t==="scale"&&isNaN(i))return e;if(t==="duration"||t==="delay"){let r=i.match(/([0-9]+)ms/);if(r)return r[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(n[n.indexOf(t)+2])?[i,n[n.indexOf(t)+2]].join(" "):i}var Cs=!1;function Es(n,t=()=>{}){return(...e)=>Cs?t(...e):n(...e)}function p2(n){return(...t)=>Cs&&n(...t)}var qA=[];function Qh(n){qA.push(n)}function m2(n,t){qA.forEach(e=>e(n,t)),Cs=!0,YA(()=>{Br(t,(e,i)=>{i(e,()=>{})})}),Cs=!1}var Ob=!1;function b2(n,t){t._x_dataStack||(t._x_dataStack=n._x_dataStack),Cs=!0,Ob=!0,YA(()=>{_2(t)}),Cs=!1,Ob=!1}function _2(n){let t=!1;Br(n,(i,r)=>{Ho(i,(s,o)=>{if(t&&i2(s))return o();t=!0,r(s,o)})})}function YA(n){let t=Wo;eA((e,i)=>{let r=t(e);return ol(r),()=>{}}),n(),eA(t)}function JA(n,t,e,i=[]){switch(n._x_bindings||(n._x_bindings=sl({})),n._x_bindings[t]=e,t=i.includes("camel")?T2(t):t,t){case"value":x2(n,e);break;case"style":v2(n,e);break;case"class":y2(n,e);break;case"selected":case"checked":S2(n,t,e);break;default:XA(n,t,e);break}}function x2(n,t){if(tE(n))n.attributes.value===void 0&&(n.value=t),window.fromModel&&(typeof t=="boolean"?n.checked=Vh(n.value)===t:n.checked=rA(n.value,t));else if(qb(n))Number.isInteger(t)?n.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?n.value=String(t):Array.isArray(t)?n.checked=t.some(e=>rA(e,n.value)):n.checked=!!t;else if(n.tagName==="SELECT")E2(n,t);else{if(n.value===t)return;n.value=t===void 0?"":t}}function y2(n,t){n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedClasses=Gb(n,t)}function v2(n,t){n._x_undoAddedStyles&&n._x_undoAddedStyles(),n._x_undoAddedStyles=Zh(n,t)}function S2(n,t,e){XA(n,t,e),A2(n,t,e)}function XA(n,t,e){[null,void 0,!1].includes(e)&&N2(t)?n.removeAttribute(t):(ZA(t)&&(e=t),C2(n,t,e))}function C2(n,t,e){n.getAttribute(t)!=e&&n.setAttribute(t,e)}function A2(n,t,e){n[t]!==e&&(n[t]=e)}function E2(n,t){let e=[].concat(t).map(i=>i+"");Array.from(n.options).forEach(i=>{i.selected=e.includes(i.value)})}function T2(n){return n.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function rA(n,t){return n==t}function Vh(n){return[1,"1","true","on","yes",!0].includes(n)?!0:[0,"0","false","off","no",!1].includes(n)?!1:n?!!n:null}var w2=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function ZA(n){return w2.has(n)}function N2(n){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(n)}function k2(n,t,e){return n._x_bindings&&n._x_bindings[t]!==void 0?n._x_bindings[t]:QA(n,t,e)}function O2(n,t,e,i=!0){if(n._x_bindings&&n._x_bindings[t]!==void 0)return n._x_bindings[t];if(n._x_inlineBindings&&n._x_inlineBindings[t]!==void 0){let r=n._x_inlineBindings[t];return r.extract=i,NA(()=>$o(n,r.expression))}return QA(n,t,e)}function QA(n,t,e){let i=n.getAttribute(t);return i===null?typeof e=="function"?e():e:i===""?!0:ZA(t)?!![t,"true"].includes(i):i}function qb(n){return n.type==="checkbox"||n.localName==="ui-checkbox"||n.localName==="ui-switch"}function tE(n){return n.type==="radio"||n.localName==="ui-radio"}function eE(n,t){var e;return function(){var i=this,r=arguments,s=function(){e=null,n.apply(i,r)};clearTimeout(e),e=setTimeout(s,t)}}function nE(n,t){let e;return function(){let i=this,r=arguments;e||(n.apply(i,r),e=!0,setTimeout(()=>e=!1,t))}}function iE({get:n,set:t},{get:e,set:i}){let r=!0,s,o,a=Wo(()=>{let l=n(),c=e();if(r)i(gb(l)),r=!1;else{let u=JSON.stringify(l),d=JSON.stringify(c);u!==s?i(gb(l)):u!==d&&t(gb(c))}s=JSON.stringify(n()),o=JSON.stringify(e())});return()=>{ol(a)}}function gb(n){return typeof n=="object"?JSON.parse(JSON.stringify(n)):n}function M2(n){(Array.isArray(n)?n:[n]).forEach(e=>e(du))}var Io={},sA=!1;function R2(n,t){if(sA||(Io=sl(Io),sA=!0),t===void 0)return Io[n];Io[n]=t,EA(Io[n]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&Io[n].init()}function L2(){return Io}var rE={};function D2(n,t){let e=typeof t!="function"?()=>t:t;return n instanceof Element?sE(n,e()):(rE[n]=e,()=>{})}function I2(n){return Object.entries(rE).forEach(([t,e])=>{Object.defineProperty(n,t,{get(){return(...i)=>e(...i)}})}),n}function sE(n,t,e){let i=[];for(;i.length;)i.pop()();let r=Object.entries(t).map(([o,a])=>({name:o,value:a})),s=MA(r);return r=r.map(o=>s.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),Wb(n,r,e).map(o=>{i.push(o.runCleanups),o()}),()=>{for(;i.length;)i.pop()()}}var oE={};function P2(n,t){oE[n]=t}function F2(n,t){return Object.entries(oE).forEach(([e,i])=>{Object.defineProperty(n,e,{get(){return(...r)=>i.bind(t)(...r)},enumerable:!1})}),n}var $2={get reactive(){return sl},get release(){return ol},get effect(){return Wo},get raw(){return pA},version:"3.14.9",flushAndStopDeferringMutations:zF,dontAutoEvaluateFunctions:NA,disableEffectScheduling:LF,startObservingMutations:$b,stopObservingMutations:CA,setReactivityEngine:DF,onAttributeRemoved:vA,onAttributesAdded:yA,closestDataStack:il,skipDuringClone:Es,onlyDuringClone:p2,addRootSelector:UA,addInitSelector:KA,interceptClone:Qh,addScopeToNode:cu,deferMutations:BF,mapAttributes:Ub,evaluateLater:Sn,interceptInit:r2,setEvaluator:VF,mergeProxies:uu,extractProp:O2,findClosest:ll,onElRemoved:Ib,closestRoot:Xh,destroyTree:cl,interceptor:TA,transition:kb,setStyles:Zh,mutateDom:pe,directive:Ee,entangle:iE,throttle:nE,debounce:eE,evaluate:$o,initTree:Br,nextTick:Vb,prefixed:al,prefix:JF,plugin:M2,magic:Ei,store:R2,start:n2,clone:b2,cloneNode:m2,bound:k2,$data:AA,watch:mA,walk:Ho,data:P2,bind:D2},du=$2;function aE(n,t){let e=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)e[i[r]]=!0;return t?r=>!!e[r.toLowerCase()]:r=>!!e[r]}var B2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F8=aE(B2+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),z2=Object.freeze({}),$8=Object.freeze([]),H2=Object.prototype.hasOwnProperty,tf=(n,t)=>H2.call(n,t),Bo=Array.isArray,au=n=>lE(n)==="[object Map]",W2=n=>typeof n=="string",Yb=n=>typeof n=="symbol",ef=n=>n!==null&&typeof n=="object",U2=Object.prototype.toString,lE=n=>U2.call(n),cE=n=>lE(n).slice(8,-1),Jb=n=>W2(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,nf=n=>{let t=Object.create(null);return e=>t[e]||(t[e]=n(e))},K2=/-(\w)/g,B8=nf(n=>n.replace(K2,(t,e)=>e?e.toUpperCase():"")),j2=/\B([A-Z])/g,z8=nf(n=>n.replace(j2,"-$1").toLowerCase()),uE=nf(n=>n.charAt(0).toUpperCase()+n.slice(1)),H8=nf(n=>n?`on${uE(n)}`:""),dE=(n,t)=>n!==t&&(n===n||t===t),Mb=new WeakMap,ru=[],Ji,zo=Symbol("iterate"),Rb=Symbol("Map key iterate");function V2(n){return n&&n._isEffect===!0}function G2(n,t=z2){V2(n)&&(n=n.raw);let e=J2(n,t);return t.lazy||e(),e}function q2(n){n.active&&(hE(n),n.options.onStop&&n.options.onStop(),n.active=!1)}var Y2=0;function J2(n,t){let e=function(){if(!e.active)return n();if(!ru.includes(e)){hE(e);try{return Z2(),ru.push(e),Ji=e,n()}finally{ru.pop(),fE(),Ji=ru[ru.length-1]}}};return e.id=Y2++,e.allowRecurse=!!t.allowRecurse,e._isEffect=!0,e.active=!0,e.raw=n,e.deps=[],e.options=t,e}function hE(n){let{deps:t}=n;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(n);t.length=0}}var rl=!0,Xb=[];function X2(){Xb.push(rl),rl=!1}function Z2(){Xb.push(rl),rl=!0}function fE(){let n=Xb.pop();rl=n===void 0?!0:n}function Ai(n,t,e){if(!rl||Ji===void 0)return;let i=Mb.get(n);i||Mb.set(n,i=new Map);let r=i.get(e);r||i.set(e,r=new Set),r.has(Ji)||(r.add(Ji),Ji.deps.push(r),Ji.options.onTrack&&Ji.options.onTrack({effect:Ji,target:n,type:t,key:e}))}function As(n,t,e,i,r,s){let o=Mb.get(n);if(!o)return;let a=new Set,l=u=>{u&&u.forEach(d=>{(d!==Ji||d.allowRecurse)&&a.add(d)})};if(t==="clear")o.forEach(l);else if(e==="length"&&Bo(n))o.forEach((u,d)=>{(d==="length"||d>=i)&&l(u)});else switch(e!==void 0&&l(o.get(e)),t){case"add":Bo(n)?Jb(e)&&l(o.get("length")):(l(o.get(zo)),au(n)&&l(o.get(Rb)));break;case"delete":Bo(n)||(l(o.get(zo)),au(n)&&l(o.get(Rb)));break;case"set":au(n)&&l(o.get(zo));break}let c=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:n,key:e,type:t,newValue:i,oldValue:r,oldTarget:s}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(c)}var Q2=aE("__proto__,__v_isRef,__isVue"),gE=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(Yb)),t$=pE(),e$=pE(!0),oA=n$();function n$(){let n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...e){let i=re(this);for(let s=0,o=this.length;s<o;s++)Ai(i,"get",s+"");let r=i[t](...e);return r===-1||r===!1?i[t](...e.map(re)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...e){X2();let i=re(this)[t].apply(this,e);return fE(),i}}),n}function pE(n=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_raw"&&s===(n?t?_$:xE:t?b$:_E).get(i))return i;let o=Bo(i);if(!n&&o&&tf(oA,r))return Reflect.get(oA,r,s);let a=Reflect.get(i,r,s);return(Yb(r)?gE.has(r):Q2(r))||(n||Ai(i,"get",r),t)?a:Lb(a)?!o||!Jb(r)?a.value:a:ef(a)?n?yE(a):e_(a):a}}var i$=r$();function r$(n=!1){return function(e,i,r,s){let o=e[i];if(!n&&(r=re(r),o=re(o),!Bo(e)&&Lb(o)&&!Lb(r)))return o.value=r,!0;let a=Bo(e)&&Jb(i)?Number(i)<e.length:tf(e,i),l=Reflect.set(e,i,r,s);return e===re(s)&&(a?dE(r,o)&&As(e,"set",i,r,o):As(e,"add",i,r)),l}}function s$(n,t){let e=tf(n,t),i=n[t],r=Reflect.deleteProperty(n,t);return r&&e&&As(n,"delete",t,void 0,i),r}function o$(n,t){let e=Reflect.has(n,t);return(!Yb(t)||!gE.has(t))&&Ai(n,"has",t),e}function a$(n){return Ai(n,"iterate",Bo(n)?"length":zo),Reflect.ownKeys(n)}var l$={get:t$,set:i$,deleteProperty:s$,has:o$,ownKeys:a$},c$={get:e$,set(n,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,n),!0},deleteProperty(n,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,n),!0}},Zb=n=>ef(n)?e_(n):n,Qb=n=>ef(n)?yE(n):n,t_=n=>n,rf=n=>Reflect.getPrototypeOf(n);function zh(n,t,e=!1,i=!1){n=n.__v_raw;let r=re(n),s=re(t);t!==s&&!e&&Ai(r,"get",t),!e&&Ai(r,"get",s);let{has:o}=rf(r),a=i?t_:e?Qb:Zb;if(o.call(r,t))return a(n.get(t));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(t)}function Hh(n,t=!1){let e=this.__v_raw,i=re(e),r=re(n);return n!==r&&!t&&Ai(i,"has",n),!t&&Ai(i,"has",r),n===r?e.has(n):e.has(n)||e.has(r)}function Wh(n,t=!1){return n=n.__v_raw,!t&&Ai(re(n),"iterate",zo),Reflect.get(n,"size",n)}function aA(n){n=re(n);let t=re(this);return rf(t).has.call(t,n)||(t.add(n),As(t,"add",n,n)),this}function lA(n,t){t=re(t);let e=re(this),{has:i,get:r}=rf(e),s=i.call(e,n);s?bE(e,i,n):(n=re(n),s=i.call(e,n));let o=r.call(e,n);return e.set(n,t),s?dE(t,o)&&As(e,"set",n,t,o):As(e,"add",n,t),this}function cA(n){let t=re(this),{has:e,get:i}=rf(t),r=e.call(t,n);r?bE(t,e,n):(n=re(n),r=e.call(t,n));let s=i?i.call(t,n):void 0,o=t.delete(n);return r&&As(t,"delete",n,void 0,s),o}function uA(){let n=re(this),t=n.size!==0,e=au(n)?new Map(n):new Set(n),i=n.clear();return t&&As(n,"clear",void 0,void 0,e),i}function Uh(n,t){return function(i,r){let s=this,o=s.__v_raw,a=re(o),l=t?t_:n?Qb:Zb;return!n&&Ai(a,"iterate",zo),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Kh(n,t,e){return function(...i){let r=this.__v_raw,s=re(r),o=au(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=e?t_:t?Qb:Zb;return!t&&Ai(s,"iterate",l?Rb:zo),{next(){let{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Ss(n){return function(...t){{let e=t[0]?`on key "${t[0]}" `:"";console.warn(`${uE(n)} operation ${e}failed: target is readonly.`,re(this))}return n==="delete"?!1:this}}function u$(){let n={get(s){return zh(this,s)},get size(){return Wh(this)},has:Hh,add:aA,set:lA,delete:cA,clear:uA,forEach:Uh(!1,!1)},t={get(s){return zh(this,s,!1,!0)},get size(){return Wh(this)},has:Hh,add:aA,set:lA,delete:cA,clear:uA,forEach:Uh(!1,!0)},e={get(s){return zh(this,s,!0)},get size(){return Wh(this,!0)},has(s){return Hh.call(this,s,!0)},add:Ss("add"),set:Ss("set"),delete:Ss("delete"),clear:Ss("clear"),forEach:Uh(!0,!1)},i={get(s){return zh(this,s,!0,!0)},get size(){return Wh(this,!0)},has(s){return Hh.call(this,s,!0)},add:Ss("add"),set:Ss("set"),delete:Ss("delete"),clear:Ss("clear"),forEach:Uh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Kh(s,!1,!1),e[s]=Kh(s,!0,!1),t[s]=Kh(s,!1,!0),i[s]=Kh(s,!0,!0)}),[n,e,t,i]}var[d$,h$,f$,g$]=u$();function mE(n,t){let e=t?n?g$:f$:n?h$:d$;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(tf(e,r)&&r in i?e:i,r,s)}var p$={get:mE(!1,!1)},m$={get:mE(!0,!1)};function bE(n,t,e){let i=re(e);if(i!==e&&t.call(n,i)){let r=cE(n);console.warn(`Reactive ${r} contains both the raw and reactive versions of the same object${r==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var _E=new WeakMap,b$=new WeakMap,xE=new WeakMap,_$=new WeakMap;function x$(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function y$(n){return n.__v_skip||!Object.isExtensible(n)?0:x$(cE(n))}function e_(n){return n&&n.__v_isReadonly?n:vE(n,!1,l$,p$,_E)}function yE(n){return vE(n,!0,c$,m$,xE)}function vE(n,t,e,i,r){if(!ef(n))return console.warn(`value cannot be made reactive: ${String(n)}`),n;if(n.__v_raw&&!(t&&n.__v_isReactive))return n;let s=r.get(n);if(s)return s;let o=y$(n);if(o===0)return n;let a=new Proxy(n,o===2?i:e);return r.set(n,a),a}function re(n){return n&&re(n.__v_raw)||n}function Lb(n){return!!(n&&n.__v_isRef===!0)}Ei("nextTick",()=>Vb);Ei("dispatch",n=>ou.bind(ou,n));Ei("watch",(n,{evaluateLater:t,cleanup:e})=>(i,r)=>{let s=t(i),a=mA(()=>{let l;return s(c=>l=c),l},r);e(a)});Ei("store",L2);Ei("data",n=>AA(n));Ei("root",n=>Xh(n));Ei("refs",n=>(n._x_refs_proxy||(n._x_refs_proxy=uu(v$(n))),n._x_refs_proxy));function v$(n){let t=[];return ll(n,e=>{e._x_refs&&t.push(e._x_refs)}),t}var pb={};function SE(n){return pb[n]||(pb[n]=0),++pb[n]}function S$(n,t){return ll(n,e=>{if(e._x_ids&&e._x_ids[t])return!0})}function C$(n,t){n._x_ids||(n._x_ids={}),n._x_ids[t]||(n._x_ids[t]=SE(t))}Ei("id",(n,{cleanup:t})=>(e,i=null)=>{let r=`${e}${i?`-${i}`:""}`;return A$(n,r,t,()=>{let s=S$(n,e),o=s?s._x_ids[e]:SE(e);return i?`${e}-${o}-${i}`:`${e}-${o}`})});Qh((n,t)=>{n._x_id&&(t._x_id=n._x_id)});function A$(n,t,e,i){if(n._x_id||(n._x_id={}),n._x_id[t])return n._x_id[t];let r=i();return n._x_id[t]=r,e(()=>{delete n._x_id[t]}),r}Ei("el",n=>n);CE("Focus","focus","focus");CE("Persist","persist","persist");function CE(n,t,e){Ei(t,i=>ui(`You can't use [$${t}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}Ee("modelable",(n,{expression:t},{effect:e,evaluateLater:i,cleanup:r})=>{let s=i(t),o=()=>{let u;return s(d=>u=d),u},a=i(`${t} = __placeholder`),l=u=>a(()=>{},{scope:{__placeholder:u}}),c=o();l(c),queueMicrotask(()=>{if(!n._x_model)return;n._x_removeModelListeners.default();let u=n._x_model.get,d=n._x_model.set,h=iE({get(){return u()},set(f){d(f)}},{get(){return o()},set(f){l(f)}});r(h)})});Ee("teleport",(n,{modifiers:t,expression:e},{cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ui("x-teleport can only be used on a <template> tag",n);let r=dA(e),s=n.content.cloneNode(!0).firstElementChild;n._x_teleport=s,s._x_teleportBack=n,n.setAttribute("data-teleport-template",!0),s.setAttribute("data-teleport-target",!0),n._x_forwardEvents&&n._x_forwardEvents.forEach(a=>{s.addEventListener(a,l=>{l.stopPropagation(),n.dispatchEvent(new l.constructor(l.type,l))})}),cu(s,{},n);let o=(a,l,c)=>{c.includes("prepend")?l.parentNode.insertBefore(a,l):c.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};pe(()=>{o(s,r,t),Es(()=>{Br(s)})()}),n._x_teleportPutBack=()=>{let a=dA(e);pe(()=>{o(n._x_teleport,a,t)})},i(()=>pe(()=>{s.remove(),cl(s)}))});var E$=document.createElement("div");function dA(n){let t=Es(()=>document.querySelector(n),()=>E$)();return t||ui(`Cannot find x-teleport element for selector: "${n}"`),t}var AE=()=>{};AE.inline=(n,{modifiers:t},{cleanup:e})=>{t.includes("self")?n._x_ignoreSelf=!0:n._x_ignore=!0,e(()=>{t.includes("self")?delete n._x_ignoreSelf:delete n._x_ignore})};Ee("ignore",AE);Ee("effect",Es((n,{expression:t},{effect:e})=>{e(Sn(n,t))}));function Db(n,t,e,i){let r=n,s=l=>i(l),o={},a=(l,c)=>u=>c(l,u);if(e.includes("dot")&&(t=T$(t)),e.includes("camel")&&(t=w$(t)),e.includes("passive")&&(o.passive=!0),e.includes("capture")&&(o.capture=!0),e.includes("window")&&(r=window),e.includes("document")&&(r=document),e.includes("debounce")){let l=e[e.indexOf("debounce")+1]||"invalid-wait",c=Jh(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=eE(s,c)}if(e.includes("throttle")){let l=e[e.indexOf("throttle")+1]||"invalid-wait",c=Jh(l.split("ms")[0])?Number(l.split("ms")[0]):250;s=nE(s,c)}return e.includes("prevent")&&(s=a(s,(l,c)=>{c.preventDefault(),l(c)})),e.includes("stop")&&(s=a(s,(l,c)=>{c.stopPropagation(),l(c)})),e.includes("once")&&(s=a(s,(l,c)=>{l(c),r.removeEventListener(t,s,o)})),(e.includes("away")||e.includes("outside"))&&(r=document,s=a(s,(l,c)=>{n.contains(c.target)||c.target.isConnected!==!1&&(n.offsetWidth<1&&n.offsetHeight<1||n._x_isShown!==!1&&l(c))})),e.includes("self")&&(s=a(s,(l,c)=>{c.target===n&&l(c)})),(k$(t)||EE(t))&&(s=a(s,(l,c)=>{O$(c,e)||l(c)})),r.addEventListener(t,s,o),()=>{r.removeEventListener(t,s,o)}}function T$(n){return n.replace(/-/g,".")}function w$(n){return n.toLowerCase().replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function Jh(n){return!Array.isArray(n)&&!isNaN(n)}function N$(n){return[" ","_"].includes(n)?n:n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function k$(n){return["keydown","keyup"].includes(n)}function EE(n){return["contextmenu","click","mouse"].some(t=>n.includes(t))}function O$(n,t){let e=t.filter(s=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(s));if(e.includes("debounce")){let s=e.indexOf("debounce");e.splice(s,Jh((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.includes("throttle")){let s=e.indexOf("throttle");e.splice(s,Jh((e[s+1]||"invalid-wait").split("ms")[0])?2:1)}if(e.length===0||e.length===1&&hA(n.key).includes(e[0]))return!1;let r=["ctrl","shift","alt","meta","cmd","super"].filter(s=>e.includes(s));return e=e.filter(s=>!r.includes(s)),!(r.length>0&&r.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),n[`${o}Key`])).length===r.length&&(EE(n.type)||hA(n.key).includes(e[0])))}function hA(n){if(!n)return[];n=N$(n);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[n]=n,Object.keys(t).map(e=>{if(t[e]===n)return e}).filter(e=>e)}Ee("model",(n,{modifiers:t,expression:e},{effect:i,cleanup:r})=>{let s=n;t.includes("parent")&&(s=n.parentNode);let o=Sn(s,e),a;typeof e=="string"?a=Sn(s,`${e} = __placeholder`):typeof e=="function"&&typeof e()=="string"?a=Sn(s,`${e()} = __placeholder`):a=()=>{};let l=()=>{let h;return o(f=>h=f),fA(h)?h.get():h},c=h=>{let f;o(g=>f=g),fA(f)?f.set(h):a(()=>{},{scope:{__placeholder:h}})};typeof e=="string"&&n.type==="radio"&&pe(()=>{n.hasAttribute("name")||n.setAttribute("name",e)});var u=n.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(n.type)||t.includes("lazy")?"change":"input";let d=Cs?()=>{}:Db(n,u,t,h=>{c(mb(n,t,h,l()))});if(t.includes("fill")&&([void 0,null,""].includes(l())||qb(n)&&Array.isArray(l())||n.tagName.toLowerCase()==="select"&&n.multiple)&&c(mb(n,t,{target:n},l())),n._x_removeModelListeners||(n._x_removeModelListeners={}),n._x_removeModelListeners.default=d,r(()=>n._x_removeModelListeners.default()),n.form){let h=Db(n.form,"reset",[],f=>{Vb(()=>n._x_model&&n._x_model.set(mb(n,t,{target:n},l())))});r(()=>h())}n._x_model={get(){return l()},set(h){c(h)}},n._x_forceModelUpdate=h=>{h===void 0&&typeof e=="string"&&e.match(/\./)&&(h=""),window.fromModel=!0,pe(()=>JA(n,"value",h)),delete window.fromModel},i(()=>{let h=l();t.includes("unintrusive")&&document.activeElement.isSameNode(n)||n._x_forceModelUpdate(h)})});function mb(n,t,e,i){return pe(()=>{if(e instanceof CustomEvent&&e.detail!==void 0)return e.detail!==null&&e.detail!==void 0?e.detail:e.target.value;if(qb(n))if(Array.isArray(i)){let r=null;return t.includes("number")?r=bb(e.target.value):t.includes("boolean")?r=Vh(e.target.value):r=e.target.value,e.target.checked?i.includes(r)?i:i.concat([r]):i.filter(s=>!M$(s,r))}else return e.target.checked;else{if(n.tagName.toLowerCase()==="select"&&n.multiple)return t.includes("number")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return bb(s)}):t.includes("boolean")?Array.from(e.target.selectedOptions).map(r=>{let s=r.value||r.text;return Vh(s)}):Array.from(e.target.selectedOptions).map(r=>r.value||r.text);{let r;return tE(n)?e.target.checked?r=e.target.value:r=i:r=e.target.value,t.includes("number")?bb(r):t.includes("boolean")?Vh(r):t.includes("trim")?r.trim():r}}})}function bb(n){let t=n?parseFloat(n):null;return R$(t)?t:n}function M$(n,t){return n==t}function R$(n){return!Array.isArray(n)&&!isNaN(n)}function fA(n){return n!==null&&typeof n=="object"&&typeof n.get=="function"&&typeof n.set=="function"}Ee("cloak",n=>queueMicrotask(()=>pe(()=>n.removeAttribute(al("cloak")))));KA(()=>`[${al("init")}]`);Ee("init",Es((n,{expression:t},{evaluate:e})=>typeof t=="string"?!!t.trim()&&e(t,{},!1):e(t,{},!1)));Ee("text",(n,{expression:t},{effect:e,evaluateLater:i})=>{let r=i(t);e(()=>{r(s=>{pe(()=>{n.textContent=s})})})});Ee("html",(n,{expression:t},{effect:e,evaluateLater:i})=>{let r=i(t);e(()=>{r(s=>{pe(()=>{n.innerHTML=s,n._x_ignoreSelf=!0,Br(n),delete n._x_ignoreSelf})})})});Ub(DA(":",IA(al("bind:"))));var TE=(n,{value:t,modifiers:e,expression:i,original:r},{effect:s,cleanup:o})=>{if(!t){let l={};I2(l),Sn(n,i)(u=>{sE(n,u,r)},{scope:l});return}if(t==="key")return L$(n,i);if(n._x_inlineBindings&&n._x_inlineBindings[t]&&n._x_inlineBindings[t].extract)return;let a=Sn(n,i);s(()=>a(l=>{l===void 0&&typeof i=="string"&&i.match(/\./)&&(l=""),pe(()=>JA(n,t,l,e))})),o(()=>{n._x_undoAddedClasses&&n._x_undoAddedClasses(),n._x_undoAddedStyles&&n._x_undoAddedStyles()})};TE.inline=(n,{value:t,modifiers:e,expression:i})=>{t&&(n._x_inlineBindings||(n._x_inlineBindings={}),n._x_inlineBindings[t]={expression:i,extract:!1})};Ee("bind",TE);function L$(n,t){n._x_keyExpression=t}UA(()=>`[${al("data")}]`);Ee("data",(n,{expression:t},{cleanup:e})=>{if(D$(n))return;t=t===""?"{}":t;let i={};Cb(i,n);let r={};F2(r,i);let s=$o(n,t,{scope:r});(s===void 0||s===!0)&&(s={}),Cb(s,n);let o=sl(s);EA(o);let a=cu(n,o);o.init&&$o(n,o.init),e(()=>{o.destroy&&$o(n,o.destroy),a()})});Qh((n,t)=>{n._x_dataStack&&(t._x_dataStack=n._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function D$(n){return Cs?Ob?!0:n.hasAttribute("data-has-alpine-state"):!1}Ee("show",(n,{modifiers:t,expression:e},{effect:i})=>{let r=Sn(n,e);n._x_doHide||(n._x_doHide=()=>{pe(()=>{n.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),n._x_doShow||(n._x_doShow=()=>{pe(()=>{n.style.length===1&&n.style.display==="none"?n.removeAttribute("style"):n.style.removeProperty("display")})});let s=()=>{n._x_doHide(),n._x_isShown=!1},o=()=>{n._x_doShow(),n._x_isShown=!0},a=()=>setTimeout(o),l=Nb(d=>d?o():s(),d=>{typeof n._x_toggleAndCascadeWithTransitions=="function"?n._x_toggleAndCascadeWithTransitions(n,d,o,s):d?a():s()}),c,u=!0;i(()=>r(d=>{!u&&d===c||(t.includes("immediate")&&(d?a():s()),l(d),c=d,u=!1)}))});Ee("for",(n,{expression:t},{effect:e,cleanup:i})=>{let r=P$(t),s=Sn(n,r.items),o=Sn(n,n._x_keyExpression||"index");n._x_prevKeys=[],n._x_lookup={},e(()=>I$(n,r,s,o)),i(()=>{Object.values(n._x_lookup).forEach(a=>pe(()=>{cl(a),a.remove()})),delete n._x_prevKeys,delete n._x_lookup})});function I$(n,t,e,i){let r=o=>typeof o=="object"&&!Array.isArray(o),s=n;e(o=>{F$(o)&&o>=0&&(o=Array.from(Array(o).keys(),p=>p+1)),o===void 0&&(o=[]);let a=n._x_lookup,l=n._x_prevKeys,c=[],u=[];if(r(o))o=Object.entries(o).map(([p,b])=>{let _=gA(t,b,p,o);i(x=>{u.includes(x)&&ui("Duplicate key on x-for",n),u.push(x)},{scope:{index:p,..._}}),c.push(_)});else for(let p=0;p<o.length;p++){let b=gA(t,o[p],p,o);i(_=>{u.includes(_)&&ui("Duplicate key on x-for",n),u.push(_)},{scope:{index:p,...b}}),c.push(b)}let d=[],h=[],f=[],g=[];for(let p=0;p<l.length;p++){let b=l[p];u.indexOf(b)===-1&&f.push(b)}l=l.filter(p=>!f.includes(p));let m="template";for(let p=0;p<u.length;p++){let b=u[p],_=l.indexOf(b);if(_===-1)l.splice(p,0,b),d.push([m,p]);else if(_!==p){let x=l.splice(p,1)[0],y=l.splice(_-1,1)[0];l.splice(p,0,y),l.splice(_,0,x),h.push([x,y])}else g.push(b);m=b}for(let p=0;p<f.length;p++){let b=f[p];b in a&&(pe(()=>{cl(a[b]),a[b].remove()}),delete a[b])}for(let p=0;p<h.length;p++){let[b,_]=h[p],x=a[b],y=a[_],v=document.createElement("div");pe(()=>{y||ui('x-for ":key" is undefined or invalid',s,_,a),y.after(v),x.after(y),y._x_currentIfEl&&y.after(y._x_currentIfEl),v.before(x),x._x_currentIfEl&&x.after(x._x_currentIfEl),v.remove()}),y._x_refreshXForScope(c[u.indexOf(_)])}for(let p=0;p<d.length;p++){let[b,_]=d[p],x=b==="template"?s:a[b];x._x_currentIfEl&&(x=x._x_currentIfEl);let y=c[_],v=u[_],S=document.importNode(s.content,!0).firstElementChild,C=sl(y);cu(S,C,s),S._x_refreshXForScope=A=>{Object.entries(A).forEach(([E,$])=>{C[E]=$})},pe(()=>{x.after(S),Es(()=>Br(S))()}),typeof v=="object"&&ui("x-for key cannot be an object, it must be a string or an integer",s),a[v]=S}for(let p=0;p<g.length;p++)a[g[p]]._x_refreshXForScope(c[u.indexOf(g[p])]);s._x_prevKeys=u})}function P$(n){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,e=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,r=n.match(i);if(!r)return;let s={};s.items=r[2].trim();let o=r[1].replace(e,"").trim(),a=o.match(t);return a?(s.item=o.replace(t,"").trim(),s.index=a[1].trim(),a[2]&&(s.collection=a[2].trim())):s.item=o,s}function gA(n,t,e,i){let r={};return/^\[.*\]$/.test(n.item)&&Array.isArray(t)?n.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{r[o]=t[a]}):/^\{.*\}$/.test(n.item)&&!Array.isArray(t)&&typeof t=="object"?n.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{r[o]=t[o]}):r[n.item]=t,n.index&&(r[n.index]=e),n.collection&&(r[n.collection]=i),r}function F$(n){return!Array.isArray(n)&&!isNaN(n)}function wE(){}wE.inline=(n,{expression:t},{cleanup:e})=>{let i=Xh(n);i._x_refs||(i._x_refs={}),i._x_refs[t]=n,e(()=>delete i._x_refs[t])};Ee("ref",wE);Ee("if",(n,{expression:t},{effect:e,cleanup:i})=>{n.tagName.toLowerCase()!=="template"&&ui("x-if can only be used on a <template> tag",n);let r=Sn(n,t),s=()=>{if(n._x_currentIfEl)return n._x_currentIfEl;let a=n.content.cloneNode(!0).firstElementChild;return cu(a,{},n),pe(()=>{n.after(a),Es(()=>Br(a))()}),n._x_currentIfEl=a,n._x_undoIf=()=>{pe(()=>{cl(a),a.remove()}),delete n._x_currentIfEl},a},o=()=>{n._x_undoIf&&(n._x_undoIf(),delete n._x_undoIf)};e(()=>r(a=>{a?s():o()})),i(()=>n._x_undoIf&&n._x_undoIf())});Ee("id",(n,{expression:t},{evaluate:e})=>{e(t).forEach(r=>C$(n,r))});Qh((n,t)=>{n._x_ids&&(t._x_ids=n._x_ids)});Ub(DA("@",IA(al("on:"))));Ee("on",Es((n,{value:t,modifiers:e,expression:i},{cleanup:r})=>{let s=i?Sn(n,i):()=>{};n.tagName.toLowerCase()==="template"&&(n._x_forwardEvents||(n._x_forwardEvents=[]),n._x_forwardEvents.includes(t)||n._x_forwardEvents.push(t));let o=Db(n,t,e,a=>{s(()=>{},{scope:{$event:a},params:[a]})});r(()=>o())}));sf("Collapse","collapse","collapse");sf("Intersect","intersect","intersect");sf("Focus","trap","focus");sf("Mask","mask","mask");function sf(n,t,e){Ee(t,i=>ui(`You can't use [x-${t}] without first installing the "${n}" plugin here: https://alpinejs.dev/plugins/${e}`,i))}du.setEvaluator(OA);du.setReactivityEngine({reactive:e_,effect:G2,release:q2,raw:re});var $$=du,n_=$$;function gu(n){return n+.5|0}var Ts=(n,t,e)=>Math.max(Math.min(n,e),t);function hu(n){return Ts(gu(n*2.55),0,255)}function ws(n){return Ts(gu(n*255),0,255)}function zr(n){return Ts(gu(n/2.55)/100,0,1)}function NE(n){return Ts(gu(n*100),0,100)}var di={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},r_=[..."0123456789ABCDEF"],B$=n=>r_[n&15],z$=n=>r_[(n&240)>>4]+r_[n&15],of=n=>(n&240)>>4===(n&15),H$=n=>of(n.r)&&of(n.g)&&of(n.b)&&of(n.a);function W$(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&di[n[1]]*17,g:255&di[n[2]]*17,b:255&di[n[3]]*17,a:t===5?di[n[4]]*17:255}:(t===7||t===9)&&(e={r:di[n[1]]<<4|di[n[2]],g:di[n[3]]<<4|di[n[4]],b:di[n[5]]<<4|di[n[6]],a:t===9?di[n[7]]<<4|di[n[8]]:255})),e}var U$=(n,t)=>n<255?t(n):"";function K$(n){var t=H$(n)?B$:z$;return n?"#"+t(n.r)+t(n.g)+t(n.b)+U$(n.a,t):void 0}var j$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function RE(n,t,e){let i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function V$(n,t,e){let i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function G$(n,t,e){let i=RE(n,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function q$(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function s_(n){let e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=q$(e,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function o_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ws)}function a_(n,t,e){return o_(RE,n,t,e)}function Y$(n,t,e){return o_(G$,n,t,e)}function J$(n,t,e){return o_(V$,n,t,e)}function LE(n){return(n%360+360)%360}function X$(n){let t=j$.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?hu(+t[5]):ws(+t[5]));let r=LE(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=Y$(r,s,o):t[1]==="hsv"?i=J$(r,s,o):i=a_(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function Z$(n,t){var e=s_(n);e[0]=LE(e[0]+t),e=a_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Q$(n){if(!n)return;let t=s_(n),e=t[0],i=NE(t[1]),r=NE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${zr(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}var kE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tB(){let n={},t=Object.keys(OE),e=Object.keys(kE),i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,kE[s]);s=parseInt(OE[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var af;function eB(n){af||(af=tB(),af.transparent=[0,0,0,0]);let t=af[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var nB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iB(n){let t=nB.exec(n),e=255,i,r,s;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?hu(o):Ts(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?hu(i):Ts(i,0,255)),r=255&(t[4]?hu(r):Ts(r,0,255)),s=255&(t[6]?hu(s):Ts(s,0,255)),{r:i,g:r,b:s,a:e}}}function rB(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${zr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var i_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ul=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function sB(n,t,e){let i=ul(zr(n.r)),r=ul(zr(n.g)),s=ul(zr(n.b));return{r:ws(i_(i+e*(ul(zr(t.r))-i))),g:ws(i_(r+e*(ul(zr(t.g))-r))),b:ws(i_(s+e*(ul(zr(t.b))-s))),a:n.a+e*(t.a-n.a)}}function lf(n,t,e){if(n){let i=s_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=a_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function DE(n,t){return n&&Object.assign(t||{},n)}function ME(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ws(n[3]))):(t=DE(n,{r:0,g:0,b:0,a:1}),t.a=ws(t.a)),t}function oB(n){return n.charAt(0)==="r"?iB(n):X$(n)}var fu=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=ME(t):e==="string"&&(i=W$(t)||eB(t)||oB(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=DE(this._rgb);return t&&(t.a=zr(t.a)),t}set rgb(t){this._rgb=ME(t)}rgbString(){return this._valid?rB(this._rgb):void 0}hexString(){return this._valid?K$(this._rgb):void 0}hslString(){return this._valid?Q$(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,r=t.rgb,s,o=e===s?.5:e,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=sB(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=ws(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=gu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lf(this._rgb,2,t),this}darken(t){return lf(this._rgb,2,-t),this}saturate(t){return lf(this._rgb,1,t),this}desaturate(t){return lf(this._rgb,1,-t),this}rotate(t){return Z$(this._rgb,t),this}};function Qi(){}var jE=(()=>{let n=0;return()=>n++})();function Ct(n){return n==null}function ne(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Tt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function me(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function In(n,t){return me(n)?n:t}function mt(n,t){return typeof n>"u"?t:n}var VE=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,d_=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Xt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Ht(n,t,e,i){let r,s,o;if(ne(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(Tt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function bu(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function hf(n){if(ne(n))return n.map(hf);if(Tt(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,r=0;for(;r<i;++r)t[e[r]]=hf(n[e[r]]);return t}return n}function GE(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function aB(n,t,e,i){if(!GE(n))return;let r=t[n],s=e[n];Tt(r)&&Tt(s)?hl(r,s,i):t[n]=hf(s)}function hl(n,t,e){let i=ne(t)?t:[t],r=i.length;if(!Tt(n))return n;e=e||{};let s=e.merger||aB,o;for(let a=0;a<r;++a){if(o=i[a],!Tt(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function gl(n,t){return hl(n,t,{merger:lB})}function lB(n,t,e){if(!GE(n))return;let i=t[n],r=e[n];Tt(i)&&Tt(r)?gl(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=hf(r))}var IE={"":n=>n,x:n=>n.x,y:n=>n.y};function cB(n){let t=n.split("."),e=[],i="";for(let r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function uB(n){let t=cB(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function Ur(n,t){return(IE[t]||(IE[t]=uB(t)))(n)}function mf(n){return n.charAt(0).toUpperCase()+n.slice(1)}var pl=n=>typeof n<"u",Hr=n=>typeof n=="function",h_=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function qE(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Lt=Math.PI,ie=2*Lt,dB=ie+Lt,ff=Number.POSITIVE_INFINITY,hB=Lt/180,xe=Lt/2,Uo=Lt/4,PE=Lt*2/3,Wr=Math.log10,Ti=Math.sign;function ml(n,t,e){return Math.abs(n-t)<e}function f_(n){let t=Math.round(n);n=ml(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(Wr(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function YE(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function fB(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Vo(n){return!fB(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function JE(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function g_(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function hi(n){return n*(Lt/180)}function bf(n){return n*(180/Lt)}function p_(n){if(!me(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function m_(n,t){let e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i),s=Math.atan2(i,e);return s<-.5*Lt&&(s+=ie),{angle:s,distance:r}}function gf(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function gB(n,t){return(n-t+dB)%ie-Lt}function qe(n){return(n%ie+ie)%ie}function bl(n,t,e,i){let r=qe(n),s=qe(t),o=qe(e),a=qe(s-r),l=qe(o-r),c=qe(r-s),u=qe(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ke(n,t,e){return Math.max(t,Math.min(e,n))}function XE(n){return ke(n,-32768,32767)}function tr(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function _f(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}var Xi=(n,t,e,i)=>_f(n,e,i?r=>{let s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),ZE=(n,t,e)=>_f(n,e,i=>n[i][t]>=e);function QE(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}var tT=["push","pop","shift","splice","unshift"];function eT(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),tT.forEach(e=>{let i="_onData"+mf(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function b_(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(tT.forEach(s=>{delete n[s]}),delete n._chartjs)}function __(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var x_=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function y_(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,x_.call(window,()=>{i=!1,n.apply(t,e)}))}}function nT(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var xf=n=>n==="start"?"left":n==="end"?"right":"center",Ye=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,iT=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function v_(n,t,e){let i=t.length,r=0,s=i;if(n._sorted){let{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(r=Math.min(Xi(l,u,d).lo,e?i:Xi(t,u,o.getPixelForValue(d)).lo),c){let m=l.slice(0,r+1).reverse().findIndex(p=>!Ct(p[a.axis]));r-=Math.max(0,m)}r=ke(r,0,i-1)}if(g){let m=Math.max(Xi(l,o.axis,h,!0).hi+1,e?0:Xi(t,u,o.getPixelForValue(h),!0).hi+1);if(c){let p=l.slice(m-1).findIndex(b=>!Ct(b[a.axis]));m+=Math.max(0,p)}s=ke(m,r,i)-r}else s=i-r}return{start:r,count:s}}function S_(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}var cf=n=>n===0||n===1,FE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ie/e)),$E=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ie/e)+1,dl={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*xe)+1,easeOutSine:n=>Math.sin(n*xe),easeInOutSine:n=>-.5*(Math.cos(Lt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cf(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cf(n)?n:FE(n,.075,.3),easeOutElastic:n=>cf(n)?n:$E(n,.075,.3),easeInOutElastic(n){return cf(n)?n:n<.5?.5*FE(n*2,.1125,.45):.5+.5*$E(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-dl.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?dl.easeInBounce(n*2)*.5:dl.easeOutBounce(n*2-1)*.5+.5};function C_(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function A_(n){return C_(n)?n:new fu(n)}function l_(n){return C_(n)?n:new fu(n).saturate(.5).darken(.1).hexString()}var pB=["x","y","borderWidth","radius","tension"],mB=["color","borderColor","backgroundColor"];function bB(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:mB},numbers:{type:"number",properties:pB}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function _B(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var BE=new Map;function xB(n,t){t=t||{};let e=n+JSON.stringify(t),i=BE.get(e);return i||(i=new Intl.NumberFormat(n,t),BE.set(e,i)),i}function _l(n,t,e){return xB(t,e).format(n)}var rT={values(n){return ne(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=yB(n,e)}let o=Wr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),_l(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(Wr(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?rT.numeric.call(this,n,t,e):""}};function yB(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var _u={formatters:rT};function vB(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_u.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Os=Object.create(null),yf=Object.create(null);function pu(n,t){if(!t)return n;let e=t.split(".");for(let i=0,r=e.length;i<r;++i){let s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function c_(n,t,e){return typeof t=="string"?hl(pu(n,t),e):hl(pu(n,""),t)}var u_=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>l_(r.backgroundColor),this.hoverBorderColor=(i,r)=>l_(r.borderColor),this.hoverColor=(i,r)=>l_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return c_(this,t,e)}get(t){return pu(this,t)}describe(t,e){return c_(yf,t,e)}override(t,e){return c_(Os,t,e)}route(t,e,i,r){let s=pu(this,t),o=pu(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[r];return Tt(l)?Object.assign({},c,l):mt(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},se=new u_({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[bB,_B,vB]);function SB(n){return!n||Ct(n.size)||Ct(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function mu(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function sT(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=e[l],d!=null&&!ne(d))o=mu(n,r,s,o,d);else if(ne(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!ne(h)&&(o=mu(n,r,s,o,h));n.restore();let f=s.length/2;if(f>e.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Ms(n,t,e){let i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function E_(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function vf(n,t,e,i){T_(n,t,e,i,null)}function T_(n,t,e,i,r){let s,o,a,l,c,u,d,h,f=t.pointStyle,g=t.rotation,m=t.radius,p=(g||0)*hB;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(p),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),f){default:r?n.ellipse(e,i,r/2,m,0,0,ie):n.arc(e,i,m,0,ie),n.closePath();break;case"triangle":u=r?r/2:m,n.moveTo(e+Math.sin(p)*u,i-Math.cos(p)*m),p+=PE,n.lineTo(e+Math.sin(p)*u,i-Math.cos(p)*m),p+=PE,n.lineTo(e+Math.sin(p)*u,i-Math.cos(p)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(p+Uo)*l,d=Math.cos(p+Uo)*(r?r/2-c:l),a=Math.sin(p+Uo)*l,h=Math.sin(p+Uo)*(r?r/2-c:l),n.arc(e-d,i-a,c,p-Lt,p-xe),n.arc(e+h,i-o,c,p-xe,p),n.arc(e+d,i+a,c,p,p+xe),n.arc(e-h,i+o,c,p+xe,p+Lt),n.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*m,u=r?r/2:l,n.rect(e-u,i-l,2*u,2*l);break}p+=Uo;case"rectRot":d=Math.cos(p)*(r?r/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(r?r/2:m),n.moveTo(e-d,i-a),n.lineTo(e+h,i-o),n.lineTo(e+d,i+a),n.lineTo(e-h,i+o),n.closePath();break;case"crossRot":p+=Uo;case"cross":d=Math.cos(p)*(r?r/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(r?r/2:m),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"star":d=Math.cos(p)*(r?r/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(r?r/2:m),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o),p+=Uo,d=Math.cos(p)*(r?r/2:m),o=Math.cos(p)*m,a=Math.sin(p)*m,h=Math.sin(p)*(r?r/2:m),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+h,i-o),n.lineTo(e-h,i+o);break;case"line":o=r?r/2:Math.cos(p)*m,a=Math.sin(p)*m,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(p)*(r?r/2:m),i+Math.sin(p)*m);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Zi(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function xu(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function yu(n){n.restore()}function oT(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function aT(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function CB(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ct(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function AB(n,t,e,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function EB(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Rs(n,t,e,i,r,s={}){let o=ne(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=r.string,CB(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&EB(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ct(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,i,s.maxWidth)),n.fillText(c,e,i,s.maxWidth),AB(n,e,i,c,s),i+=Number(r.lineHeight);n.restore()}function xl(n,t){let{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*Lt,Lt,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Lt,xe,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,xe,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-xe,!0),n.lineTo(e+o.topLeft,i)}var TB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function NB(n,t){let e=(""+n).match(TB);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var kB=n=>+n||0;function Sf(n,t){let e={},i=Tt(t),r=i?Object.keys(t):t,s=Tt(n)?i?o=>mt(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of r)e[o]=kB(s(o));return e}function w_(n){return Sf(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ls(n){return Sf(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Je(n){let t=w_(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Te(n,t){n=n||{},t=t||se.font;let e=mt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=mt(n.style,t.style);i&&!(""+i).match(wB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:mt(n.family,t.family),lineHeight:NB(mt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:mt(n.weight,t.weight),string:""};return r.string=SB(r),r}function yl(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&ne(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function lT(n,t,e){let{min:i,max:r}=n,s=d_(t,(r-i)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Kr(n,t){return Object.assign(Object.create(n),t)}function Cf(n,t=[""],e,i,r=()=>n[0]){let s=e||n;typeof i>"u"&&(i=dT("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Cf([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return cT(a,l,()=>FB(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return HE(a).includes(l)},ownKeys(a){return HE(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function jo(n,t,e,i){let r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:N_(n,i),setContext:s=>jo(n,s,e,i),override:s=>jo(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return cT(s,o,()=>MB(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function N_(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Hr(e)?e:()=>e,isIndexable:Hr(i)?i:()=>i}}var OB=(n,t)=>n?n+mf(t):t,k_=(n,t)=>Tt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function cT(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function MB(n,t,e){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[t];return Hr(a)&&o.isScriptable(t)&&(a=RB(t,a,n,e)),ne(a)&&a.length&&(a=LB(t,a,n,o.isIndexable)),k_(t,a)&&(a=jo(a,r,s&&s[t],o)),a}function RB(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||i);return a.delete(n),k_(n,l)&&(l=O_(r._scopes,r,n,l)),l}function LB(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(Tt(t[0])){let l=t,c=r._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=O_(c,r,n,u);t.push(jo(d,s,o&&o[n],a))}}return t}function uT(n,t,e){return Hr(n)?n(t,e):n}var DB=(n,t)=>n===!0?t:typeof n=="string"?Ur(t,n):void 0;function IB(n,t,e,i,r){for(let s of t){let o=DB(e,s);if(o){n.add(o);let a=uT(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function O_(n,t,e,i){let r=t._rootScopes,s=uT(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let l=zE(a,o,e,s||e,i);return l===null||typeof s<"u"&&s!==e&&(l=zE(a,o,s,l,i),l===null)?!1:Cf(Array.from(a),[""],r,s,()=>PB(t,e,i))}function zE(n,t,e,i,r){for(;e;)e=IB(n,t,e,i,r);return e}function PB(n,t,e){let i=n._getTarget();t in i||(i[t]={});let r=i[t];return ne(r)&&Tt(e)?e:r||{}}function FB(n,t,e,i){let r;for(let s of t)if(r=dT(OB(s,n),e),typeof r<"u")return k_(n,r)?O_(e,i,n,r):r}function dT(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function HE(n){let t=n._keys;return t||(t=n._keys=$B(n._scopes)),t}function $B(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function M_(n,t,e,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+e,u=t[c],o[a]={r:r.parse(Ur(u,s),c)};return o}var BB=Number.EPSILON||1e-14,fl=(n,t)=>t<n.length&&!n[t].skip&&n[t],hT=n=>n==="x"?"y":"x";function zB(n,t,e,i){let r=n.skip?t:n,s=t,o=e.skip?t:e,a=gf(s,r),l=gf(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function HB(n,t,e){let i=n.length,r,s,o,a,l,c=fl(n,0);for(let u=0;u<i-1;++u)if(l=c,c=fl(n,u+1),!(!l||!c)){if(ml(t[u],0,BB)){e[u]=e[u+1]=0;continue}r=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=r*o*t[u],e[u+1]=s*o*t[u])}}function WB(n,t,e="x"){let i=hT(e),r=n.length,s,o,a,l=fl(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=fl(n,c+1),!a)continue;let u=a[e],d=a[i];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${i}`]=d-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${i}`]=d+s*t[c])}}function UB(n,t="x"){let e=hT(t),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,l,c=fl(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=fl(n,o+1),!!l){if(c){let u=c[t]-l[t];r[o]=u!==0?(c[e]-l[e])/u:0}s[o]=a?c?Ti(r[o-1])!==Ti(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}HB(n,r,s),WB(n,s,t)}function uf(n,t,e){return Math.max(Math.min(n,e),t)}function KB(n,t){let e,i,r,s,o,a=Zi(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&Zi(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=uf(r.cp1x,t.left,t.right),r.cp1y=uf(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=uf(r.cp2x,t.left,t.right),r.cp2y=uf(r.cp2y,t.top,t.bottom)))}function fT(n,t,e,i,r){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")UB(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=zB(c,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&KB(n,e)}function Af(){return typeof window<"u"&&typeof document<"u"}function Ef(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function pf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var Tf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function jB(n,t){return Tf(n).getPropertyValue(t)}var VB=["top","right","bottom","left"];function Ko(n,t,e){let i={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=VB[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var GB=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function qB(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,l;if(GB(r,s,n.target))a=r,l=s;else{let c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ds(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,r=Tf(e),s=r.boxSizing==="border-box",o=Ko(r,"padding"),a=Ko(r,"border","width"),{x:l,y:c,box:u}=qB(n,e),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:g}=t;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*e.width/i),y:Math.round((c-h)/g*e.height/i)}}function YB(n,t,e){let i,r;if(t===void 0||e===void 0){let s=n&&Ef(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let o=s.getBoundingClientRect(),a=Tf(s),l=Ko(a,"border","width"),c=Ko(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,i=pf(a.maxWidth,s,"clientWidth"),r=pf(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||ff,maxHeight:r||ff}}var ks=n=>Math.round(n*10)/10;function gT(n,t,e,i){let r=Tf(n),s=Ko(r,"margin"),o=pf(r.maxWidth,n,"clientWidth")||ff,a=pf(r.maxHeight,n,"clientHeight")||ff,l=YB(n,t,e),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Ko(r,"border","width"),f=Ko(r,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=ks(Math.min(c,o,l.maxWidth)),u=ks(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ks(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ks(Math.floor(u*i))),{width:c,height:u}}function R_(n,t,e){let i=t||1,r=ks(n.height*i),s=ks(n.width*i);n.height=ks(n.height),n.width=ks(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var pT=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};Af()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function L_(n,t){let e=jB(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ns(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function mT(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function bT(n,t,e,i){let r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=Ns(n,r,e),a=Ns(r,s,e),l=Ns(s,t,e),c=Ns(o,a,e),u=Ns(a,l,e);return Ns(c,u,e)}var JB=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},XB=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Go(n,t,e){return n?JB(t,e):XB()}function D_(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function I_(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function _T(n){return n==="angle"?{between:bl,compare:gB,normalize:qe}:{between:tr,compare:(t,e)=>t-e,normalize:t=>t}}function WE({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function ZB(n,t,e){let{property:i,start:r,end:s}=e,{between:o,normalize:a}=_T(i),l=t.length,{start:c,end:u,loop:d}=n,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(t[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function P_(n,t,e){if(!e)return[n];let{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=_T(i),{start:u,end:d,loop:h,style:f}=ZB(n,t,e),g=[],m=!1,p=null,b,_,x,y=()=>l(r,x,b)&&a(r,x)!==0,v=()=>a(s,b)===0||l(s,x,b),S=()=>m||y(),C=()=>!m||v();for(let A=u,E=u;A<=d;++A)_=t[A%o],!_.skip&&(b=c(_[i]),b!==x&&(m=l(b,r,s),p===null&&S()&&(p=a(b,r)===0?A:E),p!==null&&C()&&(g.push(WE({start:p,end:A,loop:h,count:o,style:f})),p=null),E=A,x=b));return p!==null&&g.push(WE({start:p,end:d,loop:h,count:o,style:f})),g}function F_(n,t){let e=[],i=n.segments;for(let r=0;r<i.length;r++){let s=P_(i[r],n.points,t);s.length&&e.push(...s)}return e}function QB(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function t5(n,t,e,i){let r=n.length,s=[],o=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:t%r,end:(l-1)%r,loop:i}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function xT(n,t){let e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=QB(e,r,s,i);if(i===!0)return UE(n,[{start:o,end:a,loop:s}],e,t);let l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return UE(n,t5(e,o,l,c),e,t)}function UE(n,t,e,i){return!i||!i.setContext||!e?t:e5(n,t,e,i)}function e5(n,t,e,i){let r=n._chart.getContext(),s=KE(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[],u=s,d=t[0].start,h=d;function f(g,m,p,b){let _=a?-1:1;if(g!==m){for(g+=l;e[g%l].skip;)g-=_;for(;e[m%l].skip;)m+=_;g%l!==m%l&&(c.push({start:g%l,end:m%l,loop:p,style:b}),u=b,d=m%l)}}for(let g of t){d=a?d:g.start;let m=e[d%l],p;for(h=d+1;h<=g.end;h++){let b=e[h%l];p=KE(i.setContext(Kr(r,{type:"segment",p0:m,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),n5(p,u)&&f(d,h-1,g.loop,u),m=b,u=p}d<h-1&&f(d,h-1,g.loop,u)}return c}function KE(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function n5(n,t){if(!t)return!1;let e=[],i=function(r,s){return C_(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function df(n,t,e){return n.options.clip?n[e]:t[e]}function i5(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:df(e,t,"left"),right:df(e,t,"right"),top:df(i,t,"top"),bottom:df(i,t,"bottom")}:t}function $_(n,t){let e=t._clip;if(e.disabled)return!1;let i=i5(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}var J_=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=x_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},jr=new J_,yT="transparent",r5={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=A_(n||yT),r=i.valid&&A_(t||yT);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},X_=class{constructor(t,e,i,r){let s=e[i];r=yl([t.to,r,s,t.from]);let o=yl([t.from,s,r]);this._active=!0,this._fn=t.fn||r5[t.type||typeof o],this._easing=dl[t.easing]||dl.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=yl([t.to,e,r,t.from]),this._from=yl([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}},If=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Tt(t))return;let e=Object.keys(se.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!Tt(s))return;let o={};for(let a of e)o[a]=s[a];(ne(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){let i=e.options,r=o5(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&s5(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}let u=e[c],d=s[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}s[c]=d=new X_(h,t,c,u),r.push(d)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return jr.add(this._chart,i),!0}};function s5(n,t){let e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function o5(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function vT(n,t){let e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function a5(n,t,e){if(e===!1)return!1;let i=vT(n,e),r=vT(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function l5(n){let t,e,i,r;return Tt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function x1(n,t){let e=[],i=n._getSortedDatasetMetas(t),r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function ST(n,t,e,i={}){let r=n.keys,s=i.mode==="single",o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(u=!0,i.all)continue;break}c=n.values[l],me(c)&&(s||t===0||Ti(t)===Ti(c))&&(t+=c)}return!u&&!i.all?0:t}function c5(n,t){let{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:n[u]};return a}function B_(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function u5(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function d5(n){let{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function h5(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function CT(n,t,e,i){for(let r of t.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function AT(n,t){let{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=u5(s,o,i),d=t.length,h;for(let f=0;f<d;++f){let g=t[f],{[l]:m,[c]:p}=g,b=g._stacks||(g._stacks={});h=b[c]=h5(r,u,m),h[a]=p,h._top=CT(h,o,!0,i.type),h._bottom=CT(h,o,!1,i.type);let _=h._visualValues||(h._visualValues={});_[a]=p}}function z_(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function f5(n,t){return Kr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function g5(n,t,e){return Kr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function vu(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let r of t){let s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}var H_=n=>n==="reset"||n==="none",ET=(n,t)=>t?n:Object.assign({},n),p5=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:x1(e,!0),values:null},ir=class{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=B_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&vu(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,s=e.xAxisID=mt(i.xAxisID,z_(t,"x")),o=e.yAxisID=mt(i.yAxisID,z_(t,"y")),a=e.rAxisID=mt(i.rAxisID,z_(t,"r")),l=e.indexAxis,c=e.iAxisID=r(l,s,o,a),u=e.vAxisID=r(l,o,s,a);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&b_(this._data,this),t._stacked&&vu(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Tt(e)){let r=this._cachedMeta;this._data=c5(e,r)}else if(i!==e){if(i){b_(i,this);let r=this._cachedMeta;vu(r),r._parsed=[]}e&&Object.isExtensible(e)&&eT(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),r=!1;this._dataCheck();let s=e._stacked;e._stacked=B_(e.vScale,e),e.stack!==i.stack&&(r=!0,vu(e),e.stack=i.stack),this._resyncElements(t),(r||s!==e._stacked)&&(AT(this,e._parsed),e._stacked=B_(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis,l=t===0&&e===r.length?!0:i._sorted,c=t>0&&i._parsed[t-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{ne(r[t])?h=this.parseArrayData(i,r,t,e):Tt(r[t])?h=this.parseObjectData(i,r,t,e):h=this.parsePrimitiveData(i,r,t,e);let f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<e;++u)i._parsed[u+t]=d=h[u],l&&(f()&&(l=!1),c=d);i._sorted=l}o&&AT(this,h)}parsePrimitiveData(t,e,i,r){let{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(r),h,f,g;for(h=0,f=r;h<f;++h)g=h+i,d[h]={[a]:u||s.parse(c[g],g),[l]:o.parse(e[g],g)};return d}parseArrayData(t,e,i,r){let{xScale:s,yScale:o}=t,a=new Array(r),l,c,u,d;for(l=0,c=r;l<c;++l)u=l+i,d=e[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(t,e,i,r){let{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r),u,d,h,f;for(u=0,d=r;u<d;++u)h=u+i,f=e[h],c[u]={x:s.parse(Ur(f,a),h),y:o.parse(Ur(f,l),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let r=this.chart,s=this._cachedMeta,o=e[t.axis],a={keys:x1(r,!0),values:e._stacks[t.axis]._visualValues};return ST(a,o,s.index,{mode:i})}updateRangeFromParsed(t,e,i,r){let s=i[e.axis],o=s===null?NaN:s,a=r&&i._stacks[e.axis];r&&a&&(r.values=a,o=ST(r,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){let i=this._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=this._getOtherScale(t),l=p5(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=d5(a),h,f;function g(){f=r[h];let m=f[a.axis];return!me(f[t.axis])||u>m||d<m}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,t,f,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){let e=this._cachedMeta._parsed,i=[],r,s,o;for(r=0,s=e.length;r<s;++r)o=e[r][t.axis],me(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,r=e.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=l5(mt(this.options.clip,a5(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],s=e.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop,u;for(i.dataset&&i.dataset.draw(t,s,a,l),u=a;u<a+l;++u){let d=r[u];d.hidden||(d.active&&c?o.push(d):d.draw(t,s))}for(u=0;u<o.length;++u)o[u].draw(t,s)}getStyle(t,e){let i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){let r=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let o=this._cachedMeta.data[t];s=o.$context||(o.$context=g5(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=f5(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let r=e==="active",s=this._cachedDataOpts,o=t+"-"+e,a=s[o],l=this.enableOptionSharing&&pl(i);if(a)return ET(a,l);let c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),d=r?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(se.elements[t]),g=()=>this.getContext(i,r,e),m=c.resolveNamedOptions(h,f,g,d);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(ET(m,l))),m}_resolveAnimations(t,e,i){let r=this.chart,s=this._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){let u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,e),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(t,i,e))}let c=new If(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||H_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(e,s)||s!==r;return this.updateSharedOptions(s,e,i),{sharedOptions:s,includeOptions:o}}updateElement(t,e,i,r){H_(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!H_(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;let s=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];let r=i.length,s=e.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,t):s<r&&this._removeElements(s,r-s)}_insertElements(t,e,i=!0){let r=this._cachedMeta,s=r.data,o=t+e,a,l=c=>{for(c.length+=e,a=c.length-1;a>=o;a--)c[a]=c[a-e]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(t,e),i&&this.updateElements(s,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let r=i._parsed.splice(t,e);i._stacked&&vu(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};function m5(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=__(i.sort((r,s)=>r-s))}return n._cache.$bar}function b5(n){let t=n.iScale,e=m5(t,n.type),i=t._length,r,s,o,a,l=()=>{o===32767||o===-32768||(pl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return i}function _5(n,t,e,i){let r=e.barThickness,s,o;return Ct(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function x5(n,t,e,i){let r=t.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:e.barPercentage,start:c}}function y5(n,t,e,i){let r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function y1(n,t,e,i){return ne(n)?y5(n,t,e,i):t[e.axis]=e.parse(n,i),t}function TT(n,t,e,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[],c,u,d,h;for(c=e,u=e+i;c<u;++c)h=t[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(y1(h,d,s,c));return l}function W_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function v5(n,t,e){return n!==0?Ti(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function S5(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function C5(n,t,e,i){let r=t.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=S5(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=c:(e._bottom||0)===i?r=u:(s[wT(u,o,a,l)]=!0,r=c)),s[wT(r,o,a,l)]=!0,n.borderSkipped=s}function wT(n,t,e,i){return i?(n=A5(n,t,e),n=NT(n,e,t)):n=NT(n,t,e),n}function A5(n,t,e){return n===t?e:n===e?t:n}function NT(n,t,e){return n==="start"?t:n==="end"?e:n}function E5(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var Z_=class extends ir{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return TT(t,e,i,r)}parseArrayData(t,e,i,r){return TT(t,e,i,r)}parseObjectData(t,e,i,r){let{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[],h,f,g,m;for(h=i,f=i+r;h<f;++h)m=e[h],g={},g[s.axis]=s.parse(Ur(m,c),h),d.push(y1(Ur(m,u),g,o,h));return d}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);let s=i._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let e=this._cachedMeta,{iScale:i,vScale:r}=e,s=this.getParsed(t),o=s._custom,a=W_(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){let s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(e,r);for(let f=e;f<e+i;f++){let g=this.getParsed(f),m=s||Ct(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),b=(g._stacks||{})[a.axis],_={horizontal:c,base:m.base,enableBorderRadius:!b||W_(g._custom)||o===b._top||o===b._bottom,x:c?m.head:p.center,y:c?p.center:m.head,height:c?p.size:Math.abs(m.size),width:c?Math.abs(m.size):p.size};h&&(_.options=d||this.resolveDataElementOptions(f,t[f].active?"active":r));let x=_.options||t[f].options;C5(_,x,b,o),E5(_,x,u.ratio),this.updateElement(t[f],f,_,r)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),l=a&&a[i.axis],c=u=>{let d=u._parsed.find(f=>f[i.axis]===l),h=d&&d[u.vScale.axis];if(Ct(h)||isNaN(h))return!0};for(let u of r)if(!(e!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[mt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let r=this._getStacks(t,i),s=e!==void 0?r.indexOf(e):-1;return s===-1?r.length-1:s}_getRuler(){let t=this.options,e=this._cachedMeta,i=e.iScale,r=[],s,o;for(s=0,o=e.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let a=t.barThickness;return{min:a||b5(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,u=W_(c),d=l[e.axis],h=0,f=i?this.applyStack(e,l,i):d,g,m;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&Ti(d)!==Ti(c.barEnd)&&(h=0),h+=d);let p=!Ct(s)&&!u?s:h,b=e.getPixelForValue(p);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(h+f):g=b,m=g-b,Math.abs(m)<o){m=v5(m,e,a)*o,d===a&&(b-=m/2);let _=e.getPixelForDecimal(0),x=e.getPixelForDecimal(1),y=Math.min(_,x),v=Math.max(_,x);b=Math.max(Math.min(b,v),y),g=b+m,i&&!u&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(g)-e.getValueForPixel(b))}if(b===e.getPixelForValue(a)){let _=Ti(m)*e.getLineWidthForValue(a)/2;b+=_,m-=_}return{size:m,base:b,head:g,center:g+m/2}}_calculateBarIndexPixels(t,e){let i=e.scale,r=this.options,s=r.skipNull,o=mt(r.maxBarThickness,1/0),a,l,c=this._getAxisCount();if(e.grouped){let u=s?this._getStackCount(t):e.stackCount,d=r.barThickness==="flex"?x5(t,e,r,u*c):_5(t,e,r,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(mt(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+f;a=d.start+d.chunk*g+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(o,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length,s=0;for(;s<r;++s)this.getParsed(s)[e.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}},Q_=class extends ir{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){let s=super.parsePrimitiveData(t,e,i,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+i).radius;return s}parseArrayData(t,e,i,r){let s=super.parseArrayData(t,e,i,r);for(let o=0;o<s.length;o++){let a=e[i+o];s[o]._custom=mt(a[2],this.resolveDataElementOptions(o+i).radius)}return s}parseObjectData(t,e,i,r){let s=super.parseObjectData(t,e,i,r);for(let o=0;o<s.length;o++){let a=e[i+o];s[o]._custom=mt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){let s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,r),u=o.axis,d=a.axis;for(let h=e;h<e+i;h++){let f=t[h],g=!s&&this.getParsed(h),m={},p=m[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),b=m[d]=s?a.getBasePixel():a.getPixelForValue(g[d]);m.skip=isNaN(p)||isNaN(b),c&&(m.options=l||this.resolveDataElementOptions(h,f.active?"active":r),s&&(m.options.radius=0)),this.updateElement(f,h,m,r)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let s=r.radius;return e!=="active"&&(r.radius=0),r.radius+=mt(i&&i._custom,s),r}};function T5(n,t,e){let i=1,r=1,s=0,o=0;if(t<ie){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(x,y,v)=>bl(x,a,l,!0)?1:Math.max(y,y*e,v,v*e),g=(x,y,v)=>bl(x,a,l,!0)?-1:Math.min(y,y*e,v,v*e),m=f(0,c,d),p=f(xe,u,h),b=g(Lt,c,d),_=g(Lt+xe,u,h);i=(m-b)/2,r=(p-_)/2,s=-(m+b)/2,o=-(p+_)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var Nu=class extends ir{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,c)=>{let d=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:i,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(Tt(i[t])){let{key:l="value"}=this._parsing;s=c=>+Ur(i[c],l)}let o,a;for(o=t,a=t+e;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return hi(this.options.rotation-90)}_getCircumference(){return hi(this.options.circumference)}_getRotationExtents(){let t=ie,e=-ie;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+o)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:i}=e,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(VE(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:g,offsetY:m}=T5(d,u,l),p=(i.width-o)/h,b=(i.height-o)/f,_=Math.max(Math.min(p,b)/2,0),x=d_(this.options.radius,_),y=Math.max(x*l,0),v=(x-y)/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){let i=this.options,r=this._cachedMeta,s=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*s/ie)}updateElements(t,e,i,r){let s=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,h=s&&c.animateScale,f=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(e,r),b=this._getRotation(),_;for(_=0;_<e;++_)b+=this._circumference(_,s);for(_=e;_<e+i;++_){let x=this._circumference(_,s),y=t[_],v={x:u+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+x,circumference:x,outerRadius:g,innerRadius:f};p&&(v.options=m||this.resolveDataElementOptions(_,y.active?"active":r)),b+=x,this.updateElement(y,_,v,r)}}calculateTotal(){let t=this._cachedMeta,e=t.data,i=0,r;for(r=0;r<e.length;r++){let s=t._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?ie*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=_l(e._parsed[t],i.options.locale);return{label:r[t]||"",value:s}}getMaxBorderWidth(t){let e=0,i=this.chart,r,s,o,a,l;if(!t){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,a=o.controller;break}}if(!t)return 0;for(r=0,s=t.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){let s=this.resolveDataElementOptions(i);e=Math.max(e,s.offset||0,s.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(mt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}},tx=class extends ir{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=e,o=this.chart._animationsDisabled,{start:a,count:l}=v_(e,r,o);this._drawStart=a,this._drawCount=l,S_(e)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;let c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},t),this.updateElements(r,a,l,t)}updateElements(t,e,i,r){let s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r),h=o.axis,f=a.axis,{spanGaps:g,segment:m}=this.options,p=Vo(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none",_=e+i,x=t.length,y=e>0&&this.getParsed(e-1);for(let v=0;v<x;++v){let S=t[v],C=b?S:{};if(v<e||v>=_){C.skip=!0;continue}let A=this.getParsed(v),E=Ct(A[f]),$=C[h]=o.getPixelForValue(A[h],v),L=C[f]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[f],v);C.skip=isNaN($)||isNaN(L)||E,C.stop=v>0&&Math.abs(A[h]-y[h])>p,m&&(C.parsed=A,C.raw=c.data[v]),d&&(C.options=u||this.resolveDataElementOptions(v,S.active?"active":r)),b||this.updateElement(S,v,C,r),y=A}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;let s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},Pf=class extends ir{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((s,o)=>{let l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=_l(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:s}}parseObjectData(t,e,i,r){return M_.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{let s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(r/2,0),o=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,r){let s=r==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*Lt,f=h,g,m=360/this.countVisibleElements();for(g=0;g<e;++g)f+=this._computeAngle(g,r,m);for(g=e;g<e+i;g++){let p=t[g],b=f,_=f+this._computeAngle(g,r,m),x=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=_,s&&(l.animateScale&&(x=0),l.animateRotate&&(b=_=h));let y={x:u,y:d,innerRadius:0,outerRadius:x,startAngle:b,endAngle:_,options:this.resolveDataElementOptions(g,p.active?"active":r)};this.updateElement(p,g,y,r)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?hi(this.resolveDataElementOptions(t,e).angle||i):0}},ex=class extends Nu{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},nx=class extends ir{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return M_.bind(this)(t,e,i,r)}update(t){let e=this._cachedMeta,i=e.dataset,r=e.data||[],s=e.iScale.getLabels();if(i.points=r,t!=="resize"){let o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);let a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(i,void 0,a,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){let s=this._cachedMeta.rScale,o=r==="reset";for(let a=e;a<e+i;a++){let l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":r),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,h=o?s.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,a,f,r)}}},ix=class extends ir{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled,{start:s,count:o}=v_(e,i,r);if(this._drawStart=s,this._drawCount=o,S_(e)&&(s=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;let c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,s,o,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){let s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,r),d=this.getSharedOptions(u),h=this.includeOptions(r,d),f=o.axis,g=a.axis,{spanGaps:m,segment:p}=this.options,b=Vo(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||r==="none",x=e>0&&this.getParsed(e-1);for(let y=e;y<e+i;++y){let v=t[y],S=this.getParsed(y),C=_?v:{},A=Ct(S[g]),E=C[f]=o.getPixelForValue(S[f],y),$=C[g]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[g],y);C.skip=isNaN(E)||isNaN($)||A,C.stop=y>0&&Math.abs(S[f]-x[f])>b,p&&(C.parsed=S,C.raw=c.data[y]),h&&(C.options=d||this.resolveDataElementOptions(y,v.active?"active":r)),_||this.updateElement(v,y,C,r),x=S}this.updateSharedOptions(d,r,u)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}let i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;let s=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,s,o)/2}},w5=Object.freeze({__proto__:null,BarController:Z_,BubbleController:Q_,DoughnutController:Nu,LineController:tx,PieController:ex,PolarAreaController:Pf,RadarController:nx,ScatterController:ix});function qo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var rx=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return qo()}parse(){return qo()}format(){return qo()}add(){return qo()}diff(){return qo()}startOf(){return qo()}endOf(){return qo()}},N5={_date:rx};function k5(n,t,e,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?ZE:Xi;if(i){if(r._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){let h=c(s,t,e-d),f=c(s,t,e+d);return{lo:h.lo,hi:f.hi}}}}else{let u=c(s,t,e);if(l){let{vScale:d}=r._cachedMeta,{_parsed:h}=n,f=h.slice(0,u.lo+1).reverse().findIndex(m=>!Ct(m[d.axis]));u.lo-=Math.max(0,f);let g=h.slice(u.hi).findIndex(m=>!Ct(m[d.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:s.length-1}}function Lu(n,t,e,i,r){let s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=k5(s[a],t,o,r);for(let f=d;f<=h;++f){let g=u[f];g.skip||i(g,c,f)}}}function O5(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){let s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function U_(n,t,e,i,r){let s=[];return!r&&!n.isPointInArea(t)||Lu(n,e,t,function(a,l,c){!r&&!Zi(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function M5(n,t,e,i){let r=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=m_(o,{x:t.x,y:t.y});bl(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Lu(n,e,t,s),r}function R5(n,t,e,i,r,s){let o=[],a=O5(e),l=Number.POSITIVE_INFINITY;function c(u,d,h){let f=u.inRange(t.x,t.y,r);if(i&&!f)return;let g=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(g))&&!f)return;let p=a(t,g);p<l?(o=[{element:u,datasetIndex:d,index:h}],l=p):p===l&&o.push({element:u,datasetIndex:d,index:h})}return Lu(n,e,t,c),o}function K_(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?M5(n,t,e,r):R5(n,t,e,i,r,s)}function kT(n,t,e,i,r){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Lu(n,e,t,(l,c,u)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,r))}),i&&!a?[]:s}var L5={evaluateInteractionItems:Lu,modes:{index(n,t,e,i){let r=Ds(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?U_(n,r,s,i,o):K_(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,i){let r=Ds(t,n),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?U_(n,r,s,i,o):K_(n,r,s,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,i){let r=Ds(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return U_(n,r,s,i,o)},nearest(n,t,e,i){let r=Ds(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return K_(n,r,s,e.intersect,i,o)},x(n,t,e,i){let r=Ds(t,n);return kT(n,r,"x",e.intersect,i)},y(n,t,e,i){let r=Ds(t,n);return kT(n,r,"y",e.intersect,i)}}},v1=["left","top","right","bottom"];function Su(n,t){return n.filter(e=>e.pos===t)}function OT(n,t){return n.filter(e=>v1.indexOf(e.pos)===-1&&e.box.axis===t)}function Cu(n,t){return n.sort((e,i)=>{let r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function D5(n){let t=[],e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function I5(n){let t={};for(let e of n){let{stack:i,pos:r,stackWeight:s}=e;if(!i||!v1.includes(r))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function P5(n,t){let e=I5(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&t.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&t.availableHeight)}return e}function F5(n){let t=D5(n),e=Cu(t.filter(c=>c.box.fullSize),!0),i=Cu(Su(t,"left"),!0),r=Cu(Su(t,"right")),s=Cu(Su(t,"top"),!0),o=Cu(Su(t,"bottom")),a=OT(t,"x"),l=OT(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Su(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function MT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function S1(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function $5(n,t,e,i){let{pos:r,box:s}=e,o=n.maxPadding;if(!Tt(r)){e.size&&(n[r]-=e.size);let d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?s.height:s.width),e.size=d.size/d.count,n[r]+=e.size}s.getPadding&&S1(o,s.getPadding());let a=Math.max(0,t.outerWidth-MT(o,n,"left","right")),l=Math.max(0,t.outerHeight-MT(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function B5(n){let t=n.maxPadding;function e(i){let r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function z5(n,t){let e=t.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Tu(n,t,e,i){let r=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,z5(a.horizontal,t));let{same:d,other:h}=$5(t,e,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Tu(r,t,e,i)||u}function wf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function RT(n,t,e,i){let r=e.padding,{x:s,y:o}=t;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;pl(c.start)&&(o=c.start),l.fullSize?wf(l,r.left,o,e.outerWidth-r.right-r.left,h):wf(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;pl(c.start)&&(s=c.start),l.fullSize?wf(l,s,r.top,h,e.outerHeight-r.bottom-r.top):wf(l,s,t.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}t.x=s,t.y=o}var cn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let r=Je(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=F5(n.boxes),l=a.vertical,c=a.horizontal;Ht(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});let u=l.reduce((m,p)=>p.box.options&&p.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);S1(h,Je(i));let f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),g=P5(l.concat(c),d);Tu(a.fullSize,f,d,g),Tu(l,f,d,g),Tu(c,f,d,g)&&Tu(l,f,d,g),B5(f),RT(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,RT(a.rightAndBottom,f,d,g),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ht(a.chartArea,m=>{let p=m.box;Object.assign(p,n.chartArea),p.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Ff=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}},sx=class extends Ff{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Lf="$chartjs",H5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},LT=n=>n===null||n==="";function W5(n,t){let e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Lf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",LT(r)){let s=L_(n,"width");s!==void 0&&(n.width=s)}if(LT(i))if(n.style.height==="")n.height=n.width/(t||2);else{let s=L_(n,"height");s!==void 0&&(n.height=s)}return n}var C1=pT?{passive:!0}:!1;function U5(n,t,e){n&&n.addEventListener(t,e,C1)}function K5(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,C1)}function j5(n,t){let e=H5[n.type]||n.type,{x:i,y:r}=Ds(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function $f(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function V5(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||$f(a.addedNodes,i),o=o&&!$f(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function G5(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||$f(a.removedNodes,i),o=o&&!$f(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var ku=new Map,DT=0;function A1(){let n=window.devicePixelRatio;n!==DT&&(DT=n,ku.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function q5(n,t){ku.size||window.addEventListener("resize",A1),ku.set(n,t)}function Y5(n){ku.delete(n),ku.size||window.removeEventListener("resize",A1)}function J5(n,t,e){let i=n.canvas,r=i&&Ef(i);if(!r)return;let s=y_((a,l)=>{let c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),q5(n,s),o}function j_(n,t,e){e&&e.disconnect(),t==="resize"&&Y5(n)}function X5(n,t,e){let i=n.canvas,r=y_(s=>{n.ctx!==null&&e(j5(s,n))},n);return U5(i,t,r),r}var ox=class extends Ff{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(W5(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[Lf])return!1;let i=e[Lf].initial;["height","width"].forEach(s=>{let o=i[s];Ct(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[Lf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:V5,detach:G5,resize:J5}[e]||X5;r[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:j_,detach:j_,resize:j_}[e]||K5)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return gT(t,e,i,r)}isAttached(t){let e=t&&Ef(t);return!!(e&&e.isConnected)}};function Z5(n){return!Af()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?sx:ox}var wi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Vo(this.x)&&Vo(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function Q5(n,t){let e=n.options.ticks,i=t3(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?n3(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return i3(t,c,s,o/r),c;let u=e3(s,t,r);if(o>0){let d,h,f=o>1?Math.round((l-a)/(o-1)):null;for(Nf(t,c,u,Ct(f)?0:a-f,a),d=0,h=o-1;d<h;d++)Nf(t,c,u,s[d],s[d+1]);return Nf(t,c,u,l,Ct(f)?t.length:l+f),c}return Nf(t,c,u),c}function t3(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function e3(n,t,e){let i=r3(n),r=t.length/e;if(!i)return Math.max(r,1);let s=YE(i);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function n3(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function i3(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function Nf(n,t,e,i,r){let s=mt(i,0),o=Math.min(mt(r,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),r&&(l=r-i,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function r3(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var s3=n=>n==="left"?"right":n==="right"?"left":n,IT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,PT=(n,t)=>Math.min(t||n,n);function FT(n,t){let e=[],i=n.length/t,r=n.length,s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function o3(n,t,e){let i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(r),c;if(!(e&&(i===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function a3(n,t){Ht(n,e=>{let i=e.gc,r=i.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function Au(n){return n.drawTicks?n.tickLength:0}function $T(n,t){if(!n.display)return 0;let e=Te(n.font,t),i=Je(n.padding);return(ne(n.text)?n.text.length:1)*e.lineHeight+i.height}function l3(n,t){return Kr(n,{scale:t,type:"scale"})}function c3(n,t,e){return Kr(n,{tick:e,index:t,type:"tick"})}function u3(n,t,e){let i=xf(n);return(e&&t!=="right"||!e&&t==="right")&&(i=s3(i)),i}function d3(n,t,e,i){let{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,f,g,m=o-r,p=a-s;if(n.isHorizontal()){if(f=Ye(i,s,a),Tt(e)){let b=Object.keys(e)[0],_=e[b];g=u[b].getPixelForValue(_)+m-t}else e==="center"?g=(c.bottom+c.top)/2+m-t:g=IT(n,e,t);h=a-s}else{if(Tt(e)){let b=Object.keys(e)[0],_=e[b];f=u[b].getPixelForValue(_)-p+t}else e==="center"?f=(c.left+c.right)/2-p+t:f=IT(n,e,t);g=Ye(i,o,r),d=e==="left"?-xe:xe}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}var Jo=class n extends wi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=In(t,Number.POSITIVE_INFINITY),e=In(e,Number.NEGATIVE_INFINITY),i=In(i,Number.POSITIVE_INFINITY),r=In(r,Number.NEGATIVE_INFINITY),{min:In(t,i),max:In(e,r),minDefined:me(t),maxDefined:me(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:In(e,In(i,e)),max:In(i,In(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xt(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lT(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?FT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Q5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xt(this.options.afterUpdate,[this])}beforeSetDimensions(){Xt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Xt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Xt(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Xt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=PT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=ke(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(t.offset?.5:1)),l=this.maxHeight-Au(t.grid)-e.padding-$T(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=bf(Math.min(Math.asin(ke((u.highest.height+6)/a,-1,1)),Math.asin(ke(l/c,-1,1))-Math.asin(ke(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Xt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xt(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=$T(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=Au(s)+l):(t.height=this.maxHeight,t.width=Au(s)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,g=hi(this.labelRotation),m=Math.cos(g),p=Math.sin(g);if(a){let b=i.mirror?0:p*d.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+b+f)}else{let b=i.mirror?0:m*d.width+p*h.height;t.width=Math.min(this.maxWidth,t.width+b+f)}this._calculatePadding(c,u,p,m)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;l?c?(h=r*t.width,f=i*e.height):(h=i*t.height,f=r*e.width):s==="start"?f=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,f=e.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;s==="start"?(u=0,d=t.height):s==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xt(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Ct(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=FT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/PT(e,i)),c=0,u=0,d,h,f,g,m,p,b,_,x,y,v;for(d=0;d<e;d+=l){if(g=t[d].label,m=this._resolveTickFontOptions(d),r.font=p=m.string,b=s[p]=s[p]||{data:{},gc:[]},_=m.lineHeight,x=y=0,!Ct(g)&&!ne(g))x=mu(r,b.data,b.gc,x,g),y=_;else if(ne(g))for(h=0,f=g.length;h<f;++h)v=g[h],!Ct(v)&&!ne(v)&&(x=mu(r,b.data,b.gc,x,v),y+=_);o.push(x),a.push(y),c=Math.max(x,c),u=Math.max(y,u)}a3(s,e);let S=o.indexOf(c),C=a.indexOf(u),A=E=>({width:o[E]||0,height:a[E]||0});return{first:A(0),last:A(e-1),widest:A(S),highest:A(C),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return XE(this._alignToPixels?Ms(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=c3(this.getContext(),t,i))}return this.$context||(this.$context=l3(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=hi(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Au(s),f=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,p=m/2,b=function(D){return Ms(i,D,m)},_,x,y,v,S,C,A,E,$,L,w,N;if(o==="top")_=b(this.bottom),C=this.bottom-h,E=_-p,L=b(t.top)+p,N=t.bottom;else if(o==="bottom")_=b(this.top),L=t.top,N=b(t.bottom)-p,C=_+p,E=this.top+h;else if(o==="left")_=b(this.right),S=this.right-h,A=_-p,$=b(t.left)+p,w=t.right;else if(o==="right")_=b(this.left),$=t.left,w=b(t.right)-p,S=_+p,A=this.left+h;else if(e==="x"){if(o==="center")_=b((t.top+t.bottom)/2+.5);else if(Tt(o)){let D=Object.keys(o)[0],F=o[D];_=b(this.chart.scales[D].getPixelForValue(F))}L=t.top,N=t.bottom,C=_+p,E=C+h}else if(e==="y"){if(o==="center")_=b((t.left+t.right)/2);else if(Tt(o)){let D=Object.keys(o)[0],F=o[D];_=b(this.chart.scales[D].getPixelForValue(F))}S=_-p,A=S-h,$=t.left,w=t.right}let R=mt(r.ticks.maxTicksLimit,d),k=Math.max(1,Math.ceil(d/R));for(x=0;x<d;x+=k){let D=this.getContext(x),F=s.setContext(D),z=a.setContext(D),U=F.lineWidth,X=F.color,G=z.dash||[],Q=z.dashOffset,st=F.tickWidth,ut=F.tickColor,at=F.tickBorderDash||[],et=F.tickBorderDashOffset;y=o3(this,x,l),y!==void 0&&(v=Ms(i,y,U),c?S=A=$=w=v:C=E=L=N=v,f.push({tx1:S,ty1:C,tx2:A,ty2:E,x1:$,y1:L,x2:w,y2:N,width:U,color:X,borderDash:G,borderDashOffset:Q,tickWidth:st,tickColor:ut,tickBorderDash:at,tickBorderDashOffset:et}))}return this._ticksLength=d,this._borderValue=_,f}_computeLabelItems(t){let e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=Au(i.grid),f=h+u,g=d?-u:f,m=-hi(this.labelRotation),p=[],b,_,x,y,v,S,C,A,E,$,L,w,N="middle";if(r==="top")S=this.bottom-g,C=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+g,C=this._getXAxisLabelAlignment();else if(r==="left"){let k=this._getYAxisLabelAlignment(h);C=k.textAlign,v=k.x}else if(r==="right"){let k=this._getYAxisLabelAlignment(h);C=k.textAlign,v=k.x}else if(e==="x"){if(r==="center")S=(t.top+t.bottom)/2+f;else if(Tt(r)){let k=Object.keys(r)[0],D=r[k];S=this.chart.scales[k].getPixelForValue(D)+f}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")v=(t.left+t.right)/2-f;else if(Tt(r)){let k=Object.keys(r)[0],D=r[k];v=this.chart.scales[k].getPixelForValue(D)}C=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));let R=this._getLabelSizes();for(b=0,_=a.length;b<_;++b){x=a[b],y=x.label;let k=s.setContext(this.getContext(b));A=this.getPixelForTick(b)+s.labelOffset,E=this._resolveTickFontOptions(b),$=E.lineHeight,L=ne(y)?y.length:1;let D=L/2,F=k.color,z=k.textStrokeColor,U=k.textStrokeWidth,X=C;o?(v=A,C==="inner"&&(b===_-1?X=this.options.reverse?"left":"right":b===0?X=this.options.reverse?"right":"left":X="center"),r==="top"?c==="near"||m!==0?w=-L*$+$/2:c==="center"?w=-R.highest.height/2-D*$+$:w=-R.highest.height+$/2:c==="near"||m!==0?w=$/2:c==="center"?w=R.highest.height/2-D*$:w=R.highest.height-L*$,d&&(w*=-1),m!==0&&!k.showLabelBackdrop&&(v+=$/2*Math.sin(m))):(S=A,w=(1-L)*$/2);let G;if(k.showLabelBackdrop){let Q=Je(k.backdropPadding),st=R.heights[b],ut=R.widths[b],at=w-Q.top,et=0-Q.left;switch(N){case"middle":at-=st/2;break;case"bottom":at-=st;break}switch(C){case"center":et-=ut/2;break;case"right":et-=ut;break;case"inner":b===_-1?et-=ut:b>0&&(et-=ut/2);break}G={left:et,top:at,width:ut+Q.width,height:st+Q.height,color:k.backdropColor}}p.push({label:y,font:E,textOffset:w,options:{rotation:m,color:F,strokeColor:z,strokeWidth:U,textAlign:X,textBaseline:N,translation:[v,S],backdrop:G}})}return p}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-hi(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width,c,u;return e==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=Ms(t,this.left,o)-o/2,u=Ms(t,this.right,a)+a/2,d=h=l):(d=Ms(t,this.top,o)-o/2,h=Ms(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&xu(i,r);let s=this.getLabelItems(t);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;Rs(i,c,0,u,l,a)}r&&yu(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;let s=Te(i.font),o=Je(i.padding),a=i.align,l=s.lineHeight/2;e==="bottom"||e==="center"||Tt(e)?(l+=o.bottom,ne(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=d3(this,l,e,a);Rs(t,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:u3(a,e,r),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=mt(t.grid&&t.grid.z,-1),r=mt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Te(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Sl=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;g3(e)&&(i=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,h3(t,o,i),this.override&&se.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in se[r]&&(delete se[r][i],this.override&&delete Os[i])}};function h3(n,t,e){let i=hl(Object.create(null),[e?se.get(e):{},se.get(t),n.defaults]);se.set(t,i),n.defaultRoutes&&f3(t,n.defaultRoutes),n.descriptors&&se.describe(t,n.descriptors)}function f3(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");se.route(s,r,l,a)})}function g3(n){return"id"in n&&"defaults"in n}var ax=class{constructor(){this.controllers=new Sl(ir,"datasets",!0),this.elements=new Sl(wi,"elements"),this.plugins=new Sl(Object,"plugins"),this.scales=new Sl(Jo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ht(r,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let r=mf(t);Xt(i["before"+r],[],i),e[t](i),Xt(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}},nr=new ax,lx=class{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,i,r){r=r||{};for(let s of t){let o=s.plugin,a=o[i],l=[e,r,s.options];if(Xt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=mt(i.options&&i.options.plugins,{}),s=p3(i);return r===!1&&!e?[]:b3(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}};function p3(n){let t={},e=[],i=Object.keys(nr.plugins.items);for(let s=0;s<i.length;s++)e.push(nr.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function m3(n,t){return!t&&n===!1?null:n===!0?{}:n}function b3(n,{plugins:t,localIds:e},i,r){let s=[],o=n.getContext();for(let a of t){let l=a.id,c=m3(i[l],r);c!==null&&s.push({plugin:a,options:_3(n.config,{plugin:a,local:e[l]},c,o)})}return s}function _3(n,{plugin:t,local:e},i,r){let s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cx(n,t){let e=se.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function x3(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function y3(n,t){return n===t?"_index_":"_value_"}function BT(n){if(n==="x"||n==="y"||n==="r")return n}function v3(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ux(n,...t){if(BT(n))return n;for(let e of t){let i=e.axis||v3(e.position)||n.length>1&&BT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function zT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function S3(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return zT(n,"x",e[0])||zT(n,"y",e[0])}return{}}function C3(n,t){let e=Os[n.type]||{scales:{}},i=t.scales||{},r=cx(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!Tt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=ux(o,a,S3(o,n),se.scales[a.type]),c=y3(l,r),u=e.scales||{};s[o]=gl(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||cx(a,t),u=(Os[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=x3(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),gl(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];gl(a,[se.scales[a.type],se.scale])}),s}function E1(n){let t=n.options||(n.options={});t.plugins=mt(t.plugins,{}),t.scales=C3(n,t)}function T1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function A3(n){return n=n||{},n.data=T1(n.data),E1(n),n}var HT=new Map,w1=new Set;function kf(n,t){let e=HT.get(n);return e||(e=t(),HT.set(n,e),w1.add(e)),e}var Eu=(n,t,e)=>{let i=Ur(t,e);i!==void 0&&n.add(i)},dx=class{constructor(t){this._config=A3(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=T1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),E1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return kf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return kf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return kf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return kf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>Eu(l,t,d))),u.forEach(d=>Eu(l,r,d)),u.forEach(d=>Eu(l,Os[s]||{},d)),u.forEach(d=>Eu(l,se,d)),u.forEach(d=>Eu(l,yf,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),w1.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Os[e]||{},se.datasets[e]||{},{type:e},se,yf]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=WT(this._resolverCache,t,r),l=o;if(T3(o,e)){s.$shared=!1,i=Hr(i)?i():i;let c=this.createResolver(t,i,a);l=jo(o,i,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,i=[""],r){let{resolver:s}=WT(this._resolverCache,t,i);return Tt(e)?jo(s,e,void 0,r):s}};function WT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let r=e.join(),s=i.get(r);return s||(s={resolver:Cf(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var E3=n=>Tt(n)&&Object.getOwnPropertyNames(n).some(t=>Hr(n[t]));function T3(n,t){let{isScriptable:e,isIndexable:i}=N_(n);for(let r of t){let s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(Hr(a)||E3(a))||o&&ne(a))return!0}return!1}var w3="4.5.1",N3=["top","bottom","left","right","chartArea"];function UT(n,t){return n==="top"||n==="bottom"||N3.indexOf(n)===-1&&t==="x"}function KT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function jT(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Xt(e&&e.onComplete,[n],t)}function k3(n){let t=n.chart,e=t.options.animation;Xt(e&&e.onProgress,[n],t)}function N1(n){return Af()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Df={},VT=n=>{let t=N1(n);return Object.values(Df).filter(e=>e.canvas===t).pop()};function O3(n,t,e){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=t){let o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function M3(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}var Cl=class{static defaults=se;static instances=Df;static overrides=Os;static registry=nr;static version=w3;static getChart=VT;static register(...t){nr.add(...t),GT()}static unregister(...t){nr.remove(...t),GT()}constructor(t,e){let i=this.config=new dx(e),r=N1(t),s=VT(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Z5(r)),this.platform.updateConfig(i);let a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=jE(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nT(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Df[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}jr.listen(this,"complete",jT),jr.listen(this,"progress",k3),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:s}=this;return Ct(t)?e&&s?s:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return nr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():R_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return E_(this.canvas,this.ctx),this}stop(){return jr.stop(this),this}resize(t,e){jr.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,R_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Xt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};Ht(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{}),s=[];e&&(s=s.concat(Object.keys(e).map(o=>{let a=e[o],l=ux(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ht(s,o=>{let a=o.options,l=a.id,c=ux(l,a),u=mt(a.type,o.dtype);(a.position===void 0||UT(a.position,c)!==UT(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{let h=nr.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),Ht(r,(o,a)=>{o||delete i[a]}),Ht(i,o=>{cn.configure(this,o,o.options),cn.addBox(this,o)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,s)=>r.index-s.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(KT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){let s=e[i],o=this.getDatasetMeta(i),a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||cx(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{let l=nr.getController(a),{datasetElementType:c,dataElementType:u}=se.datasets[a];Object.assign(l,{dataElementType:nr.getElement(u),datasetElementType:c&&nr.getElement(c)}),o.controller=new l(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ht(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){let{controller:d}=this.getDatasetMeta(c),h=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ht(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(KT("z","_idx"));let{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ht(this.scales,t=>{cn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!h_(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:i,start:r,count:s}of e){let o=i==="_removeElements"?-s:s;O3(t,r,o)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<e;s++)if(!h_(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;cn.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Ht(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Hr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jr.has(this)?this.attached&&!jr.running(this)&&jr.start(this):(this.draw(),jT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,i=[],r,s;for(r=0,s=e.length;r<s;++r){let o=e[r];(!t||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=$_(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&xu(e,r),t.controller.draw(),r&&yu(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Zi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){let s=L5.modes[e];return typeof s=="function"?s(this,t,i,r):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,r=i.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Kr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){let i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let r=i?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);pl(e)?(s.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),jr.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),E_(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Df[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ht(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},r=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)},o,a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Ht(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ht(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let r=i?"set":"remove",s,o,a,l;for(e==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];let c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:s,index:o})=>{let a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!bu(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){let r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(e,t),a=i?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;let s=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(t,e,i){let{_active:r=[],options:s}=this,o=e,a=this._getActiveElements(t,r,i,o),l=qE(t),c=M3(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Xt(s.onHover,[t,a,this],this),l&&Xt(s.onClick,[t,a,this],this));let u=!bu(a,r);return(u||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=c,u}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}};function GT(){return Ht(Cl.instances,n=>n._plugins.invalidate())}function R3(n,t,e){let{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,qe(i-e));if(n.beginPath(),n.arc(r,s,o-c/2,i+d/2,e-d/2),a>0){let h=Math.min(c/a,qe(i-e));n.arc(r,s,a+c/2,e-h/2,i+h/2,!0)}else{let h=Math.min(c/2,o*qe(i-e));if(u==="round")n.arc(r,s,h,e-Lt/2,i+Lt/2,!0);else if(u==="bevel"){let f=2*h*h,g=-f*Math.cos(e+Lt/2)+r,m=-f*Math.sin(e+Lt/2)+s,p=f*Math.cos(i+Lt/2)+r,b=f*Math.sin(i+Lt/2)+s;n.lineTo(g,m),n.lineTo(p,b)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function L3(n,t,e){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t,c=r/a;n.beginPath(),n.arc(s,o,a,i-c,e+c),l>r?(c=r/l,n.arc(s,o,l,e+c,i-c,!0)):n.arc(s,o,r,e+xe,i-xe),n.closePath(),n.clip()}function D3(n){return Sf(n,["outerStart","outerEnd","innerStart","innerEnd"])}function I3(n,t,e,i){let r=D3(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=l=>{let c=(e-Math.min(s,l))*i/2;return ke(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ke(r.innerStart,0,o),innerEnd:ke(r.innerEnd,0,o)}}function vl(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Bf(n,t,e,i,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+e-c,0),h=u>0?u+i+e+c:0,f=0,g=r-l;if(i){let k=u>0?u-i:0,D=d>0?d-i:0,F=(k+D)/2,z=F!==0?g*F/(F+i):g;f=(g-z)/2}let m=Math.max(.001,g*d-e/Lt)/d,p=(g-m)/2,b=l+p+f,_=r-p-f,{outerStart:x,outerEnd:y,innerStart:v,innerEnd:S}=I3(t,h,d,_-b),C=d-x,A=d-y,E=b+x/C,$=_-y/A,L=h+v,w=h+S,N=b+v/L,R=_-S/w;if(n.beginPath(),s){let k=(E+$)/2;if(n.arc(o,a,d,E,k),n.arc(o,a,d,k,$),y>0){let U=vl(A,$,o,a);n.arc(U.x,U.y,y,$,_+xe)}let D=vl(w,_,o,a);if(n.lineTo(D.x,D.y),S>0){let U=vl(w,R,o,a);n.arc(U.x,U.y,S,_+xe,R+Math.PI)}let F=(_-S/h+(b+v/h))/2;if(n.arc(o,a,h,_-S/h,F,!0),n.arc(o,a,h,F,b+v/h,!0),v>0){let U=vl(L,N,o,a);n.arc(U.x,U.y,v,N+Math.PI,b-xe)}let z=vl(C,b,o,a);if(n.lineTo(z.x,z.y),x>0){let U=vl(C,E,o,a);n.arc(U.x,U.y,x,b-xe,E)}}else{n.moveTo(o,a);let k=Math.cos(E)*d+o,D=Math.sin(E)*d+a;n.lineTo(k,D);let F=Math.cos($)*d+o,z=Math.sin($)*d+a;n.lineTo(F,z)}n.closePath()}function P3(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a}=t,l=t.endAngle;if(s){Bf(n,t,e,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%ie||ie))}return Bf(n,t,e,i,l,r),n.fill(),l}function F3(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,g=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,g?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let m=t.endAngle;if(s){Bf(n,t,e,i,m,r);for(let p=0;p<s;++p)n.stroke();isNaN(a)||(m=o+(a%ie||ie))}g&&L3(n,t,m),l.selfJoin&&m-o>=Lt&&f===0&&u!=="miter"&&R3(n,t,m),s||(Bf(n,t,e,i,m,r),n.stroke())}var hx=class extends wi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=m_(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,f=mt(d,l-a),g=bl(s,a,l)&&a!==l,m=f>=ie||g,p=tr(o,c+h,u+h);return m&&p}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(r+s)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>ie?Math.floor(i/ie):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Lt,i||0)),c=r*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,P3(t,this,c,s,o),F3(t,this,c,s,o),t.restore()}};function k1(n,t,e=t){n.lineCap=mt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(mt(e.borderDash,t.borderDash)),n.lineDashOffset=mt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=mt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=mt(e.borderWidth,t.borderWidth),n.strokeStyle=mt(e.borderColor,t.borderColor)}function $3(n,t,e){n.lineTo(e.x,e.y)}function B3(n){return n.stepped?oT:n.tension||n.cubicInterpolationMode==="monotone"?aT:$3}function O1(n,t,e={}){let i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function z3(n,t,e,i){let{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=O1(r,e,i),u=B3(s),{move:d=!0,reverse:h}=i||{},f,g,m;for(f=0;f<=c;++f)g=r[(a+(h?c-f:f))%o],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):u(n,m,g,h,s.stepped),m=g);return l&&(g=r[(a+(h?c:0))%o],u(n,m,g,h,s.stepped)),!!l}function H3(n,t,e,i){let r=t.points,{count:s,start:o,ilen:a}=O1(r,e,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,f,g,m,p,b,_=y=>(o+(c?a-y:y))%s,x=()=>{m!==p&&(n.lineTo(u,p),n.lineTo(u,m),n.lineTo(u,b))};for(l&&(f=r[_(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=r[_(h)],f.skip)continue;let y=f.x,v=f.y,S=y|0;S===g?(v<m?m=v:v>p&&(p=v),u=(d*u+y)/++d):(x(),n.lineTo(y,v),g=S,d=0,m=p=v),b=v}x()}function fx(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?H3:z3}function W3(n){return n.stepped?mT:n.tension||n.cubicInterpolationMode==="monotone"?bT:Ns}function U3(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),k1(n,t.options),n.stroke(r)}function K3(n,t,e,i){let{segments:r,options:s}=t,o=fx(t);for(let a of r)k1(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var j3=typeof Path2D=="function";function V3(n,t,e,i){j3&&!t.options.segment?U3(n,t,e,i):K3(n,t,e,i)}var Al=class extends wi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let r=i.spanGaps?this._loop:this._fullLoop;fT(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xT(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i=this.options,r=t[e],s=this.points,o=F_(this,{property:e,start:r,end:r});if(!o.length)return;let a=[],l=W3(i),c,u;for(c=0,u=o.length;c<u;++c){let{start:d,end:h}=o[c],f=s[d],g=s[h];if(f===g){a.push(f);continue}let m=Math.abs((r-f[e])/(g[e]-f[e])),p=l(f,g,m,i.stepped);p[e]=t[e],a.push(p)}return a.length===1?a[0]:a}pathSegment(t,e,i){return fx(this)(t,this,e,i)}path(t,e,i){let r=this.segments,s=fx(this),o=this._loop;e=e||0,i=i||this.points.length-e;for(let a of r)o&=s(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,r){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),V3(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};function qT(n,t,e,i){let r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}var gx=class extends wi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.options,{x:s,y:o}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return qT(this,t,"x",e)}inYRange(t,e){return qT(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);let i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;this.skip||i.radius<.1||!Zi(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,vf(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};function M1(n,t){let{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,r),l=Math.max(e,r),c=i-d,u=i+d):(d=s/2,a=e-d,l=e+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Is(n,t,e,i){return n?0:ke(t,e,i)}function G3(n,t,e){let i=n.options.borderWidth,r=n.borderSkipped,s=w_(i);return{t:Is(r.top,s.top,0,e),r:Is(r.right,s.right,0,t),b:Is(r.bottom,s.bottom,0,e),l:Is(r.left,s.left,0,t)}}function q3(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ls(r),o=Math.min(t,e),a=n.borderSkipped,l=i||Tt(r);return{topLeft:Is(!l||a.top||a.left,s.topLeft,0,o),topRight:Is(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Is(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Is(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Y3(n){let t=M1(n),e=t.right-t.left,i=t.bottom-t.top,r=G3(n,e/2,i/2),s=q3(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function V_(n,t,e,i){let r=t===null,s=e===null,a=n&&!(r&&s)&&M1(n,i);return a&&(r||tr(t,a.left,a.right))&&(s||tr(e,a.top,a.bottom))}function J3(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function X3(n,t){n.rect(t.x,t.y,t.w,t.h)}function G_(n,t,e={}){let i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var px=class extends wi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=Y3(this),a=J3(o.radius)?xl:X3;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,G_(o,e,s)),t.clip(),a(t,G_(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,G_(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return V_(this,t,e,i)}inXRange(t,e){return V_(this,t,null,e)}inYRange(t,e){return V_(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},Z3=Object.freeze({__proto__:null,ArcElement:hx,BarElement:px,LineElement:Al,PointElement:gx}),mx=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],YT=mx.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function R1(n){return mx[n%mx.length]}function L1(n){return YT[n%YT.length]}function Q3(n,t){return n.borderColor=R1(t),n.backgroundColor=L1(t),++t}function tz(n,t){return n.backgroundColor=n.data.map(()=>R1(t++)),t}function ez(n,t){return n.backgroundColor=n.data.map(()=>L1(t++)),t}function nz(n){let t=0;return(e,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof Nu?t=tz(e,t):r instanceof Pf?t=ez(e,t):r&&(t=Q3(e,t))}}function JT(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function iz(n){return n&&(n.borderColor||n.backgroundColor)}function rz(){return se.borderColor!=="rgba(0,0,0,0.1)"||se.backgroundColor!=="rgba(0,0,0,0.1)"}var sz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r,o=JT(i)||iz(r)||s&&JT(s)||rz();if(!e.forceOverride&&o)return;let a=nz(n);i.forEach(a)}};function oz(n,t,e,i,r){let s=r.samples||i;if(s>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(s-2),l=0,c=t+e-1,u=t,d,h,f,g,m;for(o[l++]=n[u],d=0;d<s-2;d++){let p=0,b=0,_,x=Math.floor((d+1)*a)+1+t,y=Math.min(Math.floor((d+2)*a)+1,e)+t,v=y-x;for(_=x;_<y;_++)p+=n[_].x,b+=n[_].y;p/=v,b/=v;let S=Math.floor(d*a)+1+t,C=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:A,y:E}=n[u];for(f=g=-1,_=S;_<C;_++)g=.5*Math.abs((A-p)*(n[_].y-E)-(A-n[_].x)*(b-E)),g>f&&(f=g,h=n[_],m=_);o[l++]=h,u=m}return o[l++]=n[c],o}function az(n,t,e,i){let r=0,s=0,o,a,l,c,u,d,h,f,g,m,p=[],b=t+e-1,_=n[t].x,y=n[b].x-_;for(o=t;o<t+e;++o){a=n[o],l=(a.x-_)/y*i,c=a.y;let v=l|0;if(v===u)c<g?(g=c,d=o):c>m&&(m=c,h=o),r=(s*r+a.x)/++s;else{let S=o-1;if(!Ct(d)&&!Ct(h)){let C=Math.min(d,h),A=Math.max(d,h);C!==f&&C!==S&&p.push({...n[C],x:r}),A!==f&&A!==S&&p.push({...n[A],x:r})}o>0&&S!==f&&p.push(n[S]),p.push(a),u=v,s=0,g=m=c,d=h=f=o}}return p}function D1(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function XT(n){n.data.datasets.forEach(t=>{D1(t)})}function lz(n,t){let e=t.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=ke(Xi(t,s.axis,o).lo,0,e-1)),c?r=ke(Xi(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var cz={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){XT(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(yl([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=lz(l,c),f=e.threshold||4*i;if(h<=f){D1(r);return}Ct(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(e.algorithm){case"lttb":g=oz(c,d,h,i,e);break;case"min-max":g=az(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=g})},destroy(n){XT(n)}};function uz(n,t,e){let i=n.segments,r=n.points,s=t.points,o=[];for(let a of i){let{start:l,end:c}=a;c=Uf(l,c,r);let u=bx(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=F_(t,u);for(let h of d){let f=bx(e,s[h.start],s[h.end],h.loop),g=P_(a,r,f);for(let m of g)o.push({source:m,target:h,start:{[e]:ZT(u,f,"start",Math.max)},end:{[e]:ZT(u,f,"end",Math.min)}})}}return o}function bx(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=qe(r),s=qe(s)),{property:n,start:r,end:s}}function dz(n,t){let{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=Uf(o,a,r);let l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function Uf(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function ZT(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function I1(n,t){let e=[],i=!1;return ne(n)?(i=!0,e=n):e=dz(n,t),e.length?new Al({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function QT(n){return n&&n.fill!==!1}function hz(n,t,e){let r=n[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!me(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function fz(n,t,e){let i=bz(n);if(Tt(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return me(r)&&Math.floor(r)===r?gz(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function gz(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function pz(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Tt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function mz(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Tt(n)?i=n.value:i=t.getBaseValue(),i}function bz(n){let t=n.options,e=t.fill,i=mt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function _z(n){let{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=xz(t,e);a.push(I1({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)yz(r,o[u],a)}return new Al({points:r,options:{}})}function xz(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function yz(n,t,e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:a,point:l}=vz(s,t,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function vz(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let r=i[e],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][e],h=o[u.end][e];if(tr(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var zf=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:ie},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function Sz(n){let{chart:t,fill:e,line:i}=n;if(me(e))return Cz(t,e);if(e==="stack")return _z(n);if(e==="shape")return!0;let r=Az(n);return r instanceof zf?r:I1(r,i)}function Cz(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function Az(n){return(n.scale||{}).getPointPositionForValue?Tz(n):Ez(n)}function Ez(n){let{scale:t={},fill:e}=n,i=pz(e,t);if(me(i)){let r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function Tz(n){let{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=mz(e,t,s),a=[];if(i.grid.circular){let l=t.getPointPositionForValue(0,s);return new zf({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function q_(n,t,e){let i=Sz(t),{chart:r,index:s,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},g=r.getDatasetMeta(s),m=$_(r,g);i&&o.points.length&&(xu(n,e),wz(n,{line:o,target:i,above:h,below:f,area:e,scale:a,axis:l,clip:m}),yu(n))}function wz(n,t){let{line:e,target:i,above:r,below:s,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let u=s;s!==r&&(c==="x"?(t1(n,i,o.top),Y_(n,{line:e,target:i,color:r,scale:a,property:c,clip:l}),n.restore(),n.save(),t1(n,i,o.bottom)):c==="y"&&(e1(n,i,o.left),Y_(n,{line:e,target:i,color:s,scale:a,property:c,clip:l}),n.restore(),n.save(),e1(n,i,o.right),u=r)),Y_(n,{line:e,target:i,color:u,scale:a,property:c,clip:l}),n.restore()}function t1(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[Uf(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function e1(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[Uf(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(e,u.y),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Y_(n,t){let{line:e,target:i,property:r,color:s,scale:o,clip:a}=t,l=uz(e,i,r);for(let{source:c,target:u,start:d,end:h}of l){let{style:{backgroundColor:f=s}={}}=c,g=i!==!0;n.save(),n.fillStyle=f,Nz(n,o,a,g&&bx(r,d,h)),n.beginPath();let m=!!e.pathSegment(n,c),p;if(g){m?n.closePath():n1(n,i,h,r);let b=!!i.pathSegment(n,u,{move:m,reverse:!0});p=m&&b,p||n1(n,i,d,r)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function Nz(n,t,e,i){let r=t.chart.chartArea,{property:s,start:o,end:a}=i||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=r.top,u=a,d=r.bottom):(l=r.left,c=o,u=r.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function n1(n,t,e,i){let r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var kz={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Al&&(l={visible:n.isDatasetVisible(o),index:o,fill:fz(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=hz(r,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&q_(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;QT(s)&&q_(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!QT(i)||e.drawTime!=="beforeDatasetDraw"||q_(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},i1=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Oz=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,Hf=class extends wi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Xt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,r=Te(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=i1(i,s),c,u;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=t;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,m)=>{let p=i+e/2+s.measureText(g.text).width;(m===0||c[c.length-1]+p+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:p,height:r},c[c.length-1]+=p+a}),d}_fitCols(t,e,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,f=0,g=0,m=0;return this.legendItems.forEach((p,b)=>{let{itemWidth:_,itemHeight:x}=Mz(i,e,s,p,r);b>0&&f+x+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,m++,h=f=0),l[b]={left:g,top:f,col:m,width:_,height:x},h=Math.max(h,_),f+=x+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Go(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ye(i,this.left+r,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=Ye(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ye(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=Ye(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;xu(t,this),this._draw(),yu(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=se.color,l=Go(t.rtl,this.left,this.width),c=Te(o.font),{padding:u}=o,d=c.size,h=d/2,f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:g,boxHeight:m,itemHeight:p}=i1(o,d),b=function(S,C,A){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;r.save();let E=mt(A.lineWidth,1);if(r.fillStyle=mt(A.fillStyle,a),r.lineCap=mt(A.lineCap,"butt"),r.lineDashOffset=mt(A.lineDashOffset,0),r.lineJoin=mt(A.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=mt(A.strokeStyle,a),r.setLineDash(mt(A.lineDash,[])),o.usePointStyle){let $={radius:m*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:E},L=l.xPlus(S,g/2),w=C+h;T_(r,$,L,w,o.pointStyleWidth&&g)}else{let $=C+Math.max((d-m)/2,0),L=l.leftForLtr(S,g),w=Ls(A.borderRadius);r.beginPath(),Object.values(w).some(N=>N!==0)?xl(r,{x:L,y:$,w:g,h:m,radius:w}):r.rect(L,$,g,m),r.fill(),E!==0&&r.stroke()}r.restore()},_=function(S,C,A){Rs(r,A.text,S,C+p/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},x=this.isHorizontal(),y=this._computeTitleHeight();x?f={x:Ye(s,this.left+u,this.right-i[0]),y:this.top+u+y,line:0}:f={x:this.left+u,y:Ye(s,this.top+y+u,this.bottom-e[0].height),line:0},D_(this.ctx,t.textDirection);let v=p+u;this.legendItems.forEach((S,C)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;let A=r.measureText(S.text).width,E=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),$=g+h+A,L=f.x,w=f.y;l.setWidth(this.width),x?C>0&&L+$+u>this.right&&(w=f.y+=v,f.line++,L=f.x=Ye(s,this.left+u,this.right-i[f.line])):C>0&&w+v>this.bottom&&(L=f.x=L+e[f.line].width+u,f.line++,w=f.y=Ye(s,this.top+y+u,this.bottom-e[f.line].height));let N=l.x(L);if(b(N,w,S),L=iT(E,L+g+h,x?L+$:this.right,t.rtl),_(l.x(L),w,S),x)f.x+=$+u;else if(typeof S.text!="string"){let R=c.lineHeight;f.y+=P1(S,R)+u}else f.y+=v}),I_(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=Te(e.font),r=Je(e.padding);if(!e.display)return;let s=Go(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ye(t.align,d,this.right-h);else{let g=this.columnSizes.reduce((m,p)=>Math.max(m,p.height),0);u=c+Ye(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}let f=Ye(a,d,d+h);o.textAlign=s.textAlign(xf(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Rs(o,e.text,f,u,i)}_computeTitleHeight(){let t=this.options.title,e=Te(t.font),i=Je(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(tr(t,this.left,this.right)&&tr(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],tr(t,r.left,r.left+r.width)&&tr(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!Dz(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=Oz(r,i);r&&!s&&Xt(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Xt(e.onHover,[t,i,this],this)}else i&&Xt(e.onClick,[t,i,this],this)}};function Mz(n,t,e,i,r){let s=Rz(i,n,t,e),o=Lz(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function Rz(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function Lz(n,t,e){let i=n;return typeof t.text!="string"&&(i=P1(t,e)),i}function P1(n,t){let e=n.text?n.text.length:0;return t*e}function Dz(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Iz={id:"legend",_element:Hf,start(n,t,e){let i=n.legend=new Hf({ctx:n.ctx,options:e,chart:n});cn.configure(n,i,e),cn.addBox(n,i)},stop(n){cn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;cn.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),u=Je(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Ou=class extends wi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=ne(i.text)?i.text.length:1;this._padding=Je(i.padding);let s=r*Te(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=Ye(a,i,s),d=e+t,c=s-i):(o.position==="left"?(u=i+t,d=Ye(a,r,e),l=Lt*-.5):(u=s-t,d=Ye(a,e,r),l=Lt*.5),c=r-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=Te(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Rs(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:xf(e.align),textBaseline:"middle",translation:[o,a]})}};function Pz(n,t){let e=new Ou({ctx:n.ctx,options:t,chart:n});cn.configure(n,e,t),cn.addBox(n,e),n.titleBlock=e}var Fz={id:"title",_element:Ou,start(n,t,e){Pz(n,e)},stop(n){let t=n.titleBlock;cn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;cn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Of=new WeakMap,$z={id:"subtitle",start(n,t,e){let i=new Ou({ctx:n.ctx,options:e,chart:n});cn.configure(n,i,e),cn.addBox(n,i),Of.set(n,i)},stop(n){cn.removeBox(n,Of.get(n)),Of.delete(n)},beforeUpdate(n,t,e){let i=Of.get(n);cn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},wu={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=gf(t,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function er(n,t){return t&&(ne(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Vr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Bz(n,t){let{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function r1(n,t){let e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=Te(t.bodyFont),c=Te(t.titleFont),u=Te(t.footerFont),d=s.length,h=r.length,f=i.length,g=Je(t.padding),m=g.height,p=0,b=i.reduce((y,v)=>y+v.before.length+v.lines.length+v.after.length,0);if(b+=n.beforeBody.length+n.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),b){let y=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*y+(b-f)*l.lineHeight+(b-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let _=0,x=function(y){p=Math.max(p,e.measureText(y).width+_)};return e.save(),e.font=c.string,Ht(n.title,x),e.font=l.string,Ht(n.beforeBody.concat(n.afterBody),x),_=t.displayColors?o+2+t.boxPadding:0,Ht(i,y=>{Ht(y.before,x),Ht(y.lines,x),Ht(y.after,x)}),_=0,e.font=u.string,Ht(n.footer,x),e.restore(),p+=g.width,{width:p,height:m}}function zz(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Hz(n,t,e,i){let{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function Wz(n,t,e,i){let{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),Hz(c,n,t,e)&&(c="center"),c}function s1(n,t,e){let i=e.yAlign||t.yAlign||zz(n,e);return{xAlign:e.xAlign||t.xAlign||Wz(n,t,e,i),yAlign:i}}function Uz(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Kz(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function o1(n,t,e,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Ls(o),g=Uz(t,a),m=Kz(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+r:a==="right"&&(g+=Math.max(d,f)+r),{x:ke(g,0,i.width-t.width),y:ke(m,0,i.height-t.height)}}function Mf(n,t,e){let i=Je(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function a1(n){return er([],Vr(n))}function jz(n,t,e){return Kr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function l1(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var F1={beforeTitle:Qi,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Qi,beforeBody:Qi,beforeLabel:Qi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return Ct(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Qi,afterBody:Qi,beforeFooter:Qi,footer:Qi,afterFooter:Qi};function Pn(n,t,e,i){let r=n[t].call(e,i);return typeof r>"u"?F1[t].call(e,i):r}var Wf=class extends wi{static positioners=wu;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,s=new If(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=jz(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){let{callbacks:i}=e,r=Pn(i,"beforeTitle",this,t),s=Pn(i,"title",this,t),o=Pn(i,"afterTitle",this,t),a=[];return a=er(a,Vr(r)),a=er(a,Vr(s)),a=er(a,Vr(o)),a}getBeforeBody(t,e){return a1(Pn(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:i}=e,r=[];return Ht(t,s=>{let o={before:[],lines:[],after:[]},a=l1(i,s);er(o.before,Vr(Pn(a,"beforeLabel",this,s))),er(o.lines,Pn(a,"label",this,s)),er(o.after,Vr(Pn(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(t,e){return a1(Pn(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:i}=e,r=Pn(i,"beforeFooter",this,t),s=Pn(i,"footer",this,t),o=Pn(i,"afterFooter",this,t),a=[];return a=er(a,Vr(r)),a=er(a,Vr(s)),a=er(a,Vr(o)),a}_createItems(t){let e=this._active,i=this.chart.data,r=[],s=[],o=[],a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Bz(this.chart,e[l]));return t.filter&&(a=a.filter((u,d,h)=>t.filter(u,d,h,i))),t.itemSort&&(a=a.sort((u,d)=>t.itemSort(u,d,i))),Ht(a,u=>{let d=l1(t.callbacks,u);r.push(Pn(d,"labelColor",this,u)),s.push(Pn(d,"labelPointStyle",this,u)),o.push(Pn(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,e){let i=this.options.setContext(this.getContext()),r=this._active,s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{let a=wu[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);let l=this._size=r1(this,i),c=Object.assign({},a,l),u=s1(this.chart,i,c),d=o1(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){let s=this.getCaretPosition(t,i,r);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,i){let{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Ls(a),{x:h,y:f}=t,{width:g,height:m}=e,p,b,_,x,y,v;return s==="center"?(y=f+m/2,r==="left"?(p=h,b=p-o,x=y+o,v=y-o):(p=h+g,b=p+o,x=y-o,v=y+o),_=p):(r==="left"?b=h+Math.max(l,u)+o:r==="right"?b=h+g-Math.max(c,d)-o:b=this.caretX,s==="top"?(x=f,y=x-o,p=b-o,_=b+o):(x=f+m,y=x+o,p=b+o,_=b-o),v=x),{x1:p,x2:b,x3:_,y1:x,y2:y,y3:v}}drawTitle(t,e,i){let r=this.title,s=r.length,o,a,l;if(s){let c=Go(i.rtl,this.x,this.width);for(t.x=Mf(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",o=Te(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,l=0;l<s;++l)e.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,s){let o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Te(s.bodyFont),d=Mf(this,"left",s),h=r.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=e.y+f;if(s.usePointStyle){let m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},p=r.leftForLtr(h,c)+c/2,b=g+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,vf(t,m,p,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,vf(t,m,p,b)}else{t.lineWidth=Tt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;let m=r.leftForLtr(h,c),p=r.leftForLtr(r.xPlus(h,1),c-2),b=Ls(o.borderRadius);Object.values(b).some(_=>_!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,xl(t,{x:m,y:g,w:c,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),xl(t,{x:p,y:g+1,w:c-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(m,g,c,l),t.strokeRect(m,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(p,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=Te(i.bodyFont),h=d.lineHeight,f=0,g=Go(i.rtl,this.x,this.width),m=function(A){e.fillText(A,g.x(t.x+f),t.y+h/2),t.y+=h+s},p=g.textAlign(o),b,_,x,y,v,S,C;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=Mf(this,p,i),e.fillStyle=i.bodyColor,Ht(this.beforeBody,m),f=a&&p!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,S=r.length;y<S;++y){for(b=r[y],_=this.labelTextColors[y],e.fillStyle=_,Ht(b.before,m),x=b.lines,a&&x.length&&(this._drawColorBox(e,t,y,g,i),h=Math.max(d.lineHeight,l)),v=0,C=x.length;v<C;++v)m(x[v]),h=d.lineHeight;Ht(b.after,m)}f=0,h=d.lineHeight,Ht(this.afterBody,m),t.y-=s}drawFooter(t,e,i){let r=this.footer,s=r.length,o,a;if(s){let l=Go(i.rtl,this.x,this.width);for(t.x=Mf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",o=Te(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<s;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){let{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=Ls(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+d,l),o==="top"&&this.drawCaret(t,e,i,r),e.lineTo(a+c-h,l),e.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(t,e,i,r),e.lineTo(a+c,l+u-g),e.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(a+f,l+u),e.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(t,e,i,r),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){let o=wu[t.position].call(this,this._active,this._eventPosition);if(!o)return;let a=this._size=r1(this,t),l=Object.assign({},o,this._size),c=s1(e,t,l),u=o1(t,l,c,e);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let o=Je(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,r,e),D_(t,e.textDirection),s.y+=o.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),I_(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,r=t.map(({datasetIndex:a,index:l})=>{let c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!bu(i,r),o=this._positionChanged(r,e);(s||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,s=this._active||[],o=this._getActiveElements(t,s,e,i),a=this._positionChanged(o,t),l=e||!bu(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,r){let s=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);let o=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(t,e){let{caretX:i,caretY:r,options:s}=this,o=wu[s.position].call(this,t,e);return o!==!1&&(i!==o.x||r!==o.y)}},Vz={id:"tooltip",_element:Wf,positioners:wu,afterInit(n,t,e){e&&(n.tooltip=new Wf({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:F1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Gz=Object.freeze({__proto__:null,Colors:sz,Decimation:cz,Filler:kz,Legend:Iz,SubTitle:$z,Title:Fz,Tooltip:Vz}),qz=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Yz(n,t,e,i){let r=n.indexOf(t);if(r===-1)return qz(n,t,e,i);let s=n.lastIndexOf(t);return r!==s?e:r}var Jz=(n,t)=>n===null?null:ke(Math.round(n),0,t);function c1(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var _x=class extends Jo{static id="category";static defaults={ticks:{callback:c1}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let i=this.getLabels();for(let{index:r,label:s}of e)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ct(t))return null;let i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Yz(i,t,mt(e,t),this._addedLabels),Jz(e,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,r=[],s=this.getLabels();s=t===0&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){return c1.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};function Xz(n,t){let e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,g=u-1,{min:m,max:p}=t,b=!Ct(o),_=!Ct(a),x=!Ct(c),y=(p-m)/(d+1),v=f_((p-m)/g/f)*f,S,C,A,E;if(v<1e-14&&!b&&!_)return[{value:m},{value:p}];E=Math.ceil(p/v)-Math.floor(m/v),E>g&&(v=f_(E*v/g/f)*f),Ct(l)||(S=Math.pow(10,l),v=Math.ceil(v*S)/S),r==="ticks"?(C=Math.floor(m/v)*v,A=Math.ceil(p/v)*v):(C=m,A=p),b&&_&&s&&JE((a-o)/s,v/1e3)?(E=Math.round(Math.min((a-o)/v,u)),v=(a-o)/E,C=o,A=a):x?(C=b?o:C,A=_?a:A,E=c-1,v=(A-C)/E):(E=(A-C)/v,ml(E,Math.round(E),v/1e3)?E=Math.round(E):E=Math.ceil(E));let $=Math.max(p_(v),p_(C));S=Math.pow(10,Ct(l)?$:l),C=Math.round(C*S)/S,A=Math.round(A*S)/S;let L=0;for(b&&(h&&C!==o?(e.push({value:o}),C<o&&L++,ml(Math.round((C+L*v)*S)/S,o,u1(o,y,n))&&L++):C<o&&L++);L<E;++L){let w=Math.round((C+L*v)*S)/S;if(_&&w>a)break;e.push({value:w})}return _&&h&&A!==a?e.length&&ml(e[e.length-1].value,a,u1(a,y,n))?e[e.length-1].value=a:e.push({value:a}):(!_||A===a)&&e.push({value:A}),e}function u1(n,t,{horizontal:e,minRotation:i}){let r=hi(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}var El=class extends Jo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ct(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=e?r:l,a=l=>s=i?s:l;if(t){let l=Ti(r),c=Ti(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=Xz(r,s);return t.bounds==="ticks"&&g_(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return _l(t,this.chart.options.locale,this.options.ticks.format)}},xx=class extends El{static id="linear";static defaults={ticks:{callback:_u.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=me(t)?t:0,this.max=me(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=hi(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Mu=n=>Math.floor(Wr(n)),Yo=(n,t)=>Math.pow(10,Mu(n)+t);function d1(n){return n/Math.pow(10,Mu(n))===1}function h1(n,t,e){let i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function Zz(n,t){let e=t-n,i=Mu(e);for(;h1(n,t,i)>10;)i++;for(;h1(n,t,i)<10;)i--;return Math.min(i,Mu(n))}function Qz(n,{min:t,max:e}){t=In(n.min,t);let i=[],r=Mu(t),s=Zz(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=In(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<e;)i.push({value:h,major:d1(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let f=In(n.max,h);return i.push({value:f,major:d1(f),significand:d}),i}var yx=class extends Jo{static id="logarithmic";static defaults={ticks:{callback:_u.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=El.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return me(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=me(t)?Math.max(0,t):null,this.max=me(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!me(this._userMin)&&(this.min=t===Yo(this.min,0)?Yo(this.min,-1):Yo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Yo(i,-1)),o(Yo(r,1)))),i<=0&&s(Yo(r,-1)),r<=0&&o(Yo(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=Qz(e,this);return t.bounds==="ticks"&&g_(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":_l(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Wr(t),this._valueRange=Wr(this.max)-Wr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Wr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function vx(n){let t=n.ticks;if(t.display&&n.display){let e=Je(t.backdropPadding);return mt(t.font&&t.font.size,se.font.size)+e.height}return 0}function tH(n,t,e){return e=ne(e)?e:[e],{w:sT(n,t.string,e),h:e.length*t.lineHeight}}function f1(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function eH(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Lt/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+r[l],a),d=Te(c.font),h=tH(n.ctx,d,n._pointLabels[l]);i[l]=h;let f=qe(n.getIndexAngle(l)+a),g=Math.round(bf(f)),m=f1(g,u.x,h.w,0,180),p=f1(g,u.y,h.h,90,270);nH(e,t,f,m,p)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=sH(n,i,r)}function nH(n,t,e,i,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function iH(n,t,e){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,i+r+o,s),c=Math.round(bf(qe(l.angle+xe))),u=lH(l.y,a.h,c),d=oH(c),h=aH(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function rH(n,t){if(!t)return!0;let{left:e,top:i,right:r,bottom:s}=n;return!(Zi({x:e,y:i},t)||Zi({x:e,y:s},t)||Zi({x:r,y:i},t)||Zi({x:r,y:s},t))}function sH(n,t,e){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:vx(s)/2,additionalAngle:o?Lt/r:0},c;for(let u=0;u<r;u++){l.padding=e[u],l.size=t[u];let d=iH(n,u,l);i.push(d),a==="auto"&&(d.visible=rH(d,c),d.visible&&(c=d))}return i}function oH(n){return n===0||n===180?"center":n<180?"left":"right"}function aH(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function lH(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function cH(n,t,e){let{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!Ct(a)){let l=Ls(t.borderRadius),c=Je(t.backdropPadding);n.fillStyle=a;let u=i-c.left,d=r-c.top,h=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(n.beginPath(),xl(n,{x:u,y:d,w:h,h:f,radius:l}),n.fill()):n.fillRect(u,d,h,f)}}function uH(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));cH(e,o,s);let a=Te(o.font),{x:l,y:c,textAlign:u}=s;Rs(e,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function $1(n,t,e,i){let{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,ie);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function dH(n,t,e,i,r){let s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),$1(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function hH(n,t,e){return Kr(n,{label:e,index:t,type:"pointLabel"})}var Sx=class extends El{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_u.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Je(vx(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=me(t)&&!isNaN(t)?t:0,this.max=me(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vx(this.options))}generateTickLabels(t){El.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let r=Xt(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?eH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){let e=ie/(this._pointLabels.length||1),i=this.options.startAngle||0;return qe(t*e+hi(i))}getDistanceFromCenterForValue(t){if(Ct(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ct(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return hH(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-xe+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),$1(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&uH(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),g=s.setContext(h);dH(this,f,l,o,g)}}),i.display){for(t.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(t.lineWidth=h,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=i.setContext(this.getContext(l)),u=Te(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=Je(c.backdropPadding);t.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Rs(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},Kf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(Kf);function g1(n,t){return n-t}function p1(n,t){if(Ct(t))return null;let e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),me(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(Vo(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function m1(n,t,e,i){let r=Fn.length;for(let s=Fn.indexOf(n);s<r-1;++s){let o=Kf[Fn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return Fn[s]}return Fn[r-1]}function fH(n,t,e,i,r){for(let s=Fn.length-1;s>=Fn.indexOf(e);s--){let o=Fn[s];if(Kf[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return Fn[e?Fn.indexOf(e):0]}function gH(n){for(let t=Fn.indexOf(n)+1,e=Fn.length;t<e;++t)if(Kf[Fn[t]].common)return Fn[t]}function b1(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:r}=_f(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function pH(n,t,e,i){let r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function _1(n,t,e){let i=[],r={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:pH(n,i,r,e)}var Ru=class extends Jo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),r=this._adapter=new N5._date(t.adapters.date);r.init(e),gl(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:p1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=me(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),s=me(s)&&!isNaN(s)?s:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let s=this.min,o=this.max,a=QE(r,s,o);return this._unit=e.unit||(i.autoSkip?m1(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):fH(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:gH(this._unit),this.initOffsets(r),t.reverse&&a.reverse(),_1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,s;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let o=t.length<3?.5:.25;e=ke(e,0,o),i=ke(i,0,o),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){let t=this._adapter,e=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||m1(s.minUnit,e,i,this._getLabelCapacity(e)),a=mt(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Vo(l)||l===!0,u={},d=e,h,f;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);let g=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<i;h=+t.add(h,a,o),f++)b1(u,h,g);return(h===i||r.bounds==="ticks"||f===1)&&b1(u,h,g),Object.keys(u).sort(g1).map(m=>+m)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let r=this.options.time.displayFormats,s=this._unit,o=e||r[s];return this._adapter.format(t,o)}_tickFormatFunction(t,e,i,r){let s=this.options,o=s.ticks.callback;if(o)return Xt(o,[t,e,i],this);let a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=i[e],f=c&&d&&h&&h.major;return this._adapter.format(t,r||(f?d:u))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,r=hi(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,s=this._tickFormatFunction(t,0,_1(this,[t],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],e,i;if(t.length)return t;let r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(p1(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return __(t.sort(g1))}};function Rf(n,t,e){let i=0,r=n.length-1,s,o,a,l;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Xi(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Xi(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);let c=o-s;return c?a+(l-a)*(t-s)/c:a}var Cx=class extends Ru{static id="timeseries";static defaults=Ru.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Rf(e,this.min),this._tableRange=Rf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,r=[],s=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=i&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Rf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Rf(this._table,i*this._tableRange+this._minPos,!0)}},mH=Object.freeze({__proto__:null,CategoryScale:_x,LinearScale:xx,LogarithmicScale:yx,RadialLinearScale:Sx,TimeScale:Ru,TimeSeriesScale:Cx}),B1=[w5,Z3,Gz,mH];Cl.register(...B1);var z1=Cl;var EI=So(W1()),US=So(Y1());var $J=So(Du(),1);Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,e){var i={};i["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};r["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var s={};s[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",s)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(n,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(n){function t(e,i){return"___"+e.toUpperCase()+i+"___"}Object.defineProperties(n.languages["markup-templating"]={},{buildPlaceholders:{value:function(e,i,r,s){if(e.language===i){var o=e.tokenStack=[];e.code=e.code.replace(r,function(a){if(typeof s=="function"&&!s(a))return a;for(var l=o.length,c;e.code.indexOf(c=t(i,l))!==-1;)++l;return o[l]=a,c}),e.grammar=n.languages.markup}}},tokenizePlaceholders:{value:function(e,i){if(e.language!==i||!e.tokenStack)return;e.grammar=n.languages[i];var r=0,s=Object.keys(e.tokenStack);function o(a){for(var l=0;l<a.length&&!(r>=s.length);l++){var c=a[l];if(typeof c=="string"||c.content&&typeof c.content=="string"){var u=s[r],d=e.tokenStack[u],h=typeof c=="string"?c:c.content,f=t(i,u),g=h.indexOf(f);if(g>-1){++r;var m=h.substring(0,g),p=new n.Token(i,n.tokenize(d,e.grammar),"language-"+i,d),b=h.substring(g+f.length),_=[];m&&_.push.apply(_,o([m])),_.push(p),b&&_.push.apply(_,o([b])),typeof c=="string"?a.splice.apply(a,[l,1].concat(_)):c.content=_}}else c.content&&o(c.content)}return a}o(e.tokens)}}})})(Prism);(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var e="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",i=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+e+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+i),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+i+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+e),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+e),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(Prism);(function(n){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,e=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],i=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,r=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,s=/[{}\[\](),:;]/;n.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:e,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:i,operator:r,punctuation:s};var o={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:n.languages.php},a=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:o}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:o}}];n.languages.insertBefore("php","variable",{string:a,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:a,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:e,number:i,operator:r,punctuation:s}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),n.hooks.add("before-tokenize",function(l){if(/<\?/.test(l.code)){var c=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;n.languages["markup-templating"].buildPlaceholders(l,"php",c)}}),n.hooks.add("after-tokenize",function(l){n.languages["markup-templating"].tokenizePlaceholders(l,"php")})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(n){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",e={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},i={bash:e,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:i},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:e}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:i},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:i.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:i.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},e.inside=n.languages.bash;for(var r=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],s=i.variable[1].inside,o=0;o<r.length;o++)s[r[o]]=n.languages.bash[r[o]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(n){n.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(e){var i=t[e],r=[];/^\w+$/.test(e)||r.push(/\w+/.exec(e)[0]),e==="diff"&&r.push("bold"),n.languages.diff[e]={pattern:RegExp("^(?:["+i+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:r,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(e)[0]}}}}),Object.defineProperty(n.languages.diff,"PREFIXES",{value:t})})(Prism);var{entries:rw,setPrototypeOf:J1,isFrozen:xH,getPrototypeOf:yH,getOwnPropertyDescriptor:vH}=Object,{freeze:An,seal:gi,create:Ix}=Object,{apply:Px,construct:Fx}=typeof Reflect<"u"&&Reflect;An||(An=function(t){return t});gi||(gi=function(t){return t});Px||(Px=function(t,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return t.apply(e,r)});Fx||(Fx=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return new t(...i)});var Vf=En(Array.prototype.forEach),SH=En(Array.prototype.lastIndexOf),X1=En(Array.prototype.pop),Iu=En(Array.prototype.push),CH=En(Array.prototype.splice),qf=En(String.prototype.toLowerCase),kx=En(String.prototype.toString),Ox=En(String.prototype.match),Pu=En(String.prototype.replace),AH=En(String.prototype.indexOf),EH=En(String.prototype.trim),Ni=En(Object.prototype.hasOwnProperty),Cn=En(RegExp.prototype.test),Fu=TH(TypeError);function En(n){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return Px(n,t,i)}}function TH(n){return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Fx(n,e)}}function At(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qf;J1&&J1(n,null);let i=t.length;for(;i--;){let r=t[i];if(typeof r=="string"){let s=e(r);s!==r&&(xH(t)||(t[i]=s),r=s)}n[r]=!0}return n}function wH(n){for(let t=0;t<n.length;t++)Ni(n,t)||(n[t]=null);return n}function rr(n){let t=Ix(null);for(let[e,i]of rw(n))Ni(n,e)&&(Array.isArray(i)?t[e]=wH(i):i&&typeof i=="object"&&i.constructor===Object?t[e]=rr(i):t[e]=i);return t}function $u(n,t){for(;n!==null;){let i=vH(n,t);if(i){if(i.get)return En(i.get);if(typeof i.value=="function")return En(i.value)}n=yH(n)}function e(){return null}return e}var Z1=An(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mx=An(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rx=An(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),NH=An(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lx=An(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),kH=An(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Q1=An(["#text"]),tw=An(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Dx=An(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ew=An(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gf=An(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),OH=gi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),MH=gi(/<%[\w\W]*|[\w\W]*%>/gm),RH=gi(/\$\{[\w\W]*/gm),LH=gi(/^data-[\-\w.\u00B7-\uFFFF]+$/),DH=gi(/^aria-[\-\w]+$/),sw=gi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IH=gi(/^(?:\w+script|data):/i),PH=gi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ow=gi(/^html$/i),FH=gi(/^[a-z][.\w]*(-[.\w]+)+$/i),nw=Object.freeze({__proto__:null,ARIA_ATTR:DH,ATTR_WHITESPACE:PH,CUSTOM_ELEMENT:FH,DATA_ATTR:LH,DOCTYPE_NAME:ow,ERB_EXPR:MH,IS_ALLOWED_URI:sw,IS_SCRIPT_OR_DATA:IH,MUSTACHE_EXPR:OH,TMPLIT_EXPR:RH}),Bu={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},$H=function(){return typeof window>"u"?null:window},BH=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null,r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(i=e.getAttribute(r));let s="dompurify"+(i?"#"+i:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},iw=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function aw(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$H(),t=K=>aw(K);if(t.version="3.3.1",t.removed=[],!n||!n.document||n.document.nodeType!==Bu.document||!n.Element)return t.isSupported=!1,t;let{document:e}=n,i=e,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=n,g=l.prototype,m=$u(g,"cloneNode"),p=$u(g,"remove"),b=$u(g,"nextSibling"),_=$u(g,"childNodes"),x=$u(g,"parentNode");if(typeof o=="function"){let K=e.createElement("template");K.content&&K.content.ownerDocument&&(e=K.content.ownerDocument)}let y,v="",{implementation:S,createNodeIterator:C,createDocumentFragment:A,getElementsByTagName:E}=e,{importNode:$}=i,L=iw();t.isSupported=typeof rw=="function"&&typeof x=="function"&&S&&S.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:w,ERB_EXPR:N,TMPLIT_EXPR:R,DATA_ATTR:k,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:U}=nw,{IS_ALLOWED_URI:X}=nw,G=null,Q=At({},[...Z1,...Mx,...Rx,...Lx,...Q1]),st=null,ut=At({},[...tw,...Dx,...ew,...Gf]),at=Object.seal(Ix(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),et=null,bt=null,q=Object.seal(Ix(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),vt=!0,kt=!0,Un=!1,wr=!0,Ne=!1,ri=!0,Ke=!1,je=!1,Nr=!1,pn=!1,Kn=!1,jn=!1,po=!0,Nc=!1,kc="user-content-",kr=!0,si=!1,Vn={},Gn=null,Fa=At({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Oc=null,$a=At({},["audio","video","img","source","image","track"]),Ba=null,mo=At({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Or="http://www.w3.org/1998/Math/MathML",Ln="http://www.w3.org/2000/svg",on="http://www.w3.org/1999/xhtml",Gi=on,bo=!1,Mc=null,za=At({},[Or,Ln,on],kx),Mr=At({},["mi","mo","mn","ms","mtext"]),Ha=At({},["annotation-xml"]),_o=At({},["title","style","font","a","script"]),xo=null,Ae=["application/xhtml+xml","text/html"],ms="text/html",ve=null,Rr=null,Rc=e.createElement("form"),Lc=function(T){return T instanceof RegExp||T instanceof Function},Wa=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Rr&&Rr===T)){if((!T||typeof T!="object")&&(T={}),T=rr(T),xo=Ae.indexOf(T.PARSER_MEDIA_TYPE)===-1?ms:T.PARSER_MEDIA_TYPE,ve=xo==="application/xhtml+xml"?kx:qf,G=Ni(T,"ALLOWED_TAGS")?At({},T.ALLOWED_TAGS,ve):Q,st=Ni(T,"ALLOWED_ATTR")?At({},T.ALLOWED_ATTR,ve):ut,Mc=Ni(T,"ALLOWED_NAMESPACES")?At({},T.ALLOWED_NAMESPACES,kx):za,Ba=Ni(T,"ADD_URI_SAFE_ATTR")?At(rr(mo),T.ADD_URI_SAFE_ATTR,ve):mo,Oc=Ni(T,"ADD_DATA_URI_TAGS")?At(rr($a),T.ADD_DATA_URI_TAGS,ve):$a,Gn=Ni(T,"FORBID_CONTENTS")?At({},T.FORBID_CONTENTS,ve):Fa,et=Ni(T,"FORBID_TAGS")?At({},T.FORBID_TAGS,ve):rr({}),bt=Ni(T,"FORBID_ATTR")?At({},T.FORBID_ATTR,ve):rr({}),Vn=Ni(T,"USE_PROFILES")?T.USE_PROFILES:!1,vt=T.ALLOW_ARIA_ATTR!==!1,kt=T.ALLOW_DATA_ATTR!==!1,Un=T.ALLOW_UNKNOWN_PROTOCOLS||!1,wr=T.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=T.SAFE_FOR_TEMPLATES||!1,ri=T.SAFE_FOR_XML!==!1,Ke=T.WHOLE_DOCUMENT||!1,pn=T.RETURN_DOM||!1,Kn=T.RETURN_DOM_FRAGMENT||!1,jn=T.RETURN_TRUSTED_TYPE||!1,Nr=T.FORCE_BODY||!1,po=T.SANITIZE_DOM!==!1,Nc=T.SANITIZE_NAMED_PROPS||!1,kr=T.KEEP_CONTENT!==!1,si=T.IN_PLACE||!1,X=T.ALLOWED_URI_REGEXP||sw,Gi=T.NAMESPACE||on,Mr=T.MATHML_TEXT_INTEGRATION_POINTS||Mr,Ha=T.HTML_INTEGRATION_POINTS||Ha,at=T.CUSTOM_ELEMENT_HANDLING||{},T.CUSTOM_ELEMENT_HANDLING&&Lc(T.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=T.CUSTOM_ELEMENT_HANDLING.tagNameCheck),T.CUSTOM_ELEMENT_HANDLING&&Lc(T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),T.CUSTOM_ELEMENT_HANDLING&&typeof T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(kt=!1),Kn&&(pn=!0),Vn&&(G=At({},Q1),st=[],Vn.html===!0&&(At(G,Z1),At(st,tw)),Vn.svg===!0&&(At(G,Mx),At(st,Dx),At(st,Gf)),Vn.svgFilters===!0&&(At(G,Rx),At(st,Dx),At(st,Gf)),Vn.mathMl===!0&&(At(G,Lx),At(st,ew),At(st,Gf))),T.ADD_TAGS&&(typeof T.ADD_TAGS=="function"?q.tagCheck=T.ADD_TAGS:(G===Q&&(G=rr(G)),At(G,T.ADD_TAGS,ve))),T.ADD_ATTR&&(typeof T.ADD_ATTR=="function"?q.attributeCheck=T.ADD_ATTR:(st===ut&&(st=rr(st)),At(st,T.ADD_ATTR,ve))),T.ADD_URI_SAFE_ATTR&&At(Ba,T.ADD_URI_SAFE_ATTR,ve),T.FORBID_CONTENTS&&(Gn===Fa&&(Gn=rr(Gn)),At(Gn,T.FORBID_CONTENTS,ve)),T.ADD_FORBID_CONTENTS&&(Gn===Fa&&(Gn=rr(Gn)),At(Gn,T.ADD_FORBID_CONTENTS,ve)),kr&&(G["#text"]=!0),Ke&&At(G,["html","head","body"]),G.table&&(At(G,["tbody"]),delete et.tbody),T.TRUSTED_TYPES_POLICY){if(typeof T.TRUSTED_TYPES_POLICY.createHTML!="function")throw Fu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof T.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Fu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=T.TRUSTED_TYPES_POLICY,v=y.createHTML("")}else y===void 0&&(y=BH(f,r)),y!==null&&typeof v=="string"&&(v=y.createHTML(""));An&&An(T),Rr=T}},qn=At({},[...Mx,...Rx,...NH]),yo=At({},[...Lx,...kH]),sh=function(T){let B=x(T);(!B||!B.tagName)&&(B={namespaceURI:Gi,tagName:"template"});let V=qf(T.tagName),Rt=qf(B.tagName);return Mc[T.namespaceURI]?T.namespaceURI===Ln?B.namespaceURI===on?V==="svg":B.namespaceURI===Or?V==="svg"&&(Rt==="annotation-xml"||Mr[Rt]):!!qn[V]:T.namespaceURI===Or?B.namespaceURI===on?V==="math":B.namespaceURI===Ln?V==="math"&&Ha[Rt]:!!yo[V]:T.namespaceURI===on?B.namespaceURI===Ln&&!Ha[Rt]||B.namespaceURI===Or&&!Mr[Rt]?!1:!yo[V]&&(_o[V]||!qn[V]):!!(xo==="application/xhtml+xml"&&Mc[T.namespaceURI]):!1},Yn=function(T){Iu(t.removed,{element:T});try{x(T).removeChild(T)}catch{p(T)}},yi=function(T,B){try{Iu(t.removed,{attribute:B.getAttributeNode(T),from:B})}catch{Iu(t.removed,{attribute:null,from:B})}if(B.removeAttribute(T),T==="is")if(pn||Kn)try{Yn(B)}catch{}else try{B.setAttribute(T,"")}catch{}},Dc=function(T){let B=null,V=null;if(Nr)T="<remove></remove>"+T;else{let Ot=Ox(T,/^[\r\n\t ]+/);V=Ot&&Ot[0]}xo==="application/xhtml+xml"&&Gi===on&&(T='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+T+"</body></html>");let Rt=y?y.createHTML(T):T;if(Gi===on)try{B=new h().parseFromString(Rt,xo)}catch{}if(!B||!B.documentElement){B=S.createDocument(Gi,"template",null);try{B.documentElement.innerHTML=bo?v:Rt}catch{}}let Jt=B.body||B.documentElement;return T&&V&&Jt.insertBefore(e.createTextNode(V),Jt.childNodes[0]||null),Gi===on?E.call(B,Ke?"html":"body")[0]:Ke?B.documentElement:Jt},oi=function(T){return C.call(T.ownerDocument||T,T,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ua=function(T){return T instanceof d&&(typeof T.nodeName!="string"||typeof T.textContent!="string"||typeof T.removeChild!="function"||!(T.attributes instanceof u)||typeof T.removeAttribute!="function"||typeof T.setAttribute!="function"||typeof T.namespaceURI!="string"||typeof T.insertBefore!="function"||typeof T.hasChildNodes!="function")},Ic=function(T){return typeof a=="function"&&T instanceof a};function ai(K,T,B){Vf(K,V=>{V.call(t,T,B,Rr)})}let Pc=function(T){let B=null;if(ai(L.beforeSanitizeElements,T,null),Ua(T))return Yn(T),!0;let V=ve(T.nodeName);if(ai(L.uponSanitizeElement,T,{tagName:V,allowedTags:G}),ri&&T.hasChildNodes()&&!Ic(T.firstElementChild)&&Cn(/<[/\w!]/g,T.innerHTML)&&Cn(/<[/\w!]/g,T.textContent)||T.nodeType===Bu.progressingInstruction||ri&&T.nodeType===Bu.comment&&Cn(/<[/\w]/g,T.data))return Yn(T),!0;if(!(q.tagCheck instanceof Function&&q.tagCheck(V))&&(!G[V]||et[V])){if(!et[V]&&M(V)&&(at.tagNameCheck instanceof RegExp&&Cn(at.tagNameCheck,V)||at.tagNameCheck instanceof Function&&at.tagNameCheck(V)))return!1;if(kr&&!Gn[V]){let Rt=x(T)||T.parentNode,Jt=_(T)||T.childNodes;if(Jt&&Rt){let Ot=Jt.length;for(let Ve=Ot-1;Ve>=0;--Ve){let li=m(Jt[Ve],!0);li.__removalCount=(T.__removalCount||0)+1,Rt.insertBefore(li,b(T))}}}return Yn(T),!0}return T instanceof l&&!sh(T)||(V==="noscript"||V==="noembed"||V==="noframes")&&Cn(/<\/no(script|embed|frames)/i,T.innerHTML)?(Yn(T),!0):(Ne&&T.nodeType===Bu.text&&(B=T.textContent,Vf([w,N,R],Rt=>{B=Pu(B,Rt," ")}),T.textContent!==B&&(Iu(t.removed,{element:T.cloneNode()}),T.textContent=B)),ai(L.afterSanitizeElements,T,null),!1)},oh=function(T,B,V){if(po&&(B==="id"||B==="name")&&(V in e||V in Rc))return!1;if(!(kt&&!bt[B]&&Cn(k,B))){if(!(vt&&Cn(D,B))){if(!(q.attributeCheck instanceof Function&&q.attributeCheck(B,T))){if(!st[B]||bt[B]){if(!(M(T)&&(at.tagNameCheck instanceof RegExp&&Cn(at.tagNameCheck,T)||at.tagNameCheck instanceof Function&&at.tagNameCheck(T))&&(at.attributeNameCheck instanceof RegExp&&Cn(at.attributeNameCheck,B)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(B,T))||B==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&Cn(at.tagNameCheck,V)||at.tagNameCheck instanceof Function&&at.tagNameCheck(V))))return!1}else if(!Ba[B]){if(!Cn(X,Pu(V,z,""))){if(!((B==="src"||B==="xlink:href"||B==="href")&&T!=="script"&&AH(V,"data:")===0&&Oc[T])){if(!(Un&&!Cn(F,Pu(V,z,"")))){if(V)return!1}}}}}}}return!0},M=function(T){return T!=="annotation-xml"&&Ox(T,U)},tt=function(T){ai(L.beforeSanitizeAttributes,T,null);let{attributes:B}=T;if(!B||Ua(T))return;let V={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:st,forceKeepAttr:void 0},Rt=B.length;for(;Rt--;){let Jt=B[Rt],{name:Ot,namespaceURI:Ve,value:li}=Jt,Ka=ve(Ot),um=li,Ge=Ot==="value"?um:EH(um);if(V.attrName=Ka,V.attrValue=Ge,V.keepAttr=!0,V.forceKeepAttr=void 0,ai(L.uponSanitizeAttribute,T,V),Ge=V.attrValue,Nc&&(Ka==="id"||Ka==="name")&&(yi(Ot,T),Ge=kc+Ge),ri&&Cn(/((--!?|])>)|<\/(style|title|textarea)/i,Ge)){yi(Ot,T);continue}if(Ka==="attributename"&&Ox(Ge,"href")){yi(Ot,T);continue}if(V.forceKeepAttr)continue;if(!V.keepAttr){yi(Ot,T);continue}if(!wr&&Cn(/\/>/i,Ge)){yi(Ot,T);continue}Ne&&Vf([w,N,R],jS=>{Ge=Pu(Ge,jS," ")});let KS=ve(T.nodeName);if(!oh(KS,Ka,Ge)){yi(Ot,T);continue}if(y&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Ve)switch(f.getAttributeType(KS,Ka)){case"TrustedHTML":{Ge=y.createHTML(Ge);break}case"TrustedScriptURL":{Ge=y.createScriptURL(Ge);break}}if(Ge!==um)try{Ve?T.setAttributeNS(Ve,Ot,Ge):T.setAttribute(Ot,Ge),Ua(T)?Yn(T):X1(t.removed)}catch{yi(Ot,T)}}ai(L.afterSanitizeAttributes,T,null)},Y=function K(T){let B=null,V=oi(T);for(ai(L.beforeSanitizeShadowDOM,T,null);B=V.nextNode();)ai(L.uponSanitizeShadowNode,B,null),Pc(B),tt(B),B.content instanceof s&&K(B.content);ai(L.afterSanitizeShadowDOM,T,null)};return t.sanitize=function(K){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=null,V=null,Rt=null,Jt=null;if(bo=!K,bo&&(K="<!-->"),typeof K!="string"&&!Ic(K))if(typeof K.toString=="function"){if(K=K.toString(),typeof K!="string")throw Fu("dirty is not a string, aborting")}else throw Fu("toString is not a function");if(!t.isSupported)return K;if(je||Wa(T),t.removed=[],typeof K=="string"&&(si=!1),si){if(K.nodeName){let li=ve(K.nodeName);if(!G[li]||et[li])throw Fu("root node is forbidden and cannot be sanitized in-place")}}else if(K instanceof a)B=Dc("<!---->"),V=B.ownerDocument.importNode(K,!0),V.nodeType===Bu.element&&V.nodeName==="BODY"||V.nodeName==="HTML"?B=V:B.appendChild(V);else{if(!pn&&!Ne&&!Ke&&K.indexOf("<")===-1)return y&&jn?y.createHTML(K):K;if(B=Dc(K),!B)return pn?null:jn?v:""}B&&Nr&&Yn(B.firstChild);let Ot=oi(si?K:B);for(;Rt=Ot.nextNode();)Pc(Rt),tt(Rt),Rt.content instanceof s&&Y(Rt.content);if(si)return K;if(pn){if(Kn)for(Jt=A.call(B.ownerDocument);B.firstChild;)Jt.appendChild(B.firstChild);else Jt=B;return(st.shadowroot||st.shadowrootmode)&&(Jt=$.call(i,Jt,!0)),Jt}let Ve=Ke?B.outerHTML:B.innerHTML;return Ke&&G["!doctype"]&&B.ownerDocument&&B.ownerDocument.doctype&&B.ownerDocument.doctype.name&&Cn(ow,B.ownerDocument.doctype.name)&&(Ve="<!DOCTYPE "+B.ownerDocument.doctype.name+`>
`+Ve),Ne&&Vf([w,N,R],li=>{Ve=Pu(Ve,li," ")}),y&&jn?y.createHTML(Ve):Ve},t.setConfig=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wa(K),je=!0},t.clearConfig=function(){Rr=null,je=!1},t.isValidAttribute=function(K,T,B){Rr||Wa({});let V=ve(K),Rt=ve(T);return oh(V,Rt,B)},t.addHook=function(K,T){typeof T=="function"&&Iu(L[K],T)},t.removeHook=function(K,T){if(T!==void 0){let B=SH(L[K],T);return B===-1?void 0:CH(L[K],B,1)[0]}return X1(L[K])},t.removeHooks=function(K){L[K]=[]},t.removeAllHooks=function(){L=iw()},t}var Yf=aw();var s0={};an(s0,{$addUpdateTag:()=>yk,$applyNodeReplacement:()=>cd,$caretFromPoint:()=>js,$caretRangeFromSelection:()=>Cy,$cloneWithProperties:()=>Zy,$cloneWithPropertiesEphemeral:()=>x6,$comparePointCaretNext:()=>n0,$copyNode:()=>Jy,$create:()=>v6,$createLineBreakNode:()=>Dl,$createNodeSelection:()=>Iy,$createParagraphNode:()=>ts,$createPoint:()=>Di,$createRangeSelection:()=>QN,$createRangeSelectionFromDom:()=>G4,$createTabNode:()=>Ag,$createTextNode:()=>Ie,$extendCaretToRange:()=>t0,$findMatchingParent:()=>Gu,$getAdjacentChildCaret:()=>Hl,$getAdjacentNode:()=>_k,$getAdjacentSiblingOrParentSiblingCaret:()=>k6,$getCaretInDirection:()=>Vs,$getCaretRange:()=>Ks,$getCaretRangeInDirection:()=>r0,$getCharacterOffsets:()=>py,$getChildCaret:()=>ns,$getChildCaretAtIndex:()=>Dk,$getChildCaretOrSelf:()=>kk,$getCollapsedCaretRange:()=>Ok,$getCommonAncestor:()=>qu,$getCommonAncestorResultBranchOrder:()=>i0,$getEditor:()=>Xy,$getNearestNodeFromDOMNode:()=>Og,$getNearestRootOrShadowRoot:()=>Sk,$getNodeByKey:()=>Me,$getNodeByKeyOrThrow:()=>Ck,$getNodeFromDOMNode:()=>Uy,$getPreviousSelection:()=>la,$getRoot:()=>Zn,$getSelection:()=>Dt,$getSiblingCaret:()=>He,$getState:()=>sg,$getStateChange:()=>_4,$getTextContent:()=>J4,$getTextNodeOffset:()=>Li,$getTextPointCaret:()=>Us,$getTextPointCaretSlice:()=>vy,$getWritableNodeState:()=>Ty,$hasAncestor:()=>yg,$hasUpdateTag:()=>g6,$insertNodes:()=>Y4,$isBlockElementNode:()=>V4,$isChildCaret:()=>Ri,$isDecoratorNode:()=>Zt,$isEditorState:()=>t6,$isElementNode:()=>H,$isExtendableTextPointCaret:()=>Lk,$isInlineElementOrDecoratorNode:()=>p6,$isLeafNode:()=>d6,$isLineBreakNode:()=>Qo,$isNodeCaret:()=>A6,$isNodeSelection:()=>Eg,$isParagraphNode:()=>ok,$isRangeSelection:()=>dt,$isRootNode:()=>ze,$isRootOrShadowRoot:()=>Ii,$isSiblingCaret:()=>aa,$isTabNode:()=>Dy,$isTextNode:()=>rt,$isTextPointCaret:()=>es,$isTextPointCaretSlice:()=>N6,$isTokenOrSegmented:()=>Jr,$isTokenOrTab:()=>$s,$nodesOfType:()=>f6,$normalizeCaret:()=>Oi,$normalizeSelection__EXPERIMENTAL:()=>og,$onUpdate:()=>vk,$parseSerializedNode:()=>Q4,$removeTextFromCaretRange:()=>Rk,$rewindSiblingCaret:()=>jl,$selectAll:()=>h6,$setCompositionKey:()=>Fe,$setPointFromCaret:()=>Wl,$setSelection:()=>Bn,$setSelectionFromCaretRange:()=>Mk,$setState:()=>x4,$splitAtPointCaretNext:()=>R6,$splitNode:()=>m6,$updateRangeSelectionFromCaretRange:()=>Yu,ArtificialNode__DO_NOT_USE:()=>bg,BLUR_COMMAND:()=>LN,CAN_REDO_COMMAND:()=>M4,CAN_UNDO_COMMAND:()=>R4,CLEAR_EDITOR_COMMAND:()=>k4,CLEAR_HISTORY_COMMAND:()=>O4,CLICK_COMMAND:()=>pN,COLLABORATION_TAG:()=>KN,COMMAND_PRIORITY_CRITICAL:()=>o6,COMMAND_PRIORITY_EDITOR:()=>n6,COMMAND_PRIORITY_HIGH:()=>s6,COMMAND_PRIORITY_LOW:()=>i6,COMMAND_PRIORITY_NORMAL:()=>r6,CONTROLLED_TEXT_INSERTION_COMMAND:()=>kl,COPY_COMMAND:()=>My,CUT_COMMAND:()=>Ry,DELETE_CHARACTER_COMMAND:()=>td,DELETE_LINE_COMMAND:()=>nd,DELETE_WORD_COMMAND:()=>ed,DRAGEND_COMMAND:()=>MN,DRAGOVER_COMMAND:()=>ON,DRAGSTART_COMMAND:()=>kN,DROP_COMMAND:()=>NN,DecoratorNode:()=>id,ElementNode:()=>Hs,FOCUS_COMMAND:()=>RN,FORMAT_ELEMENT_COMMAND:()=>N4,FORMAT_TEXT_COMMAND:()=>Ps,HISTORIC_TAG:()=>I4,HISTORY_MERGE_TAG:()=>ng,HISTORY_PUSH_TAG:()=>P4,INDENT_CONTENT_COMMAND:()=>T4,INSERT_LINE_BREAK_COMMAND:()=>Uu,INSERT_PARAGRAPH_COMMAND:()=>oy,INSERT_TAB_COMMAND:()=>E4,INTERNAL_$isBlock:()=>Qr,IS_ALL_FORMATTING:()=>ZH,IS_BOLD:()=>jH,IS_CODE:()=>YH,IS_HIGHLIGHT:()=>Ay,IS_ITALIC:()=>VH,IS_STRIKETHROUGH:()=>GH,IS_SUBSCRIPT:()=>JH,IS_SUPERSCRIPT:()=>XH,IS_UNDERLINE:()=>qH,KEY_ARROW_DOWN_COMMAND:()=>SN,KEY_ARROW_LEFT_COMMAND:()=>xN,KEY_ARROW_RIGHT_COMMAND:()=>bN,KEY_ARROW_UP_COMMAND:()=>vN,KEY_BACKSPACE_COMMAND:()=>AN,KEY_DELETE_COMMAND:()=>TN,KEY_DOWN_COMMAND:()=>mN,KEY_ENTER_COMMAND:()=>dg,KEY_ESCAPE_COMMAND:()=>EN,KEY_MODIFIER_COMMAND:()=>DN,KEY_SPACE_COMMAND:()=>CN,KEY_TAB_COMMAND:()=>wN,LineBreakNode:()=>Ll,MOVE_TO_END:()=>_N,MOVE_TO_START:()=>yN,NODE_STATE_KEY:()=>h4,OUTDENT_CONTENT_COMMAND:()=>w4,PASTE_COMMAND:()=>Ny,PASTE_TAG:()=>F4,ParagraphNode:()=>Fl,REDO_COMMAND:()=>Oy,REMOVE_TEXT_COMMAND:()=>ay,RootNode:()=>Pl,SELECTION_CHANGE_COMMAND:()=>wy,SELECTION_INSERT_CLIPBOARD_NODES_COMMAND:()=>A4,SELECT_ALL_COMMAND:()=>ly,SKIP_COLLAB_TAG:()=>$4,SKIP_DOM_SELECTION_TAG:()=>VN,SKIP_SCROLL_INTO_VIEW_TAG:()=>jN,SKIP_SELECTION_FOCUS_TAG:()=>GN,TEXT_TYPE_TO_FORMAT:()=>un,TabNode:()=>Il,TextNode:()=>ia,UNDO_COMMAND:()=>ky,buildImportMap:()=>D4,configExtension:()=>D6,createCommand:()=>gt,createEditor:()=>a6,createSharedNodeState:()=>cN,createState:()=>b4,declarePeerDependency:()=>I6,defineExtension:()=>L6,flipDirection:()=>Gs,getDOMOwnerDocument:()=>qy,getDOMSelection:()=>ar,getDOMSelectionFromTarget:()=>Ak,getDOMTextNode:()=>sa,getEditorPropertyFromDOMNode:()=>ad,getNearestEditorFromDOMNode:()=>Wy,getRegisteredNode:()=>zy,getRegisteredNodeOrThrow:()=>By,getStaticNodeConfig:()=>ud,getTextDirection:()=>u6,getTransformSetFromKlass:()=>lk,isBlockDomNode:()=>xy,isCurrentlyReadOnlyMode:()=>Ul,isDOMDocumentNode:()=>uk,isDOMNode:()=>Kl,isDOMTextNode:()=>lr,isDOMUnmanaged:()=>Nk,isDocumentFragment:()=>Ek,isExactShortcutMatch:()=>Wt,isHTMLAnchorElement:()=>b6,isHTMLElement:()=>Tn,isInlineDomNode:()=>Tk,isLexicalEditor:()=>Ng,isModifierMatch:()=>bk,isSelectionCapturedInDecoratorInput:()=>Hy,isSelectionWithinEditor:()=>od,makeStepwiseIterator:()=>e0,removeFromParent:()=>Bs,resetRandomKey:()=>l6,safeCast:()=>P6,setDOMUnmanaged:()=>y6,setNodeIndentFromDOM:()=>wk,shallowMergeConfig:()=>F6});function W(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function tN(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);e.search=i.toString(),console.warn(`Minified Lexical warning #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Pi=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,zH=Pi&&"documentMode"in document?document.documentMode:null,ki=Pi&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),ta=Pi&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),rg=!(!Pi||!("InputEvent"in window)||zH)&&"getTargetRanges"in new window.InputEvent("input"),Ju=Pi&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Rl=Pi&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,HH=Pi&&/Android/.test(navigator.userAgent),eN=Pi&&/^(?=.*Chrome).*/i.test(navigator.userAgent),lw=Pi&&HH&&eN,Xu=Pi&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&ki&&!eN;function nN(...n){let t=[];for(let e of n)if(e&&typeof e=="string")for(let[i]of e.matchAll(/\S+/g))t.push(i);return t}var WH=0,UH=1,KH=2,jH=1,VH=2,GH=4,qH=8,YH=16,JH=32,XH=64,Ay=128,ZH=2047,QH=1,t4=2,e4=3,n4=4,i4=5,r4=6,Sg=Ju||Rl||Xu?"\xA0":"\u200B",zs=`

`,s4=ta?"\xA0":Sg,iN="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",rN="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",o4=new RegExp("^[^"+rN+"]*["+iN+"]"),a4=new RegExp("^[^"+iN+"]*["+rN+"]"),un={bold:1,capitalize:1024,code:16,highlight:Ay,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},l4={directionless:1,unmergeable:2},cw={center:2,end:6,justify:4,left:1,right:3,start:5},c4={[t4]:"center",[r4]:"end",[n4]:"justify",[QH]:"left",[e4]:"right",[i4]:"start"},u4={normal:0,segmented:2,token:1},d4={[WH]:"normal",[KH]:"segmented",[UH]:"token"},h4="$",uw="$config";function sN(n,t,e,i,r,s){let o=n.getFirstChild();for(;o!==null;){let a=o.__key;o.__parent===t&&(H(o)&&sN(o,a,e,i,r,s),e.has(a)||s.delete(a),r.push(a)),o=o.getNextSibling()}}var Jx=!1,Ey=0;function f4(n){Ey=n.timeStamp}function $x(n,t,e){let i=n.nodeName==="BR",r=t.__lexicalLineBreak;return r&&(n===r||i&&n.previousSibling===r)||i&&kg(n,e)!==void 0}function g4(n,t,e){let i=ar(mi(e)),r=null,s=null;i!==null&&i.anchorNode===n&&(r=i.anchorOffset,s=i.focusOffset);let o=n.nodeValue;o!==null&&Vy(t,o,r,s,!1)}function p4(n,t,e){if(dt(n)){let i=n.anchor.getNode();if(i.is(e)&&n.format!==i.getFormat())return!1}return lr(t)&&e.isAttached()}function m4(n,t,e,i){for(let r=n;r&&!Nk(r);r=ld(r)){let s=kg(r,t);if(s!==void 0){let o=Me(s,e);if(o)return Zt(o)||!Tn(r)?void 0:[r,o]}else if(r===i)return[i,fk(e)]}}function oN(n,t,e){Jx=!0;let i=performance.now()-Ey>100;try{Xn(n,()=>{let r=Dt()||function(h){return h.getEditorState().read(()=>{let f=Dt();return f!==null?f.clone():null})}(n),s=new Map,o=n.getRootElement(),a=n._editorState,l=n._blockCursorElement,c=!1,u="";for(let h=0;h<t.length;h++){let f=t[h],g=f.type,m=f.target,p=m4(m,n,a,o);if(!p)continue;let[b,_]=p;if(g==="characterData")i&&rt(_)&&lr(m)&&p4(r,m,_)&&g4(m,_,n);else if(g==="childList"){c=!0;let x=f.addedNodes;for(let S=0;S<x.length;S++){let C=x[S],A=Uy(C),E=C.parentNode;if(E!=null&&C!==l&&A===null&&!$x(C,E,n)){if(ta){let $=(Tn(C)?C.innerText:null)||C.nodeValue;$&&(u+=$)}E.removeChild(C)}}let y=f.removedNodes,v=y.length;if(v>0){let S=0;for(let C=0;C<v;C++){let A=y[C];($x(A,m,n)||l===A)&&(m.appendChild(A),S++)}v!==S&&s.set(b,_)}}}if(s.size>0)for(let[h,f]of s)f.reconcileObservedMutation(h,n);let d=e.takeRecords();if(d.length>0){for(let h=0;h<d.length;h++){let f=d[h],g=f.addedNodes,m=f.target;for(let p=0;p<g.length;p++){let b=g[p],_=b.parentNode;_==null||b.nodeName!=="BR"||$x(b,m,n)||_.removeChild(b)}}e.takeRecords()}r!==null&&(c&&Bn(r),ta&&xk(n)&&r.insertRawText(u))})}finally{Jx=!1}}function aN(n){let t=n._observer;t!==null&&oN(n,t.takeRecords(),t)}function lN(n){(function(t){Ey===0&&mi(t).addEventListener("textInput",f4,!0)})(n),n._observer=new MutationObserver((t,e)=>{oN(n,t,e)})}var Xx=class{key;parse;unparse;isEqual;defaultValue;constructor(t,e){this.key=t,this.parse=e.parse.bind(e),this.unparse=(e.unparse||y4).bind(e),this.isEqual=(e.isEqual||Object.is).bind(e),this.defaultValue=this.parse(void 0)}};function b4(n,t){return new Xx(n,t)}function sg(n,t,e="latest"){let i=(e==="latest"?n.getLatest():n).__state;return i?i.getValue(t):t.defaultValue}function _4(n,t,e){let i=sg(n,e,"direct"),r=sg(t,e,"direct");return e.isEqual(i,r)?null:[i,r]}function x4(n,t,e){let i;if(Pe(),typeof e=="function"){let s=n.getLatest(),o=sg(s,t);if(i=e(o),t.isEqual(o,i))return s}else i=e;let r=n.getWritable();return Ty(r).updateFromKnown(t,i),r}function cN(n){let t=new Map,e=new Set;for(let i=typeof n=="function"?n:n.replace;i.prototype&&i.prototype.getType!==void 0;i=Object.getPrototypeOf(i)){let{ownNodeConfig:r}=ud(i);if(r&&r.stateConfigs)for(let s of r.stateConfigs){let o;"stateConfig"in s?(o=s.stateConfig,s.flat&&e.add(o.key)):o=s,t.set(o.key,o)}}return{flatKeys:e,sharedConfigMap:t}}var Zx=class n{node;knownState;unknownState;sharedNodeState;size;constructor(t,e,i=void 0,r=new Map,s=void 0){this.node=t,this.sharedNodeState=e,this.unknownState=i,this.knownState=r;let{sharedConfigMap:o}=this.sharedNodeState,a=s!==void 0?s:function(l,c,u){let d=u.size;if(c)for(let h in c){let f=l.get(h);f&&u.has(f)||d++}return d}(o,i,r);this.size=a}getValue(t){let e=this.knownState.get(t);if(e!==void 0)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);let i=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){let r=this.unknownState[t.key];r!==void 0&&(i=t.parse(r)),this.updateFromKnown(t,i)}return i}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let t={...this.unknownState},e={};for(let[i,r]of this.knownState)i.isEqual(r,i.defaultValue)?delete t[i.key]:t[i.key]=i.unparse(r);for(let i of this.sharedNodeState.flatKeys)i in t&&(e[i]=t[i],delete t[i]);return dw(t)&&(e.$=t),e}getWritable(t){if(this.node===t)return this;let{sharedNodeState:e,unknownState:i}=this,r=new Map(this.knownState);return new n(t,e,function(s,o,a){let l;if(a)for(let[c,u]of Object.entries(a)){let d=s.get(c);d?o.has(d)||o.set(d,d.parse(u)):(l=l||{},l[c]=u)}return l}(e.sharedConfigMap,r,i),r,this.size)}updateFromKnown(t,e){let i=t.key;this.sharedNodeState.sharedConfigMap.set(i,t);let{knownState:r,unknownState:s}=this;r.has(t)||s&&i in s||(s&&(delete s[i],this.unknownState=dw(s)),this.size++),r.set(t,e)}updateFromUnknown(t,e){let i=this.sharedNodeState.sharedConfigMap.get(t);i?this.updateFromKnown(i,i.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){let{knownState:e}=this;for(let i of e.keys())e.set(i,i.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(let[i,r]of Object.entries(t))this.updateFromUnknown(i,r)}};function Ty(n){let t=n.getWritable(),e=t.__state?t.__state.getWritable(t):new Zx(t,uN(t));return t.__state=e,e}function uN(n){return n.__state?n.__state.sharedNodeState:By(Xy(),n.getType()).sharedNodeState}function dw(n){if(n)for(let t in n)return n}function y4(n){return n}function hw(n,t,e){for(let[i,r]of t.knownState){if(n.has(i.key))continue;n.add(i.key);let s=e?e.getValue(i):i.defaultValue;if(s!==r&&!i.isEqual(s,r))return!0}return!1}function fw(n,t,e){let{unknownState:i}=t,r=e?e.unknownState:void 0;if(i){for(let[s,o]of Object.entries(i))if(!n.has(s)&&(n.add(s),o!==(r?r[s]:void 0)))return!0}return!1}function gw(n,t){let e=n.__state;return e&&e.node===n?e.getWritable(t):e}function pw(n,t){let e=n.__mode,i=n.__format,r=n.__style,s=t.__mode,o=t.__format,a=t.__style,l=n.__state,c=t.__state;return(e===null||e===s)&&(i===null||i===o)&&(r===null||r===a)&&(n.__state===null||l===c||function(u,d){if(u===d)return!0;if(u&&d&&u.size!==d.size)return!1;let h=new Set;return!(u&&hw(h,u,d)||d&&hw(h,d,u)||u&&fw(h,u,d)||d&&fw(h,d,u))}(l,c))}function mw(n,t){let e=n.mergeWithSibling(t),i=ce()._normalizedNodes;return i.add(n.__key),i.add(t.__key),e}function bw(n){let t,e,i=n;if(i.__text!==""||!i.isSimpleText()||i.isUnmergeable()){for(;(t=i.getPreviousSibling())!==null&&rt(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(pw(t,i)){i=mw(t,i);break}break}t.remove()}for(;(e=i.getNextSibling())!==null&&rt(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(pw(i,e)){i=mw(i,e);break}break}e.remove()}}else i.remove()}function og(n){return _w(n.anchor),_w(n.focus),n}function _w(n){for(;n.type==="element";){let t=n.getNode(),e=n.offset,i,r;if(e===t.getChildrenSize()?(i=t.getChildAtIndex(e-1),r=!0):(i=t.getChildAtIndex(e),r=!1),rt(i)){n.set(i.__key,r?i.getTextContentSize():0,"text",!0);break}if(!H(i))break;n.set(i.__key,r?i.getChildrenSize():0,"element",!0)}}var ea,dn,Zu,Cg,Qx,ty,na,Mi,ey,Qu,Oe="",sr=null,or="",Xr="",Tl=!1,ag=!1;function lg(n,t){let e=na.get(n);if(t!==null){let i=sy(n);i.parentNode===t&&t.removeChild(i)}if(Mi.has(n)||dn._keyToDOMMap.delete(n),H(e)){let i=ug(e,na);ny(i,0,i.length-1,null)}e!==void 0&&Gy(Qu,Zu,Cg,e,"destroyed")}function ny(n,t,e,i){let r=t;for(;r<=e;++r){let s=n[r];s!==void 0&&lg(s,i)}}function Xo(n,t){n.setProperty("text-align",t)}var v4="40px";function dN(n,t){let e=ea.theme.indent;if(typeof e=="string"){let r=n.classList.contains(e);t>0&&!r?n.classList.add(e):t<1&&r&&n.classList.remove(e)}let i=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||v4;n.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${i})`)}function hN(n,t){let e=n.style;t===0?Xo(e,""):t===1?Xo(e,"left"):t===2?Xo(e,"center"):t===3?Xo(e,"right"):t===4?Xo(e,"justify"):t===5?Xo(e,"start"):t===6&&Xo(e,"end")}function iy(n,t){let e=function(i){let r=i.__dir;if(r!==null)return r;if(ze(i))return null;let s=i.getParentOrThrow();return ze(s)&&s.__dir===null?"auto":null}(t);e!==null?n.dir=e:n.removeAttribute("dir")}function cg(n,t){let e=Mi.get(n);e===void 0&&W(60);let i=e.createDOM(ea,dn);if(function(r,s,o){let a=o._keyToDOMMap;(function(l,c,u){let d=`__lexicalKey_${c._key}`;l[d]=u})(s,o,r),a.set(r,s)}(n,i,dn),rt(e)?i.setAttribute("data-lexical-text","true"):Zt(e)&&i.setAttribute("data-lexical-decorator","true"),H(e)){let r=e.__indent,s=e.__size;if(iy(i,e),r!==0&&dN(i,r),s!==0){let a=s-1;ry(ug(e,Mi),e,0,a,e.getDOMSlot(i))}let o=e.__format;o!==0&&hN(i,o),e.isInline()||fN(null,e,i),Mg(e)&&(Oe+=zs,Xr+=zs)}else{let r=e.getTextContent();if(Zt(e)){let s=e.decorate(dn,ea);s!==null&&gN(n,s),i.contentEditable="false"}Oe+=r,Xr+=r}return t!==null&&t.insertChild(i),Gy(Qu,Zu,Cg,e,"created"),i}function ry(n,t,e,i,r){let s=Oe;Oe="";let o=e;for(;o<=i;++o){cg(n[o],r);let a=Mi.get(n[o]);a!==null&&rt(a)&&(sr===null&&(sr=a.getFormat()),or===""&&(or=a.getStyle()))}Mg(t)&&(Oe+=zs),r.element.__lexicalTextContent=Oe,Oe=s+Oe}function xw(n,t){if(n){let e=n.__last;if(e){let i=t.get(e);if(i)return Qo(i)?"line-break":Zt(i)&&i.isInline()?"decorator":null}return"empty"}return null}function fN(n,t,e){let i=xw(n,na),r=xw(t,Mi);i!==r&&t.getDOMSlot(e).setManagedLineBreak(r)}function S4(n,t,e){var i;sr=null,or="",function(r,s,o){let a=Oe,l=r.__size,c=s.__size;Oe="";let u=o.element;if(l===1&&c===1){let d=r.__first,h=s.__first;if(d===h)Wu(d,u);else{let g=sy(d),m=cg(h,null);try{u.replaceChild(m,g)}catch(p){if(typeof p=="object"&&p!=null){let b=`${p.toString()} Parent: ${u.tagName}, new child: {tag: ${m.tagName} key: ${h}}, old child: {tag: ${g.tagName}, key: ${d}}.`;throw new Error(b)}throw p}lg(d,null)}let f=Mi.get(h);rt(f)&&(sr===null&&(sr=f.getFormat()),or===""&&(or=f.getStyle()))}else{let d=ug(r,na),h=ug(s,Mi);if(d.length!==l&&W(227),h.length!==c&&W(228),l===0)c!==0&&ry(h,s,0,c-1,o);else if(c===0){if(l!==0){let f=o.after==null&&o.before==null&&o.element.__lexicalLineBreak==null;ny(d,0,l-1,f?null:u),f&&(u.textContent="")}}else(function(f,g,m,p,b,_){let x=p-1,y=b-1,v,S,C=_.getFirstChild(),A=0,E=0;for(;A<=x&&E<=y;){let w=g[A],N=m[E];if(w===N)C=Bx(Wu(N,_.element)),A++,E++;else{v===void 0&&(v=new Set(g)),S===void 0&&(S=new Set(m));let k=S.has(w),D=v.has(N);if(k)if(D){let F=oa(dn,N);F===C?C=Bx(Wu(N,_.element)):(_.withBefore(C).insertChild(F),Wu(N,_.element)),A++,E++}else cg(N,_.withBefore(C)),E++;else C=Bx(sy(w)),lg(w,_.element),A++}let R=Mi.get(N);R!==null&&rt(R)&&(sr===null&&(sr=R.getFormat()),or===""&&(or=R.getStyle()))}let $=A>x,L=E>y;if($&&!L){let w=m[y+1],N=w===void 0?null:dn.getElementByKey(w);ry(m,f,E,y,_.withBefore(N))}else L&&!$&&ny(g,A,x,_.element)})(s,d,h,l,c,o)}Mg(s)&&(Oe+=zs),u.__lexicalTextContent=Oe,Oe=a+Oe}(n,t,t.getDOMSlot(e)),i=t,sr==null||sr===i.__textFormat||ag||i.setTextFormat(sr),function(r){or===""||or===r.__textStyle||ag||r.setTextStyle(or)}(t)}function ug(n,t){let e=[],i=n.__first;for(;i!==null;){let r=t.get(i);r===void 0&&W(101),e.push(i),i=r.__next}return e}function Wu(n,t){let e=na.get(n),i=Mi.get(n);e!==void 0&&i!==void 0||W(61);let r=Tl||ty.has(n)||Qx.has(n),s=oa(dn,n);if(e===i&&!r){if(H(e)){let o=s.__lexicalTextContent;o!==void 0&&(Oe+=o,Xr+=o)}else{let o=e.getTextContent();Xr+=o,Oe+=o}return s}if(e!==i&&r&&Gy(Qu,Zu,Cg,i,"updated"),i.updateDOM(e,s,ea)){let o=cg(n,null);return t===null&&W(62),t.replaceChild(o,s),lg(n,null),o}if(H(e)&&H(i)){let o=i.__indent;(Tl||o!==e.__indent)&&dN(s,o);let a=i.__format;if((Tl||a!==e.__format)&&hN(s,a),r&&(S4(e,i,s),ze(i)||i.isInline()||fN(e,i,s)),Mg(i)&&(Oe+=zs,Xr+=zs),(Tl||i.__dir!==e.__dir)&&(iy(s,i),ze(i)&&!Tl))for(let l of i.getChildren())H(l)&&iy(oa(dn,l.getKey()),l)}else{let o=i.getTextContent();if(Zt(i)){let a=i.decorate(dn,ea);a!==null&&gN(n,a)}Oe+=o,Xr+=o}if(!ag&&ze(i)&&i.__cachedText!==Xr){let o=i.getWritable();o.__cachedText=Xr,i=o}return s}function gN(n,t){let e=dn._pendingDecorators,i=dn._decorators;if(e===null){if(i[n]===t)return;e=hk(dn)}e[n]=t}function Bx(n){let t=n.nextSibling;return t!==null&&t===dn._blockCursorElement&&(t=t.nextSibling),t}function C4(n,t,e,i,r,s){Oe="",Xr="",Tl=i===2,dn=e,ea=e._config,Zu=e._nodes,Cg=dn._listeners.mutation,Qx=r,ty=s,na=n._nodeMap,Mi=t._nodeMap,ag=t._readOnly,ey=new Map(e._keyToDOMMap);let o=new Map;return Qu=o,Wu("root",null),dn=void 0,Zu=void 0,Qx=void 0,ty=void 0,na=void 0,Mi=void 0,ea=void 0,ey=void 0,Qu=void 0,o}function sy(n){let t=ey.get(n);return t===void 0&&W(75,n),t}function gt(n){return{type:n}}var wy=gt("SELECTION_CHANGE_COMMAND"),A4=gt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),pN=gt("CLICK_COMMAND"),td=gt("DELETE_CHARACTER_COMMAND"),Uu=gt("INSERT_LINE_BREAK_COMMAND"),oy=gt("INSERT_PARAGRAPH_COMMAND"),kl=gt("CONTROLLED_TEXT_INSERTION_COMMAND"),Ny=gt("PASTE_COMMAND"),ay=gt("REMOVE_TEXT_COMMAND"),ed=gt("DELETE_WORD_COMMAND"),nd=gt("DELETE_LINE_COMMAND"),Ps=gt("FORMAT_TEXT_COMMAND"),ky=gt("UNDO_COMMAND"),Oy=gt("REDO_COMMAND"),mN=gt("KEYDOWN_COMMAND"),bN=gt("KEY_ARROW_RIGHT_COMMAND"),_N=gt("MOVE_TO_END"),xN=gt("KEY_ARROW_LEFT_COMMAND"),yN=gt("MOVE_TO_START"),vN=gt("KEY_ARROW_UP_COMMAND"),SN=gt("KEY_ARROW_DOWN_COMMAND"),dg=gt("KEY_ENTER_COMMAND"),CN=gt("KEY_SPACE_COMMAND"),AN=gt("KEY_BACKSPACE_COMMAND"),EN=gt("KEY_ESCAPE_COMMAND"),TN=gt("KEY_DELETE_COMMAND"),wN=gt("KEY_TAB_COMMAND"),E4=gt("INSERT_TAB_COMMAND"),T4=gt("INDENT_CONTENT_COMMAND"),w4=gt("OUTDENT_CONTENT_COMMAND"),NN=gt("DROP_COMMAND"),N4=gt("FORMAT_ELEMENT_COMMAND"),kN=gt("DRAGSTART_COMMAND"),ON=gt("DRAGOVER_COMMAND"),MN=gt("DRAGEND_COMMAND"),My=gt("COPY_COMMAND"),Ry=gt("CUT_COMMAND"),ly=gt("SELECT_ALL_COMMAND"),k4=gt("CLEAR_EDITOR_COMMAND"),O4=gt("CLEAR_HISTORY_COMMAND"),M4=gt("CAN_REDO_COMMAND"),R4=gt("CAN_UNDO_COMMAND"),RN=gt("FOCUS_COMMAND"),LN=gt("BLUR_COMMAND"),DN=gt("KEY_MODIFIER_COMMAND"),Gr=Object.freeze({}),cy=[["keydown",function(n,t){if(Ku=n.timeStamp,IN=n.key,!t.isComposing()&&!Z(t,mN,n)&&n.key!=null){if(zx&&qw(n))return Xn(t,()=>{Jf(t,Hx)}),zx=!1,void(Hx="");if(function(e){return Wt(e,"ArrowRight",{shiftKey:"any"})}(n))Z(t,bN,n);else if(function(e){return Wt(e,"ArrowRight",Yr)}(n))Z(t,_N,n);else if(function(e){return Wt(e,"ArrowLeft",{shiftKey:"any"})}(n))Z(t,xN,n);else if(function(e){return Wt(e,"ArrowLeft",Yr)}(n))Z(t,yN,n);else if(function(e){return Wt(e,"ArrowUp",{altKey:"any",shiftKey:"any"})}(n))Z(t,vN,n);else if(function(e){return Wt(e,"ArrowDown",{altKey:"any",shiftKey:"any"})}(n))Z(t,SN,n);else if(function(e){return Wt(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(n))ju=!0,Z(t,dg,n);else if(function(e){return e.key===" "}(n))Z(t,CN,n);else if(function(e){return ki&&Wt(e,"o",{ctrlKey:!0})}(n))n.preventDefault(),ju=!0,Z(t,Uu,!0);else if(function(e){return Wt(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(n))ju=!1,Z(t,dg,n);else if(function(e){return Wt(e,"Backspace",{shiftKey:"any"})||ki&&Wt(e,"h",{ctrlKey:!0})}(n))qw(n)?Z(t,AN,n):(n.preventDefault(),Z(t,td,!0));else if(function(e){return e.key==="Escape"}(n))Z(t,EN,n);else if(function(e){return Wt(e,"Delete",{})||ki&&Wt(e,"d",{ctrlKey:!0})}(n))(function(e){return e.key==="Delete"})(n)?Z(t,TN,n):(n.preventDefault(),Z(t,td,!1));else if(function(e){return Wt(e,"Backspace",Gw)}(n))n.preventDefault(),Z(t,ed,!0);else if(function(e){return Wt(e,"Delete",Gw)}(n))n.preventDefault(),Z(t,ed,!1);else if(function(e){return ki&&Wt(e,"Backspace",{metaKey:!0})}(n))n.preventDefault(),Z(t,nd,!0);else if(function(e){return ki&&(Wt(e,"Delete",{metaKey:!0})||Wt(e,"k",{ctrlKey:!0}))}(n))n.preventDefault(),Z(t,nd,!1);else if(function(e){return Wt(e,"b",Yr)}(n))n.preventDefault(),Z(t,Ps,"bold");else if(function(e){return Wt(e,"u",Yr)}(n))n.preventDefault(),Z(t,Ps,"underline");else if(function(e){return Wt(e,"i",Yr)}(n))n.preventDefault(),Z(t,Ps,"italic");else if(function(e){return Wt(e,"Tab",{shiftKey:"any"})}(n))Z(t,wN,n);else if(function(e){return Wt(e,"z",Yr)}(n))n.preventDefault(),Z(t,ky,void 0);else if(function(e){return ki?Wt(e,"z",{metaKey:!0,shiftKey:!0}):Wt(e,"y",{ctrlKey:!0})||Wt(e,"z",{ctrlKey:!0,shiftKey:!0})}(n))n.preventDefault(),Z(t,Oy,void 0);else{let e=t._editorState._selection;e===null||dt(e)?Yw(n)&&(n.preventDefault(),Z(t,ly,n)):function(i){return Wt(i,"c",Yr)}(n)?(n.preventDefault(),Z(t,My,n)):function(i){return Wt(i,"x",Yr)}(n)?(n.preventDefault(),Z(t,Ry,n)):Yw(n)&&(n.preventDefault(),Z(t,ly,n))}(function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey})(n)&&Z(t,DN,n)}}],["pointerdown",function(n,t){let e=n.target,i=n.pointerType;Kl(e)&&i!=="touch"&&i!=="pen"&&n.button===0&&Xn(t,()=>{Kw(e)||(hy=!0)})}],["compositionstart",function(n,t){Xn(t,()=>{let e=Dt();if(dt(e)&&!t.isComposing()){let i=e.anchor,r=e.anchor.getNode();Fe(i.key),(n.timeStamp<Ku+30||i.type==="element"||!e.isCollapsed()||r.getFormat()!==e.format||rt(r)&&r.getStyle()!==e.style)&&Z(t,kl,s4)}})}],["compositionend",function(n,t){ta?zu=!0:Rl||!Ju&&!Xu?Xn(t,()=>{Jf(t,n.data)}):(zx=!0,Hx=n.data)}],["input",function(n,t){n.stopPropagation(),Xn(t,()=>{if(Tn(n.target)&&Kw(n.target))return;let e=Dt(),i=n.data,r=zN(n);if(i!=null&&dt(e)&&$N(e,r,i,n.timeStamp,!1)){zu&&(Jf(t,i),zu=!1);let s=e.anchor.getNode(),o=ar(mi(t));if(o===null)return;let a=e.isBackward(),l=a?e.anchor.offset:e.focus.offset,c=a?e.focus.offset:e.anchor.offset;rg&&!e.isCollapsed()&&rt(s)&&o.anchorNode!==null&&s.getTextContent().slice(0,l)+i+s.getTextContent().slice(l+c)===mk(o.anchorNode)||Z(t,kl,i);let u=i.length;ta&&u>1&&n.inputType==="insertCompositionText"&&!t.isComposing()&&(e.anchor.offset-=u),Ju||Rl||Xu||!t.isComposing()||(Ku=0,Fe(null))}else jy(!1,t,i!==null?i:void 0),zu&&(Jf(t,i||void 0),zu=!1);(function(){Pe();let s=ce();aN(s)})()},{event:n}),wl=null}],["click",function(n,t){Xn(t,()=>{let e=Dt(),i=ar(mi(t)),r=la();if(i){if(dt(e)){let s=e.anchor,o=s.getNode();if(s.type==="element"&&s.offset===0&&e.isCollapsed()&&!ze(o)&&Zn().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&r!==null&&e.is(r))i.removeAllRanges(),e.dirty=!0;else if(n.detail===3&&!e.isCollapsed()&&o!==e.focus.getNode()){let a=Gu(o,l=>H(l)&&!l.isInline());H(a)&&a.select(0)}}else if(n.pointerType==="touch"||n.pointerType==="pen"){let s=i.anchorNode;(Tn(s)||lr(s))&&Bn(Tg(r,i,t,n))}}Z(t,pN,n)})}],["cut",Gr],["copy",Gr],["dragstart",Gr],["dragover",Gr],["dragend",Gr],["paste",Gr],["focus",Gr],["blur",Gr],["drop",Gr]];rg&&cy.push(["beforeinput",(n,t)=>function(e,i){let r=e.inputType,s=zN(e);r==="deleteCompositionText"||ta&&xk(i)||r!=="insertCompositionText"&&Xn(i,()=>{let o=Dt();if(r==="deleteContentBackward"){if(o===null){let f=la();if(!dt(f))return;Bn(f.clone())}if(dt(o)){let f=o.anchor.key===o.focus.key;if(a=e.timeStamp,IN==="MediaLast"&&a<Ku+30&&i.isComposing()&&f){if(Fe(null),Ku=0,setTimeout(()=>{Xn(i,()=>{Fe(null)})},30),dt(o)){let g=o.anchor.getNode();g.markDirty(),rt(g)||W(142),BN(o,g)}}else{Fe(null),e.preventDefault();let g=o.anchor.getNode(),m=g.getTextContent(),p=g.canInsertTextAfter(),b=o.anchor.offset===0&&o.focus.offset===m.length,_=lw&&f&&!b&&p;if(_&&o.isCollapsed()&&(_=!Zt(_k(o.anchor,!0))),!_){Z(i,td,!0);let x=Dt();lw&&dt(x)&&x.isCollapsed()&&(Zo=x,setTimeout(()=>Zo=null))}}return}}var a;if(!dt(o))return;let l=e.data;wl!==null&&jy(!1,i,wl),o.dirty&&wl===null||!o.isCollapsed()||ze(o.anchor.getNode())||s===null||o.applyDOMRange(s),wl=null;let c=o.anchor,u=o.focus,d=c.getNode(),h=u.getNode();if(r!=="insertText"&&r!=="insertTranspose")switch(e.preventDefault(),r){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Z(i,kl,e);break;case"insertFromComposition":Fe(null),Z(i,kl,e);break;case"insertLineBreak":Fe(null),Z(i,Uu,!1);break;case"insertParagraph":Fe(null),ju&&!Rl?(ju=!1,Z(i,Uu,!1)):Z(i,oy,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Z(i,Ny,e);break;case"deleteByComposition":(function(f,g){return f!==g||H(f)||H(g)||!$s(f)||!$s(g)})(d,h)&&Z(i,ay,e);break;case"deleteByDrag":case"deleteByCut":Z(i,ay,e);break;case"deleteContent":Z(i,td,!1);break;case"deleteWordBackward":Z(i,ed,!0);break;case"deleteWordForward":Z(i,ed,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Z(i,nd,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Z(i,nd,!1);break;case"formatStrikeThrough":Z(i,Ps,"strikethrough");break;case"formatBold":Z(i,Ps,"bold");break;case"formatItalic":Z(i,Ps,"italic");break;case"formatUnderline":Z(i,Ps,"underline");break;case"historyUndo":Z(i,ky,void 0);break;case"historyRedo":Z(i,Oy,void 0)}else{if(l===`
`)e.preventDefault(),Z(i,Uu,!1);else if(l===zs)e.preventDefault(),Z(i,oy,void 0);else if(l==null&&e.dataTransfer){let f=e.dataTransfer.getData("text/plain");e.preventDefault(),o.insertRawText(f)}else l!=null&&$N(o,s,l,e.timeStamp,!0)?(e.preventDefault(),Z(i,kl,l)):wl=l;PN=e.timeStamp}})}(n,t)]);var Ku=0,IN=null,PN=0,wl=null,uy=new WeakMap,hg=new WeakMap,dy=!1,hy=!1,ju=!1,zu=!1,zx=!1,Hx="",Zo=null,FN=[0,"",0,"root",0];function $N(n,t,e,i,r){let s=n.anchor,o=n.focus,a=s.getNode(),l=ce(),c=ar(mi(l)),u=c!==null?c.anchorNode:null,d=s.key,h=l.getElementByKey(d),f=e.length;return d!==o.key||!rt(a)||(!r&&(!rg||PN<i+50)||a.isDirty()&&f<2||gk(e))&&s.offset!==o.offset&&!a.isComposing()||Jr(a)||a.isDirty()&&f>1||(r||!rg)&&h!==null&&!a.isComposing()&&u!==sa(h)||c!==null&&t!==null&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||a.getFormat()!==n.format||a.getStyle()!==n.style||function(g,m){if(m.isSegmented())return!0;if(!g.isCollapsed())return!1;let p=g.anchor.offset,b=m.getParentOrThrow(),_=$s(m);return p===0?!m.canInsertTextBefore()||!b.canInsertTextBefore()&&!m.isComposing()||_||function(x){let y=x.getPreviousSibling();return(rt(y)||H(y)&&y.isInline())&&!y.canInsertTextAfter()}(m):p===m.getTextContentSize()&&(!m.canInsertTextAfter()||!b.canInsertTextAfter()&&!m.isComposing()||_)}(n,a)}function yw(n,t){return lr(n)&&n.nodeValue!==null&&t!==0&&t!==n.nodeValue.length}function vw(n,t,e){let{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=n;dy&&(dy=!1,yw(i,r)&&yw(s,o)&&!Zo)||Xn(t,()=>{if(!e)return void Bn(null);if(!od(t,i,s))return;let a=Dt();if(Zo&&dt(a)&&a.isCollapsed()){let l=a.anchor,c=Zo.anchor;(l.key===c.key&&l.offset===c.offset+1||l.offset===1&&c.getNode().is(l.getNode().getPreviousSibling()))&&(a=Zo.clone(),Bn(a))}if(Zo=null,dt(a)){let l=a.anchor,c=l.getNode();if(a.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(a.dirty=!0);let u=mi(t).event,d=u?u.timeStamp:performance.now(),[h,f,g,m,p]=FN,b=Zn(),_=t.isComposing()===!1&&b.getTextContent()==="";if(d<p+200&&l.offset===g&&l.key===m)eg(a,h,f);else if(l.type==="text")rt(c)||W(141),BN(a,c);else if(l.type==="element"&&!_){H(c)||W(259);let x=l.getNode();x.isEmpty()?function(y,v){let S=v.getTextFormat(),C=v.getTextStyle();eg(y,S,C)}(a,x):eg(a,0,"")}}else{let u=l.key,d=a.focus.key,h=a.getNodes(),f=h.length,g=a.isBackward(),m=g?o:r,p=g?r:o,b=g?d:u,_=g?u:d,x=2047,y=!1;for(let v=0;v<f;v++){let S=h[v],C=S.getTextContentSize();if(rt(S)&&C!==0&&!(v===0&&S.__key===b&&m===C||v===f-1&&S.__key===_&&p===0)&&(y=!0,x&=S.getFormat(),x===0))break}a.format=y?x:0}}Z(t,wy,void 0)})}function eg(n,t,e){n.format===t&&n.style===e||(n.format=t,n.style=e,n.dirty=!0)}function BN(n,t){eg(n,t.getFormat(),t.getStyle())}function zN(n){if(!n.getTargetRanges)return null;let t=n.getTargetRanges();return t.length===0?null:t[0]}function Jf(n,t){let e=n._compositionKey;if(Fe(null),e!==null&&t!=null){if(t===""){let i=Me(e),r=sa(n.getElementByKey(e));return void(r!==null&&r.nodeValue!==null&&rt(i)&&Vy(i,r.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){let i=Dt();if(dt(i)){let r=i.focus;return i.anchor.set(r.key,r.offset,r.type),void Z(n,dg,null)}}}jy(!0,n,t)}function HN(n){let t=n.__lexicalEventHandles;return t===void 0&&(t=[],n.__lexicalEventHandles=t),t}var Ol=new Map;function WN(n){let t=Ak(n.target);if(t===null)return;let e=Wy(t.anchorNode);if(e===null)return;hy&&(hy=!1,Xn(e,()=>{let l=la(),c=t.anchorNode;(Tn(c)||lr(c))&&Bn(Tg(l,t,e,n))}));let i=Ky(e),r=i[i.length-1],s=r._key,o=Ol.get(s),a=o||r;a!==e&&vw(t,a,!1),vw(t,e,!0),e!==r?Ol.set(s,e):o&&Ol.delete(s)}function Sw(n){n._lexicalHandled=!0}function Cw(n){return n._lexicalHandled===!0}var Aw=()=>{};function L4(n){let t=uy.get(n);if(t===void 0)return void Aw();let e=hg.get(t);if(e===void 0)return void Aw();let i=e-1;i>=0||W(164),uy.delete(n),hg.set(t,i),i===0&&t.removeEventListener("selectionchange",WN);let r=ad(n);Ng(r)?(function(o){if(o._parentEditor!==null){let a=Ky(o),l=a[a.length-1]._key;Ol.get(l)===o&&Ol.delete(l)}else Ol.delete(o._key)}(r),n.__lexicalEditor=null):r&&W(198);let s=HN(n);for(let o=0;o<s.length;o++)s[o]();n.__lexicalEventHandles=[]}function fy(n,t,e){Pe();let i=n.__key,r=n.getParent();if(r===null)return;let s=function(a){let l=Dt();if(!dt(l)||!H(a))return l;let{anchor:c,focus:u}=l,d=c.getNode(),h=u.getNode();return yg(d,a)&&c.set(a.__key,0,"element"),yg(h,a)&&u.set(a.__key,0,"element"),l}(n),o=!1;if(dt(s)&&t){let a=s.anchor,l=s.focus;a.key===i&&(mg(a,n,r,n.getPreviousSibling(),n.getNextSibling()),o=!0),l.key===i&&(mg(l,n,r,n.getPreviousSibling(),n.getNextSibling()),o=!0)}else Eg(s)&&t&&n.isSelected()&&n.selectPrevious();if(dt(s)&&t&&!o){let a=n.getIndexWithinParent();Bs(n),pg(s,r,a,-1)}else Bs(n);e||Ii(r)||r.canBeEmpty()||!r.isEmpty()||fy(r,t),t&&s&&ze(r)&&r.isEmpty()&&r.selectEnd()}function D4(n){return n}var UN=Symbol.for("ephemeral");function fg(n){return n[UN]||!1}var pi=class{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:t}=ud(this);return t===void 0&&W(64,this.name),t}static clone(t){W(65,this.name)}$config(){return{}}config(t,e){let i=e.extends||Object.getPrototypeOf(this.constructor);return Object.assign(e,{extends:i,type:t}),{[t]:e}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}static importDOM;constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),dk(this,t)}getType(){return this.__type}isInline(){W(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;let e=Me(t);if(e===null)break;t=e.__parent}return!1}isSelected(t){let e=t||Dt();if(e==null)return!1;let i=e.getNodes().some(r=>r.__key===this.__key);if(rt(this))return i;if(dt(e)&&e.anchor.type==="element"&&e.focus.type==="element"){if(e.isCollapsed())return!1;let r=this.getParent();if(Zt(this)&&this.isInline()&&r){let s=e.isBackward()?e.focus:e.anchor;if(r.is(s.getNode())&&s.offset===r.getChildrenSize()&&this.is(r.getLastChild()))return!1}}return i}getKey(){return this.__key}getIndexWithinParent(){let t=this.getParent();if(t===null)return-1;let e=t.getFirstChild(),i=0;for(;e!==null;){if(this.is(e))return i;i++,e=e.getNextSibling()}return-1}getParent(){let t=this.getLatest().__parent;return t===null?null:Me(t)}getParentOrThrow(){let t=this.getParent();return t===null&&W(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){let e=t.getParent();if(Ii(e))return H(t)||t===this&&Zt(t)||W(194),t;t=e}return null}getTopLevelElementOrThrow(){let t=this.getTopLevelElement();return t===null&&W(67,this.__key),t}getParents(){let t=[],e=this.getParent();for(;e!==null;)t.push(e),e=e.getParent();return t}getParentKeys(){let t=[],e=this.getParent();for(;e!==null;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){let t=this.getLatest().__prev;return t===null?null:Me(t)}getPreviousSiblings(){let t=[],e=this.getParent();if(e===null)return t;let i=e.getFirstChild();for(;i!==null&&!i.is(this);)t.push(i),i=i.getNextSibling();return t}getNextSibling(){let t=this.getLatest().__next;return t===null?null:Me(t)}getNextSiblings(){let t=[],e=this.getNextSibling();for(;e!==null;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){let e=H(this)?this:this.getParent(),i=H(t)?t:t.getParent(),r=e&&i?qu(e,i):null;return r?r.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){let e=qu(this,t);return e!==null&&(e.type==="descendant"||(e.type==="branch"?i0(e)===-1:(e.type!=="same"&&e.type!=="ancestor"&&W(279),!1)))}isParentOf(t){let e=qu(this,t);return e!==null&&e.type==="ancestor"}getNodesBetween(t){let e=this.isBefore(t),i=[],r=new Set,s=this;for(;s!==null;){let o=s.__key;if(r.has(o)||(r.add(o),i.push(s)),s===t)break;let a=H(s)?e?s.getFirstChild():s.getLastChild():null;if(a!==null){s=a;continue}let l=e?s.getNextSibling():s.getPreviousSibling();if(l!==null){s=l;continue}let c=s.getParentOrThrow();if(r.has(c.__key)||i.push(c),c===t)break;let u=null,d=c;do{if(d===null&&W(68),u=e?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),d===null)break;u!==null||r.has(d.__key)||i.push(d)}while(u===null);s=u}return e||i.reverse(),i}isDirty(){let t=ce()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){if(fg(this))return this;let t=Me(this.__key);return t===null&&W(113),t}getWritable(){if(fg(this))return this;Pe();let t=is(),e=ce(),i=t._nodeMap,r=this.__key,s=this.getLatest(),o=e._cloneNotNeeded,a=Dt();if(a!==null&&a.setCachedNodes(null),o.has(r))return xg(s),s;let l=Zy(s);return o.add(r),xg(l),i.set(r,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){W(70)}updateDOM(t,e,i){W(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){let t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){W(18,this.name)}updateFromJSON(t){return function(e,i){let r=e.getWritable(),s=i.$,o=s;for(let a of uN(r).flatKeys)a in i&&(o!==void 0&&o!==s||(o={...s}),o[a]=i[a]);return(r.__state||o)&&Ty(e).updateFromJSON(o),r}(this,t)}static transform(){return null}remove(t){fy(this,!0,t)}replace(t,e){Pe();let i=Dt();i!==null&&(i=i.clone()),Gx(this,t);let r=this.getLatest(),s=this.__key,o=t.__key,a=t.getWritable(),l=this.getParentOrThrow().getWritable(),c=l.__size;Bs(a);let u=r.getPreviousSibling(),d=r.getNextSibling(),h=r.__prev,f=r.__next,g=r.__parent;if(fy(r,!1,!0),u===null?l.__first=o:u.getWritable().__next=o,a.__prev=h,d===null?l.__last=o:d.getWritable().__prev=o,a.__next=f,a.__parent=g,l.__size=c,e&&(H(this)&&H(a)||W(139),this.getChildren().forEach(m=>{a.append(m)})),dt(i)){Bn(i);let m=i.anchor,p=i.focus;m.key===s&&Nw(m,a),p.key===s&&Nw(p,a)}return Fs()===s&&Fe(o),a}insertAfter(t,e=!0){Pe(),Gx(this,t);let i=this.getWritable(),r=t.getWritable(),s=r.getParent(),o=Dt(),a=!1,l=!1;if(s!==null){let f=t.getIndexWithinParent();if(Bs(r),dt(o)){let g=s.__key,m=o.anchor,p=o.focus;a=m.type==="element"&&m.key===g&&m.offset===f+1,l=p.type==="element"&&p.key===g&&p.offset===f+1}}let c=this.getNextSibling(),u=this.getParentOrThrow().getWritable(),d=r.__key,h=i.__next;if(c===null?u.__last=d:c.getWritable().__prev=d,u.__size++,i.__next=d,r.__next=h,r.__prev=i.__key,r.__parent=i.__parent,e&&dt(o)){let f=this.getIndexWithinParent();pg(o,u,f+1);let g=u.__key;a&&o.anchor.set(g,f+2,"element"),l&&o.focus.set(g,f+2,"element")}return t}insertBefore(t,e=!0){Pe(),Gx(this,t);let i=this.getWritable(),r=t.getWritable(),s=r.__key;Bs(r);let o=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),l=i.__prev,c=this.getIndexWithinParent();o===null?a.__first=s:o.getWritable().__next=s,a.__size++,i.__prev=s,r.__prev=l,r.__next=i.__key,r.__parent=i.__parent;let u=Dt();return e&&dt(u)&&pg(u,this.getParentOrThrow(),c),t}isParentRequired(){return!1}createParentElementNode(){return ts()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){Pe();let i=this.getPreviousSibling(),r=this.getParentOrThrow();if(i===null)return r.select(0,0);if(H(i))return i.select();if(!rt(i)){let s=i.getIndexWithinParent()+1;return r.select(s,s)}return i.select(t,e)}selectNext(t,e){Pe();let i=this.getNextSibling(),r=this.getParentOrThrow();if(i===null)return r.select();if(H(i))return i.select(0,0);if(!rt(i)){let s=i.getIndexWithinParent();return r.select(s,s)}return i.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}},I4="historic",P4="history-push",ng="history-merge",F4="paste",KN="collaboration",$4="skip-collab",jN="skip-scroll-into-view",VN="skip-dom-selection",GN="skip-selection-focus",Ll=class n extends pi{static getType(){return"linebreak"}static clone(t){return new n(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(e){let i=e.parentElement;if(i!==null&&xy(i)){let r=i.firstChild;if(r===e||r.nextSibling===e&&Xf(r)){let s=i.lastChild;if(s===e||s.previousSibling===e&&Xf(s))return!0}}return!1}(t)||function(e){let i=e.parentElement;if(i!==null&&xy(i)){let r=i.firstChild;if(r===e||r.nextSibling===e&&Xf(r))return!1;let s=i.lastChild;if(s===e||s.previousSibling===e&&Xf(s))return!0}return!1}(t)?null:{conversion:B4,priority:0}}}static importJSON(t){return Dl().updateFromJSON(t)}};function B4(n){return{node:Dl()}}function Dl(){return cd(new Ll)}function Qo(n){return n instanceof Ll}function Xf(n){return lr(n)&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function Wx(n,t){return 16&t?"code":t&Ay?"mark":32&t?"sub":64&t?"sup":null}function Ux(n,t){return 1&t?"strong":2&t?"em":"span"}function qN(n,t,e,i,r){let s=i.classList,o=Ml(r,"base");o!==void 0&&s.add(...o),o=Ml(r,"underlineStrikethrough");let a=!1,l=8&t&&4&t;o!==void 0&&(8&e&&4&e?(a=!0,l||s.add(...o)):l&&s.remove(...o));for(let c in un){let u=un[c];if(o=Ml(r,c),o!==void 0)if(e&u){if(a&&(c==="underline"||c==="strikethrough")){t&u&&s.remove(...o);continue}((t&u)===0||l&&c==="underline"||c==="strikethrough")&&s.add(...o)}else t&u&&s.remove(...o)}}function YN(n,t,e){let i=t.firstChild,r=e.isComposing(),s=n+(r?Sg:"");if(i==null)t.textContent=s;else{let o=i.nodeValue;if(o!==s)if(r||ta){let[a,l,c]=function(u,d){let h=u.length,f=d.length,g=0,m=0;for(;g<h&&g<f&&u[g]===d[g];)g++;for(;m+g<h&&m+g<f&&u[h-m-1]===d[f-m-1];)m++;return[g,h-g-m,d.slice(g,f-m)]}(o,s);l!==0&&i.deleteData(a,l),i.insertData(a,c)}else i.nodeValue=s}}function Ew(n,t,e,i,r,s){YN(r,n,t);let o=s.theme.text;o!==void 0&&qN(0,0,i,n,o)}function Zf(n,t){let e=document.createElement(t);return e.appendChild(n),e}var ia=class n extends pi{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(t){return new n(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",e){super(e),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let t=this.getLatest();return d4[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Fs()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){let e=un[t];return(this.getFormat()&e)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,e){return _g(this.getLatest().__format,t,e)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,e){let i=this.__format,r=Wx(0,i),s=Ux(0,i),o=r===null?s:r,a=document.createElement(o),l=a;this.hasFormat("code")&&a.setAttribute("spellcheck","false"),r!==null&&(l=document.createElement(s),a.appendChild(l)),Ew(l,this,0,i,this.__text,t);let c=this.__style;return c!==""&&(a.style.cssText=c),a}updateDOM(t,e,i){let r=this.__text,s=t.__format,o=this.__format,a=Wx(0,s),l=Wx(0,o),c=Ux(0,s),u=Ux(0,o);if((a===null?c:a)!==(l===null?u:l))return!0;if(a===l&&c!==u){let m=e.firstChild;m==null&&W(48);let p=document.createElement(u);return Ew(p,this,0,o,r,i),e.replaceChild(p,m),!1}let d=e;l!==null&&a!==null&&(d=e.firstChild,d==null&&W(49)),YN(r,d,this);let h=i.theme.text;h!==void 0&&s!==o&&qN(0,s,o,d,h);let f=t.__style,g=this.__style;return f!==g&&(e.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:U4,priority:0}),b:()=>({conversion:H4,priority:0}),code:()=>({conversion:qr,priority:0}),em:()=>({conversion:qr,priority:0}),i:()=>({conversion:qr,priority:0}),mark:()=>({conversion:qr,priority:0}),s:()=>({conversion:qr,priority:0}),span:()=>({conversion:z4,priority:0}),strong:()=>({conversion:qr,priority:0}),sub:()=>({conversion:qr,priority:0}),sup:()=>({conversion:qr,priority:0}),u:()=>({conversion:qr,priority:0})}}static importJSON(t){return Ie().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:e}=super.exportDOM(t);return Tn(e)||W(132),e.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?e.style.textTransform="lowercase":this.hasFormat("uppercase")?e.style.textTransform="uppercase":this.hasFormat("capitalize")&&(e.style.textTransform="capitalize"),this.hasFormat("bold")&&(e=Zf(e,"b")),this.hasFormat("italic")&&(e=Zf(e,"i")),this.hasFormat("strikethrough")&&(e=Zf(e,"s")),this.hasFormat("underline")&&(e=Zf(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,e){}setFormat(t){let e=this.getWritable();return e.__format=typeof t=="string"?un[t]:t,e}setDetail(t){let e=this.getWritable();return e.__detail=typeof t=="string"?l4[t]:t,e}setStyle(t){let e=this.getWritable();return e.__style=t,e}toggleFormat(t){let e=_g(this.getFormat(),t,null);return this.setFormat(e)}toggleDirectionless(){let t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){let t=this.getWritable();return t.__detail^=2,t}setMode(t){let e=u4[t];if(this.__mode===e)return this;let i=this.getWritable();return i.__mode=e,i}setTextContent(t){if(this.__text===t)return this;let e=this.getWritable();return e.__text=t,e}select(t,e){Pe();let i=t,r=e,s=Dt(),o=this.getTextContent(),a=this.__key;if(typeof o=="string"){let l=o.length;i===void 0&&(i=l),r===void 0&&(r=l)}else i=0,r=0;if(!dt(s))return ZN(a,i,a,r,"text","text");{let l=Fs();l!==s.anchor.key&&l!==s.focus.key||Fe(a),s.setTextNodeRange(this,i,this,r)}return s}selectStart(){return this.select(0,0)}selectEnd(){let t=this.getTextContentSize();return this.select(t,t)}spliceText(t,e,i,r){let s=this.getWritable(),o=s.__text,a=i.length,l=t;l<0&&(l=a+l,l<0&&(l=0));let c=Dt();if(r&&dt(c)){let d=t+a;c.setTextNodeRange(s,d,s,d)}let u=o.slice(0,l)+i+o.slice(l+e);return s.__text=u,s}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Pe();let e=this.getLatest(),i=e.getTextContent();if(i==="")return[];let r=e.__key,s=Fs(),o=i.length;t.sort((A,E)=>A-E),t.push(o);let a=[],l=t.length;for(let A=0,E=0;A<o&&E<=l;E++){let $=t[E];$>A&&(a.push(i.slice(A,$)),A=$)}let c=a.length;if(c===1)return[e];let u=a[0],d=e.getParent(),h,f=e.getFormat(),g=e.getStyle(),m=e.__detail,p=!1,b=null,_=null,x=Dt();if(dt(x)){let[A,E]=x.isBackward()?[x.focus,x.anchor]:[x.anchor,x.focus];A.type==="text"&&A.key===r&&(b=A),E.type==="text"&&E.key===r&&(_=E)}e.isSegmented()?(h=Ie(u),h.__format=f,h.__style=g,h.__detail=m,h.__state=gw(e,h),p=!0):h=e.setTextContent(u);let y=[h];for(let A=1;A<c;A++){let E=Ie(a[A]);E.__format=f,E.__style=g,E.__detail=m,E.__state=gw(e,E);let $=E.__key;s===r&&Fe($),y.push(E)}let v=b?b.offset:null,S=_?_.offset:null,C=0;for(let A of y){if(!b&&!_)break;let E=C+A.getTextContentSize();if(b!==null&&v!==null&&v<=E&&v>=C&&(b.set(A.getKey(),v-C,"text"),v<E&&(b=null)),_!==null&&S!==null&&S<=E&&S>=C){_.set(A.getKey(),S-C,"text");break}C=E}if(d!==null){(function($){let L=$.getPreviousSibling(),w=$.getNextSibling();L!==null&&xg(L),w!==null&&xg(w)})(this);let A=d.getWritable(),E=this.getIndexWithinParent();p?(A.splice(E,0,y),this.remove()):A.splice(E,1,y),dt(x)&&pg(x,d,E,c-1)}return y}mergeWithSibling(t){let e=t===this.getPreviousSibling();e||t===this.getNextSibling()||W(50);let i=this.__key,r=t.__key,s=this.__text,o=s.length;Fs()===r&&Fe(i);let a=Dt();if(dt(a)){let d=a.anchor,h=a.focus;d!==null&&d.key===r&&Iw(d,e,i,t,o),h!==null&&h.key===r&&Iw(h,e,i,t,o)}let l=t.__text,c=e?l+s:s+l;this.setTextContent(c);let u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}};function z4(n){return{forChild:Ly(n.style),node:null}}function H4(n){let t=n,e=t.style.fontWeight==="normal";return{forChild:Ly(t.style,e?void 0:"bold"),node:null}}var Tw=new WeakMap;function W4(n){if(!Tn(n))return!1;if(n.nodeName==="PRE")return!0;let t=n.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function U4(n){let t=n;n.parentElement===null&&W(129);let e=t.textContent||"";if(function(i){let r,s=i.parentNode,o=[i];for(;s!==null&&(r=Tw.get(s))===void 0&&!W4(s);)o.push(s),s=s.parentNode;let a=r===void 0?s:r;for(let l=0;l<o.length;l++)Tw.set(o[l],a);return a}(t)!==null){let i=e.split(/(\r?\n|\t)/),r=[],s=i.length;for(let o=0;o<s;o++){let a=i[o];a===`
`||a===`\r
`?r.push(Dl()):a==="	"?r.push(Ag()):a!==""&&r.push(Ie(a))}return{node:r}}if(e=e.replace(/\r/g,"").replace(/[ \t\n]+/g," "),e==="")return{node:null};if(e[0]===" "){let i=t,r=!0;for(;i!==null&&(i=ww(i,!1))!==null;){let s=i.textContent||"";if(s.length>0){/[ \t\n]$/.test(s)&&(e=e.slice(1)),r=!1;break}}r&&(e=e.slice(1))}if(e[e.length-1]===" "){let i=t,r=!0;for(;i!==null&&(i=ww(i,!0))!==null;)if((i.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(e=e.slice(0,e.length-1))}return e===""?{node:null}:{node:Ie(e)}}function ww(n,t){let e=n;for(;;){let i;for(;(i=t?e.nextSibling:e.previousSibling)===null;){let s=e.parentElement;if(s===null)return null;e=s}if(e=i,Tn(e)){let s=e.style.display;if(s===""&&!Tk(e)||s!==""&&!s.startsWith("inline"))return null}let r=e;for(;(r=t?e.firstChild:e.lastChild)!==null;)e=r;if(lr(e))return e;if(e.nodeName==="BR")return null}}var K4={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function qr(n){let t=K4[n.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:Ly(n.style,t),node:null}}function Ie(n=""){return cd(new ia(n))}function rt(n){return n instanceof ia}function Ly(n,t){let e=n.fontWeight,i=n.textDecoration.split(" "),r=e==="700"||e==="bold",s=i.includes("line-through"),o=n.fontStyle==="italic",a=i.includes("underline"),l=n.verticalAlign;return c=>(rt(c)&&(r&&!c.hasFormat("bold")&&c.toggleFormat("bold"),s&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),a&&!c.hasFormat("underline")&&c.toggleFormat("underline"),l!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),l!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),t&&!c.hasFormat(t)&&c.toggleFormat(t)),c)}var Il=class n extends ia{static getType(){return"tab"}static clone(t){return new n(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){let e=super.createDOM(t),i=Ml(t.theme,"tab");return i!==void 0&&e.classList.add(...i),e}static importJSON(t){return Ag().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&tN(126),super.setTextContent("	")}spliceText(t,e,i,r){return i===""&&e===0||i==="	"&&e===1||W(286),this}setDetail(t){return t!==2&&W(127),this}setMode(t){return t!=="normal"&&W(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}};function Ag(){return cd(new Il)}function Dy(n){return n instanceof Il}var gy=class{key;offset;type;_selection;constructor(t,e,i){this._selection=null,this.key=t,this.offset=e,this.type=i}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:n0(Oi(js(this,"next")),Oi(js(t,"next")))<0}getNode(){let t=Me(this.key);return t===null&&W(20),t}set(t,e,i,r){let s=this._selection,o=this.key;r&&this.key===t&&this.offset===e&&this.type===i||(this.key=t,this.offset=e,this.type=i,Ul()||(Fs()===o&&Fe(t),s!==null&&(s.setCachedNodes(null),s.dirty=!0)))}};function Di(n,t,e){return new gy(n,t,e)}function Kx(n,t){let e=t.__key,i=n.offset,r="element";if(rt(t)){r="text";let s=t.getTextContentSize();i>s&&(i=s)}else if(!H(t)){let s=t.getNextSibling();if(rt(s))e=s.__key,i=0,r="text";else{let o=t.getParent();o&&(e=o.__key,i=t.getIndexWithinParent()+1)}}n.set(e,i,r)}function Nw(n,t){if(H(t)){let e=t.getLastDescendant();H(e)||rt(e)?Kx(n,e):Kx(n,t)}else Kx(n,t)}var gg=class n{_nodes;_cachedNodes;dirty;constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Eg(t))return!1;let e=this._nodes,i=t._nodes;return e.size===i.size&&Array.from(e).every(r=>i.has(r))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new n(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){let e=this.getNodes(),i=e.length,r=e[i-1],s;if(rt(r))s=r.select();else{let o=r.getIndexWithinParent()+1;s=r.getParentOrThrow().select(o,o)}s.insertNodes(t);for(let o=0;o<i;o++)e[o].remove()}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=this._nodes,i=[];for(let r of e){let s=Me(r);s!==null&&i.push(s)}return Ul()||(this._cachedNodes=i),i}getTextContent(){let t=this.getNodes(),e="";for(let i=0;i<t.length;i++)e+=t[i].getTextContent();return e}deleteNodes(){let t=this.getNodes();if((Dt()||la())===this&&t[0]){let e=He(t[0],"next");Mk(Ks(e,e))}for(let e of t)e.remove()}};function dt(n){return n instanceof ra}var ra=class n{format;style;anchor;focus;_cachedNodes;dirty;constructor(t,e,i,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=i,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!dt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let t=this._cachedNodes;if(t!==null)return t;let e=function(i){let r=[],[s,o]=i.getTextSlices();s&&r.push(s.caret.origin);let a=new Set,l=new Set;for(let c of i)if(Ri(c)){let{origin:u}=c;r.length===0?a.add(u):(l.add(u),r.push(u))}else{let{origin:u}=c;H(u)&&l.has(u)||r.push(u)}if(o&&r.push(o.caret.origin),aa(i.focus)&&H(i.focus.origin)&&i.focus.getNodeAtCaret()===null)for(let c=ns(i.focus.origin,"previous");Ri(c)&&a.has(c.origin)&&!c.origin.isEmpty()&&c.origin.is(r[r.length-1]);c=Hl(c))a.delete(c.origin),r.pop();for(;r.length>1;){let c=r[r.length-1];if(!H(c)||l.has(c)||c.isEmpty()||a.has(c))break;r.pop()}if(r.length===0&&i.isCollapsed()){let c=Oi(i.anchor),u=Oi(i.anchor.getFlipped()),d=f=>es(f)?f.origin:f.getNodeAtCaret(),h=d(c)||d(u)||(i.anchor.getNodeAtCaret()?c.origin:u.origin);r.push(h)}return r}(r0(Cy(this),"next"));return Ul()||(this._cachedNodes=e),e}setTextNodeRange(t,e,i,r){this.anchor.set(t.__key,e,"text"),this.focus.set(i.__key,r,"text")}getTextContent(){let t=this.getNodes();if(t.length===0)return"";let e=t[0],i=t[t.length-1],r=this.anchor,s=this.focus,o=r.isBefore(s),[a,l]=py(this),c="",u=!0;for(let d=0;d<t.length;d++){let h=t[d];if(H(h)&&!h.isInline())u||(c+=`
`),u=!h.isEmpty();else if(u=!1,rt(h)){let f=h.getTextContent();h===e?h===i?r.type==="element"&&s.type==="element"&&s.offset!==r.offset||(f=a<l?f.slice(a,l):f.slice(l,a)):f=o?f.slice(a):f.slice(l):h===i&&(f=o?f.slice(0,l):f.slice(0,a)),c+=f}else!Zt(h)&&!Qo(h)||h===i&&this.isCollapsed()||(c+=h.getTextContent())}return c}applyDOMRange(t){let e=ce(),i=e.getEditorState()._selection,r=XN(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,i);if(r===null)return;let[s,o]=r;this.anchor.set(s.key,s.offset,s.type,!0),this.focus.set(o.key,o.offset,o.type,!0),og(this)}clone(){let t=this.anchor,e=this.focus;return new n(Di(t.key,t.offset,t.type),Di(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=_g(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){let e=un[t];return(this.format&e)!==0}insertRawText(t){let e=t.split(/(\r?\n|\t)/),i=[],r=e.length;for(let s=0;s<r;s++){let o=e[s];o===`
`||o===`\r
`?i.push(Dl()):o==="	"?i.push(Ag()):i.push(Ie(o))}this.insertNodes(i)}insertText(t){let e=this.anchor,i=this.focus,r=this.format,s=this.style,o=e,a=i;!this.isCollapsed()&&i.isBefore(e)&&(o=i,a=e),o.type==="element"&&function(p,b,_,x){let y=p.getNode(),v=y.getChildAtIndex(p.offset),S=Ie();if(S.setFormat(_),S.setStyle(x),ok(v))v.splice(0,0,[S]);else{let C=ze(y)?ts().append(S):S;v===null?y.append(C):v.insertBefore(C)}p.is(b)&&b.set(S.__key,0,"text"),p.set(S.__key,0,"text")}(o,a,r,s),a.type==="element"&&Wl(a,Oi(js(a,"next")));let l=o.offset,c=a.offset,u=this.getNodes(),d=u.length,h=u[0];rt(h)||W(26);let f=h.getTextContent().length,g=h.getParentOrThrow(),m=u[d-1];if(d===1&&a.type==="element"&&(c=f,a.set(o.key,c,"text")),this.isCollapsed()&&l===f&&(Jr(h)||!h.canInsertTextAfter()||!g.canInsertTextAfter()&&h.getNextSibling()===null)){let p=h.getNextSibling();if(rt(p)&&p.canInsertTextBefore()&&!Jr(p)||(p=Ie(),p.setFormat(r),p.setStyle(s),g.canInsertTextAfter()?h.insertAfter(p):g.insertAfter(p)),p.select(0,0),h=p,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(Jr(h)||!h.canInsertTextBefore()||!g.canInsertTextBefore()&&h.getPreviousSibling()===null)){let p=h.getPreviousSibling();if(rt(p)&&!Jr(p)||(p=Ie(),p.setFormat(r),g.canInsertTextBefore()?h.insertBefore(p):g.insertBefore(p)),p.select(),h=p,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&l!==f){let p=Ie(h.getTextContent());p.setFormat(r),h.replace(p),h=p}else if(!this.isCollapsed()&&t!==""){let p=m.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||H(p)&&(!p.canInsertTextBefore()||!p.canInsertTextAfter()))return this.insertText(""),JN(this.anchor,this.focus,null),void this.insertText(t)}if(d===1){if($s(h)){let x=Ie(t);return x.select(),void h.replace(x)}let p=h.getFormat(),b=h.getStyle();if(l!==c||p===r&&b===s){if(Dy(h)){let x=Ie(t);return x.setFormat(r),x.setStyle(s),x.select(),void h.replace(x)}}else{if(h.getTextContent()!==""){let x=Ie(t);if(x.setFormat(r),x.setStyle(s),x.select(),l===0)h.insertBefore(x,!1);else{let[y]=h.splitText(l);y.insertAfter(x,!1)}return void(x.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(r),h.setStyle(s)}let _=c-l;h=h.spliceText(l,_,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=p,this.style=b))}else{let p=new Set([...h.getParentKeys(),...m.getParentKeys()]),b=H(h)?h:h.getParentOrThrow(),_=H(m)?m:m.getParentOrThrow(),x=m;if(!b.is(_)&&_.isInline())do x=_,_=_.getParentOrThrow();while(_.isInline());if(a.type==="text"&&(c!==0||m.getTextContent()==="")||a.type==="element"&&m.getIndexWithinParent()<c)if(rt(m)&&!$s(m)&&c!==m.getTextContentSize()){if(m.isSegmented()){let A=Ie(m.getTextContent());m.replace(A),m=A}ze(a.getNode())||a.type!=="text"||(m=m.spliceText(0,c,"")),p.add(m.__key)}else{let A=m.getParentOrThrow();A.canBeEmpty()||A.getChildrenSize()!==1?m.remove():A.remove()}else p.add(m.__key);let y=_.getChildren(),v=new Set(u),S=b.is(_),C=b.isInline()&&h.getNextSibling()===null?b:h;for(let A=y.length-1;A>=0;A--){let E=y[A];if(E.is(h)||H(E)&&E.isParentOf(h))break;E.isAttached()&&(!v.has(E)||E.is(x)?S||C.insertAfter(E,!1):E.remove())}if(!S){let A=_,E=null;for(;A!==null;){let $=A.getChildren(),L=$.length;(L===0||$[L-1].is(E))&&(p.delete(A.__key),E=A),A=A.getParent()}}if($s(h))if(l===f)h.select();else{let A=Ie(t);A.select(),h.replace(A)}else h=h.spliceText(l,f-l,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let A=1;A<d;A++){let E=u[A],$=E.__key;p.has($)||E.remove()}}}removeText(){let t=Dt()===this;Yu(this,Rk(Cy(this))),t&&Dt()!==this&&Bn(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void Fe(null);let i=this.getNodes(),r=[];for(let y of i)rt(y)&&r.push(y);let s=y=>{i.forEach(v=>{if(H(v)){let S=v.getFormatFlags(t,y);v.setTextFormat(S)}})},o=r.length;if(o===0)return this.toggleFormat(t),Fe(null),void s(e);let a=this.anchor,l=this.focus,c=this.isBackward(),u=c?l:a,d=c?a:l,h=0,f=r[0],g=u.type==="element"?0:u.offset;if(u.type==="text"&&g===f.getTextContentSize()&&(h=1,f=r[1],g=0),f==null)return;let m=f.getFormatFlags(t,e);s(m);let p=o-1,b=r[p],_=d.type==="text"?d.offset:b.getTextContentSize();if(f.is(b)){if(g===_)return;if(Jr(f)||g===0&&_===f.getTextContentSize())f.setFormat(m);else{let y=f.splitText(g,_),v=g===0?y[0]:y[1];v.setFormat(m),u.type==="text"&&u.set(v.__key,0,"text"),d.type==="text"&&d.set(v.__key,_-g,"text")}return void(this.format=m)}g===0||Jr(f)||([,f]=f.splitText(g),g=0),f.setFormat(m);let x=b.getFormatFlags(t,m);_>0&&(_===b.getTextContentSize()||Jr(b)||([b]=b.splitText(_)),b.setFormat(x));for(let y=h+1;y<p;y++){let v=r[y],S=v.getFormatFlags(t,x);v.setFormat(S)}u.type==="text"&&u.set(f.__key,g,"text"),d.type==="text"&&d.set(b.__key,_,"text"),this.format=m|x}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();let g=Dt();return dt(g)||W(134),g.insertNodes(t)}let e=(this.isBackward()?this.focus:this.anchor).getNode(),i=Gu(e,Qr),r=t[t.length-1];if(H(i)&&"__language"in i){if("__language"in t[0])this.insertText(t[0].getTextContent());else{let g=jx(this);i.splice(g,0,t),r.selectEnd()}return}if(!t.some(g=>(H(g)||Zt(g))&&!g.isInline())){H(i)||W(211,e.constructor.name,e.getType());let g=jx(this);return i.splice(g,0,t),void r.selectEnd()}let s=function(g){let m=ts(),p=null;for(let b=0;b<g.length;b++){let _=g[b],x=Qo(_);if(x||Zt(_)&&_.isInline()||H(_)&&_.isInline()||rt(_)||_.isParentRequired()){if(p===null&&(p=_.createParentElementNode(),m.append(p),x))continue;p!==null&&p.append(_)}else m.append(_),p=null}return m}(t),o=s.getLastDescendant(),a=s.getChildren(),l=!H(i)||!i.isEmpty()?this.insertParagraph():null,c=a[a.length-1],u=a[0];var d;H(d=u)&&Qr(d)&&!d.isEmpty()&&H(i)&&(!i.isEmpty()||i.canMergeWhenEmpty())&&(H(i)||W(211,e.constructor.name,e.getType()),i.append(...u.getChildren()),u=a[1]),u&&(i===null&&W(212,e.constructor.name,e.getType()),function(g,m){let p=m.getParentOrThrow().getLastChild(),b=m,_=[m];for(;b!==p;)b.getNextSibling()||W(140),b=b.getNextSibling(),_.push(b);let x=g;for(let y of _)x=x.insertAfter(y)}(i,u));let h=Gu(o,Qr);l&&H(h)&&(l.canMergeWhenEmpty()||Qr(c))&&(h.append(...l.getChildren()),l.remove()),H(i)&&i.isEmpty()&&i.remove(),o.selectEnd();let f=H(i)?i.getLastChild():null;Qo(f)&&h!==i&&f.remove()}insertParagraph(){if(this.anchor.key==="root"){let o=ts();return Zn().splice(this.anchor.offset,0,[o]),o.select(),o}let t=jx(this),e=Gu(this.anchor.getNode(),Qr);H(e)||W(213);let i=e.getChildAtIndex(t),r=i?[i,...i.getNextSiblings()]:[],s=e.insertNewAfter(this,!1);return s?(s.append(...r),s.selectStart(),s):null}insertLineBreak(t){let e=Dl();if(this.insertNodes([e]),t){let i=e.getParentOrThrow(),r=e.getIndexWithinParent();i.select(r,r)}}extract(){let t=[...this.getNodes()],e=t.length,i=t[0],r=t[e-1],[s,o]=py(this),a=this.isBackward(),[l,c]=a?[this.focus,this.anchor]:[this.anchor,this.focus],[u,d]=a?[o,s]:[s,o];if(e===0)return[];if(e===1){if(rt(i)&&!this.isCollapsed()){let h=i.splitText(u,d),f=u===0?h[0]:h[1];return f?(l.set(f.getKey(),0,"text"),c.set(f.getKey(),f.getTextContentSize(),"text"),[f]):[]}return[i]}if(rt(i)&&(u===i.getTextContentSize()?t.shift():u!==0&&([,i]=i.splitText(u),t[0]=i,l.set(i.getKey(),0,"text"))),rt(r)){let h=r.getTextContent().length;d===0?t.pop():d!==h&&([r]=r.splitText(d),t[t.length-1]=r,c.set(r.getKey(),r.getTextContentSize(),"text"))}return t}modify(t,e,i){if(Pw(this,t,e,i))return;let r=t==="move",s=ce(),o=ar(mi(s));if(!o)return;let a=s._blockCursorElement,l=s._rootElement,c=this.focus.getNode();if(l===null||a===null||!H(c)||c.isInline()||c.canBeEmpty()||_y(a,s,l),this.dirty){let u=oa(s,this.anchor.key),d=oa(s,this.focus.key);this.anchor.type==="text"&&(u=sa(u)),this.focus.type==="text"&&(d=sa(d)),u&&d&&tk(o,u,this.anchor.offset,d,this.focus.offset)}if(function(u,d,h,f){u.modify(d,h,f)}(o,t,e?"backward":"forward",i),o.rangeCount>0){let u=o.getRangeAt(0),d=this.anchor.getNode(),h=ze(d)?d:Sk(d);if(this.applyDOMRange(u),this.dirty=!0,!r){let f=this.getNodes(),g=[],m=!1;for(let p=0;p<f.length;p++){let b=f[p];yg(b,h)?g.push(b):m=!0}if(m&&g.length>0)if(e){let p=g[0];H(p)?p.selectStart():p.getParentOrThrow().selectStart()}else{let p=g[g.length-1];H(p)?p.selectEnd():p.getParentOrThrow().selectEnd()}o.anchorNode===u.startContainer&&o.anchorOffset===u.startOffset||function(p){let b=p.focus,_=p.anchor,x=_.key,y=_.offset,v=_.type;_.set(b.key,b.offset,b.type,!0),b.set(x,y,v,!0)}(this)}}i==="lineboundary"&&Pw(this,t,e,i,"decorators")}forwardDeletion(t,e,i){if(!i&&(t.type==="element"&&H(e)&&t.offset===e.getChildrenSize()||t.type==="text"&&t.offset===e.getTextContentSize())){let r=e.getParent(),s=e.getNextSibling()||(r===null?null:r.getNextSibling());if(H(s)&&s.isShadowRoot())return!0}return!1}deleteCharacter(t){let e=this.isCollapsed();if(this.isCollapsed()){let i=this.anchor,r=i.getNode();if(this.forwardDeletion(i,r,t))return;let s=t0(js(i,t?"previous":"next"));if(s.getTextSlices().every(a=>a===null||a.distance===0)){let a={type:"initial"};for(let l of s.iterNodeCarets("shadowRoot"))if(Ri(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(a.type==="merge-block")break;if(H(s.anchor.origin)&&s.anchor.origin.isEmpty()){let c=Oi(l);Yu(this,Ks(c,c)),s.anchor.origin.remove()}return}a.type!=="merge-next-block"&&a.type!=="merge-block"||(a={block:a.block,caret:l,type:"merge-block"})}}else{if(a.type==="merge-block")break;if(aa(l)){if(H(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(s.anchor.origin))break}else a={block:l.origin,type:"merge-next-block"};continue}if(Zt(l.origin)){if(!l.origin.isIsolated())if(a.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&H(s.anchor.origin)&&s.anchor.origin.isEmpty()){s.anchor.origin.remove();let c=Iy();c.add(l.origin.getKey()),Bn(c)}else l.origin.remove();return}break}}if(a.type==="merge-block"){let{caret:l,block:c}=a;return Yu(this,Ks(!l.origin.isEmpty()&&c.isEmpty()?jl(He(c,l.direction)):s.anchor,l)),this.removeText()}}let o=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&i.offset===0&&Ow(this,i.getNode()))return}else{let a=o.type==="text"?o.getNode():null;if(r=i.type==="text"?i.getNode():null,a!==null&&a.isSegmented()){let l=o.offset,c=a.getTextContentSize();if(a.is(r)||t&&l!==c||!t&&l!==0)return void Mw(a,t,l)}else if(r!==null&&r.isSegmented()){let l=i.offset,c=r.getTextContentSize();if(r.is(a)||t&&l!==0||!t&&l!==c)return void Mw(r,t,l)}(function(l,c){let u=l.anchor,d=l.focus,h=u.getNode(),f=d.getNode();if(h===f&&u.type==="text"&&d.type==="text"){let g=u.offset,m=d.offset,p=g<m,b=p?g:m,_=p?m:g,x=_-1;b!==x&&function(y){return!(gk(y)||j4(y))}(h.getTextContent().slice(b,_))&&(c?d.set(d.key,x,d.type):u.set(u.key,x,u.type))}})(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){let i=this.anchor.getNode();i.isEmpty()&&ze(i.getParent())&&i.getPreviousSibling()===null&&Ow(this,i)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){let e=this.anchor,i=e.getNode();if(this.forwardDeletion(e,i,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}};function Eg(n){return n instanceof gg}function kw(n){let t=n.offset;if(n.type==="text")return t;let e=n.getNode();return t===e.getChildrenSize()?e.getTextContent().length:0}function py(n){let t=n.getStartEndPoints();if(t===null)return[0,0];let[e,i]=t;return e.type==="element"&&i.type==="element"&&e.key===i.key&&e.offset===i.offset?[0,0]:[kw(e),kw(i)]}function Ow(n,t){for(let e=t;e;e=e.getParent()){if(H(e)){if(e.collapseAtStart(n))return!0;if(Ii(e))break}if(e.getPreviousSibling())break}return!1}var j4=(()=>{try{let n=new RegExp("\\p{Emoji}","u"),t=n.test.bind(n);if(t("\u2764\uFE0F")&&t("#\uFE0F\u20E3")&&t("\u{1F44D}"))return t}catch{}return()=>!1})();function Mw(n,t,e){let i=n,r=i.getTextContent().split(/(?=\s)/g),s=r.length,o=0,a=0;for(let c=0;c<s;c++){let u=c===s-1;if(a=o,o+=r[c].length,t&&o===e||o>e||u){r.splice(c,1),u&&(a=void 0);break}}let l=r.join("").trim();l===""?i.remove():(i.setTextContent(l),i.select(a,a))}function Rw(n,t,e,i){let r,s=t;if(Tn(n)){let o=!1,a=n.childNodes,l=a.length,c=i._blockCursorElement;s===l&&(o=!0,s=l-1);let u=a[s],d=!1;if(u===c)u=a[s+1],d=!0;else if(c!==null){let h=c.parentNode;n===h&&t>Array.prototype.indexOf.call(h.children,c)&&s--}if(r=Nl(u),rt(r))s=Li(r,o?"next":"previous");else{let h=Nl(n);if(h===null)return null;if(H(h)){let f=i.getElementByKey(h.getKey());f===null&&W(214),[h,s]=h.getDOMSlot(f).resolveChildIndex(h,f,n,t),H(h)||W(215),o&&s>=h.getChildrenSize()&&(s=Math.max(0,h.getChildrenSize()-1));let m=h.getChildAtIndex(s);if(H(m)&&function(p,b,_){let x=p.getParent();return _===null||x===null||!x.canBeEmpty()||x!==_.getNode()}(m,0,e)){let p=o?m.getLastDescendant():m.getFirstDescendant();p===null?h=m:(m=p,h=H(m)?m:m.getParentOrThrow()),s=0}rt(m)?(r=m,h=null,s=Li(m,o?"next":"previous")):m!==h&&o&&!d&&(H(h)||W(216),s=Math.min(h.getChildrenSize(),s+1))}else{let f=h.getIndexWithinParent();s=t===0&&Zt(h)&&Nl(n)===h?f:f+1,h=h.getParentOrThrow()}if(H(h))return Di(h.__key,s,"element")}}else r=Nl(n);return rt(r)?Di(r.__key,Li(r,s,"clamp"),"text"):null}function Lw(n,t,e){let i=n.offset,r=n.getNode();if(i===0){let s=r.getPreviousSibling(),o=r.getParent();if(t){if((e||!t)&&s===null&&H(o)&&o.isInline()){let a=o.getPreviousSibling();rt(a)&&n.set(a.__key,a.getTextContent().length,"text")}}else H(s)&&!e&&s.isInline()?n.set(s.__key,s.getChildrenSize(),"element"):rt(s)&&n.set(s.__key,s.getTextContent().length,"text")}else if(i===r.getTextContent().length){let s=r.getNextSibling(),o=r.getParent();if(t&&H(s)&&s.isInline())n.set(s.__key,0,"element");else if((e||t)&&s===null&&H(o)&&o.isInline()&&!o.canInsertTextAfter()){let a=o.getNextSibling();rt(a)&&n.set(a.__key,0,"text")}}}function JN(n,t,e){if(n.type==="text"&&t.type==="text"){let i=n.isBefore(t),r=n.is(t);Lw(n,i,r),Lw(t,!i,r),r&&t.set(n.key,n.offset,n.type);let s=ce();if(s.isComposing()&&s._compositionKey!==n.key&&dt(e)){let o=e.anchor,a=e.focus;n.set(o.key,o.offset,o.type,!0),t.set(a.key,a.offset,a.type,!0)}}}function XN(n,t,e,i,r,s){if(n===null||e===null||!od(r,n,e))return null;let o=Rw(n,t,dt(s)?s.anchor:null,r);if(o===null)return null;let a=Rw(e,i,dt(s)?s.focus:null,r);if(a===null)return null;if(o.type==="element"&&a.type==="element"){let l=Nl(n),c=Nl(e);if(Zt(l)&&Zt(c))return null}return JN(o,a,s),[o,a]}function V4(n){return H(n)&&!n.isInline()}function ZN(n,t,e,i,r,s){let o=is(),a=new ra(Di(n,t,r),Di(e,i,s),0,"");return a.dirty=!0,o._selection=a,a}function QN(){let n=Di("root",0,"element"),t=Di("root",0,"element");return new ra(n,t,0,"")}function Iy(){return new gg(new Set)}function G4(n,t){return Tg(null,n,t,null)}function Tg(n,t,e,i){let r=e._window;if(r===null)return null;let s=i||r.event,o=s?s.type:void 0,a=o==="selectionchange",l=!Jx&&(a||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&s&&s.detail===3||o==="drop"||o===void 0),c,u,d,h;if(dt(n)&&!l)return n.clone();if(t===null)return null;if(c=t.anchorNode,u=t.focusNode,d=t.anchorOffset,h=t.focusOffset,(a||o===void 0)&&dt(n)&&!od(e,c,u))return n.clone();let f=XN(c,d,u,h,e,n);if(f===null)return null;let[g,m]=f;return new ra(g,m,dt(n)?n.format:0,dt(n)?n.style:"")}function Dt(){return is()._selection}function la(){return ce()._editorState._selection}function pg(n,t,e,i=1){let r=n.anchor,s=n.focus,o=r.getNode(),a=s.getNode();if(!t.is(o)&&!t.is(a))return;let l=t.__key;if(n.isCollapsed()){let c=r.offset;if(e<=c&&i>0||e<c&&i<0){let u=Math.max(0,c+i);r.set(l,u,"element"),s.set(l,u,"element"),Dw(n)}}else{let c=n.isBackward(),u=c?s:r,d=u.getNode(),h=c?r:s,f=h.getNode();if(t.is(d)){let g=u.offset;(e<=g&&i>0||e<g&&i<0)&&u.set(l,Math.max(0,g+i),"element")}if(t.is(f)){let g=h.offset;(e<=g&&i>0||e<g&&i<0)&&h.set(l,Math.max(0,g+i),"element")}}Dw(n)}function Dw(n){let t=n.anchor,e=t.offset,i=n.focus,r=i.offset,s=t.getNode(),o=i.getNode();if(n.isCollapsed()){if(!H(s))return;let a=s.getChildrenSize(),l=e>=a,c=l?s.getChildAtIndex(a-1):s.getChildAtIndex(e);if(rt(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text"),i.set(c.__key,u,"text")}return}if(H(s)){let a=s.getChildrenSize(),l=e>=a,c=l?s.getChildAtIndex(a-1):s.getChildAtIndex(e);if(rt(c)){let u=0;l&&(u=c.getTextContentSize()),t.set(c.__key,u,"text")}}if(H(o)){let a=o.getChildrenSize(),l=r>=a,c=l?o.getChildAtIndex(a-1):o.getChildAtIndex(r);if(rt(c)){let u=0;l&&(u=c.getTextContentSize()),i.set(c.__key,u,"text")}}}function mg(n,t,e,i,r){let s=null,o=0,a=null;i!==null?(s=i.__key,rt(i)?(o=i.getTextContentSize(),a="text"):H(i)&&(o=i.getChildrenSize(),a="element")):r!==null&&(s=r.__key,rt(r)?a="text":H(r)&&(a="element")),s!==null&&a!==null?n.set(s,o,a):(o=t.getIndexWithinParent(),o===-1&&(o=e.getChildrenSize()),n.set(e.__key,o,"element"))}function Iw(n,t,e,i,r){n.type==="text"?n.set(e,n.offset+(t?0:r),"text"):n.offset>i.getIndexWithinParent()&&n.set(n.key,n.offset-1,"element")}function tk(n,t,e,i,r){try{n.setBaseAndExtent(t,e,i,r)}catch{}}function q4(n,t,e,i,r,s,o){let a=i.anchorNode,l=i.focusNode,c=i.anchorOffset,u=i.focusOffset,d=document.activeElement;if(r.has(KN)&&d!==s||d!==null&&Hy(d))return;if(!dt(t))return void(n!==null&&od(e,a,l)&&i.removeAllRanges());let h=t.anchor,f=t.focus,g=h.key,m=f.key,p=oa(e,g),b=oa(e,m),_=h.offset,x=f.offset,y=t.format,v=t.style,S=t.isCollapsed(),C=p,A=b,E=!1;if(h.type==="text"){C=sa(p);let k=h.getNode();E=k.getFormat()!==y||k.getStyle()!==v}else dt(n)&&n.anchor.type==="text"&&(E=!0);var $,L,w,N,R;if(f.type==="text"&&(A=sa(b)),C!==null&&A!==null&&(S&&(n===null||E||dt(n)&&(n.format!==y||n.style!==v))&&($=y,L=v,w=_,N=g,R=performance.now(),FN=[$,L,w,N,R]),c!==_||u!==x||a!==C||l!==A||i.type==="Range"&&S||(d!==null&&s.contains(d)||r.has(GN)||s.focus({preventScroll:!0}),h.type==="element"))){if(tk(i,C,_,A,x),!r.has(jN)&&t.isCollapsed()&&s!==null&&s===document.activeElement){let k=dt(t)&&t.anchor.type==="element"?C.childNodes[_]||null:i.rangeCount>0?i.getRangeAt(0):null;if(k!==null){let D;if(k instanceof Text){let F=document.createRange();F.selectNode(k),D=F.getBoundingClientRect()}else D=k.getBoundingClientRect();(function(F,z,U){let X=qy(U),G=Yy(X);if(X===null||G===null)return;let{top:Q,bottom:st}=z,ut=0,at=0,et=U;for(;et!==null;){let bt=et===X.body;if(bt)ut=0,at=mi(F).innerHeight;else{let vt=et.getBoundingClientRect();ut=vt.top,at=vt.bottom}let q=0;if(Q<ut?q=-(ut-Q):st>at&&(q=st-at),q!==0)if(bt)G.scrollBy(0,q);else{let vt=et.scrollTop;et.scrollTop+=q;let kt=et.scrollTop-vt;Q-=kt,st-=kt}if(bt)break;et=ld(et)}})(e,D,s)}}dy=!0}}function Y4(n){let t=Dt()||la();t===null&&(t=Zn().selectEnd()),t.insertNodes(n)}function J4(){let n=Dt();return n===null?"":n.getTextContent()}function jx(n){let t=n;n.isCollapsed()||t.removeText();let e=Dt();dt(e)&&(t=e),dt(t)||W(161);let i=t.anchor,r=i.getNode(),s=i.offset;for(;!Qr(r);){let o=r;if([r,s]=X4(r,s),o.is(r))break}return s}function X4(n,t){let e=n.getParent();if(!e){let r=ts();return Zn().append(r),r.select(),[Zn(),0]}if(rt(n)){let r=n.splitText(t);if(r.length===0)return[e,n.getIndexWithinParent()];let s=t===0?0:1;return[e,r[0].getIndexWithinParent()+s]}if(!H(n)||t===0)return[e,n.getIndexWithinParent()];let i=n.getChildAtIndex(t);if(i){let r=new ra(Di(n.__key,t,"element"),Di(n.__key,t,"element"),0,""),s=n.insertNewAfter(r);s&&s.append(i,...i.getNextSiblings())}return[e,n.getIndexWithinParent()+1]}function Pw(n,t,e,i,r="decorators-and-blocks"){if(t==="move"&&i==="character"&&!n.isCollapsed()){let[u,d]=e===n.isBackward()?[n.focus,n.anchor]:[n.anchor,n.focus];return d.set(u.key,u.offset,u.type),!0}let s=js(n.focus,e?"previous":"next"),o=i==="lineboundary",a=t==="move",l=s,c=r==="decorators-and-blocks";if(!Lk(l)){for(let u of l){c=!1;let{origin:d}=u;if(!Zt(d)||d.isIsolated()||(l=u,!o||!d.isInline()))break}if(c)for(let u of t0(s).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Ri(u))u.origin.isInline()||(l=u);else{if(H(u.origin))continue;Zt(u.origin)&&!u.origin.isInline()&&(l=u)}break}}if(l===s)return!1;if(a&&!o&&Zt(l.origin)&&l.origin.isKeyboardSelectable()){let u=Iy();return u.add(l.origin.getKey()),Bn(u),!0}return l=Oi(l),a&&Wl(n.anchor,l),Wl(n.focus,l),c||!o}var $e=null,Be=null,$n=!1,Vx=!1,ig=0,Fw={characterData:!0,childList:!0,subtree:!0};function Ul(){return $n||$e!==null&&$e._readOnly}function Pe(){$n&&W(13)}function ek(){ig>99&&W(14)}function is(){return $e===null&&W(195,nk()),$e}function ce(){return Be===null&&W(196,nk()),Be}function nk(){let n=0,t=new Set,e=Ws.version;if(typeof window<"u")for(let r of document.querySelectorAll("[contenteditable]")){let s=ad(r);if(Ng(s))n++;else if(s){let o=String(s.constructor.version||"<0.17.1");o===e&&(o+=" (separately built, likely a bundler configuration issue)"),t.add(o)}}let i=` Detected on the page: ${n} compatible editor(s) with version ${e}`;return t.size&&(i+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),i}function Z4(){return Be}function $w(n,t,e){let i=t.__type,r=By(n,i),s=e.get(i);s===void 0&&(s=Array.from(r.transforms),e.set(i,s));let o=s.length;for(let a=0;a<o&&(s[a](t),t.isAttached());a++);}function Bw(n,t){return n!==void 0&&n.__key!==t&&n.isAttached()}function ik(n,t){if(!t)return;let e=n._updateTags,i=t;Array.isArray(t)||(i=[t]);for(let r of i)e.add(r)}function Q4(n){return Py(n,ce()._nodes)}function Py(n,t){let e=n.type,i=t.get(e);i===void 0&&W(17,e);let r=i.klass;n.type!==r.getType()&&W(18,r.name);let s=r.importJSON(n),o=n.children;if(H(s)&&Array.isArray(o))for(let a=0;a<o.length;a++){let l=Py(o[a],t);s.append(l)}return s}function zw(n,t,e){let i=$e,r=$n,s=Be;$e=t,$n=!0,Be=n;try{return e()}finally{$e=i,$n=r,Be=s}}function Zr(n,t){let e=n._pendingEditorState,i=n._rootElement,r=n._headless||i===null;if(e===null)return;let s=n._editorState,o=s._selection,a=e._selection,l=n._dirtyType!==0,c=$e,u=$n,d=Be,h=n._updating,f=n._observer,g=null;if(n._pendingEditorState=null,n._editorState=e,!r&&l&&f!==null){Be=n,$e=e,$n=!1,n._updating=!0;try{let S=n._dirtyType,C=n._dirtyElements,A=n._dirtyLeaves;f.disconnect(),g=C4(s,e,n,S,C,A)}catch(S){if(S instanceof Error&&n._onError(S),Vx)throw S;return ak(n,null,i,e),lN(n),n._dirtyType=2,Vx=!0,Zr(n,s),void(Vx=!1)}finally{f.observe(i,Fw),n._updating=h,$e=c,$n=u,Be=d}}e._readOnly||(e._readOnly=!0);let m=n._dirtyLeaves,p=n._dirtyElements,b=n._normalizedNodes,_=n._updateTags,x=n._deferred;l&&(n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(S,C){let A=S._decorators,E=S._pendingDecorators||A,$=C._nodeMap,L;for(L in E)$.has(L)||(E===A&&(E=hk(S)),delete E[L])}(n,e);let y=r?null:ar(mi(n));if(n._editable&&y!==null&&(l||a===null||a.dirty||!a.is(o))&&i!==null&&!_.has(VN)){Be=n,$e=e;try{if(f!==null&&f.disconnect(),l||a===null||a.dirty){let S=n._blockCursorElement;S!==null&&_y(S,n,i),q4(o,a,n,y,_,i)}(function(S,C,A){let E=S._blockCursorElement;if(dt(A)&&A.isCollapsed()&&A.anchor.type==="element"&&C.contains(document.activeElement)){let $=A.anchor,L=$.getNode(),w=$.offset,N=!1,R=null;if(w===L.getChildrenSize())qx(L.getChildAtIndex(w-1))&&(N=!0);else{let k=L.getChildAtIndex(w);if(k!==null&&qx(k)){let D=k.getPreviousSibling();(D===null||qx(D))&&(N=!0,R=S.getElementByKey(k.__key))}}if(N){let k=S.getElementByKey(L.__key);return E===null&&(S._blockCursorElement=E=function(D){let F=D.theme,z=document.createElement("div");z.contentEditable="false",z.setAttribute("data-lexical-cursor","true");let U=F.blockCursor;if(U!==void 0){if(typeof U=="string"){let X=nN(U);U=F.blockCursor=X}U!==void 0&&z.classList.add(...U)}return z}(S._config)),C.style.caretColor="transparent",void(R===null?k.appendChild(E):k.insertBefore(E,R))}}E!==null&&_y(E,S,C)})(n,i,a)}finally{f!==null&&f.observe(i,Fw),Be=d,$e=c}}g!==null&&function(S,C,A,E,$){let L=Array.from(S._listeners.mutation),w=L.length;for(let N=0;N<w;N++){let[R,k]=L[N];for(let D of k){let F=C.get(D);F!==void 0&&R(F,{dirtyLeaves:E,prevEditorState:$,updateTags:A})}}}(n,g,_,m,s),dt(a)||a===null||o!==null&&o.is(a)||n.dispatchCommand(wy,void 0);let v=n._pendingDecorators;v!==null&&(n._decorators=v,n._pendingDecorators=null,Vu("decorator",n,!0,v)),function(S,C,A){let E=jw(C),$=jw(A);E!==$&&Vu("textcontent",S,!0,$)}(n,t||s,e),Vu("update",n,!0,{dirtyElements:p,dirtyLeaves:m,editorState:e,mutatedNodes:g,normalizedNodes:b,prevEditorState:t||s,tags:_}),function(S,C){if(S._deferred=[],C.length!==0){let A=S._updating;S._updating=!0;try{for(let E=0;E<C.length;E++)C[E]()}finally{S._updating=A}}}(n,x),function(S){let C=S._updates;if(C.length!==0){let A=C.shift();if(A){let[E,$]=A;wg(S,E,$)}}}(n)}function Vu(n,t,e,...i){let r=t._updating;t._updating=e;try{let s=Array.from(t._listeners[n]);for(let o=0;o<s.length;o++)s[o].apply(null,i)}finally{t._updating=r}}function Hw(n,t){let e=n._updates,i=t||!1;for(;e.length!==0;){let r=e.shift();if(r){let[s,o]=r,a=n._pendingEditorState,l;o!==void 0&&(l=o.onUpdate,o.skipTransforms&&(i=!0),o.discrete&&(a===null&&W(191),a._flushSync=!0),l&&n._deferred.push(l),ik(n,o.tag)),a==null?wg(n,s,o):s()}}return i}function wg(n,t,e){let i=n._updateTags,r,s=!1,o=!1;e!==void 0&&(r=e.onUpdate,ik(n,e.tag),s=e.skipTransforms||!1,o=e.discrete||!1),r&&n._deferred.push(r);let a=n._editorState,l=n._pendingEditorState,c=!1;(l===null||l._readOnly)&&(l=n._pendingEditorState=rk(l||a),c=!0),l._flushSync=o;let u=$e,d=$n,h=Be,f=n._updating;$e=l,$n=!1,n._updating=!0,Be=n;let g=n._headless||n.getRootElement()===null;$y(null);try{c&&(g?a._selection!==null&&(l._selection=a._selection.clone()):l._selection=function(_,x){let y=_.getEditorState()._selection,v=ar(mi(_));return dt(y)||y==null?Tg(y,v,_,x):y.clone()}(n,e&&e.event||null));let p=n._compositionKey;t(),s=Hw(n,s),function(_,x){let y=x.getEditorState()._selection,v=_._selection;if(dt(v)){let S=v.anchor,C=v.focus,A;if(S.type==="text"&&(A=S.getNode(),A.selectionTransform(y,v)),C.type==="text"){let E=C.getNode();A!==E&&E.selectionTransform(y,v)}}}(l,n),n._dirtyType!==0&&(s?function(_,x){let y=x._dirtyLeaves,v=_._nodeMap;for(let S of y){let C=v.get(S);rt(C)&&C.isAttached()&&C.isSimpleText()&&!C.isUnmergeable()&&bw(C)}}(l,n):function(_,x){let y=x._dirtyLeaves,v=x._dirtyElements,S=_._nodeMap,C=Fs(),A=new Map,E=y,$=E.size,L=v,w=L.size;for(;$>0||w>0;){if($>0){x._dirtyLeaves=new Set;for(let N of E){let R=S.get(N);rt(R)&&R.isAttached()&&R.isSimpleText()&&!R.isUnmergeable()&&bw(R),R!==void 0&&Bw(R,C)&&$w(x,R,A),y.add(N)}if(E=x._dirtyLeaves,$=E.size,$>0){ig++;continue}}x._dirtyLeaves=new Set,x._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(let N of L){let R=N[0],k=N[1];if(v.set(R,k),!k)continue;let D=S.get(R);D!==void 0&&Bw(D,C)&&$w(x,D,A)}E=x._dirtyLeaves,$=E.size,L=x._dirtyElements,w=L.size,ig++}x._dirtyLeaves=y,x._dirtyElements=v}(l,n),Hw(n),function(_,x,y,v){let S=_._nodeMap,C=x._nodeMap,A=[];for(let[E]of v){let $=C.get(E);$!==void 0&&($.isAttached()||(H($)&&sN($,E,S,C,A,v),S.has(E)||v.delete(E),A.push(E)))}for(let E of A)C.delete(E);for(let E of y){let $=C.get(E);$===void 0||$.isAttached()||(S.has(E)||y.delete(E),C.delete(E))}}(a,l,n._dirtyLeaves,n._dirtyElements)),p!==n._compositionKey&&(l._flushSync=!0);let b=l._selection;if(dt(b)){let _=l._nodeMap,x=b.anchor.key,y=b.focus.key;_.get(x)!==void 0&&_.get(y)!==void 0||W(19)}else Eg(b)&&b._nodes.size===0&&(l._selection=null)}catch(p){return p instanceof Error&&n._onError(p),n._pendingEditorState=a,n._dirtyType=2,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void Zr(n)}finally{$e=u,$n=d,Be=h,n._updating=f,ig=0}n._dirtyType!==0||n._deferred.length>0||function(p,b){let _=b.getEditorState()._selection,x=p._selection;if(x!==null){if(x.dirty||!x.is(_))return!0}else if(_!==null)return!0;return!1}(l,n)?l._flushSync?(l._flushSync=!1,Zr(n)):c&&c6(()=>{Zr(n)}):(l._flushSync=!1,c&&(i.clear(),n._deferred=[],n._pendingEditorState=null))}function Xn(n,t,e){Be===n&&e===void 0?t():wg(n,t,e)}var my=class n{element;before;after;constructor(t,e,i){this.element=t,this.before=e||null,this.after=i||null}withBefore(t){return new n(this.element,t,this.after)}withAfter(t){return new n(this.element,this.before,t)}withElement(t){return this.element===t?this:new n(t,this.before,this.after)}insertChild(t){let e=this.before||this.getManagedLineBreak();return e!==null&&e.parentElement!==this.element&&W(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&W(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&W(224),this.element.replaceChild(t,e),this}getFirstChild(){let t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{let e=t==="decorator"&&(Xu||Rl||Ju);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){let t=this.getManagedLineBreak();if(t){let e=this.element,i=t.nodeName==="IMG"?t.nextSibling:null;i&&e.removeChild(i),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){let e=this.getManagedLineBreak();if(e){if(t===(e.nodeName==="IMG"))return;this.removeManagedLineBreak()}let i=this.element,r=this.before,s=document.createElement("br");if(i.insertBefore(s,r),t){let o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",i.insertBefore(o,s),i.__lexicalLineBreak=o}else i.__lexicalLineBreak=s}getFirstChildOffset(){let t=0;for(let e=this.after;e!==null;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,i,r){if(i===this.element){let l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,r))]}let s=Ww(e,i);s.push(r);let o=Ww(e,this.element),a=t.getIndexWithinParent();for(let l=0;l<o.length;l++){let c=s[l],u=o[l];if(c===void 0||c<u)break;if(c>u){a+=1;break}}return[t.getParentOrThrow(),a]}};function Ww(n,t){let e=[],i=t;for(;i!==n&&i!==null;i=i.parentNode){let r=0;for(let s=i.previousSibling;s!==null;s=s.previousSibling)r++;e.push(r)}return i!==n&&W(225),e.reverse()}var Hs=class extends pi{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){let t=this.getFormat();return c4[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let t=[],e=this.getFirstChild();for(;e!==null;)t.push(e),e=e.getNextSibling();return t}getChildrenKeys(){let t=[],e=this.getFirstChild();for(;e!==null;)t.push(e.__key),e=e.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){let t=ce()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){let t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return e!==null&&e.is(t)}getAllTextNodes(){let t=[],e=this.getFirstChild();for(;e!==null;){if(rt(e)&&t.push(e),H(e)){let i=e.getAllTextNodes();t.push(...i)}e=e.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;H(t);){let e=t.getFirstChild();if(e===null)break;t=e}return t}getLastDescendant(){let t=this.getLastChild();for(;H(t);){let e=t.getLastChild();if(e===null)break;t=e}return t}getDescendantByIndex(t){let e=this.getChildren(),i=e.length;if(t>=i){let s=e[i-1];return H(s)&&s.getLastDescendant()||s||null}let r=e[t];return H(r)&&r.getFirstDescendant()||r||null}getFirstChild(){let t=this.getLatest().__first;return t===null?null:Me(t)}getFirstChildOrThrow(){let t=this.getFirstChild();return t===null&&W(45,this.__key),t}getLastChild(){let t=this.getLatest().__last;return t===null?null:Me(t)}getLastChildOrThrow(){let t=this.getLastChild();return t===null&&W(96,this.__key),t}getChildAtIndex(t){let e=this.getChildrenSize(),i,r;if(t<e/2){for(i=this.getFirstChild(),r=0;i!==null&&r<=t;){if(r===t)return i;i=i.getNextSibling(),r++}return null}for(i=this.getLastChild(),r=e-1;i!==null&&r>=t;){if(r===t)return i;i=i.getPreviousSibling(),r--}return null}getTextContent(){let t="",e=this.getChildren(),i=e.length;for(let r=0;r<i;r++){let s=e[r];t+=s.getTextContent(),H(s)&&r!==i-1&&!s.isInline()&&(t+=zs)}return t}getTextContentSize(){let t=0,e=this.getChildren(),i=e.length;for(let r=0;r<i;r++){let s=e[r];t+=s.getTextContentSize(),H(s)&&r!==i-1&&!s.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){let e=cw[t];return(this.getFormat()&e)!==0}return!1}hasTextFormat(t){let e=un[t];return(this.getTextFormat()&e)!==0}getFormatFlags(t,e){return _g(this.getLatest().__textFormat,t,e)}getTextStyle(){return this.getLatest().__textStyle}select(t,e){Pe();let i=Dt(),r=t,s=e,o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&e===0){let l=this.getFirstChild();if(rt(l)||H(l))return l.select(0,0)}else if(!(t!==void 0&&t!==o||e!==void 0&&e!==o)){let l=this.getLastChild();if(rt(l)||H(l))return l.select()}}r===void 0&&(r=o),s===void 0&&(s=o);let a=this.__key;return dt(i)?(i.anchor.set(a,r,"element"),i.focus.set(a,s,"element"),i.dirty=!0,i):ZN(a,r,a,s,"element","element")}selectStart(){let t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){let t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){let t=this.getWritable();return this.getChildren().forEach(e=>e.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){let e=this.getWritable();return e.__dir=t,e}setFormat(t){return this.getWritable().__format=t!==""?cw[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){let e=this.getWritable();return e.__textFormat=t,e}setTextStyle(t){let e=this.getWritable();return e.__textStyle=t,e}setIndent(t){return this.getWritable().__indent=t,this}splice(t,e,i){fg(this)&&W(324,this.__key,this.__type);let r=this.getChildrenSize(),s=this.getWritable();t+e<=r||W(226,String(t),String(e),String(r));let o=s.__key,a=[],l=[],c=this.getChildAtIndex(t+e),u=null,d=r-e+i.length;if(t!==0)if(t===r)u=this.getLastChild();else{let f=this.getChildAtIndex(t);f!==null&&(u=f.getPreviousSibling())}if(e>0){let f=u===null?this.getFirstChild():u.getNextSibling();for(let g=0;g<e;g++){f===null&&W(100);let m=f.getNextSibling(),p=f.__key;Bs(f.getWritable()),l.push(p),f=m}}let h=u;for(let f of i){h!==null&&f.is(h)&&(u=h=h.getPreviousSibling());let g=f.getWritable();g.__parent===o&&d--,Bs(g);let m=f.__key;if(h===null)s.__first=m,g.__prev=null;else{let p=h.getWritable();p.__next=m,g.__prev=p.__key}f.__key===o&&W(76),g.__parent=o,a.push(m),h=f}if(t+e===r)h!==null&&(h.getWritable().__next=null,s.__last=h.__key);else if(c!==null){let f=c.getWritable();if(h!==null){let g=h.getWritable();f.__prev=h.__key,g.__next=c.__key}else f.__prev=null}if(s.__size=d,l.length){let f=Dt();if(dt(f)){let g=new Set(l),m=new Set(a),{anchor:p,focus:b}=f;Uw(p,g,m)&&mg(p,p.getNode(),this,u,c),Uw(b,g,m)&&mg(b,b.getNode(),this,u,c),d!==0||this.canBeEmpty()||Ii(this)||this.remove()}}return s}getDOMSlot(t){return new my(t)}exportDOM(t){let{element:e}=super.exportDOM(t);if(Tn(e)){let i=this.getIndent();i>0&&(e.style.paddingInlineStart=40*i+"px");let r=this.getDirection();r&&(e.dir=r)}return{element:e}}exportJSON(){let t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},e=this.getTextFormat(),i=this.getTextStyle();return e!==0&&(t.textFormat=e),i!==""&&(t.textStyle=i),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,e){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,e,i){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,e){let i=this.getDOMSlot(t),r=i.getFirstChild();for(let s=this.getFirstChild();s;s=s.getNextSibling()){let o=e.getElementByKey(s.getKey());o!==null&&(r==null?(i.insertChild(o),r=o):r!==o&&i.replaceChild(o,r),r=r.nextSibling)}}};function H(n){return n instanceof Hs}function Uw(n,t,e){let i=n.getNode();for(;i;){let r=i.__key;if(t.has(r)&&!e.has(r))return!0;i=i.getParent()}return!1}var id=class extends pi{decorate(t,e){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Zt(n){return n instanceof id}var Pl=class n extends Hs{__cachedText;static getType(){return"root"}static clone(){return new n}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){W(51)}getTextContent(){let t=this.__cachedText;return!Ul()&&ce()._dirtyType!==0||t===null?super.getTextContent():t}remove(){W(52)}replace(t){W(53)}insertBefore(t){W(54)}insertAfter(t){W(55)}updateDOM(t,e){return!1}splice(t,e,i){for(let r of i)H(r)||Zt(r)||W(282);return super.splice(t,e,i)}static importJSON(t){return Zn().updateFromJSON(t)}collapseAtStart(){return!0}};function ze(n){return n instanceof Pl}function rk(n){return new rd(new Map(n._nodeMap))}function Fy(){return new rd(new Map([["root",new Pl]]))}function sk(n){let t=n.exportJSON(),e=n.constructor;if(t.type!==e.getType()&&W(130,e.name),H(n)){let i=t.children;Array.isArray(i)||W(59,e.name);let r=n.getChildren();for(let s=0;s<r.length;s++){let o=sk(r[s]);i.push(o)}}return t}function t6(n){return n instanceof rd}var rd=class n{_nodeMap;_selection;_flushSync;_readOnly;constructor(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,e){return zw(e&&e.editor||null,this,t)}clone(t){let e=new n(this._nodeMap,t===void 0?this._selection:t);return e._readOnly=!0,e}toJSON(){return zw(null,this,()=>({root:sk(Zn())}))}},bg=class extends Hs{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}},Fl=class n extends Hs{static getType(){return"paragraph"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement("p"),i=Ml(t.theme,"paragraph");return i!==void 0&&e.classList.add(...i),e}updateDOM(t,e,i){return!1}static importDOM(){return{p:t=>({conversion:e6,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(Tn(e)){this.isEmpty()&&e.append(document.createElement("br"));let i=this.getFormatType();i&&(e.style.textAlign=i)}return{element:e}}static importJSON(t){return ts().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,e){let i=ts();i.setTextFormat(t.format),i.setTextStyle(t.style);let r=this.getDirection();return i.setDirection(r),i.setFormat(this.getFormatType()),i.setStyle(this.getStyle()),this.insertAfter(i,e),i}collapseAtStart(){let t=this.getChildren();if(t.length===0||rt(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}};function e6(n){let t=ts();return n.style&&(t.setFormat(n.style.textAlign),wk(n,t)),{node:t}}function ts(){return cd(new Fl)}function ok(n){return n instanceof Fl}var n6=0,i6=1,r6=2,s6=3,o6=4;function ak(n,t,e,i){let r=n._keyToDOMMap;r.clear(),n._editorState=Fy(),n._pendingEditorState=i,n._compositionKey=null,n._dirtyType=0,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;let s=n._observer;s!==null&&(s.disconnect(),n._observer=null),t!==null&&(t.textContent=""),e!==null&&(e.textContent="",r.set("root",e))}function lk(n){let t=new Set,e=new Set,i=n;for(;i;){let{ownNodeConfig:r}=ud(i),s=i.transform;if(!e.has(s)){e.add(s);let o=i.transform();o&&t.add(o)}if(r){let o=r.$transform;o&&t.add(o),i=r.extends}else{let o=Object.getPrototypeOf(i);i=o.prototype instanceof pi&&o!==pi?o:void 0}}return t}function a6(n){let t=n||{},e=Z4(),i=t.theme||{},r=n===void 0?e:t.parentEditor||null,s=t.disableEvents||!1,o=Fy(),a=t.namespace||(r!==null?r._config.namespace:pk()),l=t.editorState,c=[Pl,ia,Ll,Il,Fl,bg,...t.nodes||[]],{onError:u,html:d}=t,h=t.editable===void 0||t.editable,f;if(n===void 0&&e!==null)f=e._nodes;else{f=new Map;for(let m=0;m<c.length;m++){let p=c[m],b=null,_=null;if(typeof p!="function"){let v=p;p=v.replace,b=v.with,_=v.withKlass||null}ud(p);let x=p.getType(),y=lk(p);f.set(x,{exportDOM:d&&d.export?d.export.get(p):void 0,klass:p,replace:b,replaceWithKlass:_,sharedNodeState:cN(c[m]),transforms:y})}}let g=new Ws(o,r,f,{disableEvents:s,namespace:a,theme:i},u||console.error,function(m,p){let b=new Map,_=new Set,x=y=>{Object.keys(y).forEach(v=>{let S=b.get(v);S===void 0&&(S=[],b.set(v,S)),S.push(y[v])})};return m.forEach(y=>{let v=y.klass.importDOM;if(v==null||_.has(v))return;_.add(v);let S=v.call(y.klass);S!==null&&x(S)}),p&&x(p),b}(f,d?d.import:void 0),h,n);return l!==void 0&&(g._pendingEditorState=l,g._dirtyType=2),g}var Ws=class{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(t,e,i,r,s,o,a,l){this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=i,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=pk(),this._onError=s,this._htmlConversions=o,this._editable=a,this._headless=e!==null&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){let e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){let e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){let e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){let e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){let e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,i){i===void 0&&W(35);let r=this._commands;r.has(t)||r.set(t,[new Set,new Set,new Set,new Set,new Set]);let s=r.get(t);s===void 0&&W(36,String(t));let o=s[i];return o.add(e),()=>{o.delete(e),s.every(a=>a.size===0)&&r.delete(t)}}registerMutationListener(t,e,i){let r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,s=this._listeners.mutation,o=s.get(e);o===void 0&&(o=new Set,s.set(e,o)),o.add(r);let a=i&&i.skipInitialization;return a!==void 0&&a||this.initializeMutationListener(e,r),()=>{o.delete(r),o.size===0&&s.delete(e)}}getRegisteredNode(t){let e=this._nodes.get(t.getType());return e===void 0&&W(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){let i=this._editorState,r=yy(i).get(e.getType());if(!r)return;let s=new Map;for(let o of r.keys())s.set(o,"created");s.size>0&&t(s,{dirtyLeaves:new Set,prevEditorState:i,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,e){let i=this.getRegisteredNode(t);return i.transforms.add(e),i}registerNodeTransform(t,e){let i=this.registerNodeTransformToKlass(t,e),r=[i],s=i.replaceWithKlass;if(s!=null){let o=this.registerNodeTransformToKlass(s,e);r.push(o)}return function(o,a){let l=yy(o.getEditorState()),c=[];for(let u of a){let d=l.get(u);d&&c.push(d)}c.length!==0&&o.update(()=>{for(let u of c)for(let d of u.keys()){let h=Me(d);h&&h.markDirty()}},o._pendingEditorState===null?{tag:ng}:void 0)}(this,r.map(o=>o.klass.getType())),()=>{r.forEach(o=>o.transforms.delete(e))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return Z(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){let e=this._rootElement;if(t!==e){let i=Ml(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=t,ak(this,e,t,r),e!==null&&(this._config.disableEvents||L4(e),i!=null&&e.classList.remove(...i)),t!==null){let s=Yy(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=s,this._dirtyType=2,lN(this),this._updateTags.add(ng),Zr(this),this._config.disableEvents||function(a,l){let c=a.ownerDocument;uy.set(a,c);let u=hg.get(c)??0;u<1&&c.addEventListener("selectionchange",WN),hg.set(c,u+1),a.__lexicalEditor=l;let d=HN(a);for(let h=0;h<cy.length;h++){let[f,g]=cy[h],m=typeof g=="function"?p=>{Cw(p)||(Sw(p),(l.isEditable()||f==="click")&&g(p,l))}:p=>{if(Cw(p))return;Sw(p);let b=l.isEditable();switch(f){case"cut":return b&&Z(l,Ry,p);case"copy":return Z(l,My,p);case"paste":return b&&Z(l,Ny,p);case"dragstart":return b&&Z(l,kN,p);case"dragover":return b&&Z(l,ON,p);case"dragend":return b&&Z(l,MN,p);case"focus":return b&&Z(l,RN,p);case"blur":return b&&Z(l,LN,p);case"drop":return b&&Z(l,NN,p)}};a.addEventListener(f,m),d.push(()=>{a.removeEventListener(f,m)})}}(t,this),i!=null&&t.classList.add(...i)}else this._window=null,this._updateTags.add(ng),Zr(this);Vu("root",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&W(38);let i=t;i._readOnly&&(i=rk(t),i._selection=t._selection?t._selection.clone():null),aN(this);let r=this._pendingEditorState,s=this._updateTags,o=e!==void 0?e.tag:null;r===null||r.isEmpty()||(o!=null&&s.add(o),Zr(this)),this._pendingEditorState=i,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&s.add(o),this._updating||Zr(this)}parseEditorState(t,e){return function(i,r,s){let o=Fy(),a=$e,l=$n,c=Be,u=r._dirtyElements,d=r._dirtyLeaves,h=r._cloneNotNeeded,f=r._dirtyType;r._dirtyElements=new Map,r._dirtyLeaves=new Set,r._cloneNotNeeded=new Set,r._dirtyType=0,$e=o,$n=!1,Be=r,$y(null);try{let g=r._nodes;Py(i.root,g),s&&s(),o._readOnly=!0}catch(g){g instanceof Error&&r._onError(g)}finally{r._dirtyElements=u,r._dirtyLeaves=d,r._cloneNotNeeded=h,r._dirtyType=f,$e=a,$n=l,Be=c}return o}(typeof t=="string"?JSON.parse(t):t,this,e)}read(t){return Zr(this),this.getEditorState().read(t,{editor:this})}update(t,e){(function(i,r,s){i._updating?i._updates.push([r,s]):wg(i,r,s)})(this,t,e)}focus(t,e={}){let i=this._rootElement;i!==null&&(i.setAttribute("autocapitalize","off"),Xn(this,()=>{let r=Dt(),s=Zn();r!==null?r.dirty||Bn(r.clone()):s.getChildrenSize()!==0&&(e.defaultSelection==="rootStart"?s.selectStart():s.selectEnd()),yk("focus"),vk(()=>{i.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&i.removeAttribute("autocapitalize"))}blur(){let t=this._rootElement;t!==null&&t.blur();let e=ar(this._window);e!==null&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Vu("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}};Ws.version="0.38.2+prod.esm";var by=null;function $y(n){by=n}var ck=1;function l6(){ck=1}function By(n,t){let e=zy(n,t);return e===void 0&&W(30,t),e}function zy(n,t){return n._nodes.get(t)}var c6=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function Kw(n){return Zt(Og(n))}function Hy(n){let t=document.activeElement;if(!Tn(t))return!1;let e=t.nodeName;return Zt(Og(n))&&(e==="INPUT"||e==="TEXTAREA"||t.contentEditable==="true"&&ad(t)==null)}function od(n,t,e){let i=n.getRootElement();try{return i!==null&&i.contains(t)&&i.contains(e)&&t!==null&&!Hy(t)&&Wy(t)===n}catch{return!1}}function Ng(n){return n instanceof Ws}function Wy(n){let t=n;for(;t!=null;){let e=ad(t);if(Ng(e))return e;t=ld(t)}return null}function ad(n){return n?n.__lexicalEditor:null}function u6(n){return o4.test(n)?"rtl":a4.test(n)?"ltr":null}function $s(n){return Dy(n)||n.isToken()}function Jr(n){return $s(n)||n.isSegmented()}function lr(n){return Kl(n)&&n.nodeType===3}function uk(n){return Kl(n)&&n.nodeType===9}function sa(n){let t=n;for(;t!=null;){if(lr(t))return t;t=t.firstChild}return null}function _g(n,t,e){let i=un[t];if(e!==null&&(n&i)===(e&i))return n;let r=n^i;return t==="subscript"?r&=~un.superscript:t==="superscript"?r&=~un.subscript:t==="lowercase"?(r&=~un.uppercase,r&=~un.capitalize):t==="uppercase"?(r&=~un.lowercase,r&=~un.capitalize):t==="capitalize"&&(r&=~un.lowercase,r&=~un.uppercase),r}function d6(n){return rt(n)||Qo(n)||Zt(n)}function dk(n,t){let e=function(){let o=by;return by=null,o}();if((t=t||e&&e.__key)!=null)return void(n.__key=t);Pe(),ek();let i=ce(),r=is(),s=""+ck++;r._nodeMap.set(s,n),H(n)?i._dirtyElements.set(s,!0):i._dirtyLeaves.add(s),i._cloneNotNeeded.add(s),i._dirtyType=1,n.__key=s}function Bs(n){let t=n.getParent();if(t!==null){let e=n.getWritable(),i=t.getWritable(),r=n.getPreviousSibling(),s=n.getNextSibling(),o=s!==null?s.__key:null,a=r!==null?r.__key:null,l=r!==null?r.getWritable():null,c=s!==null?s.getWritable():null;r===null&&(i.__first=o),s===null&&(i.__last=a),l!==null&&(l.__next=o),c!==null&&(c.__prev=a),e.__prev=null,e.__next=null,e.__parent=null,i.__size--}}function xg(n){ek(),fg(n)&&W(323,n.__key,n.__type);let t=n.getLatest(),e=t.__parent,i=is(),r=ce(),s=i._nodeMap,o=r._dirtyElements;e!==null&&function(l,c,u){let d=l;for(;d!==null;){if(u.has(d))return;let h=c.get(d);if(h===void 0)break;u.set(d,!1),d=h.__parent}}(e,s,o);let a=t.__key;r._dirtyType=1,H(n)?o.set(a,!0):r._dirtyLeaves.add(a)}function Fe(n){Pe();let t=ce(),e=t._compositionKey;if(n!==e){if(t._compositionKey=n,e!==null){let i=Me(e);i!==null&&i.getWritable()}if(n!==null){let i=Me(n);i!==null&&i.getWritable()}}}function Fs(){return Ul()?null:ce()._compositionKey}function Me(n,t){let e=(t||is())._nodeMap.get(n);return e===void 0?null:e}function Uy(n,t){let e=kg(n,ce());return e!==void 0?Me(e,t):null}function kg(n,t){return n[`__lexicalKey_${t._key}`]}function Og(n,t){let e=n;for(;e!=null;){let i=Uy(e,t);if(i!==null)return i;e=ld(e)}return null}function hk(n){let t=n._decorators,e=Object.assign({},t);return n._pendingDecorators=e,e}function jw(n){return n.read(()=>Zn().getTextContent())}function Zn(){return fk(is())}function fk(n){return n._nodeMap.get("root")}function Bn(n){Pe();let t=is();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),t._selection=n}function Nl(n){let t=ce(),e=function(i,r){let s=i;for(;s!=null;){let o=kg(s,r);if(o!==void 0)return o;s=ld(s)}return null}(n,t);return e===null?n===t.getRootElement()?Me("root"):null:Me(e)}function gk(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function Ky(n){let t=[],e=n;for(;e!==null;)t.push(e),e=e._parentEditor;return t}function pk(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function mk(n){return lr(n)?n.nodeValue:null}function jy(n,t,e){let i=ar(mi(t));if(i===null)return;let r=i.anchorNode,{anchorOffset:s,focusOffset:o}=i;if(r!==null){let a=mk(r),l=Og(r);if(a!==null&&rt(l)){if(a===Sg&&e){let c=e.length;a=e,s=c,o=c}a!==null&&Vy(l,a,s,o,n)}}}function Vy(n,t,e,i,r){let s=n;if(s.isAttached()&&(r||!s.isDirty())){let o=s.isComposing(),a=t;(o||r)&&t[t.length-1]===Sg&&(a=t.slice(0,-1));let l=s.getTextContent();if(r||a!==l){if(a===""){if(Fe(null),Ju||Rl||Xu)s.remove();else{let m=ce();setTimeout(()=>{m.update(()=>{s.isAttached()&&s.remove()})},20)}return}let c=s.getParent(),u=la(),d=s.getTextContentSize(),h=Fs(),f=s.getKey();if(s.isToken()||h!==null&&f===h&&!o||dt(u)&&(c!==null&&!c.canInsertTextBefore()&&u.anchor.offset===0||u.anchor.key===n.__key&&u.anchor.offset===0&&!s.canInsertTextBefore()&&!o||u.focus.key===n.__key&&u.focus.offset===d&&!s.canInsertTextAfter()&&!o))return void s.markDirty();let g=Dt();if(!dt(g)||e===null||i===null)return void Vw(s,a,g);if(g.setTextNodeRange(s,e,s,i),s.isSegmented()){let m=Ie(s.getTextContent());s.replace(m),s=m}Vw(s,a,g)}}}function Vw(n,t,e){if(n.setTextContent(t),dt(e)){let i=n.getKey();for(let r of["anchor","focus"]){let s=e[r];s.type==="text"&&s.key===i&&(s.offset=Li(n,s.offset,"clamp"))}}}function Qf(n,t,e){let i=t[e]||!1;return i==="any"||i===n[e]}function bk(n,t){return Qf(n,t,"altKey")&&Qf(n,t,"ctrlKey")&&Qf(n,t,"shiftKey")&&Qf(n,t,"metaKey")}function Wt(n,t,e){return bk(n,e)&&n.key.toLowerCase()===t.toLowerCase()}var Yr={ctrlKey:!ki,metaKey:ki},Gw={altKey:ki,ctrlKey:!ki};function qw(n){return n.key==="Backspace"}function Yw(n){return Wt(n,"a",Yr)}function h6(n){let t=Zn();if(dt(n)){let e=n.anchor,i=n.focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,"element"),i.set(r.getKey(),r.getChildrenSize(),"element"),og(n),n}{let e=t.select(0,t.getChildrenSize());return Bn(og(e)),e}}function Ml(n,t){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});let e=n.__lexicalClassNameCache,i=e[t];if(i!==void 0)return i;let r=n[t];if(typeof r=="string"){let s=nN(r);return e[t]=s,s}return r}function Gy(n,t,e,i,r){if(e.size===0)return;let s=i.__type,o=i.__key,a=t.get(s);a===void 0&&W(33,s);let l=a.klass,c=n.get(l);c===void 0&&(c=new Map,n.set(l,c));let u=c.get(o),d=u==="destroyed"&&r==="created";(u===void 0||d)&&c.set(o,d?"updated":r)}function f6(n){let t=n.getType(),e=is();if(e._readOnly){let s=yy(e).get(t);return s?Array.from(s.values()):[]}let i=e._nodeMap,r=[];for(let[,s]of i)s instanceof n&&s.__type===t&&s.isAttached()&&r.push(s);return r}function Jw(n,t,e){let i=n.getParent(),r=e,s=n;return i!==null&&(t&&e===0?(r=s.getIndexWithinParent(),s=i):t||e!==s.getChildrenSize()||(r=s.getIndexWithinParent()+1,s=i)),s.getChildAtIndex(t?r-1:r)}function _k(n,t){let e=n.offset;if(n.type==="element")return Jw(n.getNode(),t,e);{let i=n.getNode();if(t&&e===0||!t&&e===i.getTextContentSize()){let r=t?i.getPreviousSibling():i.getNextSibling();return r===null?Jw(i.getParentOrThrow(),t,i.getIndexWithinParent()+(t?0:1)):r}}return null}function xk(n){let t=mi(n).event,e=t&&t.inputType;return e==="insertFromPaste"||e==="insertFromPasteAsQuotation"}function Z(n,t,e){return function(i,r,s){let o=Ky(i);for(let a=4;a>=0;a--)for(let l=0;l<o.length;l++){let c=o[l],u=c._commands.get(r);if(u!==void 0){let d=u[a];if(d!==void 0){let h=Array.from(d),f=h.length,g=!1;if(Xn(c,()=>{for(let m=0;m<f;m++)if(h[m](s,i))return void(g=!0)}),g)return g}}}return!1}(n,t,e)}function Mg(n){return!ze(n)&&!n.isLastChild()&&!n.isInline()}function oa(n,t){let e=n._keyToDOMMap.get(t);return e===void 0&&W(75,t),e}function ld(n){let t=n.assignedSlot||n.parentElement;return Ek(t)?t.host:t}function qy(n){return uk(n)?n:Tn(n)?n.ownerDocument:null}function g6(n){return ce()._updateTags.has(n)}function yk(n){Pe(),ce()._updateTags.add(n)}function vk(n){Pe(),ce()._deferred.push(n)}function yg(n,t){let e=n.getParent();for(;e!==null;){if(e.is(t))return!0;e=e.getParent()}return!1}function Yy(n){let t=qy(n);return t?t.defaultView:null}function mi(n){let t=n._window;return t===null&&W(78),t}function p6(n){return H(n)&&n.isInline()||Zt(n)&&n.isInline()}function Sk(n){let t=n.getParentOrThrow();for(;t!==null;){if(Ii(t))return t;t=t.getParentOrThrow()}return t}function Ii(n){return ze(n)||H(n)&&n.isShadowRoot()}function Jy(n){let t=n.constructor.clone(n);return dk(t,null),t.afterCloneFrom(n),t}function cd(n){let t=ce(),e=n.getType(),i=zy(t,e);i===void 0&&W(200,n.constructor.name,e);let{replace:r,replaceWithKlass:s}=i;if(r!==null){let o=r(n),a=o.constructor;return s!==null?o instanceof s||W(201,s.name,s.getType(),a.name,a.getType(),n.constructor.name,e):o instanceof n.constructor&&a!==n.constructor||W(202,a.name,a.getType(),n.constructor.name,e),o.__key===n.__key&&W(203,n.constructor.name,e,a.name,a.getType()),o}return n}function Gx(n,t){!ze(n.getParent())||H(t)||Zt(t)||W(99)}function Ck(n){let t=Me(n);return t===null&&W(63,n),t}function qx(n){return(Zt(n)||H(n)&&!n.canBeEmpty())&&!n.isInline()}function _y(n,t,e){e.style.removeProperty("caret-color"),t._blockCursorElement=null;let i=n.parentElement;i!==null&&i.removeChild(n)}function ar(n){return Pi?(n||window).getSelection():null}function Ak(n){let t=Yy(n);return t?t.getSelection():null}function m6(n,t){let e=n.getChildAtIndex(t);e==null&&(e=n),Ii(n)&&W(102);let i=o=>{let a=o.getParentOrThrow(),l=Ii(a),c=o!==e||l?Jy(o):o;if(l)return H(o)&&H(c)||W(133),o.insertAfter(c),[o,c,c];{let[u,d,h]=i(a),f=o.getNextSiblings();return h.append(c,...f),[u,d,c]}},[r,s]=i(e);return[r,s]}function b6(n){return Tn(n)&&n.tagName==="A"}function Tn(n){return Kl(n)&&n.nodeType===1}function Kl(n){return typeof n=="object"&&n!==null&&"nodeType"in n&&typeof n.nodeType=="number"}function Ek(n){return Kl(n)&&n.nodeType===11}function Tk(n){let t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(t)!==null}function xy(n){let t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(t)!==null}function Qr(n){if(Zt(n)&&!n.isInline())return!0;if(!H(n)||Ii(n))return!1;let t=n.getFirstChild(),e=t===null||Qo(t)||rt(t)||t.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&e}function Xy(){return ce()}var Xw=new WeakMap,_6=new Map;function yy(n){if(!n._readOnly&&n.isEmpty())return _6;n._readOnly||W(192);let t=Xw.get(n);return t||(t=function(e){let i=new Map;for(let[r,s]of e._nodeMap){let o=s.__type,a=i.get(o);a||(a=new Map,i.set(o,a)),a.set(r,s)}return i}(n),Xw.set(n,t)),t}function Zy(n){let t=n.constructor.clone(n);return t.afterCloneFrom(n),t}function x6(n){return(t=Zy(n))[UN]=!0,t;var t}function wk(n,t){let e=parseInt(n.style.paddingInlineStart,10)||0,i=Math.round(e/40);t.setIndent(i)}function y6(n){n.__lexicalUnmanaged=!0}function Nk(n){return n.__lexicalUnmanaged===!0}function Hu(n,t){return function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}(n,t)&&n[t]!==pi[t]}function ud(n){let t=uw in n.prototype?n.prototype[uw]():void 0,e=function(o){if(!(o===pi||o.prototype instanceof pi)){let a="<unknown>",l="<unknown>";try{a=o.getType()}catch{}try{Ws.version&&(l=JSON.parse(Ws.version))}catch{}W(290,o.name,a,l)}return o===id||o===Hs||o===pi}(n),i=!e&&Hu(n,"getType")?n.getType():void 0,r,s=i;if(t)if(i)r=t[i];else for(let[o,a]of Object.entries(t))s=o,r=a;if(!e&&s&&(Hu(n,"getType")||(n.getType=()=>s),Hu(n,"clone")||(n.clone=o=>($y(o),new n)),Hu(n,"importJSON")||(n.importJSON=r&&r.$importJSON||(o=>new n().updateFromJSON(o))),!Hu(n,"importDOM")&&r)){let{importDOM:o}=r;o&&(n.importDOM=()=>o)}return{ownNodeConfig:r,ownNodeType:s}}function v6(n){let t=Xy();return Pe(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(n))).klass}var Gu=(n,t)=>{let e=n;for(;e!=null&&!ze(e);){if(t(e))return e;e=e.getParent()}return null},S6={next:"previous",previous:"next"},$l=class{origin;constructor(t){this.origin=t}[Symbol.iterator](){return e0({hasNext:aa,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return He(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return He(this.origin,this.direction)}remove(){let t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){let i=this.getNodeAtCaret();return t.is(this.origin)||t.is(i)||(i===null?this.insert(t):i.replace(t,e)),this}splice(t,e,i="next"){let r=i===this.direction?e:Array.from(e).reverse(),s=this,o=this.getParentAtCaret(),a=new Map;for(let l=s.getAdjacentCaret();l!==null&&a.size<t;l=l.getAdjacentCaret()){let c=l.origin.getWritable();a.set(c.getKey(),c)}for(let l of r){if(a.size>0){let c=s.getNodeAtCaret();if(c){if(a.delete(c.getKey()),a.delete(l.getKey()),!(c.is(l)||s.origin.is(l))){let u=l.getParent();u&&u.is(o)&&l.remove(),c.replace(l)}}else c===null&&W(263,Array.from(a).join(" "))}else s.insert(l);s=He(l,this.direction)}for(let l of a.values())l.remove();return this}},sd=class n extends $l{type="child";getLatest(){let t=this.origin.getLatest();return t===this.origin?this:ns(t,this.direction)}getParentCaret(t="root"){return He(Qy(this.getParentAtCaret(),t),this.direction)}getFlipped(){let t=Gs(this.direction);return He(this.getNodeAtCaret(),t)||ns(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof n&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}},C6={root:ze,shadowRoot:Ii};function Gs(n){return S6[n]}function Qy(n,t="root"){return C6[t](n)?null:n}var Bl=class n extends $l{type="sibling";getLatest(){let t=this.origin.getLatest();return t===this.origin?this:He(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return H(this.origin)?ns(this.origin,this.direction):null}getParentCaret(t="root"){return He(Qy(this.getParentAtCaret(),t),this.direction)}getFlipped(){let t=Gs(this.direction);return He(this.getNodeAtCaret(),t)||ns(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof n&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof n||t instanceof zl)&&this.direction===t.direction&&this.origin.is(t.origin)}},zl=class n extends $l{type="text";offset;constructor(t,e){super(t),this.offset=e}getLatest(){let t=this.origin.getLatest();return t===this.origin?this:Us(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return He(Qy(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Us(this.origin,Gs(this.direction),this.offset)}isSamePointCaret(t){return t instanceof n&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Bl||t instanceof n)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return He(this.origin,this.direction)}};function es(n){return n instanceof zl}function A6(n){return n instanceof $l}function aa(n){return n instanceof Bl}function Ri(n){return n instanceof sd}var E6={next:class extends zl{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(n){return this.origin.insertAfter(n),this}},previous:class extends zl{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(n){return this.origin.insertBefore(n),this}}},T6={next:class extends Bl{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(n){return this.origin.insertAfter(n),this}},previous:class extends Bl{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(n){return this.origin.insertBefore(n),this}}},w6={next:class extends sd{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(n){return this.origin.splice(0,0,[n]),this}},previous:class extends sd{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(n){return this.origin.splice(this.origin.getChildrenSize(),0,[n]),this}}};function He(n,t){return n?new T6[t](n):null}function Us(n,t,e){return n?new E6[t](n,Li(n,e)):null}function Li(n,t,e="error"){let i=n.getTextContentSize(),r=t==="next"?i:t==="previous"?0:t;return(r<0||r>i)&&(e!=="clamp"&&tN(284,String(t),String(i),n.getKey()),r=r<0?0:i),r}function vy(n,t){return new vg(n,t)}function ns(n,t){return H(n)?new w6[t](n):null}function kk(n){return n&&n.getChildCaret()||n}function Hl(n){return n&&kk(n.getAdjacentCaret())}var Sy=class n{type="node-caret-range";direction;anchor;focus;constructor(t,e,i){this.anchor=t,this.focus=e,this.direction=i}getLatest(){let t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new n(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let t=r=>{let s=this[r].getLatest();return es(s)?function(o,a){let{direction:l,origin:c}=o,u=Li(c,a==="focus"?Gs(l):l);return vy(o,u-o.offset)}(s,r):null},e=t("anchor"),i=t("focus");if(e&&i){let{caret:r}=e,{caret:s}=i;if(r.isSameNodeCaret(s))return[vy(r,s.offset-r.offset),null]}return[e,i]}iterNodeCarets(t="root"){let e=es(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),i=this.focus.getLatest(),r=es(i),s=o=>o.isSameNodeCaret(i)?null:Hl(o)||o.getParentCaret(t);return e0({hasNext:o=>o!==null&&!(r&&i.isSameNodeCaret(o)),initial:e.isSameNodeCaret(i)?null:s(e),map:o=>o,step:s})}[Symbol.iterator](){return this.iterNodeCarets("root")}},vg=class{type="slice";caret;distance;constructor(t,e){this.caret=t,this.distance=e}getSliceIndices(){let{distance:t,caret:{offset:e}}=this,i=e+t;return i<e?[i,e]:[e,i]}getTextContent(){let[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:t,direction:e}}=this,[i,r]=this.getSliceIndices(),s=t.getTextContent();return Us(t.setTextContent(s.slice(0,i)+s.slice(r)),e,i)}};function N6(n){return n instanceof vg}function t0(n){return Ks(n,He(Zn(),n.direction))}function Ok(n){return Ks(n,n)}function Ks(n,t){return n.direction!==t.direction&&W(265),new Sy(n,t,n.direction)}function e0(n){let{initial:t,hasNext:e,step:i,map:r}=n,s=t;return{[Symbol.iterator](){return this},next(){if(!e(s))return{done:!0,value:void 0};let o={done:!1,value:r(s)};return s=i(s),o}}}function n0(n,t){let e=qu(n.origin,t.origin);switch(e===null&&W(275,n.origin.getKey(),t.origin.getKey()),e.type){case"same":{let i=n.type==="text",r=t.type==="text";return i&&r?function(s,o){return Math.sign(s-o)}(n.offset,t.offset):n.type===t.type?0:i?-1:r?1:n.type==="child"?-1:1}case"ancestor":return n.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return i0(e)}}function i0(n){let{a:t,b:e}=n,i=t.__key,r=e.__key,s=t,o=e;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===r)return-1;if(o.__key===i)return 1}return s===null?1:-1}function tg(n,t){return t.is(n)}function Zw(n){return H(n)?[n.getLatest(),null]:[n.getParent(),n.getLatest()]}function qu(n,t){if(n.is(t))return{commonAncestor:n,type:"same"};let e=new Map;for(let[i,r]=Zw(n);i;r=i,i=i.getParent())e.set(i,r);for(let[i,r]=Zw(t);i;r=i,i=i.getParent()){let s=e.get(i);if(s!==void 0)return s===null?(tg(n,i)||W(276),{commonAncestor:i,type:"ancestor"}):r===null?(tg(t,i)||W(277),{commonAncestor:i,type:"descendant"}):((H(s)||tg(n,s))&&(H(r)||tg(t,r))&&i.is(s.getParent())&&i.is(r.getParent())||W(278),{a:s,b:r,commonAncestor:i,type:"branch"})}return null}function js(n,t){let{type:e,key:i,offset:r}=n,s=Ck(n.key);return e==="text"?(rt(s)||W(266,s.getType(),i),Us(s,t,r)):(H(s)||W(267,s.getType(),i),Dk(s,n.offset,t))}function Wl(n,t){let{origin:e,direction:i}=t,r=i==="next";es(t)?n.set(e.getKey(),t.offset,"text"):aa(t)?rt(e)?n.set(e.getKey(),Li(e,i),"text"):n.set(e.getParentOrThrow().getKey(),e.getIndexWithinParent()+(r?1:0),"element"):(Ri(t)&&H(e)||W(268),n.set(e.getKey(),r?0:e.getChildrenSize(),"element"))}function Mk(n){let t=Dt(),e=dt(t)?t:QN();return Yu(e,n),Bn(e),e}function Yu(n,t){Wl(n.anchor,t.anchor),Wl(n.focus,t.focus)}function Cy(n){let{anchor:t,focus:e}=n,i=js(t,"next"),r=js(e,"next"),s=n0(i,r)<=0?"next":"previous";return Ks(Vs(i,s),Vs(r,s))}function jl(n){let{direction:t,origin:e}=n,i=He(e,Gs(t)).getNodeAtCaret();return i?He(i,t):ns(e.getParentOrThrow(),t)}function Qw(n,t="root"){let e=[n];for(let i=Ri(n)?n.getParentCaret(t):n.getSiblingCaret();i!==null;i=i.getParentCaret(t))e.push(jl(i));return e}function Yx(n){return!!n&&n.origin.isAttached()}function Rk(n,t="removeEmptySlices"){if(n.isCollapsed())return n;let e="root",i="next",r=t,s=r0(n,i),o=Qw(s.anchor,e),a=Qw(s.focus.getFlipped(),e),l=new Set,c=[];for(let g of s.iterNodeCarets(e))if(Ri(g))l.add(g.origin.getKey());else if(aa(g)){let{origin:m}=g;H(m)&&!l.has(m.getKey())||c.push(m)}for(let g of c)g.remove();for(let g of s.getTextSlices()){if(!g)continue;let{origin:m}=g.caret,p=m.getTextContentSize(),b=jl(He(m,i)),_=m.getMode();if(Math.abs(g.distance)===p&&r==="removeEmptySlices"||_==="token"&&g.distance!==0)b.remove();else if(g.distance!==0){r="removeEmptySlices";let x=g.removeTextSlice(),y=g.caret.origin;if(_==="segmented"){let v=x.origin,S=Ie(v.getTextContent()).setStyle(v.getStyle()).setFormat(v.getFormat());b.replaceOrInsert(S),x=Us(S,i,x.offset)}y.is(o[0].origin)&&(o[0]=x),y.is(a[0].origin)&&(a[0]=x.getFlipped())}}let u,d;for(let g of o)if(Yx(g)){u=Oi(g);break}for(let g of a)if(Yx(g)){d=Oi(g);break}let h=function(g,m,p){if(!g||!m)return null;let b=g.getParentAtCaret(),_=m.getParentAtCaret();if(!b||!_)return null;let x=b.getParents().reverse();x.push(b);let y=_.getParents().reverse();y.push(_);let v=Math.min(x.length,y.length),S;for(S=0;S<v&&x[S]===y[S];S++);let C=($,L)=>{let w;for(let N=S;N<$.length;N++){let R=$[N];if(Ii(R))return;!w&&L(R)&&(w=R)}return w},A=C(x,Qr),E=A&&C(y,$=>p.has($.getKey())&&Qr($));return A&&E?[A,E]:null}(u,d,l);if(h){let[g,m]=h;ns(g,"previous").splice(0,m.getChildren()),m.remove()}let f=[u,d,...o,...a].find(Yx);if(f)return Ok(Vs(Oi(f),n.direction));W(269,JSON.stringify(o.map(g=>g.origin.__key)))}function Oi(n){let t=function(r){let s=r;for(;Ri(s);){let o=Hl(s);if(!Ri(o))break;s=o}return s}(n.getLatest()),{direction:e}=t;if(rt(t.origin))return es(t)?t:Us(t.origin,e,e);let i=t.getAdjacentCaret();return aa(i)&&rt(i.origin)?Us(i.origin,e,Gs(e)):t}function Lk(n){return es(n)&&n.offset!==Li(n.origin,n.direction)}function Vs(n,t){return n.direction===t?n:n.getFlipped()}function r0(n,t){return n.direction===t?n:Ks(Vs(n.focus,t),Vs(n.anchor,t))}function Dk(n,t,e){let i=ns(n,"next");for(let r=0;r<t;r++){let s=i.getAdjacentCaret();if(s===null)break;i=s}return Vs(i,e)}function k6(n,t="root"){let e=0,i=n,r=Hl(i);for(;r===null;){if(e--,r=i.getParentCaret(t),!r)return null;i=r,r=Hl(i)}return r&&[r,e]}function O6(n){let{origin:t,offset:e,direction:i}=n;if(e===Li(t,i))return n.getSiblingCaret();if(e===Li(t,Gs(i)))return jl(n.getSiblingCaret());let[r]=t.splitText(e);return rt(r)||W(281),Vs(He(r,"next"),i)}function M6(n,t){return!0}function R6(n,{$copyElementNode:t=Jy,$splitTextPointCaretNext:e=O6,rootMode:i="shadowRoot",$shouldSplit:r=M6}={}){if(es(n))return e(n);let s=n.getParentCaret(i);if(s){let{origin:o}=s;if(Ri(n)&&(!o.canBeEmpty()||!r(o,"first")))return jl(s);let a=function(l){let c=[];for(let u=l.getAdjacentCaret();u;u=u.getAdjacentCaret())c.push(u.origin);return c}(n);(a.length>0||o.canBeEmpty()&&r(o,"last"))&&s.insert(t(o).splice(0,0,a))}return s}function L6(n){return n}function D6(...n){return n}function I6(n,t){return[n,t]}function P6(n){return n}function F6(n,t){if(!t||n===t)return n;for(let e in t)if(n[e]!==t[e])return{...n,...t};return n}var O=s0,Ik=O.$addUpdateTag,Xe=O.$applyNodeReplacement,qs=O.$caretFromPoint,Pk=O.$caretRangeFromSelection,Rg=O.$cloneWithProperties,Fk=O.$cloneWithPropertiesEphemeral,cK=O.$comparePointCaretNext,uK=O.$copyNode,Vl=O.$create,Ze=O.$createLineBreakNode,dd=O.$createNodeSelection,nt=O.$createParagraphNode,Fi=O.$createPoint,cr=O.$createRangeSelection,$k=O.$createRangeSelectionFromDom,Qn=O.$createTabNode,Ft=O.$createTextNode,hd=O.$extendCaretToRange,Ys=O.$findMatchingParent,fd=O.$getAdjacentChildCaret,o0=O.$getAdjacentNode,ca=O.$getAdjacentSiblingOrParentSiblingCaret,a0=O.$getCaretInDirection,gd=O.$getCaretRange,l0=O.$getCaretRangeInDirection,Bk=O.$getCharacterOffsets,ti=O.$getChildCaret,dK=O.$getChildCaretAtIndex,c0=O.$getChildCaretOrSelf,zk=O.$getCollapsedCaretRange,hK=O.$getCommonAncestor,fK=O.$getCommonAncestorResultBranchOrder,ua=O.$getEditor,Re=O.$getNearestNodeFromDOMNode,gK=O.$getNearestRootOrShadowRoot,Qt=O.$getNodeByKey,pK=O.$getNodeByKeyOrThrow,Hk=O.$getNodeFromDOMNode,rs=O.$getPreviousSelection,ue=O.$getRoot,I=O.$getSelection,Qe=O.$getSiblingCaret,Gl=O.$getState,mK=O.$getStateChange,bK=O.$getTextContent,_K=O.$getTextNodeOffset,u0=O.$getTextPointCaret,xK=O.$getTextPointCaretSlice,yK=O.$getWritableNodeState,Wk=O.$hasAncestor,Uk=O.$hasUpdateTag,Js=O.$insertNodes,ql=O.$isBlockElementNode,Xs=O.$isChildCaret,ur=O.$isDecoratorNode,Kk=O.$isEditorState,j=O.$isElementNode,Lg=O.$isExtendableTextPointCaret,jk=O.$isInlineElementOrDecoratorNode,pd=O.$isLeafNode,$t=O.$isLineBreakNode,vK=O.$isNodeCaret,be=O.$isNodeSelection,We=O.$isParagraphNode,P=O.$isRangeSelection,ss=O.$isRootNode,Le=O.$isRootOrShadowRoot,Dg=O.$isSiblingCaret,tn=O.$isTabNode,J=O.$isTextNode,Ig=O.$isTextPointCaret,SK=O.$isTextPointCaretSlice,d0=O.$isTokenOrSegmented,CK=O.$isTokenOrTab,AK=O.$nodesOfType,$i=O.$normalizeCaret,os=O.$normalizeSelection__EXPERIMENTAL,EK=O.$onUpdate,Vk=O.$parseSerializedNode,TK=O.$removeTextFromCaretRange,Gk=O.$rewindSiblingCaret,Yl=O.$selectAll,wK=O.$setCompositionKey,Zs=O.$setPointFromCaret,te=O.$setSelection,md=O.$setSelectionFromCaretRange,Qs=O.$setState,qk=O.$splitAtPointCaretNext,Yk=O.$splitNode,NK=O.$updateRangeSelectionFromCaretRange,h0=O.ArtificialNode__DO_NOT_USE,kK=O.BLUR_COMMAND,bd=O.CAN_REDO_COMMAND,_d=O.CAN_UNDO_COMMAND,Pg=O.CLEAR_EDITOR_COMMAND,Fg=O.CLEAR_HISTORY_COMMAND,Jl=O.CLICK_COMMAND,Jk=O.COLLABORATION_TAG,$g=O.COMMAND_PRIORITY_CRITICAL,it=O.COMMAND_PRIORITY_EDITOR,oe=O.COMMAND_PRIORITY_HIGH,wt=O.COMMAND_PRIORITY_LOW,Bi=O.COMMAND_PRIORITY_NORMAL,Xl=O.CONTROLLED_TEXT_INSERTION_COMMAND,Zl=O.COPY_COMMAND,Ql=O.CUT_COMMAND,dr=O.DELETE_CHARACTER_COMMAND,da=O.DELETE_LINE_COMMAND,tc=O.DELETE_WORD_COMMAND,OK=O.DRAGEND_COMMAND,Xk=O.DRAGOVER_COMMAND,Bg=O.DRAGSTART_COMMAND,zg=O.DROP_COMMAND,zn=O.DecoratorNode,Ue=O.ElementNode,Zk=O.FOCUS_COMMAND,Hg=O.FORMAT_ELEMENT_COMMAND,as=O.FORMAT_TEXT_COMMAND,ec=O.HISTORIC_TAG,ha=O.HISTORY_MERGE_TAG,Qk=O.HISTORY_PUSH_TAG,wn=O.INDENT_CONTENT_COMMAND,nc=O.INSERT_LINE_BREAK_COMMAND,hr=O.INSERT_PARAGRAPH_COMMAND,to=O.INSERT_TAB_COMMAND,xd=O.INTERNAL_$isBlock,MK=O.IS_ALL_FORMATTING,RK=O.IS_BOLD,LK=O.IS_CODE,DK=O.IS_HIGHLIGHT,IK=O.IS_ITALIC,PK=O.IS_STRIKETHROUGH,FK=O.IS_SUBSCRIPT,$K=O.IS_SUPERSCRIPT,BK=O.IS_UNDERLINE,ei=O.KEY_ARROW_DOWN_COMMAND,fr=O.KEY_ARROW_LEFT_COMMAND,eo=O.KEY_ARROW_RIGHT_COMMAND,Nn=O.KEY_ARROW_UP_COMMAND,ls=O.KEY_BACKSPACE_COMMAND,no=O.KEY_DELETE_COMMAND,tO=O.KEY_DOWN_COMMAND,cs=O.KEY_ENTER_COMMAND,ic=O.KEY_ESCAPE_COMMAND,zK=O.KEY_MODIFIER_COMMAND,rc=O.KEY_SPACE_COMMAND,bi=O.KEY_TAB_COMMAND,eO=O.LineBreakNode,Wg=O.MOVE_TO_END,yd=O.MOVE_TO_START,HK=O.NODE_STATE_KEY,ni=O.OUTDENT_CONTENT_COMMAND,io=O.PASTE_COMMAND,ro=O.PASTE_TAG,nO=O.ParagraphNode,Ug=O.REDO_COMMAND,Kg=O.REMOVE_TEXT_COMMAND,iO=O.RootNode,gr=O.SELECTION_CHANGE_COMMAND,vd=O.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,jg=O.SELECT_ALL_COMMAND,WK=O.SKIP_COLLAB_TAG,f0=O.SKIP_DOM_SELECTION_TAG,UK=O.SKIP_SCROLL_INTO_VIEW_TAG,KK=O.SKIP_SELECTION_FOCUS_TAG,rO=O.TEXT_TYPE_TO_FORMAT,sO=O.TabNode,kn=O.TextNode,Vg=O.UNDO_COMMAND,g0=O.buildImportMap,Gg=O.configExtension,hn=O.createCommand,oO=O.createEditor,jK=O.createSharedNodeState,qg=O.createState,aO=O.declarePeerDependency,Mt=O.defineExtension,VK=O.flipDirection,GK=O.getDOMOwnerDocument,so=O.getDOMSelection,qK=O.getDOMSelectionFromTarget,lO=O.getDOMTextNode,YK=O.getEditorPropertyFromDOMNode,Yg=O.getNearestEditorFromDOMNode,cO=O.getRegisteredNode,JK=O.getRegisteredNodeOrThrow,XK=O.getStaticNodeConfig,p0=O.getTextDirection,ZK=O.getTransformSetFromKlass,uO=O.isBlockDomNode,dO=O.isCurrentlyReadOnlyMode,hO=O.isDOMDocumentNode,_i=O.isDOMNode,QK=O.isDOMTextNode,tj=O.isDOMUnmanaged,m0=O.isDocumentFragment,ej=O.isExactShortcutMatch,fO=O.isHTMLAnchorElement,fa=O.isHTMLElement,Sd=O.isInlineDomNode,nj=O.isLexicalEditor,ij=O.isModifierMatch,gO=O.isSelectionCapturedInDecoratorInput,pO=O.isSelectionWithinEditor,b0=O.makeStepwiseIterator,rj=O.removeFromParent,sj=O.resetRandomKey,en=O.safeCast,mO=O.setDOMUnmanaged,_0=O.setNodeIndentFromDOM,oo=O.shallowMergeConfig;var E0={};an(E0,{$addNodeStyle:()=>U6,$cloneWithProperties:()=>Rg,$copyBlockFormatIndent:()=>EO,$ensureForwardRangeSelection:()=>AO,$forEachSelectedTextNode:()=>CO,$getComputedStyleForElement:()=>S0,$getComputedStyleForParent:()=>C0,$getSelectionStyleValueForProperty:()=>X6,$isAtNodeEnd:()=>W6,$isParentElementRTL:()=>A0,$isParentRTL:()=>z6,$moveCaretSelection:()=>NO,$moveCharacter:()=>Y6,$patchStyleText:()=>K6,$selectAll:()=>Yl,$setBlocksType:()=>j6,$shouldOverrideDefaultCharacterSelection:()=>q6,$sliceSelectedTextNodeContent:()=>H6,$trimTextContentFromAnchor:()=>SO,$wrapNodes:()=>G6,createDOMRange:()=>$6,createRectsFromDOMRange:()=>B6,getCSSFromStyleObject:()=>vO,getStyleObjectFromCSS:()=>Xg,trimTextContentFromAnchor:()=>Z6});function v0(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Jg=new Map;function bO(n){let t=n;for(;t!=null;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function _O(n){let t=n.parentNode;if(t==null)throw new Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(n)]}function $6(n,t,e,i,r){let s=t.getKey(),o=i.getKey(),a=document.createRange(),l=n.getElementByKey(s),c=n.getElementByKey(o),u=e,d=r;if(J(t)&&(l=bO(l)),J(i)&&(c=bO(c)),t===void 0||i===void 0||l===null||c===null)return null;l.nodeName==="BR"&&([l,u]=_O(l)),c.nodeName==="BR"&&([c,d]=_O(c));let h=l.firstChild;l===c&&h!=null&&h.nodeName==="BR"&&u===0&&d===0&&(d=1);try{a.setStart(l,u),a.setEnd(c,d)}catch{return null}return!a.collapsed||u===d&&s===o||(a.setStart(c,d),a.setEnd(l,u)),a}function B6(n,t){let e=n.getRootElement();if(e===null)return[];let i=e.getBoundingClientRect(),r=getComputedStyle(e),s=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),o=Array.from(t.getClientRects()),a,l=o.length;o.sort((c,u)=>{let d=c.top-u.top;return Math.abs(d)<=3?c.left-u.left:d});for(let c=0;c<l;c++){let u=o[c],d=a&&a.top<=u.top&&a.top+a.height>u.top&&a.left+a.width>u.left,h=u.width+s===i.width;d||h?(o.splice(c--,1),l--):a=u}return o}function yO(n){let t={};if(!n)return t;let e=n.split(";");for(let i of e)if(i!==""){let[r,s]=i.split(/:([^]+)/);r&&s&&(t[r.trim()]=s.trim())}return t}function Xg(n){let t=Jg.get(n);return t===void 0&&(t=yO(n),Jg.set(n,t)),t}function vO(n){let t="";for(let e in n)e&&(t+=`${e}: ${n[e]};`);return t}function S0(n){let t=ua().getElementByKey(n.getKey());if(t===null)return null;let e=t.ownerDocument.defaultView;return e===null?null:e.getComputedStyle(t)}function C0(n){return S0(ss(n)?n:n.getParentOrThrow())}function z6(n){let t=C0(n);return t!==null&&t.direction==="rtl"}function H6(n,t,e="self"){let i=n.getStartEndPoints();if(t.isSelected(n)&&!d0(t)&&i!==null){let[r,s]=i,o=n.isBackward(),a=r.getNode(),l=s.getNode(),c=t.is(a),u=t.is(l);if(c||u){let[d,h]=Bk(n),f=a.is(l),g=t.is(o?l:a),m=t.is(o?a:l),p,b=0;f?(b=d>h?h:d,p=d>h?d:h):g?(b=o?h:d,p=void 0):m&&(b=0,p=o?d:h);let _=t.__text.slice(b,p);_!==t.__text&&(e==="clone"&&(t=Fk(t)),t.__text=_)}}return t}function W6(n){if(n.type==="text")return n.offset===n.getNode().getTextContentSize();let t=n.getNode();return j(t)||v0(177),n.offset===t.getChildrenSize()}function SO(n,t,e){let i=t.getNode(),r=e;if(j(i)){let s=i.getDescendantByIndex(t.offset);s!==null&&(i=s)}for(;r>0&&i!==null;){if(j(i)){let c=i.getLastDescendant();c!==null&&(i=c)}let s=i.getPreviousSibling(),o=0;if(s===null){let c=i.getParentOrThrow(),u=c.getPreviousSibling();for(;u===null;){if(c=c.getParent(),c===null){s=null;break}u=c.getPreviousSibling()}c!==null&&(o=c.isInline()?0:2,s=u)}let a=i.getTextContent();a===""&&j(i)&&!i.isInline()&&(a=`

`);let l=a.length;if(!J(i)||r>=l){let c=i.getParent();i.remove(),c==null||c.getChildrenSize()!==0||ss(c)||c.remove(),r-=l+o,i=s}else{let c=i.getKey(),u=n.getEditorState().read(()=>{let f=Qt(c);return J(f)&&f.isSimpleText()?f.getTextContent():null}),d=l-r,h=a.slice(0,d);if(u!==null&&u!==a){let f=rs(),g=i;if(i.isSimpleText())i.setTextContent(u);else{let m=Ft(u);i.replace(m),g=m}if(P(f)&&f.isCollapsed()){let m=f.anchor.offset;g.select(m,m)}}else if(i.isSimpleText()){let f=t.key===c,g=t.offset;g<r&&(g=l);let m=f?g-r:0,p=f?g:d;if(f&&m===0){let[b]=i.splitText(m,p);b.remove()}else{let[,b]=i.splitText(m,p);b.remove()}}else{let f=Ft(h);i.replace(f)}r=0}}}function U6(n){let t=n.getStyle(),e=yO(t);Jg.set(t,e)}function x0(n,t){(P(n)?n.isCollapsed():J(n)||j(n))||v0(280);let e=Xg(P(n)?n.style:J(n)?n.getStyle():n.getTextStyle()),i=Object.entries(t).reduce((s,[o,a])=>(typeof a=="function"?s[o]=a(e[o],n):a===null?delete s[o]:s[o]=a,s),{...e}),r=vO(i);P(n)||J(n)?n.setStyle(r):n.setTextStyle(r),Jg.set(r,i)}function K6(n,t){if(P(n)&&n.isCollapsed()){x0(n,t);let e=n.anchor.getNode();j(e)&&e.isEmpty()&&x0(e,t)}CO(e=>{x0(e,t)})}function CO(n){let t=I();if(!t)return;let e=new Map,i=s=>e.get(s.getKey())||[0,s.getTextContentSize()];if(P(t))for(let s of Pk(t).getTextSlices())s&&e.set(s.caret.origin.getKey(),s.getSliceIndices());let r=t.getNodes();for(let s of r){if(!J(s)||!s.canHaveFormat())continue;let[o,a]=i(s);a!==o&&(d0(s)||o===0&&a===s.getTextContentSize()?n(s):n(s.splitText(o,a)[o===0?0:1]))}P(t)&&t.anchor.type==="text"&&t.focus.type==="text"&&t.anchor.key===t.focus.key&&AO(t)}function AO(n){if(n.isBackward()){let{anchor:t,focus:e}=n,{key:i,offset:r,type:s}=t;t.set(e.key,e.offset,e.type),e.set(i,r,s)}}function EO(n,t){let e=n.getFormatType(),i=n.getIndent();e!==t.getFormatType()&&t.setFormat(e),i!==t.getIndent()&&t.setIndent(i)}function j6(n,t,e=EO){if(n===null)return;let i=n.getStartEndPoints(),r=new Map,s=null;if(i){let[o,a]=i;s=cr(),s.anchor.set(o.key,o.offset,o.type),s.focus.set(a.key,a.offset,a.type);let l=Ys(o.getNode(),xd),c=Ys(a.getNode(),xd);j(l)&&r.set(l.getKey(),l),j(c)&&r.set(c.getKey(),c)}for(let o of n.getNodes())if(j(o)&&xd(o))r.set(o.getKey(),o);else if(i===null){let a=Ys(o,xd);j(a)&&r.set(a.getKey(),a)}for(let[o,a]of r){let l=t();e(a,l),a.replace(l,!0),s&&(o===s.anchor.key&&s.anchor.set(l.getKey(),s.anchor.offset,s.anchor.type),o===s.focus.key&&s.focus.set(l.getKey(),s.focus.offset,s.focus.type))}s&&n.is(I())&&te(s)}function xO(n){return n.getNode().isAttached()}function V6(n){let t=n;for(;t!==null&&!Le(t);){let e=t.getLatest(),i=t.getParent();e.getChildrenSize()===0&&t.remove(!0),t=i}}function G6(n,t,e=null){let i=n.getStartEndPoints(),r=i?i[0]:null,s=n.getNodes(),o=s.length;if(r!==null&&(o===0||o===1&&r.type==="element"&&r.getNode().getChildrenSize()===0)){let c=r.type==="text"?r.getNode().getParentOrThrow():r.getNode(),u=c.getChildren(),d=t();return d.setFormat(c.getFormatType()),d.setIndent(c.getIndent()),u.forEach(h=>d.append(h)),e&&(d=e.append(d)),void c.replace(d)}let a=null,l=[];for(let c=0;c<o;c++){let u=s[c];Le(u)?(y0(n,l,l.length,t,e),l=[],a=u):a===null||a!==null&&Wk(u,a)?l.push(u):(y0(n,l,l.length,t,e),l=[u])}y0(n,l,l.length,t,e)}function y0(n,t,e,i,r=null){if(t.length===0)return;let s=t[0],o=new Map,a=[],l=j(s)?s:s.getParentOrThrow();l.isInline()&&(l=l.getParentOrThrow());let c=!1;for(;l!==null;){let g=l.getPreviousSibling();if(g!==null){l=g,c=!0;break}if(l=l.getParentOrThrow(),Le(l))break}let u=new Set;for(let g=0;g<e;g++){let m=t[g];j(m)&&m.getChildrenSize()===0&&u.add(m.getKey())}let d=new Set;for(let g=0;g<e;g++){let m=t[g],p=m.getParent();if(p!==null&&p.isInline()&&(p=p.getParent()),p!==null&&pd(m)&&!d.has(m.getKey())){let b=p.getKey();if(o.get(b)===void 0){let _=i();_.setFormat(p.getFormatType()),_.setIndent(p.getIndent()),a.push(_),o.set(b,_),p.getChildren().forEach(x=>{_.append(x),d.add(x.getKey()),j(x)&&x.getChildrenKeys().forEach(y=>d.add(y))}),V6(p)}}else if(u.has(m.getKey())){j(m)||v0(179);let b=i();b.setFormat(m.getFormatType()),b.setIndent(m.getIndent()),a.push(b),m.remove(!0)}}if(r!==null)for(let g=0;g<a.length;g++){let m=a[g];r.append(m)}let h=null;if(Le(l))if(c)if(r!==null)l.insertAfter(r);else for(let g=a.length-1;g>=0;g--){let m=a[g];l.insertAfter(m)}else{let g=l.getFirstChild();if(j(g)&&(l=g),g===null)if(r)l.append(r);else for(let m=0;m<a.length;m++){let p=a[m];l.append(p),h=p}else if(r!==null)g.insertBefore(r);else for(let m=0;m<a.length;m++){let p=a[m];g.insertBefore(p),h=p}}else if(r)l.insertAfter(r);else for(let g=a.length-1;g>=0;g--){let m=a[g];l.insertAfter(m),h=m}let f=rs();P(f)&&xO(f.anchor)&&xO(f.focus)?te(f.clone()):h!==null?h.selectEnd():n.dirty=!0}function TO(n){let t=wO(n);return t!==null&&t.writingMode==="vertical-rl"}function wO(n){let t=n.anchor.getNode();return j(t)?S0(t):C0(t)}function q6(n,t){let e=TO(n)?!t:t;A0(n)&&(e=!e);let i=qs(n.focus,e?"previous":"next");if(Lg(i))return!1;for(let r of hd(i)){if(Xs(r))return!r.origin.isInline();if(!j(r.origin)){if(ur(r.origin))return!0;break}}return!1}function NO(n,t,e,i){n.modify(t?"extend":"move",e,i)}function A0(n){let t=wO(n);return t!==null&&t.direction==="rtl"}function Y6(n,t,e){let i=A0(n),r;r=TO(n)||i?!e:e,NO(n,t,r,"character")}function J6(n,t,e){let i=Xg(n.getStyle());return i!==null&&i[t]||e}function X6(n,t,e=""){let i=null,r=n.getNodes(),s=n.anchor,o=n.focus,a=n.isBackward(),l=a?o.offset:s.offset,c=a?o.getNode():s.getNode();if(P(n)&&n.isCollapsed()&&n.style!==""){let u=Xg(n.style);if(u!==null&&t in u)return u[t]}for(let u=0;u<r.length;u++){let d=r[u];if((u===0||l!==0||!d.is(c))&&J(d)){let h=J6(d,t,e);if(i===null)i=h;else if(i!==h){i="";break}}}return i===null?e:i}var Z6=SO;var ae=E0,kO=ae.$addNodeStyle,cj=ae.$cloneWithProperties,uj=ae.$copyBlockFormatIndent,dj=ae.$ensureForwardRangeSelection,hj=ae.$forEachSelectedTextNode,fj=ae.$getComputedStyleForElement,gj=ae.$getComputedStyleForParent,Zg=ae.$getSelectionStyleValueForProperty,pj=ae.$isAtNodeEnd,mj=ae.$isParentElementRTL,T0=ae.$isParentRTL,bj=ae.$moveCaretSelection,sc=ae.$moveCharacter,OO=ae.$patchStyleText,_j=ae.$selectAll,xj=ae.$setBlocksType,oc=ae.$shouldOverrideDefaultCharacterSelection,Qg=ae.$sliceSelectedTextNodeContent,yj=ae.$trimTextContentFromAnchor,vj=ae.$wrapNodes,Sj=ae.createDOMRange,MO=ae.createRectsFromDOMRange,tp=ae.getCSSFromStyleObject,ga=ae.getStyleObjectFromCSS,Cj=ae.trimTextContentFromAnchor;var O0={};an(O0,{$descendantsMatching:()=>PW,$dfs:()=>xW,$dfsIterator:()=>WO,$filter:()=>MW,$findMatchingParent:()=>Ys,$firstToLastIterator:()=>FW,$getAdjacentCaret:()=>yW,$getAdjacentSiblingOrParentSiblingCaret:()=>ca,$getDepth:()=>KO,$getNearestBlockElementAncestorOrThrow:()=>EW,$getNearestNodeOfType:()=>AW,$getNextRightPreorderNode:()=>CW,$getNextSiblingOrParentSibling:()=>SW,$insertFirst:()=>RW,$insertNodeToNearestRoot:()=>NW,$insertNodeToNearestRootAtCaret:()=>VO,$isEditorIsNestedEditor:()=>DW,$lastToFirstIterator:()=>k0,$restoreEditorState:()=>wW,$reverseDfs:()=>vW,$reverseDfsIterator:()=>jO,$splitNode:()=>Yk,$unwrapAndFilterDescendants:()=>IW,$unwrapNode:()=>$W,$wrapNodeInElement:()=>kW,CAN_USE_BEFORE_INPUT:()=>lW,CAN_USE_DOM:()=>BO,IS_ANDROID:()=>cW,IS_ANDROID_CHROME:()=>uW,IS_APPLE:()=>dW,IS_APPLE_WEBKIT:()=>hW,IS_CHROME:()=>fW,IS_FIREFOX:()=>zO,IS_IOS:()=>gW,IS_SAFARI:()=>pW,addClassNamesToElement:()=>mW,calculateZoomLevel:()=>LW,isBlockDomNode:()=>uO,isHTMLAnchorElement:()=>fO,isHTMLElement:()=>fa,isInlineDomNode:()=>Sd,isMimeType:()=>HO,makeStateWrapper:()=>BW,markSelection:()=>$O,mediaFileReader:()=>_W,mergeRegister:()=>PO,objectKlassEquals:()=>OW,positionNodeOnRange:()=>FO,registerNestedElementResolver:()=>TW,removeClassNamesFromElement:()=>bW,selectionAlwaysOnDisplay:()=>aW});function ep(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var zi=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Q6=zi&&"documentMode"in document?document.documentMode:null,LO=zi&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),tW=zi&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),eW=!(!zi||!("InputEvent"in window)||Q6)&&"getTargetRanges"in new window.InputEvent("input"),nW=zi&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),iW=zi&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,DO=zi&&/Android/.test(navigator.userAgent),N0=zi&&/^(?=.*Chrome).*/i.test(navigator.userAgent),rW=zi&&DO&&N0,sW=zi&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&LO&&!N0;function IO(...n){let t=[];for(let e of n)if(e&&typeof e=="string")for(let[i]of e.matchAll(/\S+/g))t.push(i);return t}function PO(...n){return()=>{for(let t=n.length-1;t>=0;t--)n[t]();n.length=0}}function pr(n){return`${n}px`}var oW={attributes:!0,characterData:!0,childList:!0,subtree:!0};function FO(n,t,e){let i=null,r=null,s=null,o=[],a=document.createElement("div");function l(){i===null&&ep(182),r===null&&ep(183);let{left:d,top:h}=r.getBoundingClientRect(),f=MO(n,t);var g,m;a.isConnected||(m=a,(g=r).insertBefore(m,g.firstChild));let p=!1;for(let b=0;b<f.length;b++){let _=f[b],x=o[b]||document.createElement("div"),y=x.style;y.position!=="absolute"&&(y.position="absolute",p=!0);let v=pr(_.left-d);y.left!==v&&(y.left=v,p=!0);let S=pr(_.top-h);y.top!==S&&(x.style.top=S,p=!0);let C=pr(_.width);y.width!==C&&(x.style.width=C,p=!0);let A=pr(_.height);y.height!==A&&(x.style.height=A,p=!0),x.parentNode!==a&&(a.append(x),p=!0),o[b]=x}for(;o.length>f.length;)o.pop();p&&e(o)}function c(){r=null,i=null,s!==null&&s.disconnect(),s=null,a.remove();for(let d of o)d.remove();o=[]}a.style.position="relative";let u=n.registerRootListener(function d(){let h=n.getRootElement();if(h===null)return c();let f=h.parentElement;if(!fa(f))return c();c(),i=h,r=f,s=new MutationObserver(g=>{let m=n.getRootElement(),p=m&&m.parentElement;if(m!==i||p!==r)return d();for(let b of g)if(!a.contains(b.target))return l()}),s.observe(f,oW),l()});return()=>{u(),c()}}function RO(n,t,e){if(n.type!=="text"&&j(t)){let i=t.getDOMSlot(e);return[i.element,i.getFirstChildOffset()+n.offset]}return[lO(e)||e,n.offset]}function $O(n,t){let e=null,i=null,r=null,s=null,o=null,a=null,l=()=>{};function c(u){u.read(()=>{let d=I();if(!P(d))return e=null,r=null,s=null,a=null,l(),void(l=()=>{});let[h,f]=function(A){let E=A.getStartEndPoints();return A.isBackward()?[E[1],E[0]]:E}(d),g=h.getNode(),m=g.getKey(),p=h.offset,b=f.getNode(),_=b.getKey(),x=f.offset,y=n.getElementByKey(m),v=n.getElementByKey(_),S=e===null||y!==i||p!==r||m!==e.getKey(),C=s===null||v!==o||x!==a||_!==s.getKey();if((S||C)&&y!==null&&v!==null){let A=function(E,$,L,w,N,R,k){let D=(E._window?E._window.document:document).createRange();return D.setStart(...RO($,L,w)),D.setEnd(...RO(N,R,k)),D}(n,h,g,y,f,b,v);l(),l=FO(n,A,E=>{if(t===void 0)for(let $ of E){let L=$.style;L.background!=="Highlight"&&(L.background="Highlight"),L.color!=="HighlightText"&&(L.color="HighlightText"),L.marginTop!==pr(-1.5)&&(L.marginTop=pr(-1.5)),L.paddingTop!==pr(4)&&(L.paddingTop=pr(4)),L.paddingBottom!==pr(0)&&(L.paddingBottom=pr(0))}else t(E)})}e=g,i=y,r=p,s=b,o=v,a=x})}return c(n.getEditorState()),PO(n.registerUpdateListener(({editorState:u})=>c(u)),()=>{l()})}function aW(n){let t=null,e=()=>{let i=getSelection(),r=i&&i.anchorNode,s=n.getRootElement();r!==null&&s!==null&&s.contains(r)?t!==null&&(t(),t=null):t===null&&(t=$O(n))};return document.addEventListener("selectionchange",e),()=>{t!==null&&t(),document.removeEventListener("selectionchange",e)}}var lW=eW,BO=zi,cW=DO,uW=rW,dW=LO,hW=sW,fW=N0,zO=tW,gW=iW,pW=nW;function mW(n,...t){let e=IO(...t);e.length>0&&n.classList.add(...e)}function bW(n,...t){let e=IO(...t);e.length>0&&n.classList.remove(...e)}function HO(n,t){for(let e of t)if(n.type.startsWith(e))return!0;return!1}function _W(n,t){let e=n[Symbol.iterator]();return new Promise((i,r)=>{let s=[],o=()=>{let{done:a,value:l}=e.next();if(a)return i(s);let c=new FileReader;c.addEventListener("error",r),c.addEventListener("load",()=>{let u=c.result;typeof u=="string"&&s.push({file:l,result:u}),o()}),HO(l,t)?c.readAsDataURL(l):o()};o()})}function xW(n,t){return Array.from(WO(n,t))}function yW(n){return n?n.getAdjacentCaret():null}function vW(n,t){return Array.from(jO(n,t))}function WO(n,t){return UO("next",n,t)}function UO(n,t,e){let i=ue(),r=t||i,s=j(r)?ti(r,n):Qe(r,n),o=KO(r),a=e?fd(c0(Qe(e,n))):function(c,u){let d=ca(Qe(c,u));return d&&d[0]}(r,n),l=o;return b0({hasNext:c=>c!==null,initial:s,map:c=>({depth:l,node:c.origin}),step:c=>{if(c.isSameNodeCaret(a))return null;Xs(c)&&l++;let u=ca(c);return!u||u[0].isSameNodeCaret(a)?null:(l+=u[1],u[0])}})}function SW(n){let t=ca(Qe(n,"next"));return t&&[t[0].origin,t[1]]}function KO(n){let t=-1;for(let e=n;e!==null;e=e.getParent())t++;return t}function CW(n){let t=c0(Qe(n,"previous")),e=ca(t,"root");return e&&e[0].origin}function jO(n,t){return UO("previous",n,t)}function AW(n,t){let e=n;for(;e!=null;){if(e instanceof t)return e;e=e.getParent()}return null}function EW(n){let t=Ys(n,e=>j(e)&&!e.isInline());return j(t)||ep(4,n.__key),t}function TW(n,t,e,i){let r=s=>s instanceof t;return n.registerNodeTransform(t,s=>{let o=(a=>{let l=a.getChildren();for(let d=0;d<l.length;d++){let h=l[d];if(r(h))return null}let c=a,u=a;for(;c!==null;)if(u=c,c=c.getParent(),r(c))return{child:u,parent:c};return null})(s);if(o!==null){let{child:a,parent:l}=o;if(a.is(s)){i(l,s);let c=a.getNextSiblings(),u=c.length;if(l.insertAfter(a),u!==0){let d=e(l);a.insertAfter(d);for(let h=0;h<u;h++)d.append(c[h])}l.canBeEmpty()||l.getChildrenSize()!==0||l.remove()}}})}function wW(n,t){let e=new Map,i=n._pendingEditorState;for(let[s,o]of t._nodeMap)e.set(s,Rg(o));i&&(i._nodeMap=e),n._dirtyType=2;let r=t._selection;te(r===null?null:r.clone())}function NW(n){let t=I()||rs(),e;if(P(t))e=qs(t.focus,"next");else{if(t!=null){let o=t.getNodes(),a=o[o.length-1];a&&(e=Qe(a,"next"))}e=e||ti(ue(),"previous").getFlipped().insert(nt())}let i=VO(n,e),r=fd(i),s=Xs(r)?$i(r):i;return md(zk(s)),n.getLatest()}function VO(n,t,e){let i=a0(t,"next");for(let r=i;r;r=qk(r,e))i=r;return Ig(i)&&ep(283),i.insert(n.isInline()?nt().append(n):n),a0(Qe(n.getLatest(),"next"),t.direction)}function kW(n,t){let e=t();return n.replace(e),e.append(n),e}function OW(n,t){return n!==null&&Object.getPrototypeOf(n).constructor.name===t.name}function MW(n,t){let e=[];for(let i=0;i<n.length;i++){let r=t(n[i]);r!==null&&e.push(r)}return e}function RW(n,t){ti(n,"next").insert(t)}var w0=!(zO||!BO)&&void 0;function LW(n){let t=1;if(function(){if(w0===void 0){let e=document.createElement("div");e.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(e);let i=e.getBoundingClientRect();e.style.setProperty("zoom","2"),w0=e.getBoundingClientRect().width===i.width,document.body.removeChild(e)}return w0}())for(;n;)t*=Number(window.getComputedStyle(n).getPropertyValue("zoom")),n=n.parentElement;return t}function DW(n){return n._parentEditor!==null}function IW(n,t){return GO(n,t,null)}function GO(n,t,e){let i=!1;for(let r of k0(n))t(r)?e!==null&&e(r):(i=!0,j(r)&&GO(r,t,e||(s=>r.insertAfter(s))),r.remove());return i}function PW(n,t){let e=[],i=Array.from(n).reverse();for(let r=i.pop();r!==void 0;r=i.pop())if(t(r))e.push(r);else if(j(r))for(let s of k0(r))i.push(s);return e}function FW(n){return qO(ti(n,"next"))}function k0(n){return qO(ti(n,"previous"))}function qO(n){return b0({hasNext:Dg,initial:n.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function $W(n){Gk(Qe(n,"next")).splice(1,n.getChildren())}function BW(n){let t=i=>Gl(i,n),e=(i,r)=>Qs(i,n,r);return{$get:t,$set:e,accessors:[t,e],makeGetterMethod:()=>function(){return t(this)},makeSetterMethod:()=>function(i){return e(this,i)},stateConfig:n}}var ft=O0,M0=ft.$descendantsMatching,Nj=ft.$dfs,kj=ft.$dfsIterator,YO=ft.$filter,pt=ft.$findMatchingParent,Oj=ft.$firstToLastIterator,np=ft.$getAdjacentCaret,Mj=ft.$getAdjacentSiblingOrParentSiblingCaret,Rj=ft.$getDepth,Cd=ft.$getNearestBlockElementAncestorOrThrow,ac=ft.$getNearestNodeOfType,Lj=ft.$getNextRightPreorderNode,Dj=ft.$getNextSiblingOrParentSibling,JO=ft.$insertFirst,XO=ft.$insertNodeToNearestRoot,Ij=ft.$insertNodeToNearestRootAtCaret,Pj=ft.$isEditorIsNestedEditor,Fj=ft.$lastToFirstIterator,$j=ft.$restoreEditorState,Bj=ft.$reverseDfs,zj=ft.$reverseDfsIterator,Hj=ft.$splitNode,R0=ft.$unwrapAndFilterDescendants,Wj=ft.$unwrapNode,Uj=ft.$wrapNodeInElement,Kj=ft.CAN_USE_BEFORE_INPUT,jj=ft.CAN_USE_DOM,Vj=ft.IS_ANDROID,Gj=ft.IS_ANDROID_CHROME,qj=ft.IS_APPLE,Yj=ft.IS_APPLE_WEBKIT,Jj=ft.IS_CHROME,Xj=ft.IS_FIREFOX,Zj=ft.IS_IOS,Qj=ft.IS_SAFARI,It=ft.addClassNamesToElement,ZO=ft.calculateZoomLevel,L0=ft.isBlockDomNode,ip=ft.isHTMLAnchorElement,we=ft.isHTMLElement,tV=ft.isInlineDomNode,eV=ft.isMimeType,nV=ft.makeStateWrapper,iV=ft.markSelection,rV=ft.mediaFileReader,le=ft.mergeRegister,fn=ft.objectKlassEquals,sV=ft.positionNodeOnRange,oV=ft.registerNestedElementResolver,gn=ft.removeClassNamesFromElement,aV=ft.selectionAlwaysOnDisplay;var G0={};an(G0,{$createHorizontalRuleNode:()=>V0,$isHorizontalRuleNode:()=>bM,AutoFocusExtension:()=>WW,ClearEditorExtension:()=>UW,EditorStateExtension:()=>ap,HorizontalRuleExtension:()=>eU,HorizontalRuleNode:()=>ma,INSERT_HORIZONTAL_RULE_COMMAND:()=>QW,InitialStateExtension:()=>pM,LexicalBuilder:()=>dc,NodeSelectionExtension:()=>W0,TabIndentationExtension:()=>nU,batch:()=>rM,buildEditorFromExtensions:()=>qW,computed:()=>aM,configExtension:()=>Gg,declarePeerDependency:()=>aO,defineExtension:()=>Mt,effect:()=>lo,getExtensionDependencyFromEditor:()=>JW,getKnownTypesAndNodes:()=>KW,getPeerDependencyFromEditor:()=>mM,getPeerDependencyFromEditorOrThrow:()=>XW,namedSignals:()=>cp,registerClearEditor:()=>uM,registerTabIndentation:()=>_M,safeCast:()=>en,shallowMergeConfig:()=>oo,signal:()=>uc,untracked:()=>$0,watchedSignal:()=>K0});var zW=Symbol.for("preact-signals");function lp(){if(ao>1)return void ao--;let n,t=!1;for(;Ed!==void 0;){let e=Ed;for(Ed=void 0,B0++;e!==void 0;){let i=e.o;if(e.o=void 0,e.f&=-3,!(8&e.f)&&sM(e))try{e.c()}catch(r){t||(n=r,t=!0)}e=i}}if(B0=0,ao--,t)throw n}function rM(n){if(ao>0)return n();ao++;try{return n()}finally{lp()}}var Ut,Ed;function $0(n){let t=Ut;Ut=void 0;try{return n()}finally{Ut=t}}var ao=0,B0=0,op=0;function QO(n){if(Ut===void 0)return;let t=n.n;return t===void 0||t.t!==Ut?(t={i:0,S:n,p:Ut.s,n:void 0,t:Ut,e:void 0,x:void 0,r:t},Ut.s!==void 0&&(Ut.s.n=t),Ut.s=t,n.n=t,32&Ut.f&&n.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Ut.s,t.n=void 0,Ut.s.n=t,Ut.s=t),t):void 0}function On(n,t){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function uc(n,t){return new On(n,t)}function sM(n){for(let t=n.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tM(n){for(let t=n.s;t!==void 0;t=t.n){let e=t.S.n;if(e!==void 0&&(t.r=e),t.S.n=t,t.i=-1,t.n===void 0){n.s=t;break}}}function oM(n){let t,e=n.s;for(;e!==void 0;){let i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}n.s=t}function pa(n,t){On.call(this,void 0),this.x=n,this.s=void 0,this.g=op-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function aM(n,t){return new pa(n,t)}function lM(n){let t=n.u;if(n.u=void 0,typeof t=="function"){ao++;let e=Ut;Ut=void 0;try{t()}catch(i){throw n.f&=-2,n.f|=8,U0(n),i}finally{Ut=e,lp()}}}function U0(n){for(let t=n.s;t!==void 0;t=t.n)t.S.U(t);n.x=void 0,n.s=void 0,lM(n)}function HW(n){if(Ut!==this)throw new Error("Out-of-order effect");oM(this),Ut=n,this.f&=-2,8&this.f&&U0(this),lp()}function cc(n,t){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function lo(n,t){let e=new cc(n,t);try{e.c()}catch(r){throw e.d(),r}let i=e.d.bind(e);return i[Symbol.dispose]=i,i}function cp(n,t={}){let e={};for(let i in n){let r=t[i],s=uc(r===void 0?n[i]:r);e[i]=s}return e}On.prototype.brand=zW,On.prototype.h=function(){return!0},On.prototype.S=function(n){let t=this.t;t!==n&&n.e===void 0&&(n.x=t,this.t=n,t!==void 0?t.e=n:$0(()=>{var e;(e=this.W)==null||e.call(this)}))},On.prototype.U=function(n){if(this.t!==void 0){let t=n.e,e=n.x;t!==void 0&&(t.x=e,n.e=void 0),e!==void 0&&(e.e=t,n.x=void 0),n===this.t&&(this.t=e,e===void 0&&$0(()=>{var i;(i=this.Z)==null||i.call(this)}))}},On.prototype.subscribe=function(n){return lo(()=>{let t=this.value,e=Ut;Ut=void 0;try{n(t)}finally{Ut=e}},{name:"sub"})},On.prototype.valueOf=function(){return this.value},On.prototype.toString=function(){return this.value+""},On.prototype.toJSON=function(){return this.value},On.prototype.peek=function(){let n=Ut;Ut=void 0;try{return this.value}finally{Ut=n}},Object.defineProperty(On.prototype,"value",{get(){let n=QO(this);return n!==void 0&&(n.i=this.i),this.v},set(n){if(n!==this.v){if(B0>100)throw new Error("Cycle detected");this.v=n,this.i++,op++,ao++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{lp()}}}}),pa.prototype=new On,pa.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===op))return!0;if(this.g=op,this.f|=1,this.i>0&&!sM(this))return this.f&=-2,!0;let n=Ut;try{tM(this),Ut=this;let t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Ut=n,oM(this),this.f&=-2,!0},pa.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}On.prototype.S.call(this,n)},pa.prototype.U=function(n){if(this.t!==void 0&&(On.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},pa.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let n=this.t;n!==void 0;n=n.x)n.t.N()}},Object.defineProperty(pa.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");let n=QO(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}}),cc.prototype.c=function(){let n=this.S();try{if(8&this.f||this.x===void 0)return;let t=this.x();typeof t=="function"&&(this.u=t)}finally{n()}},cc.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,lM(this),tM(this),ao++;let n=Ut;return Ut=this,HW.bind(this,n)},cc.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ed,Ed=this)},cc.prototype.d=function(){this.f|=8,1&this.f||U0(this)},cc.prototype.dispose=function(){this.d()};var WW=Mt({build:(n,t,e)=>cp(t),config:en({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register(n,t,e){let i=e.getOutput();return lo(()=>i.disabled.value?void 0:n.registerRootListener(r=>{n.focus(()=>{let s=document.activeElement;r===null||s!==null&&r.contains(s)||r.focus({preventScroll:!0})},{defaultSelection:i.defaultSelection.peek()})}))}});function cM(){let n=ue(),t=I(),e=nt();n.clear(),n.append(e),t!==null&&e.select(),P(t)&&(t.format=0)}function uM(n,t=cM){return n.registerCommand(Pg,e=>(n.update(t),!0),it)}var UW=Mt({build:(n,t,e)=>cp(t),config:en({$onClear:cM}),name:"@lexical/extension/ClearEditor",register(n,t,e){let{$onClear:i}=e.getOutput();return lo(()=>uM(n,i.value))}});function KW(n){let t=new Set,e=new Set;for(let i of dM(n)){let r=typeof i=="function"?i:i.replace;t.add(r.getType()),e.add(r)}return{nodes:e,types:t}}function dM(n){return(typeof n.nodes=="function"?n.nodes():n.nodes)||[]}function K0(n,t){let e;return uc(n(),{unwatched(){e&&(e(),e=void 0)},watched(){this.value=n(),e=t(this)}})}var ap=Mt({build:n=>K0(()=>n.getEditorState(),t=>n.registerUpdateListener(e=>{t.value=e.editorState})),name:"@lexical/extension/EditorState"});function Vt(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function hM(n,t){if(n&&t&&!Array.isArray(t)&&typeof n=="object"&&typeof t=="object"){let e=n,i=t;for(let r in i)e[r]=hM(e[r],i[r]);return n}return t}var j0=0,z0=1,fM=2,D0=3,rp=4,lc=5,I0=6,Ad=7;function P0(n){return n.id===j0}function gM(n){return n.id===fM}function jW(n){return function(t){return t.id===z0}(n)||Vt(305,String(n.id),String(z0)),Object.assign(n,{id:fM})}var VW=new Set,H0=class{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(t,e){this.builder=t,this.extension=e,this.configs=new Set,this.state={id:j0}}mergeConfigs(){let t=this.extension.config||{},e=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):oo;for(let i of this.configs)t=e(t,i);return t}init(t){let e=this.state;gM(e)||Vt(306,String(e.id));let i={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},r={...i,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},s=function(a,l,c){return Object.assign(a,{config:l,id:D0,registerState:c})}(e,this.mergeConfigs(),i),o;this.state=s,this.extension.init&&(o=this.extension.init(t,s.config,i)),this.state=function(a,l,c){return Object.assign(a,{id:rp,initResult:l,registerState:c})}(s,o,r)}build(t){let e=this.state,i;e.id!==rp&&Vt(307,String(e.id),String(lc)),this.extension.build&&(i=this.extension.build(t,e.config,e.registerState));let r={...e.registerState,getOutput:()=>i,getSignal:this.getSignal.bind(this)};this.state=function(s,o,a){return Object.assign(s,{id:lc,output:o,registerState:a})}(e,i,r)}register(t,e){this._signal=e;let i=this.state;i.id!==lc&&Vt(308,String(i.id),String(lc));let r=this.extension.register&&this.extension.register(t,i.config,i.registerState);return this.state=function(s){return Object.assign(s,{id:I0})}(i),()=>{let s=this.state;s.id!==Ad&&Vt(309,String(i.id),String(Ad)),this.state=function(o){return Object.assign(o,{id:lc})}(s),r&&r()}}afterRegistration(t){let e=this.state,i;return e.id!==I0&&Vt(310,String(e.id),String(I0)),this.extension.afterRegistration&&(i=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=function(r){return Object.assign(r,{id:Ad})}(e),i}getSignal(){return this._signal===void 0&&Vt(311),this._signal}getInitResult(){this.extension.init===void 0&&Vt(312,this.extension.name);let t=this.state;return function(e){return e.id>=rp}(t)||Vt(313,String(t.id),String(rp)),t.initResult}getInitPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0}getExtensionInitDependency(){let t=this.state;return function(e){return e.id>=D0}(t)||Vt(314,String(t.id),String(D0)),{config:t.config}}getPeer(t){let e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}getInitDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&Vt(315,this.extension.name,t.name),e.getExtensionInitDependency()}getDependency(t){let e=this.builder.getExtensionRep(t);return e===void 0&&Vt(315,this.extension.name,t.name),e.getExtensionDependency()}getState(){let t=this.state;return function(e){return e.id>=Ad}(t)||Vt(316,String(t.id),String(Ad)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||VW}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([e])=>e)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){let t=this.state;(function(e){return e.id>=lc})(t)||Vt(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}},eM={tag:ha};function GW(){let n=ue();n.isEmpty()&&n.append(nt())}var pM=Mt({config:en({setOptions:eM,updateOptions:eM}),init:({$initialEditorState:n=GW})=>({$initialEditorState:n,initialized:!1}),afterRegistration(n,{updateOptions:t,setOptions:e},i){let r=i.getInitResult();if(!r.initialized){r.initialized=!0;let{$initialEditorState:s}=r;if(Kk(s))n.setEditorState(s,e);else if(typeof s=="function")n.update(()=>{s(n)},t);else if(s&&(typeof s=="string"||typeof s=="object")){let o=n.parseEditorState(s);n.setEditorState(o,e)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[iO,kn,eO,sO,nO]}),nM=Symbol.for("@lexical/extension/LexicalBuilder");function qW(...n){return dc.fromExtensions(n).buildEditor()}function iM(){}function YW(n){throw n}function sp(n){return Array.isArray(n)?n:[n]}var F0="0.38.2+prod.esm",dc=class n{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(t){this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=F0,this.roots=t;for(let e of t)this.addExtension(e)}static fromExtensions(t){let e=[sp(pM)];for(let i of t)e.push(sp(i));return new n(e)}static maybeFromEditor(t){let e=t[nM];return e&&(e.PACKAGE_VERSION!==F0&&Vt(292,e.PACKAGE_VERSION,F0),e instanceof n||Vt(293)),e}static fromEditor(t){let e=n.maybeFromEditor(t);return e===void 0&&Vt(294),e}constructEditor(){let{$initialEditorState:t,onError:e,...i}=this.buildCreateEditorArgs(),r=Object.assign(oO({...i,...e?{onError:s=>{e(s,r)}}:{}}),{[nM]:this});for(let s of this.sortedExtensionReps())s.build(r);return r}buildEditor(){let t=iM;function e(){try{t()}finally{t=iM}}let i=Object.assign(this.constructEditor(),{dispose:e,[Symbol.dispose]:e});return t=le(this.registerEditor(i),()=>i.setRootElement(null)),i}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){let e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&Vt(295,t.name),e}addEdge(t,e,i){let r=this.outgoingConfigEdges.get(t);r?r.set(e,i):this.outgoingConfigEdges.set(t,new Map([[e,i]]));let s=this.incomingEdges.get(e);s?s.add(t):this.incomingEdges.set(e,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&Vt(296);let e=sp(t),[i]=e;typeof i.name!="string"&&Vt(297,typeof i.name);let r=this.extensionNameMap.get(i.name);if(r!==void 0&&r.extension!==i&&Vt(298,i.name),!r){r=new H0(this,i),this.extensionNameMap.set(i.name,r);let s=this.conflicts.get(i.name);typeof s=="string"&&Vt(299,i.name,s);for(let o of i.conflictsWith||[])this.extensionNameMap.has(o)&&Vt(299,i.name,o),this.conflicts.set(o,i.name);for(let o of i.dependencies||[]){let a=sp(o);this.addEdge(i.name,a[0].name,a.slice(1)),this.addExtension(a)}for(let[o,a]of i.peerDependencies||[])this.addEdge(i.name,o,a?[a]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let t=[],e=(i,r)=>{let s=i.state;if(gM(s))return;let o=i.extension.name;var a;P0(s)||Vt(300,o,r||"[unknown]"),P0(a=s)||Vt(304,String(a.id),String(j0)),s=Object.assign(a,{id:z0}),i.state=s;let l=this.outgoingConfigEdges.get(o);if(l)for(let c of l.keys()){let u=this.extensionNameMap.get(c);u&&e(u,o)}s=jW(s),i.state=s,t.push(i)};for(let i of this.extensionNameMap.values())P0(i.state)&&e(i);for(let i of t)for(let[r,s]of this.outgoingConfigEdges.get(i.extension.name)||[])if(s.length>0){let o=this.extensionNameMap.get(r);if(o)for(let a of s)o.configs.add(a)}for(let[i,...r]of this.roots)if(r.length>0){let s=this.extensionNameMap.get(i.name);s===void 0&&Vt(301,i.name);for(let o of r)s.configs.add(o)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){let e=this.sortedExtensionReps(),i=new AbortController,r=[()=>i.abort()],s=i.signal;for(let o of e){let a=o.register(t,s);a&&r.push(a)}for(let o of e){let a=o.afterRegistration(t);a&&r.push(a)}return le(...r)}buildCreateEditorArgs(){let t={},e=new Set,i=new Map,r=new Map,s={},o={},a=this.sortedExtensionReps();for(let u of a){let{extension:d}=u;if(d.onError!==void 0&&(t.onError=d.onError),d.disableEvents!==void 0&&(t.disableEvents=d.disableEvents),d.parentEditor!==void 0&&(t.parentEditor=d.parentEditor),d.editable!==void 0&&(t.editable=d.editable),d.namespace!==void 0&&(t.namespace=d.namespace),d.$initialEditorState!==void 0&&(t.$initialEditorState=d.$initialEditorState),d.nodes)for(let h of dM(d)){if(typeof h!="function"){let f=i.get(h.replace);f&&Vt(302,d.name,h.replace.name,f.extension.name),i.set(h.replace,u)}e.add(h)}if(d.html){if(d.html.export)for(let[h,f]of d.html.export.entries())r.set(h,f);d.html.import&&Object.assign(s,d.html.import)}d.theme&&hM(o,d.theme)}Object.keys(o).length>0&&(t.theme=o),e.size&&(t.nodes=[...e]);let l=Object.keys(s).length>0,c=r.size>0;(l||c)&&(t.html={},l&&(t.html.import=s),c&&(t.html.export=r));for(let u of a)u.init(t);return t.onError||(t.onError=YW),t}};function JW(n,t){let e=dc.fromEditor(n).getExtensionRep(t);return e===void 0&&Vt(303,t.name),e.getExtensionDependency()}function mM(n,t){let e=dc.fromEditor(n).extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}function XW(n,t){let e=mM(n,t);return e===void 0&&Vt(291,t),e}var ZW=new Set,W0=Mt({build(n,t,e){let i=e.getDependency(ap).output,r=uc({watchedNodeKeys:new Map}),s=K0(()=>{},()=>lo(()=>{let o=s.peek(),{watchedNodeKeys:a}=r.value,l,c=!1;i.value.read(()=>{if(I())for(let[u,d]of a.entries()){if(d.size===0){a.delete(u);continue}let h=Qt(u),f=h&&h.isSelected()||!1;c=c||f!==(!!o&&o.has(u)),f&&(l=l||new Set,l.add(u))}}),!c&&l&&o&&l.size===o.size||(s.value=l)}));return{watchNodeKey:function(o){let a=aM(()=>(s.value||ZW).has(o)),{watchedNodeKeys:l}=r.peek(),c=l.get(o),u=c!==void 0;return c=c||new Set,c.add(a),u||(l.set(o,c),r.value={watchedNodeKeys:l}),a}}},dependencies:[ap],name:"@lexical/extension/NodeSelection"}),QW=hn("INSERT_HORIZONTAL_RULE_COMMAND"),ma=class n extends zn{static getType(){return"horizontalrule"}static clone(t){return new n(t.__key)}static importJSON(t){return V0().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:tU,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){let e=document.createElement("hr");return It(e,t.theme.hr),e}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function tU(){return{node:V0()}}function V0(){return Vl(ma)}function bM(n){return n instanceof ma}var eU=Mt({dependencies:[ap,W0],name:"@lexical/extension/HorizontalRule",nodes:[ma],register(n,t,e){let{watchNodeKey:i}=e.getDependency(W0).output,r=uc({nodeSelections:new Map}),s=n._config.theme.hrSelected??"selected";return le(n.registerCommand(Jl,o=>{if(_i(o.target)){let a=Hk(o.target);if(bM(a))return function(l,c=!1){let u=I(),d=l.isSelected(),h=l.getKey(),f;c&&be(u)?f=u:(f=dd(),te(f)),d?f.delete(h):f.add(h)}(a,o.shiftKey),!0}return!1},wt),n.registerMutationListener(ma,(o,a)=>{rM(()=>{let l=!1,{nodeSelections:c}=r.peek();for(let[u,d]of o.entries())if(d==="destroyed")c.delete(u),l=!0;else{let h=c.get(u),f=n.getElementByKey(u);h?h.domNode.value=f:(l=!0,c.set(u,{domNode:uc(f),selectedSignal:i(u)}))}l&&(r.value={nodeSelections:c})})}),lo(()=>{let o=[];for(let{domNode:a,selectedSignal:l}of r.value.nodeSelections.values())o.push(lo(()=>{let c=a.value;c&&(l.value?It(c,s):gn(c,s))}));return le(...o)}))}});function _M(n,t){return le(n.registerCommand(bi,e=>{let i=I();if(!P(i))return!1;e.preventDefault();let r=function(s){let o=s.getNodes();if(YO(o,h=>ql(h)&&h.canIndent()?h:null).length>0)return!0;let a=s.anchor,l=s.focus,c=l.isBefore(a)?l:a,u=c.getNode(),d=Cd(u);if(d.canIndent()){let h=d.getKey(),f=cr();if(f.anchor.set(h,0,"element"),f.focus.set(h,0,"element"),f=os(f),f.anchor.is(c))return!0}return!1}(i)?e.shiftKey?ni:wn:to;return n.dispatchCommand(r,void 0)},it),n.registerCommand(wn,()=>{let e=typeof t=="number"?t:t?t.peek():null;if(e==null)return!1;let i=I();if(!P(i))return!1;let r=i.getNodes().map(s=>Cd(s).getIndent());return Math.max(...r)+1>=e},$g))}var nU=Mt({build:(n,t,e)=>cp(t),config:en({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register(n,t,e){let{disabled:i,maxIndent:r}=e.getOutput();return lo(()=>{if(!i.value)return _M(n,r)})}});var Bt=G0,hV=Bt.$createHorizontalRuleNode,fV=Bt.$isHorizontalRuleNode,gV=Bt.AutoFocusExtension,pV=Bt.ClearEditorExtension,mV=Bt.EditorStateExtension,bV=Bt.HorizontalRuleExtension,_V=Bt.HorizontalRuleNode,xV=Bt.INSERT_HORIZONTAL_RULE_COMMAND,yV=Bt.InitialStateExtension,vV=Bt.LexicalBuilder,SV=Bt.NodeSelectionExtension,CV=Bt.TabIndentationExtension,xM=Bt.batch,yM=Bt.buildEditorFromExtensions,AV=Bt.computed,EV=Bt.configExtension,TV=Bt.declarePeerDependency,wV=Bt.defineExtension,Mn=Bt.effect,NV=Bt.getExtensionDependencyFromEditor,kV=Bt.getKnownTypesAndNodes,vM=Bt.getPeerDependencyFromEditor,OV=Bt.getPeerDependencyFromEditorOrThrow,Hi=Bt.namedSignals,MV=Bt.registerClearEditor,RV=Bt.registerTabIndentation,LV=Bt.safeCast,DV=Bt.shallowMergeConfig,IV=Bt.signal,PV=Bt.untracked,FV=Bt.watchedSignal;var Z0={};an(Z0,{$createListItemNode:()=>ii,$createListNode:()=>Hn,$getListDepth:()=>up,$handleListInsertParagraph:()=>LM,$insertList:()=>Td,$isListItemNode:()=>Nt,$isListNode:()=>xt,$removeList:()=>X0,CheckListExtension:()=>uU,INSERT_CHECK_LIST_COMMAND:()=>DM,INSERT_ORDERED_LIST_COMMAND:()=>BM,INSERT_UNORDERED_LIST_COMMAND:()=>$M,ListExtension:()=>UM,ListItemNode:()=>uo,ListNode:()=>_a,REMOVE_LIST_COMMAND:()=>zM,UPDATE_LIST_START_COMMAND:()=>FM,insertList:()=>lU,registerCheckList:()=>IM,registerList:()=>HM,registerListStrictIndentTransform:()=>WM,removeList:()=>cU});function co(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function up(n){let t=1,e=n.getParent();for(;e!=null;){if(Nt(e)){let i=e.getParent();if(xt(i)){t++,e=i.getParent();continue}co(40)}return t}return t}function q0(n){let t=n.getParent();xt(t)||co(40);let e=t;for(;e!==null;)e=e.getParent(),xt(e)&&(t=e);return t}function OM(n){let t=[],e=n.getChildren().filter(Nt);for(let i=0;i<e.length;i++){let r=e[i],s=r.getFirstChild();xt(s)?t=t.concat(OM(s)):t.push(r)}return t}function mr(n){return Nt(n)&&xt(n.getFirstChild())}function SM(n){return ii().append(n)}function MM(n,t){return Nt(n)&&(t.length===0||t.length===1&&n.is(t[0])&&n.getChildrenSize()===0)}function Td(n){let t=I();if(t!==null){let e=t.getNodes();if(P(t)){let r=t.getStartEndPoints();r===null&&co(143);let[s]=r,o=s.getNode(),a=o.getParent();if(Le(o)){let l=o.getFirstChild();if(l)e=l.selectStart().getNodes();else{let c=nt();o.append(c),e=c.select().getNodes()}}else if(MM(o,e)){let l=Hn(n);if(Le(a)){o.replace(l);let c=ii();j(o)&&(c.setFormat(o.getFormatType()),c.setIndent(o.getIndent())),l.append(c)}else if(Nt(o)){let c=o.getParentOrThrow();ba(l,c.getChildren()),c.replace(l)}return}}let i=new Set;for(let r=0;r<e.length;r++){let s=e[r];if(j(s)&&s.isEmpty()&&!Nt(s)&&!i.has(s.getKey())){CM(s,n);continue}let o=pd(s)?s.getParent():Nt(s)&&s.isEmpty()?s:null;for(;o!=null;){let a=o.getKey();if(xt(o)){if(!i.has(a)){let l=Hn(n);ba(l,o.getChildren()),o.replace(l),i.add(a)}break}{let l=o.getParent();if(Le(l)&&!i.has(a)){i.add(a),CM(o,n);break}o=l}}}}}function ba(n,t){n.splice(n.getChildrenSize(),0,t)}function CM(n,t){if(xt(n))return n;let e=n.getPreviousSibling(),i=n.getNextSibling(),r=ii(),s;if(ba(r,n.getChildren()),xt(e)&&t===e.getListType())e.append(r),xt(i)&&t===i.getListType()&&(ba(e,i.getChildren()),i.remove()),s=e;else if(xt(i)&&t===i.getListType())i.getFirstChildOrThrow().insertBefore(r),s=i;else{let o=Hn(t);o.append(r),n.replace(o),s=o}return r.setFormat(n.getFormatType()),r.setIndent(n.getIndent()),n.remove(),s}function J0(n,t){let e=n.getLastChild(),i=t.getFirstChild();e&&i&&mr(e)&&mr(i)&&(J0(e.getFirstChild(),i.getFirstChild()),i.remove());let r=t.getChildren();r.length>0&&n.append(...r),t.remove()}function X0(){let n=I();if(P(n)){let t=new Set,e=n.getNodes(),i=n.anchor.getNode();if(MM(i,e))t.add(q0(i));else for(let r=0;r<e.length;r++){let s=e[r];if(pd(s)){let o=ac(s,uo);o!=null&&t.add(q0(o))}}for(let r of t){let s=r,o=OM(r);for(let a of o){let l=nt().setTextStyle(n.style).setTextFormat(n.format);ba(l,a.getChildren()),s.insertAfter(l),s=l,a.__key===n.anchor.key&&Zs(n.anchor,$i(ti(l,"next"))),a.__key===n.focus.key&&Zs(n.focus,$i(ti(l,"next"))),a.remove()}r.remove()}}}function RM(n){let t=n.getListType()!=="check",e=n.getStart();for(let i of n.getChildren())Nt(i)&&(i.getValue()!==e&&i.setValue(e),t&&i.getLatest().__checked!=null&&i.setChecked(void 0),xt(i.getFirstChild())||e++)}function iU(n){let t=new Set;if(mr(n)||t.has(n.getKey()))return;let e=n.getParent(),i=n.getNextSibling(),r=n.getPreviousSibling();if(mr(i)&&mr(r)){let s=r.getFirstChild();if(xt(s)){s.append(n);let o=i.getFirstChild();xt(o)&&(ba(s,o.getChildren()),i.remove(),t.add(i.getKey()))}}else if(mr(i)){let s=i.getFirstChild();if(xt(s)){let o=s.getFirstChild();o!==null&&o.insertBefore(n)}}else if(mr(r)){let s=r.getFirstChild();xt(s)&&s.append(n)}else if(xt(e)){let s=ii().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),o=Hn(e.getListType()).setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle());s.append(o),o.append(n),r?r.insertAfter(s):i?i.insertBefore(s):e.append(s)}}function rU(n){if(mr(n))return;let t=n.getParent(),e=t?t.getParent():void 0;if(xt(e?e.getParent():void 0)&&Nt(e)&&xt(t)){let i=t?t.getFirstChild():void 0,r=t?t.getLastChild():void 0;if(n.is(i))e.insertBefore(n),t.isEmpty()&&e.remove();else if(n.is(r))e.insertAfter(n),t.isEmpty()&&e.remove();else{let s=t.getListType(),o=ii(),a=Hn(s);o.append(a),n.getPreviousSiblings().forEach(u=>a.append(u));let l=ii(),c=Hn(s);l.append(c),ba(c,n.getNextSiblings()),e.insertBefore(o),e.insertAfter(l),e.replace(n)}}}function LM(){let n=I();if(!P(n)||!n.isCollapsed())return!1;let t=n.anchor.getNode();if(!Nt(t)||t.getChildrenSize()!==0)return!1;let e=q0(t),i=t.getParent();xt(i)||co(40);let r=i.getParent(),s;if(Le(r))s=nt(),e.insertAfter(s);else{if(!Nt(r))return!1;s=ii(),r.insertAfter(s)}s.setTextStyle(n.style).setTextFormat(n.format).select();let o=t.getNextSiblings();if(o.length>0){let a=Hn(i.getListType());if(Nt(s)){let l=ii();l.append(a),s.insertAfter(l)}else s.insertAfter(a);a.append(...o)}return function(a){let l=a;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){let c=l.getParent();if(c==null||!Nt(c)&&!xt(c))break;l=c}l.remove()}(t),!0}function dp(...n){let t=[];for(let e of n)if(e&&typeof e=="string")for(let[i]of e.matchAll(/\S+/g))t.push(i);return t}var uo=class extends Ue{__value;__checked;$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;let e=t.getParent();xt(e)&&e.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:Ue,importDOM:g0({li:()=>({conversion:sU,priority:0})})})}constructor(t=1,e=void 0,i){super(i),this.__value=t===void 0?1:t,this.__checked=e}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){let e=document.createElement("li");return this.updateListItemDOM(null,e,t),e}updateListItemDOM(t,e,i){(function(o,a,l){let c=a.getParent();!xt(c)||c.getListType()!=="check"||xt(a.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),l&&a.__checked===l.__checked||o.setAttribute("aria-checked",a.getChecked()?"true":"false"))})(e,this,t),e.value=this.__value,function(o,a,l){let c=[],u=[],d=a.list,h=d?d.listitem:void 0,f;if(d&&d.nested&&(f=d.nested.listitem),h!==void 0&&c.push(...dp(h)),d){let g=l.getParent(),m=xt(g)&&g.getListType()==="check",p=l.getChecked();m&&!p||u.push(d.listitemUnchecked),m&&p||u.push(d.listitemChecked),m&&c.push(p?d.listitemChecked:d.listitemUnchecked)}if(f!==void 0){let g=dp(f);l.getChildren().some(m=>xt(m))?c.push(...g):u.push(...g)}u.length>0&&gn(o,...u),c.length>0&&It(o,...c)}(e,i.theme,this);let r=t?t.__style:"",s=this.__style;r!==s&&(s===""?e.removeAttribute("style"):e.style.cssText=s),function(o,a,l){let c=ga(a.__textStyle);for(let u in c)o.style.setProperty(`--listitem-marker-${u}`,c[u]);if(l)for(let u in ga(l.__textStyle))u in c||o.style.removeProperty(`--listitem-marker-${u}`)}(e,this,t)}updateDOM(t,e,i){let r=e;return this.updateListItemDOM(t,r,i),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){let e=this.createDOM(t._config),i=this.getFormatType();i&&(e.style.textAlign=i);let r=this.getDirection();return r&&(e.dir=r),{element:e}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let e=0;e<t.length;e++){let i=t[e];if(j(i)&&this.canMergeWith(i)){let r=i.getChildren();this.append(...r),i.remove()}else super.append(i)}return this}replace(t,e){if(Nt(t))return super.replace(t);this.setIndent(0);let i=this.getParentOrThrow();if(!xt(i))return t;if(i.__first===this.getKey())i.insertBefore(t);else if(i.__last===this.getKey())i.insertAfter(t);else{let r=Hn(i.getListType()),s=this.getNextSibling();for(;s;){let o=s;s=s.getNextSibling(),r.append(o)}i.insertAfter(t),t.insertAfter(r)}return e&&(j(t)||co(139),this.getChildren().forEach(r=>{t.append(r)})),this.remove(),i.getChildrenSize()===0&&i.remove(),t}insertAfter(t,e=!0){let i=this.getParentOrThrow();if(xt(i)||co(39),Nt(t))return super.insertAfter(t,e);let r=this.getNextSiblings();if(i.insertAfter(t,e),r.length!==0){let s=Hn(i.getListType());r.forEach(o=>s.append(o)),t.insertAfter(s,e)}return t}remove(t){let e=this.getPreviousSibling(),i=this.getNextSibling();super.remove(t),e&&i&&mr(e)&&mr(i)&&(J0(e.getFirstChild(),i.getFirstChild()),i.remove())}insertNewAfter(t,e=!0){let i=ii().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(i,e),i}collapseAtStart(t){let e=nt();this.getChildren().forEach(o=>e.append(o));let i=this.getParentOrThrow(),r=i.getParentOrThrow(),s=Nt(r);if(i.getChildrenSize()===1)if(s)i.remove(),r.select();else{i.insertBefore(e),i.remove();let o=t.anchor,a=t.focus,l=e.getKey();o.type==="element"&&o.getNode().is(this)&&o.set(l,o.offset,"element"),a.type==="element"&&a.getNode().is(this)&&a.set(l,a.offset,"element")}else i.insertBefore(e),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){let e=this.getWritable();return e.__value=t,e}getChecked(){let t=this.getLatest(),e,i=this.getParent();return xt(i)&&(e=i.getListType()),e==="check"?!!t.__checked:void 0}setChecked(t){let e=this.getWritable();return e.__checked=t,e}toggleChecked(){let t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){let t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let e=t.getParentOrThrow(),i=0;for(;Nt(e);)e=e.getParentOrThrow().getParentOrThrow(),i++;return i}setIndent(t){typeof t!="number"&&co(117),(t=Math.floor(t))>=0||co(199);let e=this.getIndent();for(;e!==t;)e<t?(iU(this),e++):(rU(this),e--);return this}canInsertAfter(t){return Nt(t)}canReplaceWith(t){return Nt(t)}canMergeWith(t){return Nt(t)||We(t)}extractWithChild(t,e){if(!P(e))return!1;let i=e.anchor.getNode(),r=e.focus.getNode();return this.isParentOf(i)&&this.isParentOf(r)&&this.getTextContent().length===e.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Hn("bullet")}canMergeWhenEmpty(){return!0}};function sU(n){if(n.classList.contains("task-list-item")){for(let e of n.children)if(e.tagName==="INPUT")return AM(e)}if(n.classList.contains("joplin-checkbox")){for(let e of n.children)if(e.classList.contains("checkbox-wrapper")&&e.children.length>0&&e.children[0].tagName==="INPUT")return AM(e.children[0])}let t=n.getAttribute("aria-checked");return{node:ii(t==="true"||t!=="false"&&void 0)}}function AM(n){return n.getAttribute("type")!=="checkbox"?{node:null}:{node:ii(n.hasAttribute("checked"))}}function ii(n){return Xe(new uo(void 0,n))}function Nt(n){return n instanceof uo}var _a=class extends Ue{__tag;__start;__listType;$config(){return this.config("list",{$transform:t=>{(function(e){let i=e.getNextSibling();xt(i)&&e.getListType()===i.getListType()&&J0(e,i)})(t),RM(t)},extends:Ue,importDOM:g0({ol:()=>({conversion:TM,priority:0}),ul:()=>({conversion:TM,priority:0})})})}constructor(t="number",e=1,i){super(i);let r=aU[t]||t;this.__listType=r,this.__tag=r==="number"?"ol":"ul",this.__start=e}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){let e=this.getWritable();return e.__listType=t,e.__tag=t==="number"?"ol":"ul",e}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){let e=this.getWritable();return e.__start=t,e}createDOM(t,e){let i=this.__tag,r=document.createElement(i);return this.__start!==1&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,EM(r,t.theme,this),r}updateDOM(t,e,i){return t.__tag!==this.__tag||t.__listType!==this.__listType||(EM(e,i.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){let e=this.createDOM(t._config,t);return we(e)&&(this.__start!==1&&e.setAttribute("start",String(this.__start)),this.__listType==="check"&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,e,i){let r=i;for(let s=0;s<i.length;s++){let o=i[s];Nt(o)||(r===i&&(r=[...i]),r[s]=ii().append(!j(o)||xt(o)||o.isInline()?o:Ft(o.getTextContent())))}return super.splice(t,e,r)}extractWithChild(t){return Nt(t)}};function EM(n,t,e){let i=[],r=[],s=t.list;if(s!==void 0){let o=s[`${e.__tag}Depth`]||[],a=up(e)-1,l=a%o.length,c=o[l],u=s[e.__tag],d,h=s.nested,f=s.checklist;if(h!==void 0&&h.list&&(d=h.list),u!==void 0&&i.push(u),f!==void 0&&e.__listType==="check"&&i.push(f),c!==void 0){i.push(...dp(c));for(let g=0;g<o.length;g++)g!==l&&r.push(e.__tag+g)}if(d!==void 0){let g=dp(d);a>1?i.push(...g):r.push(...g)}}r.length>0&&gn(n,...r),i.length>0&&It(n,...i)}function oU(n){let t=[];for(let e=0;e<n.length;e++){let i=n[e];if(Nt(i)){t.push(i);let r=i.getChildren();r.length>1&&r.forEach(s=>{xt(s)&&t.push(SM(s))})}else t.push(SM(i))}return t}function TM(n){let t=n.nodeName.toLowerCase(),e=null;return t==="ol"?e=Hn("number",n.start):t==="ul"&&(e=function(i){if(i.getAttribute("__lexicallisttype")==="check"||i.classList.contains("contains-task-list")||i.getAttribute("data-is-checklist")==="1")return!0;for(let r of i.childNodes)if(we(r)&&r.hasAttribute("aria-checked"))return!0;return!1}(n)?Hn("check"):Hn("bullet")),{after:oU,node:e}}var aU={ol:"number",ul:"bullet"};function Hn(n="number",t=1){return Xe(new _a(n,t))}function xt(n){return n instanceof _a}var DM=hn("INSERT_CHECK_LIST_COMMAND");function IM(n){return le(n.registerCommand(DM,()=>(Td("check"),!0),wt),n.registerCommand(ei,t=>kM(t,n,!1),wt),n.registerCommand(Nn,t=>kM(t,n,!0),wt),n.registerCommand(ic,()=>{if(Y0()!=null){let t=n.getRootElement();return t?.focus(),!0}return!1},wt),n.registerCommand(rc,t=>{let e=Y0();return!(e==null||!n.isEditable())&&(n.update(()=>{let i=Re(e);Nt(i)&&(t.preventDefault(),i.toggleChecked())}),!0)},wt),n.registerCommand(fr,t=>n.getEditorState().read(()=>{let e=I();if(P(e)&&e.isCollapsed()){let{anchor:i}=e,r=i.type==="element";if(r||i.offset===0){let s=i.getNode(),o=pt(s,a=>j(a)&&!a.isInline());if(Nt(o)){let a=o.getParent();if(xt(a)&&a.getListType()==="check"&&(r||o.getFirstDescendant()===s)){let l=n.getElementByKey(o.__key);if(l!=null&&document.activeElement!==l)return l.focus(),t.preventDefault(),!0}}}}return!1}),wt),n.registerRootListener((t,e)=>{t!==null&&(t.addEventListener("click",wM),t.addEventListener("pointerdown",NM)),e!==null&&(e.removeEventListener("click",wM),e.removeEventListener("pointerdown",NM))}))}function PM(n,t){let e=n.target;if(!we(e))return;let i=e.firstChild;if(we(i)&&(i.tagName==="UL"||i.tagName==="OL"))return;let r=e.parentNode;if(!r||r.__lexicalListType!=="check")return;let s=e.getBoundingClientRect(),o=ZO(e),a=n.clientX/o,l=window.getComputedStyle?window.getComputedStyle(e,"::before"):{width:"0px"},c=parseFloat(l.width),u=n.pointerType==="touch"?32:0;(e.dir==="rtl"?a<s.right+u&&a>s.right-c-u:a>s.left-u&&a<s.left+c+u)&&t()}function wM(n){PM(n,()=>{if(we(n.target)){let t=n.target,e=Yg(t);e!=null&&e.isEditable()&&e.update(()=>{let i=Re(t);Nt(i)&&(t.focus(),i.toggleChecked())})}})}function NM(n){PM(n,()=>{n.preventDefault()})}function Y0(){let n=document.activeElement;return we(n)&&n.tagName==="LI"&&n.parentNode!=null&&n.parentNode.__lexicalListType==="check"?n:null}function kM(n,t,e){let i=Y0();return i!=null&&t.update(()=>{let r=Re(i);if(!Nt(r))return;let s=function(o,a){let l=a?o.getPreviousSibling():o.getNextSibling(),c=o;for(;l==null&&Nt(c);)c=c.getParentOrThrow().getParent(),c!=null&&(l=a?c.getPreviousSibling():c.getNextSibling());for(;Nt(l);){let u=a?l.getLastChild():l.getFirstChild();if(!xt(u))return l;l=a?u.getLastChild():u.getFirstChild()}return null}(r,e);if(s!=null){s.selectStart();let o=t.getElementByKey(s.__key);o!=null&&(n.preventDefault(),setTimeout(()=>{o.focus()},0))}}),!1}var FM=hn("UPDATE_LIST_START_COMMAND"),$M=hn("INSERT_UNORDERED_LIST_COMMAND"),BM=hn("INSERT_ORDERED_LIST_COMMAND"),zM=hn("REMOVE_LIST_COMMAND");function HM(n){return le(n.registerCommand(BM,()=>(Td("number"),!0),wt),n.registerCommand(FM,t=>{let{listNodeKey:e,newStart:i}=t,r=Qt(e);return!!xt(r)&&(r.getListType()==="number"&&(r.setStart(i),RM(r)),!0)},wt),n.registerCommand($M,()=>(Td("bullet"),!0),wt),n.registerCommand(zM,()=>(X0(),!0),wt),n.registerCommand(hr,()=>LM(),wt),n.registerNodeTransform(uo,t=>{let e=t.getFirstChild();if(e){if(J(e)){let i=e.getStyle(),r=e.getFormat();t.getTextStyle()!==i&&t.setTextStyle(i),t.getTextFormat()!==r&&t.setTextFormat(r)}}else{let i=I();P(i)&&(i.style!==t.getTextStyle()||i.format!==t.getTextFormat())&&i.isCollapsed()&&t.is(i.anchor.getNode())&&t.setTextStyle(i.style).setTextFormat(i.format)}}),n.registerNodeTransform(kn,t=>{let e=t.getParent();if(Nt(e)&&t.is(e.getFirstChild())){let i=t.getStyle(),r=t.getFormat();i===e.getTextStyle()&&r===e.getTextFormat()||e.setTextStyle(i).setTextFormat(r)}}))}function WM(n){let t=e=>{let i=e.getParent();if(xt(e.getFirstChild())||!xt(i))return;let r=pt(e,s=>Nt(s)&&xt(s.getParent())&&Nt(s.getPreviousSibling()));if(r===null&&e.getIndent()>0)e.setIndent(0);else if(Nt(r)){let s=r.getPreviousSibling();if(Nt(s)){let o=function(l){let c=l,u=c.getFirstChild();for(;xt(u);){let d=u.getLastChild();if(!Nt(d))break;c=d,u=c.getFirstChild()}return c}(s),a=o.getParent();if(xt(a)){let l=up(a);l+1<up(i)&&e.setIndent(l)}}}};return n.registerNodeTransform(_a,e=>{let i=[e];for(;i.length>0;){let r=i.shift();if(xt(r)){for(let s of r.getChildren())if(Nt(s)){t(s);let o=s.getFirstChild();xt(o)&&i.push(o)}}}})}function lU(n,t){n.update(()=>Td(t))}function cU(n){n.update(()=>X0())}var UM=Mt({build:(n,t,e)=>Hi(t),config:en({hasStrictIndent:!1}),name:"@lexical/list/List",nodes:[_a,uo],register(n,t,e){let i=e.getOutput();return le(HM(n),Mn(()=>i.hasStrictIndent.value?WM(n):void 0))}}),uU=Mt({dependencies:[UM],name:"@lexical/list/CheckList",register:IM});var ye=Z0,KM=ye.$createListItemNode,hp=ye.$createListNode,jM=ye.$getListDepth,UV=ye.$handleListInsertParagraph,KV=ye.$insertList,br=ye.$isListItemNode,nn=ye.$isListNode,jV=ye.$removeList,VV=ye.CheckListExtension,GV=ye.INSERT_CHECK_LIST_COMMAND,VM=ye.INSERT_ORDERED_LIST_COMMAND,GM=ye.INSERT_UNORDERED_LIST_COMMAND,qV=ye.ListExtension,hc=ye.ListItemNode,xa=ye.ListNode,YV=ye.REMOVE_LIST_COMMAND,JV=ye.UPDATE_LIST_START_COMMAND,XV=ye.insertList,ZV=ye.registerCheckList,qM=ye.registerList,QV=ye.registerListStrictIndentTransform,tG=ye.removeList;var Q0={};an(Q0,{$generateHtmlFromNodes:()=>hU,$generateNodesFromDOM:()=>dU});function dU(n,t){let e=hO(t)?t.body.childNodes:t.childNodes,i=[],r=[];for(let s of e)if(!JM.has(s.nodeName)){let o=XM(s,n,r,!1);o!==null&&(i=i.concat(o))}return function(s){for(let o of s)o.getNextSibling()instanceof h0&&o.insertAfter(Ze());for(let o of s){let a=o.getChildren();for(let l of a)o.insertBefore(l);o.remove()}}(r),i}function hU(n,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let e=document.createElement("div"),i=ue().getChildren();for(let r=0;r<i.length;r++)YM(n,i[r],e,t);return e.innerHTML}function YM(n,t,e,i=null){let r=i===null||t.isSelected(i),s=j(t)&&t.excludeFromCopy("html"),o=t;i!==null&&J(t)&&(o=Qg(i,t,"clone"));let a=j(o)?o.getChildren():[],l=cO(n,o.getType()),c;c=l&&l.exportDOM!==void 0?l.exportDOM(n,o):o.exportDOM(n);let{element:u,after:d}=c;if(!u)return!1;let h=document.createDocumentFragment();for(let f=0;f<a.length;f++){let g=a[f],m=YM(n,g,h,i);!r&&j(t)&&m&&t.extractWithChild(g,i,"html")&&(r=!0)}if(r&&!s){if((we(u)||m0(u))&&u.append(h),e.append(u),d){let f=d.call(o,u);f&&(m0(u)?u.replaceChildren(f):u.replaceWith(f))}}else e.append(h);return r}var JM=new Set(["STYLE","SCRIPT"]);function XM(n,t,e,i,r=new Map,s){let o=[];if(JM.has(n.nodeName))return o;let a=null,l=function(g,m){let{nodeName:p}=g,b=m._htmlConversions.get(p.toLowerCase()),_=null;if(b!==void 0)for(let x of b){let y=x(g);y!==null&&(_===null||(_.priority||0)<=(y.priority||0))&&(_=y)}return _!==null?_.conversion:null}(n,t),c=l?l(n):null,u=null;if(c!==null){u=c.after;let g=c.node;if(a=Array.isArray(g)?g[g.length-1]:g,a!==null){for(let[,m]of r)if(a=m(a,s),!a)break;a&&o.push(...Array.isArray(g)?g:[a])}c.forChild!=null&&r.set(n.nodeName,c.forChild)}let d=n.childNodes,h=[],f=(a==null||!Le(a))&&(a!=null&&ql(a)||i);for(let g=0;g<d.length;g++)h.push(...XM(d[g],t,e,f,new Map(r),a));return u!=null&&(h=u(h)),L0(n)&&(h=fU(n,h,f?()=>{let g=new h0;return e.push(g),g}:nt)),a==null?h.length>0?o=o.concat(h):L0(n)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:Sd(g.nextSibling)&&Sd(g.previousSibling)}(n)&&(o=o.concat(Ze())):j(a)&&a.append(...h),o}function fU(n,t,e){let i=n.style.textAlign,r=[],s=[];for(let o=0;o<t.length;o++){let a=t[o];if(ql(a))i&&!a.getFormat()&&a.setFormat(i),r.push(a);else if(s.push(a),o===t.length-1||o<t.length-1&&ql(t[o+1])){let l=e();l.setFormat(i),l.append(...s),r.push(l),s=[]}}return r}var ZM=Q0,fp=ZM.$generateHtmlFromNodes,ya=ZM.$generateNodesFromDOM;var ev={};an(ev,{$generateJSONFromSelectedNodes:()=>iR,$generateNodesFromSerializedNodes:()=>rR,$getClipboardDataFromSelection:()=>oR,$getHtmlContent:()=>tR,$getLexicalContent:()=>eR,$insertDataTransferForPlainText:()=>gU,$insertDataTransferForRichText:()=>pU,$insertGeneratedNodes:()=>tv,copyToClipboard:()=>mU,setLexicalClipboardDataTransfer:()=>aR});function gp(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function tR(n,t=I()){return t==null&&gp(166),P(t)&&t.isCollapsed()||t.getNodes().length===0?"":fp(n,t)}function eR(n,t=I()){return t==null&&gp(166),P(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(iR(n,t))}function gU(n,t){let e=n.getData("text/plain")||n.getData("text/uri-list");e!=null&&t.insertRawText(e)}function pU(n,t,e){let i=n.getData("application/x-lexical-editor");if(i)try{let a=JSON.parse(i);if(a.namespace===e._config.namespace&&Array.isArray(a.nodes))return tv(e,rR(a.nodes),t)}catch(a){console.error(a)}let r=n.getData("text/html"),s=n.getData("text/plain");if(r&&s!==r)try{let a=new DOMParser().parseFromString(function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:c=>c}).createHTML(l):l}(r),"text/html");return tv(e,ya(e,a),t)}catch(a){console.error(a)}let o=s||n.getData("text/uri-list");if(o!=null)if(P(t)){let a=o.split(/(\r?\n|\t)/);a[a.length-1]===""&&a.pop();for(let l=0;l<a.length;l++){let c=I();if(P(c)){let u=a[l];u===`
`||u===`\r
`?c.insertParagraph():u==="	"?c.insertNodes([Qn()]):c.insertText(u)}}}else t.insertRawText(o)}function tv(n,t,e){n.dispatchCommand(vd,{nodes:t,selection:e})||(e.insertNodes(t),function(i){if(P(i)&&i.isCollapsed()){let r=i.anchor,s=null,o=qs(r,"previous");if(o)if(Ig(o))s=o.origin;else{let a=gd(o,ti(ue(),"next").getFlipped());for(let l of a){if(J(l.origin)){s=l.origin;break}if(j(l.origin)&&!l.origin.isInline())break}}if(s&&J(s)){let a=s.getFormat(),l=s.getStyle();i.format===a&&i.style===l||(i.format=a,i.style=l,i.dirty=!0)}}}(e))}function nR(n,t,e,i=[]){let r=t===null||e.isSelected(t),s=j(e)&&e.excludeFromCopy("html"),o=e;t!==null&&J(o)&&(o=Qg(t,o,"clone"));let a=j(o)?o.getChildren():[],l=function(c){let u=c.exportJSON(),d=c.constructor;if(u.type!==d.getType()&&gp(58,d.name),j(c)){let h=u.children;Array.isArray(h)||gp(59,d.name)}return u}(o);J(o)&&o.getTextContentSize()===0&&(r=!1);for(let c=0;c<a.length;c++){let u=a[c],d=nR(n,t,u,l.children);!r&&j(e)&&d&&e.extractWithChild(u,t,"clone")&&(r=!0)}if(r&&!s)i.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){let u=l.children[c];i.push(u)}return r}function iR(n,t){let e=[],i=ue().getChildren();for(let r=0;r<i.length;r++)nR(n,t,i[r],e);return{namespace:n._config.namespace,nodes:e}}function rR(n){let t=[];for(let e=0;e<n.length;e++){let i=n[e],r=Vk(i);J(r)&&kO(r),t.push(r)}return t}var fc=null;async function mU(n,t,e){if(fc!==null)return!1;if(t!==null)return new Promise((c,u)=>{n.update(()=>{c(QM(n,t,e))})});let i=n.getRootElement(),r=n._window||window,s=r.document,o=so(r);if(i===null||o===null)return!1;let a=s.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(s.createTextNode("#")),i.append(a);let l=new Range;return l.setStart(a,0),l.setEnd(a,1),o.removeAllRanges(),o.addRange(l),new Promise((c,u)=>{let d=n.registerCommand(Zl,h=>(fn(h,ClipboardEvent)&&(d(),fc!==null&&(r.clearTimeout(fc),fc=null),c(QM(n,h,e))),!0),$g);fc=r.setTimeout(()=>{d(),fc=null,c(!1)},50),s.execCommand("copy"),a.remove()})}function QM(n,t,e){if(e===void 0){let r=so(n._window),s=I();if(!s||s.isCollapsed()||!r)return!1;let o=r.anchorNode,a=r.focusNode;if(o!==null&&a!==null&&!pO(n,o,a))return!1;e=oR(s)}t.preventDefault();let i=t.clipboardData;return i!==null&&(aR(i,e),!0)}var sR=[["text/html",tR],["application/x-lexical-editor",eR]];function oR(n=I()){let t={"text/plain":n?n.getTextContent():""};if(n){let e=ua();for(let[i,r]of sR){let s=r(e,n);s!==null&&(t[i]=s)}}return t}function aR(n,t){for(let[e]of sR)t[e]===void 0&&n.setData(e,"");for(let e in t){let i=t[e];i!==void 0&&n.setData(e,i)}}var _r=ev,uG=_r.$generateJSONFromSelectedNodes,dG=_r.$generateNodesFromSerializedNodes,lR=_r.$getClipboardDataFromSelection,cR=_r.$getHtmlContent,hG=_r.$getLexicalContent,nv=_r.$insertDataTransferForPlainText,wd=_r.$insertDataTransferForRichText,fG=_r.$insertGeneratedNodes,Nd=_r.copyToClipboard,gG=_r.setLexicalClipboardDataTransfer;var iv={};an(iv,{DragonExtension:()=>bU,registerDragonSupport:()=>uR});function uR(n){let t=window.location.origin,e=i=>{if(i.origin!==t)return;let r=n.getRootElement();if(document.activeElement!==r)return;let s=i.data;if(typeof s=="string"){let o;try{o=JSON.parse(s)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){let a=o.payload;if(a&&a.functionId==="makeChanges"){let l=a.args;if(l){let[c,u,d,h,f]=l;n.update(()=>{let g=I();if(P(g)){let m=g.anchor,p=m.getNode(),b=0,_=0;if(J(p)&&c>=0&&u>=0&&(b=c,_=c+u,g.setTextNodeRange(p,b,p,_)),b===_&&d===""||(g.insertRawText(d),p=m.getNode()),J(p)){b=h,_=h+f;let x=p.getTextContentSize();b=b>x?x:b,_=_>x?x:_,g.setTextNodeRange(p,b,p,_)}i.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",e,!0),()=>{window.removeEventListener("message",e,!0)}}var bU=Mt({build:(n,t,e)=>Hi(t),config:en({disabled:typeof window>"u"}),name:"@lexical/dragon",register:(n,t,e)=>Mn(()=>e.getOutput().disabled.value?void 0:uR(n))});var dR=iv,pp=dR.DragonExtension,_G=dR.registerDragonSupport;var av={};an(av,{$createHeadingNode:()=>pc,$createQuoteNode:()=>ov,$isHeadingNode:()=>TU,$isQuoteNode:()=>AU,DRAG_DROP_PASTE:()=>sv,HeadingNode:()=>bc,QuoteNode:()=>mc,RichTextExtension:()=>wU,eventFiles:()=>kd,registerRichText:()=>bR});function hR(n,t){if(document.caretRangeFromPoint!==void 0){let e=document.caretRangeFromPoint(n,t);return e===null?null:{node:e.startContainer,offset:e.startOffset}}if(document.caretPositionFromPoint!=="undefined"){let e=document.caretPositionFromPoint(n,t);return e===null?null:{node:e.offsetNode,offset:e.offset}}return null}var va=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_U=va&&"documentMode"in document?document.documentMode:null,xU=va&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),yU=!(!va||!("InputEvent"in window)||_U)&&"getTargetRanges"in new window.InputEvent("input"),vU=va&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),fR=va&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,SU=va&&/^(?=.*Chrome).*/i.test(navigator.userAgent),CU=va&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&xU&&!SU,sv=hn("DRAG_DROP_PASTE_FILE"),mc=class n extends Ue{static getType(){return"quote"}static clone(t){return new n(t.__key)}createDOM(t){let e=document.createElement("blockquote");return It(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:EU,priority:0})}}exportDOM(t){let{element:e}=super.exportDOM(t);if(we(e)){this.isEmpty()&&e.append(document.createElement("br"));let i=this.getFormatType();i&&(e.style.textAlign=i);let r=this.getDirection();r&&(e.dir=r)}return{element:e}}static importJSON(t){return ov().updateFromJSON(t)}insertNewAfter(t,e){let i=nt(),r=this.getDirection();return i.setDirection(r),this.insertAfter(i,e),i}collapseAtStart(){let t=nt();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function ov(){return Xe(new mc)}function AU(n){return n instanceof mc}var bc=class n extends Ue{__tag;static getType(){return"heading"}static clone(t){return new n(t.__tag,t.__key)}constructor(t,e){super(e),this.__tag=t}getTag(){return this.__tag}setTag(t){let e=this.getWritable();return this.__tag=t,e}createDOM(t){let e=this.__tag,i=document.createElement(e),r=t.theme.heading;if(r!==void 0){let s=r[e];It(i,s)}return i}updateDOM(t,e,i){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:gc,priority:0}),h2:t=>({conversion:gc,priority:0}),h3:t=>({conversion:gc,priority:0}),h4:t=>({conversion:gc,priority:0}),h5:t=>({conversion:gc,priority:0}),h6:t=>({conversion:gc,priority:0}),p:t=>{let e=t.firstChild;return e!==null&&gR(e)?{conversion:()=>({node:null}),priority:3}:null},span:t=>gR(t)?{conversion:e=>({node:pc("h1")}),priority:3}:null}}exportDOM(t){let{element:e}=super.exportDOM(t);if(we(e)){this.isEmpty()&&e.append(document.createElement("br"));let i=this.getFormatType();i&&(e.style.textAlign=i);let r=this.getDirection();r&&(e.dir=r)}return{element:e}}static importJSON(t){return pc(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,e=!0){let i=t?t.anchor.offset:0,r=this.getLastDescendant(),s=!r||t&&t.anchor.key===r.getKey()&&i===r.getTextContentSize()||!t?nt():pc(this.getTag()),o=this.getDirection();if(s.setDirection(o),this.insertAfter(s,e),i===0&&!this.isEmpty()&&t){let a=nt();a.select(),this.replace(a,!0)}return s}collapseAtStart(){let t=this.isEmpty()?nt():pc(this.getTag());return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}extractWithChild(){return!0}};function gR(n){return n.nodeName.toLowerCase()==="span"&&n.style.fontSize==="26pt"}function gc(n){let t=n.nodeName.toLowerCase(),e=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(e=pc(t),n.style!==null&&(_0(n,e),e.setFormat(n.style.textAlign))),{node:e}}function EU(n){let t=ov();return n.style!==null&&(t.setFormat(n.style.textAlign),_0(n,t)),{node:t}}function pc(n="h1"){return Xe(new bc(n))}function TU(n){return n instanceof bc}function kd(n){let t=null;if(fn(n,DragEvent)?t=n.dataTransfer:fn(n,ClipboardEvent)&&(t=n.clipboardData),t===null)return[!1,[],!1];let e=t.types,i=e.includes("Files"),r=e.includes("text/html")||e.includes("text/plain");return[i,Array.from(t.files),r]}function pR(n){let t=I();if(!P(t))return!1;let e=new Set,i=t.getNodes();for(let r=0;r<i.length;r++){let s=i[r],o=s.getKey();if(e.has(o))continue;let a=pt(s,c=>j(c)&&!c.isInline());if(a===null)continue;let l=a.getKey();a.canIndent()&&!e.has(l)&&(e.add(l),n(a))}return e.size>0}function mR(n){let t=Re(n);return ur(t)}function rv(n){for(let t of["lowercase","uppercase","capitalize"])n.hasFormat(t)&&n.toggleFormat(t)}function bR(n){return le(n.registerCommand(Jl,t=>{let e=I();return!!be(e)&&(e.clear(),!0)},it),n.registerCommand(dr,t=>{let e=I();return P(e)?(e.deleteCharacter(t),!0):!!be(e)&&(e.deleteNodes(),!0)},it),n.registerCommand(tc,t=>{let e=I();return!!P(e)&&(e.deleteWord(t),!0)},it),n.registerCommand(da,t=>{let e=I();return!!P(e)&&(e.deleteLine(t),!0)},it),n.registerCommand(Xl,t=>{let e=I();if(typeof t=="string")e!==null&&e.insertText(t);else{if(e===null)return!1;let i=t.dataTransfer;if(i!=null)wd(i,e,n);else if(P(e)){let r=t.data;return r&&e.insertText(r),!0}}return!0},it),n.registerCommand(Kg,()=>{let t=I();return!!P(t)&&(t.removeText(),!0)},it),n.registerCommand(as,t=>{let e=I();return!!P(e)&&(e.formatText(t),!0)},it),n.registerCommand(Hg,t=>{let e=I();if(!P(e)&&!be(e))return!1;let i=e.getNodes();for(let r of i){let s=pt(r,o=>j(o)&&!o.isInline());s!==null&&s.setFormat(t)}return!0},it),n.registerCommand(nc,t=>{let e=I();return!!P(e)&&(e.insertLineBreak(t),!0)},it),n.registerCommand(hr,()=>{let t=I();return!!P(t)&&(t.insertParagraph(),!0)},it),n.registerCommand(to,()=>(Js([Qn()]),!0),it),n.registerCommand(wn,()=>pR(t=>{let e=t.getIndent();t.setIndent(e+1)}),it),n.registerCommand(ni,()=>pR(t=>{let e=t.getIndent();e>0&&t.setIndent(Math.max(0,e-1))}),it),n.registerCommand(Nn,t=>{let e=I();if(be(e)){let i=e.getNodes();if(i.length>0)return t.preventDefault(),i[0].selectPrevious(),!0}else if(P(e)){let i=o0(e.focus,!0);if(!t.shiftKey&&ur(i)&&!i.isIsolated()&&!i.isInline())return i.selectPrevious(),t.preventDefault(),!0}return!1},it),n.registerCommand(ei,t=>{let e=I();if(be(e)){let i=e.getNodes();if(i.length>0)return t.preventDefault(),i[0].selectNext(0,0),!0}else if(P(e)){if(function(r){let s=r.focus;return s.key==="root"&&s.offset===ue().getChildrenSize()}(e))return t.preventDefault(),!0;let i=o0(e.focus,!1);if(!t.shiftKey&&ur(i)&&!i.isIsolated()&&!i.isInline())return i.selectNext(),t.preventDefault(),!0}return!1},it),n.registerCommand(fr,t=>{let e=I();if(be(e)){let i=e.getNodes();if(i.length>0)return t.preventDefault(),T0(i[0])?i[0].selectNext(0,0):i[0].selectPrevious(),!0}if(!P(e))return!1;if(oc(e,!0)){let i=t.shiftKey;return t.preventDefault(),sc(e,i,!0),!0}return!1},it),n.registerCommand(eo,t=>{let e=I();if(be(e)){let r=e.getNodes();if(r.length>0)return t.preventDefault(),T0(r[0])?r[0].selectPrevious():r[0].selectNext(0,0),!0}if(!P(e))return!1;let i=t.shiftKey;return!!oc(e,!1)&&(t.preventDefault(),sc(e,i,!1),!0)},it),n.registerCommand(ls,t=>{if(mR(t.target))return!1;let e=I();if(P(e)){if(function(i){if(!i.isCollapsed())return!1;let{anchor:r}=i;if(r.offset!==0)return!1;let s=r.getNode();if(ss(s))return!1;let o=Cd(s);return o.getIndent()>0&&(o.is(s)||s.is(o.getFirstDescendant()))}(e))return t.preventDefault(),n.dispatchCommand(ni,void 0);if(fR&&navigator.language==="ko-KR")return!1}else if(!be(e))return!1;return t.preventDefault(),n.dispatchCommand(dr,!0)},it),n.registerCommand(no,t=>{if(mR(t.target))return!1;let e=I();return!(!P(e)&&!be(e))&&(t.preventDefault(),n.dispatchCommand(dr,!1))},it),n.registerCommand(cs,t=>{let e=I();if(!P(e))return!1;if(rv(e),t!==null){if((fR||vU||CU)&&yU)return!1;if(t.preventDefault(),t.shiftKey)return n.dispatchCommand(nc,!1)}return n.dispatchCommand(hr,void 0)},it),n.registerCommand(ic,()=>{let t=I();return!!P(t)&&(n.blur(),!0)},it),n.registerCommand(zg,t=>{let[,e]=kd(t);if(e.length>0){let r=hR(t.clientX,t.clientY);if(r!==null){let{offset:s,node:o}=r,a=Re(o);if(a!==null){let l=cr();if(J(a))l.anchor.set(a.getKey(),s,"text"),l.focus.set(a.getKey(),s,"text");else{let u=a.getParentOrThrow().getKey(),d=a.getIndexWithinParent()+1;l.anchor.set(u,d,"element"),l.focus.set(u,d,"element")}let c=os(l);te(c)}n.dispatchCommand(sv,e)}return t.preventDefault(),!0}let i=I();return!!P(i)},it),n.registerCommand(Bg,t=>{let[e]=kd(t),i=I();return!(e&&!P(i))},it),n.registerCommand(Xk,t=>{let[e]=kd(t),i=I();if(e&&!P(i))return!1;let r=hR(t.clientX,t.clientY);if(r!==null){let s=Re(r.node);ur(s)&&t.preventDefault()}return!0},it),n.registerCommand(jg,()=>(Yl(),!0),it),n.registerCommand(Zl,t=>(Nd(n,fn(t,ClipboardEvent)?t:null),!0),it),n.registerCommand(Ql,t=>(async function(e,i){await Nd(i,fn(e,ClipboardEvent)?e:null),i.update(()=>{let r=I();P(r)?r.removeText():be(r)&&r.getNodes().forEach(s=>s.remove())})}(t,n),!0),it),n.registerCommand(io,t=>{let[,e,i]=kd(t);return e.length>0&&!i?(n.dispatchCommand(sv,e),!0):_i(t.target)&&gO(t.target)?!1:I()!==null&&(function(r,s){r.preventDefault(),s.update(()=>{let o=I(),a=fn(r,InputEvent)||fn(r,KeyboardEvent)?null:r.clipboardData;a!=null&&o!==null&&wd(a,o,s)},{tag:ro})}(t,n),!0)},it),n.registerCommand(rc,t=>{let e=I();return P(e)&&rv(e),!1},it),n.registerCommand(bi,t=>{let e=I();return P(e)&&rv(e),!1},it))}var wU=Mt({conflictsWith:["@lexical/plain-text"],dependencies:[pp],name:"@lexical/rich-text",nodes:[bc,mc],register:bR});var xr=av,Od=xr.$createHeadingNode,_c=xr.$createQuoteNode,Md=xr.$isHeadingNode,Wi=xr.$isQuoteNode,EG=xr.DRAG_DROP_PASTE,mp=xr.HeadingNode,bp=xr.QuoteNode,_R=xr.RichTextExtension,TG=xr.eventFiles,xR=xr.registerRichText;var OG=So(Du(),1);Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;(function(n){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function e(u){return u=u.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+u+")")}var i=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,r=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return i}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;n.languages.markdown=n.languages.extend("markup",{}),n.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:n.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+r+s+"(?:"+r+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+r+s+")(?:"+r+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(i),inside:n.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+r+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+r+"$"),inside:{"table-header":{pattern:RegExp(i),alias:"important",inside:n.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:e(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:e(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:e(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:e(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(u){["url","bold","italic","strike","code-snippet"].forEach(function(d){u!==d&&(n.languages.markdown[u].inside.content.inside[d]=n.languages.markdown[d])})}),n.hooks.add("after-tokenize",function(u){if(u.language!=="markdown"&&u.language!=="md")return;function d(h){if(!(!h||typeof h=="string"))for(var f=0,g=h.length;f<g;f++){var m=h[f];if(m.type!=="code"){d(m.content);continue}var p=m.content[1],b=m.content[3];if(p&&b&&p.type==="code-language"&&b.type==="code-block"&&typeof p.content=="string"){var _=p.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var x="language-"+_;b.alias?typeof b.alias=="string"?b.alias=[b.alias,x]:b.alias.push(x):b.alias=[x]}}}d(u.tokens)}),n.hooks.add("wrap",function(u){if(u.type==="code-block"){for(var d="",h=0,f=u.classes.length;h<f;h++){var g=u.classes[h],m=/language-(.+)/.exec(g);if(m){d=m[1];break}}var p=n.languages[d];if(p)u.content=n.highlight(c(u.content),p,d);else if(d&&d!=="none"&&n.plugins.autoloader){var b="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);u.attributes.id=b,n.plugins.autoloader.loadLanguages(d,function(){var _=document.getElementById(b);_&&(_.innerHTML=n.highlight(_.textContent,n.languages[d],d))})}}});var o=RegExp(n.languages.markup.tag.pattern.source,"gi"),a={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function c(u){var d=u.replace(o,"");return d=d.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,f){if(f=f.toLowerCase(),f[0]==="#"){var g;return f[1]==="x"?g=parseInt(f.slice(2),16):g=Number(f.slice(1)),l(g)}else{var m=a[f];return m||h}}),d}n.languages.md=n.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(n){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var e=n.languages.markup;e&&(e.tag.addInlined("style","css"),e.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(n){var t=n.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/};Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python;Prism.languages.py=Prism.languages.python;(function(n){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,e=0;e<2;e++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(Prism);Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(n){n.inside.interpolation.inside=Prism.languages.swift});(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var t=n.languages.extend("typescript",{});delete t["class-name"],n.languages.typescript["class-name"].inside=t,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),n.languages.ts=n.languages.typescript})(Prism);(function(n){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,e=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,i={pattern:RegExp(/(^|[^\w.])/.source+e+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[i,{pattern:RegExp(/(^|[^\w.])/.source+e+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:i.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+e+/[A-Z]\w*\b/.source),lookbehind:!0,inside:i.inside}],keyword:t,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":i,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+e+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:i.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+e+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:i.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism);(function(n){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,e=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return e})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(Prism);function SR(n,t){for(let e of n.childNodes){if(we(e)&&e.tagName===t)return!0;SR(e,t)}return!1}var Ld="data-language",Rd="data-highlight-language",_p="data-theme",Dd=class n extends Ue{__language;__theme;__isSyntaxHighlightSupported;static getType(){return"code"}static clone(t){return new n(t.__language,t.__key)}constructor(t,e){super(e),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){let e=document.createElement("code");It(e,t.theme.code),e.setAttribute("spellcheck","false");let i=this.getLanguage();i&&(e.setAttribute(Ld,i),this.getIsSyntaxHighlightSupported()&&e.setAttribute(Rd,i));let r=this.getTheme();r&&e.setAttribute(_p,r);let s=this.getStyle();return s&&e.setAttribute("style",s),e}updateDOM(t,e,i){let r=this.__language,s=t.__language;r?r!==s&&e.setAttribute(Ld,r):s&&e.removeAttribute(Ld);let o=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&s?o&&r?r!==s&&e.setAttribute(Rd,r):e.removeAttribute(Rd):o&&r&&e.setAttribute(Rd,r);let l=this.__theme,c=t.__theme;l?l!==c&&e.setAttribute(_p,l):c&&e.removeAttribute(_p);let u=this.__style,d=t.__style;return u?u!==d&&e.setAttribute("style",u):d&&e.removeAttribute("style"),!1}exportDOM(t){let e=document.createElement("pre");It(e,t._config.theme.code),e.setAttribute("spellcheck","false");let i=this.getLanguage();i&&(e.setAttribute(Ld,i),this.getIsSyntaxHighlightSupported()&&e.setAttribute(Rd,i));let r=this.getTheme();r&&e.setAttribute(_p,r);let s=this.getStyle();return s&&e.setAttribute("style",s),{element:e}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||SR(t,"BR"))?{conversion:yR,priority:1}:null,div:()=>({conversion:kU,priority:1}),pre:()=>({conversion:yR,priority:0}),table:t=>lv(t)?{conversion:OU,priority:3}:null,td:t=>{let e=t,i=e.closest("table");return RU(e)||i&&lv(i)?{conversion:vR,priority:3}:null},tr:t=>{let i=t.closest("table");return i&&lv(i)?{conversion:vR,priority:3}:null}}}static importJSON(t){return Pd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,e=!0){let i=this.getChildren(),r=i.length;if(r>=2&&i[r-1].getTextContent()===`
`&&i[r-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===r){i[r-1].remove(),i[r-2].remove();let c=nt();return this.insertAfter(c,e),c}let{anchor:s,focus:o}=t,l=(s.isBefore(o)?s:o).getNode();if(J(l)){let c=DU(l),u=[];for(;;)if(tn(c))u.push(Qn()),c=c.getNextSibling();else if(ER(c)){let b=0,_=c.getTextContent(),x=c.getTextContentSize();for(;b<x&&_[b]===" ";)b++;if(b!==0&&u.push(AR(" ".repeat(b))),b!==x)break;c=c.getNextSibling()}else break;let d=l.splitText(s.offset)[0],h=s.offset===0?0:1,f=d.getIndexWithinParent()+h,g=l.getParentOrThrow(),m=[Ze(),...u];g.splice(f,0,m);let p=u[u.length-1];p?p.select():s.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(NU(l)){let{offset:c}=t.anchor;l.splice(c,0,[Ze()]),l.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){let t=nt();return this.getChildren().forEach(i=>t.append(i)),this.replace(t),!0}setLanguage(t){let e=this.getWritable();return e.__language=t||void 0,e}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){let e=this.getWritable();return e.__isSyntaxHighlightSupported=t,e}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){let e=this.getWritable();return e.__theme=t||void 0,e}getTheme(){return this.getLatest().__theme}};function Pd(n,t){return Vl(Dd).setLanguage(n).setTheme(t)}function NU(n){return n instanceof Dd}function yR(n){let t=n.getAttribute(Ld);return{node:Pd(t)}}function kU(n){let t=n,e=CR(t);return!e&&!MU(t)?{node:null}:{node:e?Pd():null}}function OU(){return{node:Pd()}}function vR(){return{node:null}}function CR(n){return n.style.fontFamily.match("monospace")!==null}function MU(n){let t=n.parentElement;for(;t!==null;){if(CR(t))return!0;t=t.parentElement}return!1}function RU(n){return n.classList.contains("js-file-line")}function lv(n){return n.classList.contains("js-file-line-container")}var Id=class n extends kn{__highlightType;constructor(t="",e,i){super(t,i),this.__highlightType=e}static getType(){return"code-highlight"}static clone(t){return new n(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){let e=this.getWritable();return e.__highlightType=t||void 0,e}canHaveFormat(){return!1}createDOM(t){let e=super.createDOM(t),i=cv(t.theme,this.__highlightType);return It(e,i),e}updateDOM(t,e,i){let r=super.updateDOM(t,e,i),s=cv(i.theme,t.__highlightType),o=cv(i.theme,this.__highlightType);return s!==o&&(s&&gn(e,s),o&&It(e,o)),r}static importJSON(t){return AR().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Pd()}};function cv(n,t){return t&&n&&n.codeHighlight&&n.codeHighlight[t]}function AR(n="",t){return Xe(new Id(n,t))}function ER(n){return n instanceof Id}function LU(n,t){let e=n;for(let i=Qe(n,t);i&&(ER(i.origin)||tn(i.origin));i=np(i))e=i.origin;return e}function DU(n){return LU(n,"previous")}var VG=Mt({name:"@lexical/code",nodes:[Dd,Id]});(function(n){n.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(e){var i=t[e],r=[];/^\w+$/.test(e)||r.push(/\w+/.exec(e)[0]),e==="diff"&&r.push("bold"),n.languages.diff[e]={pattern:RegExp("^(?:["+i+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:r,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(e)[0]}}}}),Object.defineProperty(n.languages.diff,"PREFIXES",{value:t})})(Prism);var GG=globalThis.Prism||window.Prism;var xv={};an(xv,{$createCodeHighlightNode:()=>vp,$createCodeNode:()=>xc,$getCodeLineDirection:()=>PR,$getEndOfCodeInLine:()=>bv,$getFirstCodeNodeOfLine:()=>ds,$getLastCodeNodeOfLine:()=>ho,$getStartOfCodeInLine:()=>mv,$isCodeHighlightNode:()=>Ce,$isCodeNode:()=>Ui,CODE_LANGUAGE_FRIENDLY_NAME_MAP:()=>_v,CODE_LANGUAGE_MAP:()=>FR,CodeExtension:()=>$U,CodeHighlightNode:()=>fo,CodeNode:()=>us,DEFAULT_CODE_LANGUAGE:()=>pv,PrismTokenizer:()=>BR,getCodeLanguageOptions:()=>HU,getCodeLanguages:()=>zU,getCodeThemeOptions:()=>WU,getDefaultCodeLanguage:()=>IU,getEndOfCodeInLine:()=>qU,getFirstCodeNodeOfLine:()=>VU,getLanguageFriendlyName:()=>BU,getLastCodeNodeOfLine:()=>GU,getStartOfCodeInLine:()=>YU,normalizeCodeLang:()=>$R,normalizeCodeLanguage:()=>$R,registerCodeHighlighting:()=>jU});var XG=So(Du(),1);function yp(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var pv="javascript",IU=()=>pv;function DR(n,t){for(let e of n.childNodes){if(we(e)&&e.tagName===t)return!0;DR(e,t)}return!1}var $d="data-language",Fd="data-highlight-language",xp="data-theme",us=class n extends Ue{__language;__theme;__isSyntaxHighlightSupported;static getType(){return"code"}static clone(t){return new n(t.__language,t.__key)}constructor(t,e){super(e),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){let e=document.createElement("code");It(e,t.theme.code),e.setAttribute("spellcheck","false");let i=this.getLanguage();i&&(e.setAttribute($d,i),this.getIsSyntaxHighlightSupported()&&e.setAttribute(Fd,i));let r=this.getTheme();r&&e.setAttribute(xp,r);let s=this.getStyle();return s&&e.setAttribute("style",s),e}updateDOM(t,e,i){let r=this.__language,s=t.__language;r?r!==s&&e.setAttribute($d,r):s&&e.removeAttribute($d);let o=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&s?o&&r?r!==s&&e.setAttribute(Fd,r):e.removeAttribute(Fd):o&&r&&e.setAttribute(Fd,r);let a=this.__theme,l=t.__theme;a?a!==l&&e.setAttribute(xp,a):l&&e.removeAttribute(xp);let c=this.__style,u=t.__style;return c?c!==u&&e.setAttribute("style",c):u&&e.removeAttribute("style"),!1}exportDOM(t){let e=document.createElement("pre");It(e,t._config.theme.code),e.setAttribute("spellcheck","false");let i=this.getLanguage();i&&(e.setAttribute($d,i),this.getIsSyntaxHighlightSupported()&&e.setAttribute(Fd,i));let r=this.getTheme();r&&e.setAttribute(xp,r);let s=this.getStyle();return s&&e.setAttribute("style",s),{element:e}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||DR(t,"BR"))?{conversion:TR,priority:1}:null,div:()=>({conversion:PU,priority:1}),pre:()=>({conversion:TR,priority:0}),table:t=>uv(t)?{conversion:FU,priority:3}:null,td:t=>{let e=t,i=e.closest("table");return e.classList.contains("js-file-line")||i&&uv(i)?{conversion:wR,priority:3}:null},tr:t=>{let e=t.closest("table");return e&&uv(e)?{conversion:wR,priority:3}:null}}}static importJSON(t){return xc().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,e=!0){let i=this.getChildren(),r=i.length;if(r>=2&&i[r-1].getTextContent()===`
`&&i[r-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===r){i[r-1].remove(),i[r-2].remove();let l=nt();return this.insertAfter(l,e),l}let{anchor:s,focus:o}=t,a=(s.isBefore(o)?s:o).getNode();if(J(a)){let l=ds(a),c=[];for(;;)if(tn(l))c.push(Qn()),l=l.getNextSibling();else{if(!Ce(l))break;{let p=0,b=l.getTextContent(),_=l.getTextContentSize();for(;p<_&&b[p]===" ";)p++;if(p!==0&&c.push(vp(" ".repeat(p))),p!==_)break;l=l.getNextSibling()}}let u=a.splitText(s.offset)[0],d=s.offset===0?0:1,h=u.getIndexWithinParent()+d,f=a.getParentOrThrow(),g=[Ze(),...c];f.splice(h,0,g);let m=c[c.length-1];m?m.select():s.offset===0?u.selectPrevious():u.getNextSibling().selectNext(0,0)}if(Ui(a)){let{offset:l}=t.anchor;a.splice(l,0,[Ze()]),a.select(l+1,l+1)}return null}canIndent(){return!1}collapseAtStart(){let t=nt();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}setLanguage(t){let e=this.getWritable();return e.__language=t||void 0,e}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){let e=this.getWritable();return e.__isSyntaxHighlightSupported=t,e}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){let e=this.getWritable();return e.__theme=t||void 0,e}getTheme(){return this.getLatest().__theme}};function xc(n,t){return Vl(us).setLanguage(n).setTheme(t)}function Ui(n){return n instanceof us}function TR(n){return{node:xc(n.getAttribute($d))}}function PU(n){let t=n,e=NR(t);return e||function(i){let r=i.parentElement;for(;r!==null;){if(NR(r))return!0;r=r.parentElement}return!1}(t)?{node:e?xc():null}:{node:null}}function FU(){return{node:xc()}}function wR(){return{node:null}}function NR(n){return n.style.fontFamily.match("monospace")!==null}function uv(n){return n.classList.contains("js-file-line-container")}var fo=class n extends kn{__highlightType;constructor(t="",e,i){super(t,i),this.__highlightType=e}static getType(){return"code-highlight"}static clone(t){return new n(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){let e=this.getWritable();return e.__highlightType=t||void 0,e}canHaveFormat(){return!1}createDOM(t){let e=super.createDOM(t),i=dv(t.theme,this.__highlightType);return It(e,i),e}updateDOM(t,e,i){let r=super.updateDOM(t,e,i),s=dv(i.theme,t.__highlightType),o=dv(i.theme,this.__highlightType);return s!==o&&(s&&gn(e,s),o&&It(e,o)),r}static importJSON(t){return vp().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return xc()}};function dv(n,t){return t&&n&&n.codeHighlight&&n.codeHighlight[t]}function vp(n="",t){return Xe(new fo(n,t))}function Ce(n){return n instanceof fo}function IR(n,t){let e=n;for(let i=Qe(n,t);i&&(Ce(i.origin)||tn(i.origin));i=np(i))e=i.origin;return e}function ds(n){return IR(n,"previous")}function ho(n){return IR(n,"next")}function PR(n){let t=ds(n),e=ho(n),i=t;for(;i!==null;){if(Ce(i)){let s=p0(i.getTextContent());if(s!==null)return s}if(i===e)break;i=i.getNextSibling()}let r=t.getParent();if(j(r)){let s=r.getDirection();if(s==="ltr"||s==="rtl")return s}return null}function mv(n,t){let e=null,i=null,r=n,s=t,o=n.getTextContent();for(;;){if(s===0){if(r=r.getPreviousSibling(),r===null)break;if(Ce(r)||tn(r)||$t(r)||yp(167),$t(r)){e={node:r,offset:1};break}s=Math.max(0,r.getTextContentSize()-1),o=r.getTextContent()}else s--;let l=o[s];Ce(r)&&l!==" "&&(i={node:r,offset:s})}if(i!==null)return i;let a=null;if(t<n.getTextContentSize())Ce(n)&&(a=n.getTextContent()[t]);else{let l=n.getNextSibling();Ce(l)&&(a=l.getTextContent()[0])}if(a!==null&&a!==" ")return e;{let l=function(c,u){let d=c,h=u,f=c.getTextContent(),g=c.getTextContentSize();for(;;){if(!Ce(d)||h===g){if(d=d.getNextSibling(),d===null||$t(d))return null;Ce(d)&&(h=0,f=d.getTextContent(),g=d.getTextContentSize())}if(Ce(d)){if(f[h]!==" ")return{node:d,offset:h};h++}}}(n,t);return l!==null?l:e}}function bv(n){let t=ho(n);return $t(t)&&yp(168),t}var $U=Mt({name:"@lexical/code",nodes:[us,fo]});(function(n){n.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(e){var i=t[e],r=[];/^\w+$/.test(e)||r.push(/\w+/.exec(e)[0]),e==="diff"&&r.push("bold"),n.languages.diff[e]={pattern:RegExp("^(?:["+i+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:r,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(e)[0]}}}}),Object.defineProperty(n.languages.diff,"PREFIXES",{value:t})})(Prism);var xi=globalThis.Prism||window.Prism,_v={c:"C",clike:"C-like",cpp:"C++",css:"CSS",html:"HTML",java:"Java",js:"JavaScript",markdown:"Markdown",objc:"Objective-C",plain:"Plain Text",powershell:"PowerShell",py:"Python",rust:"Rust",sql:"SQL",swift:"Swift",typescript:"TypeScript",xml:"XML"},FR={cpp:"cpp",java:"java",javascript:"js",md:"markdown",plaintext:"plain",python:"py",text:"plain",ts:"typescript"};function $R(n){return FR[n]||n}function BU(n){let t=$R(n);return _v[t]||t}var zU=()=>Object.keys(xi.languages).filter(n=>typeof xi.languages[n]!="function").sort();function HU(){let n=[];for(let[t,e]of Object.entries(_v))n.push([t,e]);return n}function WU(){return[]}function fv(n){return typeof n=="string"?n:Array.isArray(n)?n.map(fv).join(""):fv(n.content)}function UU(n,t){let e=/^diff-([\w-]+)/i.exec(t),i=n.getTextContent(),r=xi.tokenize(i,xi.languages[e?"diff":t]);return e&&(r=function(s,o){let a=o,l=xi.languages[a],c={tokens:s},u=xi.languages.diff.PREFIXES;for(let d of c.tokens){if(typeof d=="string"||!(d.type in u)||!Array.isArray(d.content))continue;let h=d.type,f=0,g=()=>(f++,new xi.Token("prefix",u[h],h.replace(/^(\w+).*/,"$1"))),m=d.content.filter(v=>typeof v=="string"||v.type!=="prefix"),p=d.content.length-m.length,b=xi.tokenize(fv(m),l);b.unshift(g());let _=/\r\n|\n/g,x=v=>{let S=[];_.lastIndex=0;let C,A=0;for(;f<p&&(C=_.exec(v));){let E=C.index+C[0].length;S.push(v.slice(A,E)),A=E,S.push(g())}if(S.length!==0)return A<v.length&&S.push(v.slice(A)),S},y=v=>{for(let S=0;S<v.length&&f<p;S++){let C=v[S];if(typeof C=="string"){let A=x(C);A&&(v.splice(S,1,...A),S+=A.length-1)}else if(typeof C.content=="string"){let A=x(C.content);A&&(C.content=A)}else Array.isArray(C.content)?y(C.content):y([C.content])}};y(b),f<p&&b.push(g()),d.content=b}return c.tokens}(r,e[1])),gv(r)}function gv(n,t){let e=[];for(let i of n)if(typeof i=="string"){let r=i.split(/(\n|\t)/),s=r.length;for(let o=0;o<s;o++){let a=r[o];a===`
`||a===`\r
`?e.push(Ze()):a==="	"?e.push(Qn()):a.length>0&&e.push(vp(a,t))}}else{let{content:r,alias:s}=i;typeof r=="string"?e.push(...gv([r],i.type==="prefix"&&typeof s=="string"?s:i.type)):Array.isArray(r)&&e.push(...gv(r,i.type==="unchanged"?void 0:i.type))}return e}var BR={$tokenize(n,t){return UU(n,t||this.defaultLanguage)},defaultLanguage:pv,tokenize(n,t){return xi.tokenize(n,xi.languages[t||""]||xi.languages[this.defaultLanguage])}};function kR(n,t,e){let i=n.getParent();Ui(i)?zR(i,t,e):Ce(n)&&n.replace(Ft(n.__text))}function KU(n,t){let e=t.getElementByKey(n.getKey());if(e===null)return;let i=n.getChildren(),r=i.length;if(r===e.__cachedChildrenLength)return;e.__cachedChildrenLength=r;let s="1",o=1;for(let a=0;a<r;a++)$t(i[a])&&(s+=`
`+ ++o);e.setAttribute("data-gutter",s)}var hv=new Set;function zR(n,t,e){let i=n.getKey();n.getLanguage()===void 0&&n.setLanguage(e.defaultLanguage);let r=n.getLanguage()||e.defaultLanguage;if(!function(s){let o=function(l){let c=/^diff-([\w-]+)/i.exec(l);return c?c[1]:null}(s),a=o||s;try{return!!a&&xi.languages.hasOwnProperty(a)}catch{return!1}}(r))return n.getIsSyntaxHighlightSupported()&&n.setIsSyntaxHighlightSupported(!1),void async function(){}();n.getIsSyntaxHighlightSupported()||n.setIsSyntaxHighlightSupported(!0),hv.has(i)||(hv.add(i),t.update(()=>{(function(s,o){let a=Qt(s);if(!Ui(a)||!a.isAttached())return;let l=I();if(!P(l))return void o();let c=l.anchor,u=c.offset,d=c.type==="element"&&$t(a.getChildAtIndex(c.offset-1)),h=0;if(!d){let f=c.getNode();h=u+f.getPreviousSiblings().reduce((g,m)=>g+m.getTextContentSize(),0)}if(o()){if(d)return void c.getNode().select(u,u);a.getChildren().some(f=>{let g=J(f);if(g||$t(f)){let m=f.getTextContentSize();if(g&&m>=h)return f.select(h,h),!0;h-=m}return!1})}})(i,()=>{let s=Qt(i);if(!Ui(s)||!s.isAttached())return!1;let o=s.getLanguage()||e.defaultLanguage,a=e.$tokenize(s,o),l=function(h,f){let g=0;for(;g<h.length&&OR(h[g],f[g]);)g++;let m=h.length,p=f.length,b=Math.min(m,p)-g,_=0;for(;_<b;)if(_++,!OR(h[m-_],f[p-_])){_--;break}let x=g,y=m-_,v=f.slice(g,p-_);return{from:x,nodesForReplacement:v,to:y}}(s.getChildren(),a),{from:c,to:u,nodesForReplacement:d}=l;return!(c===u&&!d.length)&&(n.splice(c,u-c,d),!0)})},{onUpdate:()=>{hv.delete(i)},skipTransforms:!0}))}function OR(n,t){return Ce(n)&&Ce(t)&&n.__text===t.__text&&n.__highlightType===t.__highlightType||tn(n)&&tn(t)||$t(n)&&$t(t)}function Sa(n){if(!P(n))return!1;let t=n.anchor.getNode(),e=Ui(t)?t:t.getParent(),i=n.focus.getNode(),r=Ui(i)?i:i.getParent();return Ui(e)&&e.is(r)}function HR(n){let t=n.getNodes(),e=[];if(t.length===1&&Ui(t[0]))return e;let i=[];for(let r=0;r<t.length;r++){let s=t[r];Ce(s)||tn(s)||$t(s)||yp(169),$t(s)?i.length>0&&(e.push(i),i=[]):i.push(s)}if(i.length>0){let r=n.isBackward()?n.anchor:n.focus,s=Fi(i[0].getKey(),0,"text");r.is(s)||e.push(i)}return e}function MR(n){let t=I();if(!P(t)||!Sa(t))return!1;let e=HR(t),i=e.length;if(i===0&&t.isCollapsed())return n===wn&&t.insertNodes([Qn()]),!0;if(i===0&&n===wn&&t.getTextContent()===`
`){let r=Qn(),s=Ze(),o=t.isBackward()?"previous":"next";return t.insertNodes([r,s]),md(l0(gd(u0(r,"next",0),$i(Qe(s,"next"))),o)),!0}for(let r=0;r<i;r++){let s=e[r];if(s.length>0){let o=s[0];if(r===0&&(o=ds(o)),n===wn){let a=Qn();if(o.insertBefore(a),r===0){let l=t.isBackward()?"focus":"anchor",c=Fi(o.getKey(),0,"text");t[l].is(c)&&t[l].set(a.getKey(),0,"text")}}else tn(o)&&o.remove()}}return!0}function RR(n,t){let e=I();if(!P(e))return!1;let{anchor:i,focus:r}=e,s=i.offset,o=r.offset,a=i.getNode(),l=r.getNode(),c=n===Nn;if(!Sa(e)||!Ce(a)&&!tn(a)||!Ce(l)&&!tn(l))return!1;if(!t.altKey){if(e.isCollapsed()){let b=a.getParentOrThrow();if(c&&s===0&&a.getPreviousSibling()===null){if(b.getPreviousSibling()===null)return b.selectPrevious(),t.preventDefault(),!0}else if(!c&&s===a.getTextContentSize()&&a.getNextSibling()===null&&b.getNextSibling()===null)return b.selectNext(),t.preventDefault(),!0}return!1}let u,d;if(a.isBefore(l)?(u=ds(a),d=ho(l)):(u=ds(l),d=ho(a)),u==null||d==null)return!1;let h=u.getNodesBetween(d);for(let b=0;b<h.length;b++){let _=h[b];if(!Ce(_)&&!tn(_)&&!$t(_))return!1}t.preventDefault(),t.stopPropagation();let f=c?u.getPreviousSibling():d.getNextSibling();if(!$t(f))return!0;let g=c?f.getPreviousSibling():f.getNextSibling();if(g==null)return!0;let m=Ce(g)||tn(g)||$t(g)?c?ds(g):ho(g):null,p=m??g;return f.remove(),h.forEach(b=>b.remove()),n===Nn?(h.forEach(b=>p.insertBefore(b)),p.insertBefore(f)):(p.insertAfter(f),p=f,h.forEach(b=>{p.insertAfter(b),p=b})),e.setTextNodeRange(a,s,l,o),!0}function LR(n,t){let e=I();if(!P(e))return!1;let{anchor:i,focus:r}=e,s=i.getNode(),o=r.getNode(),a=n===yd;if(!Sa(e)||!Ce(s)&&!tn(s)||!Ce(o)&&!tn(o))return!1;let l=o;if(PR(l)==="rtl"?!a:a){let c=mv(l,r.offset);if(c!==null){let{node:u,offset:d}=c;$t(u)?u.selectNext(0,0):e.setTextNodeRange(u,d,u,d)}else l.getParentOrThrow().selectStart()}else bv(l).select();return t.preventDefault(),t.stopPropagation(),!0}function jU(n,t){if(!n.hasNodes([us,fo]))throw new Error("CodeHighlightPlugin: CodeNode or CodeHighlightNode not registered on editor");t==null&&(t=BR);let e=[];return n._headless!==!0&&e.push(n.registerMutationListener(us,i=>{n.getEditorState().read(()=>{for(let[r,s]of i)if(s!=="destroyed"){let o=Qt(r);o!==null&&KU(o,n)}})},{skipInitialization:!1})),e.push(n.registerNodeTransform(us,i=>zR(i,n,t)),n.registerNodeTransform(kn,i=>kR(i,n,t)),n.registerNodeTransform(fo,i=>kR(i,n,t)),n.registerCommand(bi,i=>{let r=function(s){let o=I();if(!P(o)||!Sa(o))return null;let a=s?ni:wn,l=s?ni:to,c=o.anchor,u=o.focus;if(c.is(u))return l;let d=HR(o);if(d.length!==1)return a;let h=d[0],f,g;h.length===0&&yp(285),o.isBackward()?(f=u,g=c):(f=c,g=u);let m=ds(h[0]),p=ho(h[0]),b=Fi(m.getKey(),0,"text"),_=Fi(p.getKey(),p.getTextContentSize(),"text");return f.isBefore(b)||_.isBefore(g)?a:b.isBefore(f)||g.isBefore(_)?l:a}(i.shiftKey);return r!==null&&(i.preventDefault(),n.dispatchCommand(r,void 0),!0)},wt),n.registerCommand(to,()=>!!Sa(I())&&(Js([Qn()]),!0),wt),n.registerCommand(wn,i=>MR(wn),wt),n.registerCommand(ni,i=>MR(ni),wt),n.registerCommand(Nn,i=>{let r=I();if(!P(r))return!1;let{anchor:s}=r,o=s.getNode();return!!Sa(r)&&(r.isCollapsed()&&s.offset===0&&o.getPreviousSibling()===null&&Ui(o.getParentOrThrow())?(i.preventDefault(),!0):RR(Nn,i))},wt),n.registerCommand(ei,i=>{let r=I();if(!P(r))return!1;let{anchor:s}=r,o=s.getNode();return!!Sa(r)&&(r.isCollapsed()&&s.offset===o.getTextContentSize()&&o.getNextSibling()===null&&Ui(o.getParentOrThrow())?(i.preventDefault(),!0):RR(ei,i))},wt),n.registerCommand(yd,i=>LR(yd,i),wt),n.registerCommand(Wg,i=>LR(Wg,i),wt)),le(...e)}var VU=ds,GU=ho,qU=bv,YU=mv;var qt=xv,gq=qt.$createCodeHighlightNode,Bd=qt.$createCodeNode,pq=qt.$getCodeLineDirection,mq=qt.$getEndOfCodeInLine,bq=qt.$getFirstCodeNodeOfLine,_q=qt.$getLastCodeNodeOfLine,xq=qt.$getStartOfCodeInLine,yq=qt.$isCodeHighlightNode,hs=qt.$isCodeNode,WR=qt.CODE_LANGUAGE_FRIENDLY_NAME_MAP,vq=qt.CODE_LANGUAGE_MAP,Sq=qt.CodeExtension,UR=qt.CodeHighlightNode,Ca=qt.CodeNode,Cq=qt.DEFAULT_CODE_LANGUAGE,Aq=qt.PrismTokenizer,Eq=qt.getCodeLanguageOptions,Tq=qt.getCodeLanguages,wq=qt.getCodeThemeOptions,Nq=qt.getDefaultCodeLanguage,kq=qt.getEndOfCodeInLine,Oq=qt.getFirstCodeNodeOfLine,Mq=qt.getLanguageFriendlyName,Rq=qt.getLastCodeNodeOfLine,Lq=qt.getStartOfCodeInLine,yv=qt.normalizeCodeLang,Dq=qt.normalizeCodeLanguage,KR=qt.registerCodeHighlighting;var Ev={};an(Ev,{$createAutoLinkNode:()=>Cp,$createLinkNode:()=>Aa,$isAutoLinkNode:()=>vr,$isLinkNode:()=>yr,$toggleLink:()=>zd,AutoLinkExtension:()=>s9,AutoLinkNode:()=>Hd,ClickableLinkExtension:()=>QU,LinkExtension:()=>Av,LinkNode:()=>Ea,TOGGLE_LINK_COMMAND:()=>Ap,createLinkMatcherWithRegExp:()=>t9,formatUrl:()=>Sv,registerAutoLink:()=>QR,registerClickableLink:()=>GR,registerLink:()=>VR,toggleLink:()=>o9});var JU=new Set(["http:","https:","mailto:","sms:","tel:"]),Ea=class n extends Ue{__url;__target;__rel;__title;static getType(){return"link"}static clone(t){return new n(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",e={},i){super(i);let{target:r=null,rel:s=null,title:o=null}=e;this.__url=t,this.__target=r,this.__rel=s,this.__title=o}createDOM(t){let e=document.createElement("a");return this.updateLinkDOM(null,e,t),It(e,t.theme.link),e}updateLinkDOM(t,e,i){if(ip(e)){t&&t.__url===this.__url||(e.href=this.sanitizeUrl(this.__url));for(let r of["target","rel","title"]){let s=`__${r}`,o=this[s];t&&t[s]===o||(o?e[r]=o:e.removeAttribute(r))}}}updateDOM(t,e,i){return this.updateLinkDOM(t,e,i),!1}static importDOM(){return{a:t=>({conversion:XU,priority:1})}}static importJSON(t){return Aa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=Sv(t);try{let e=new URL(Sv(t));if(!JU.has(e.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){let e=this.getWritable();return e.__url=t,e}getTarget(){return this.getLatest().__target}setTarget(t){let e=this.getWritable();return e.__target=t,e}getRel(){return this.getLatest().__rel}setRel(t){let e=this.getWritable();return e.__rel=t,e}getTitle(){return this.getLatest().__title}setTitle(t){let e=this.getWritable();return e.__title=t,e}insertNewAfter(t,e=!0){let i=Aa(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(i,e),i}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,i){if(!P(e))return!1;let r=e.anchor.getNode(),s=e.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&e.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function XU(n){let t=null;if(ip(n)){let e=n.textContent;(e!==null&&e!==""||n.children.length>0)&&(t=Aa(n.getAttribute("href")||"",{rel:n.getAttribute("rel"),target:n.getAttribute("target"),title:n.getAttribute("title")}))}return{node:t}}function Aa(n="",t){return Xe(new Ea(n,t))}function yr(n){return n instanceof Ea}var Hd=class n extends Ea{__isUnlinked;constructor(t="",e={},i){super(t,e,i),this.__isUnlinked=e.isUnlinked!==void 0&&e.isUnlinked!==null&&e.isUnlinked}static getType(){return"autolink"}static clone(t){return new n(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){let e=this.getWritable();return e.__isUnlinked=t,e}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,e,i){return super.updateDOM(t,e,i)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return Cp().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,e=!0){let i=this.getParentOrThrow().insertNewAfter(t,e);if(j(i)){let r=Cp(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return i.append(r),r}return null}};function Cp(n="",t){return Xe(new Hd(n,t))}function vr(n){return n instanceof Hd}var Ap=hn("TOGGLE_LINK_COMMAND");function jR(n,t){if(n.type==="element"){let e=n.getNode();return j(e)||function(i,...r){let s=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",i);for(let a of r)o.append("v",a);throw s.search=o.toString(),Error(`Minified Lexical error #${i}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),e.getChildren()[n.offset+t]||null}return null}function zd(n,t={}){let e;if(n&&typeof n=="object"){let{url:u,...d}=n;e=u,t={...d,...t}}else e=n;let{target:i,title:r}=t,s=t.rel===void 0?"noreferrer":t.rel,o=I();if(o===null||!P(o)&&!be(o))return;if(be(o)){let u=o.getNodes();return u.length===0?void 0:void u.forEach(d=>{if(e===null){let h=pt(d,f=>!vr(f)&&yr(f));h&&(h.insertBefore(d),h.getChildren().length===0&&h.remove())}else{let h=pt(d,f=>!vr(f)&&yr(f));if(h)h.setURL(e),i!==void 0&&h.setTarget(i),s!==void 0&&h.setRel(s);else{let f=Aa(e,{rel:s,target:i});d.insertBefore(f),f.append(d)}}})}let a=o.extract();if(e===null){let u=new Set;return void a.forEach(d=>{let h=d.getParent();if(yr(h)&&!vr(h)){let f=h.getKey();if(u.has(f))return;(function(g,m){let p=new Set(m.filter(C=>g.isParentOf(C)).map(C=>C.getKey())),b=g.getChildren(),_=b.filter(C=>p.has(C.getKey()));if(_.length===b.length)return b.forEach(C=>g.insertBefore(C)),void g.remove();let x=b.findIndex(C=>p.has(C.getKey())),y=b.findLastIndex(C=>p.has(C.getKey())),v=x===0,S=y===b.length-1;if(v)_.forEach(C=>g.insertBefore(C));else if(S)for(let C=_.length-1;C>=0;C--)g.insertAfter(_[C]);else{for(let A=_.length-1;A>=0;A--)g.insertAfter(_[A]);let C=b.slice(y+1);if(C.length>0){let A=Aa(g.getURL(),{rel:g.getRel(),target:g.getTarget(),title:g.getTitle()});_[_.length-1].insertAfter(A),C.forEach(E=>A.append(E))}}})(h,a),u.add(f)}})}let l=new Set,c=u=>{l.has(u.getKey())||(l.add(u.getKey()),u.setURL(e),i!==void 0&&u.setTarget(i),s!==void 0&&u.setRel(s),r!==void 0&&u.setTitle(r))};if(a.length===1){let u=a[0],d=pt(u,yr);if(d!==null)return c(d)}(function(u){let d=I();if(!P(d))return u();let h=os(d),f=h.isBackward(),g=jR(h.anchor,f?-1:0),m=jR(h.focus,f?0:-1),p=u();if(g||m){let b=I();if(P(b)){let _=b.clone();if(g){let x=g.getParent();x&&_.anchor.set(x.getKey(),g.getIndexWithinParent()+(f?1:0),"element")}if(m){let x=m.getParent();x&&_.focus.set(x.getKey(),m.getIndexWithinParent()+(f?0:1),"element")}te(os(_))}}})(()=>{let u=null;for(let d of a){if(!d.isAttached())continue;let h=pt(d,yr);if(h){c(h);continue}if(j(d)){if(!d.isInline())continue;if(yr(d)){if(!(vr(d)||u!==null&&u.getParentOrThrow().isParentOf(d))){c(d),u=d;continue}for(let g of d.getChildren())d.insertBefore(g);d.remove();continue}}let f=d.getPreviousSibling();yr(f)&&f.is(u)?f.append(d):(u=Aa(e,{rel:s,target:i,title:r}),d.insertAfter(u),u.append(d))}})}var ZU=/^\+?[0-9\s()-]{5,}$/;function Sv(n){return n.match(/^[a-z][a-z0-9+.-]*:/i)||n.match(/^[/#.]/)?n:n.includes("@")?`mailto:${n}`:ZU.test(n)?`tel:${n}`:`https://${n}`}function VR(n,t){return le(Mn(()=>n.registerCommand(Ap,e=>{let i=t.validateUrl.peek(),r=t.attributes.peek();if(e===null)return zd(null),!0;if(typeof e=="string")return!(i!==void 0&&!i(e))&&(zd(e,r),!0);{let{url:s,target:o,rel:a,title:l}=e;return zd(s,{...r,rel:a,target:o,title:l}),!0}},wt)),Mn(()=>{let e=t.validateUrl.value;if(!e)return;let i=t.attributes.value;return n.registerCommand(io,r=>{let s=I();if(!P(s)||s.isCollapsed()||!fn(r,ClipboardEvent)||r.clipboardData===null)return!1;let o=r.clipboardData.getData("text");return!!e(o)&&!s.getNodes().some(a=>j(a))&&(n.dispatchCommand(Ap,{...i,url:o}),r.preventDefault(),!0)},wt)}))}var Av=Mt({build:(n,t,e)=>Hi(t),config:{attributes:void 0,validateUrl:void 0},mergeConfig(n,t){let e=oo(n,t);return n.attributes&&(e.attributes=oo(n.attributes,e.attributes)),e},name:"@lexical/link/Link",nodes:[Ea],register:(n,t,e)=>VR(n,e.getOutput())});function GR(n,t,e={}){let i=s=>{let o=s.target;if(!_i(o))return;let a=Yg(o);if(a===null)return;let l=null,c=null;if(a.update(()=>{let h=Re(o);if(h!==null){let f=pt(h,j);if(!t.disabled.peek())if(yr(f))l=f.sanitizeUrl(f.getURL()),c=f.getTarget();else{let g=function(m,p){let b=m;for(;b!=null;){if(p(b))return b;b=b.parentNode}return null}(o,ip);g!==null&&(l=g.href,c=g.target)}}}),l===null||l==="")return;let u=n.getEditorState().read(I);if(P(u)&&!u.isCollapsed())return void s.preventDefault();let d=s.type==="auxclick"&&s.button===1;window.open(l,t.newTab.peek()||d||s.metaKey||s.ctrlKey||c==="_blank"?"_blank":"_self"),s.preventDefault()},r=s=>{s.button===1&&i(s)};return n.registerRootListener((s,o)=>{o!==null&&(o.removeEventListener("click",i),o.removeEventListener("mouseup",r)),s!==null&&(s.addEventListener("click",i,e),s.addEventListener("mouseup",r,e))})}var QU=Mt({build:(n,t,e)=>Hi(t),config:en({disabled:!1,newTab:!1}),dependencies:[Av],name:"@lexical/link/ClickableLink",register:(n,t,e)=>GR(n,e.getOutput())});function t9(n,t=e=>e){return e=>{let i=n.exec(e);return i===null?null:{index:i.index,length:i[0].length,text:i[0],url:t(i[0])}}}function qR(n,t){for(let e=0;e<t.length;e++){let i=t[e](n);if(i)return i}return null}var e9=/[.,;\s]/;function Ep(n){return e9.test(n)}function YR(n){return Ep(n[n.length-1])}function Cv(n){return Ep(n[0])}function JR(n){let t=n.getPreviousSibling();return j(t)&&(t=t.getLastDescendant()),t===null||$t(t)||J(t)&&YR(t.getTextContent())}function XR(n){let t=n.getNextSibling();return j(t)&&(t=t.getFirstDescendant()),t===null||$t(t)||J(t)&&Cv(t.getTextContent())}function n9(n,t,e,i){return(n>0?Ep(e[n-1]):JR(i[0]))?t<e.length?Ep(e[t]):XR(i[i.length-1]):!1}function i9(n,t,e){let i=[],r=[],s=[],o=0,a=0,l=[...n];for(;l.length>0;){let c=l[0],u=c.getTextContent().length,d=a;a+u<=t?(i.push(c),o+=u):d>=e?s.push(c):r.push(c),a+=u,l.shift()}return[o,i,r,s]}function r9(n,t,e,i){let r=Cp(i.url,i.attributes);if(n.length===1){let s,o=n[0];t===0?[s,o]=o.splitText(e):[,s,o]=o.splitText(t,e);let a=Ft(i.text);return a.setFormat(s.getFormat()),a.setDetail(s.getDetail()),a.setStyle(s.getStyle()),r.append(a),s.replace(r),o}if(n.length>1){let s=n[0],o,a=s.getTextContent().length;t===0?o=s:[,o]=s.splitText(t);let l=[],c;for(let f=1;f<n.length;f++){let g=n[f],m=g.getTextContent().length,p=a;if(p<e)if(a+m<=e)l.push(g);else{let[b,_]=g.splitText(e-p);l.push(b),c=_}a+=m}let u=I(),d=u?u.getNodes().find(J):void 0,h=Ft(o.getTextContent());return h.setFormat(o.getFormat()),h.setDetail(o.getDetail()),h.setStyle(o.getStyle()),r.append(h,...l),d&&d===o&&(P(u)?h.select(u.anchor.offset,u.focus.offset):be(u)&&h.select(0,h.getTextContent().length)),o.replace(r),c}}function vv(n,t,e){let i=n.getChildren(),r=i.length;for(let l=0;l<r;l++){let c=i[l];if(!J(c)||!c.isSimpleText())return Sp(n),void e(null,n.getURL())}let s=n.getTextContent(),o=qR(s,t);if(o===null||o.text!==s||!JR(n)||!XR(n))return Sp(n),void e(null,n.getURL());let a=n.getURL();if(a!==o.url&&(n.setURL(o.url),e(o.url,a)),o.attributes){let l=n.getRel();l!==o.attributes.rel&&(n.setRel(o.attributes.rel||null),e(o.attributes.rel||null,l));let c=n.getTarget();c!==o.attributes.target&&(n.setTarget(o.attributes.target||null),e(o.attributes.target||null,c))}}function Sp(n){let t=n.getChildren();for(let e=t.length-1;e>=0;e--)n.insertAfter(t[e]);return n.remove(),t.map(e=>e.getLatest())}var ZR={changeHandlers:[],matchers:[]};function QR(n,t=ZR){let{matchers:e,changeHandlers:i}=t,r=(s,o)=>{for(let a of i)a(s,o)};return le(n.registerNodeTransform(kn,s=>{let o=s.getParentOrThrow(),a=s.getPreviousSibling();if(vr(o)&&!o.getIsUnlinked())vv(o,e,r);else if(!yr(o)){if(s.isSimpleText()&&(Cv(s.getTextContent())||!vr(a))){let l=function(c){let u=[c],d=c.getNextSibling();for(;d!==null&&J(d)&&d.isSimpleText()&&(u.push(d),!/[\s]/.test(d.getTextContent()));)d=d.getNextSibling();return u}(s);(function(c,u,d){let h=[...c],f=h.map(b=>b.getTextContent()).join(""),g,m=f,p=0;for(;(g=qR(m,u))&&g!==null;){let b=g.index,_=b+g.length;if(n9(p+b,p+_,f,h)){let[x,,y,v]=i9(h,p+b,p+_),S=r9(y,p+b-x,p+_-x,g);h=S?[S,...v]:v,d(g.url,null),p=0}else p+=_;m=m.substring(_)}})(l,e,r)}(function(l,c,u){let d=l.getPreviousSibling(),h=l.getNextSibling(),f=l.getTextContent();var g;!vr(d)||d.getIsUnlinked()||Cv(f)&&(g=f,!(d.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(g):/^\.[a-zA-Z0-9]{1,}/.test(g)))||(d.append(l),vv(d,c,u),u(null,d.getURL())),!vr(h)||h.getIsUnlinked()||YR(f)||(Sp(h),vv(h,c,u),u(null,h.getURL()))})(s,e,r)}}),n.registerCommand(Ap,s=>{let o=I();return s!==null||!P(o)||o.extract().forEach(a=>{let l=a.getParent();vr(l)&&(l.setIsUnlinked(!l.getIsUnlinked()),l.markDirty())}),!1},wt))}var s9=Mt({config:ZR,dependencies:[Av],mergeConfig(n,t){let e=oo(n,t);for(let i of["matchers","changeHandlers"]){let r=t[i];Array.isArray(r)&&(e[i]=[...n[i],...r])}return e},name:"@lexical/link/AutoLink",register:QR}),o9=zd;var rn=Ev,tL=rn.$createAutoLinkNode,Tp=rn.$createLinkNode,eL=rn.$isAutoLinkNode,Wd=rn.$isLinkNode,Ud=rn.$toggleLink,Bq=rn.AutoLinkExtension,nL=rn.AutoLinkNode,zq=rn.ClickableLinkExtension,Hq=rn.LinkExtension,wp=rn.LinkNode,Wq=rn.TOGGLE_LINK_COMMAND,Uq=rn.createLinkMatcherWithRegExp,Kq=rn.formatUrl,jq=rn.registerAutoLink,Vq=rn.registerClickableLink,Gq=rn.registerLink,qq=rn.toggleLink;var Kv={};an(Kv,{$computeTableMap:()=>sn,$computeTableMapSkipCellCheck:()=>gs,$createTableCellNode:()=>Wn,$createTableNode:()=>Ip,$createTableNodeWithDimensions:()=>hL,$createTableRowNode:()=>ka,$createTableSelection:()=>zv,$createTableSelectionFrom:()=>yL,$deleteTableColumn:()=>b9,$deleteTableColumnAtSelection:()=>bL,$deleteTableColumn__EXPERIMENTAL:()=>x9,$deleteTableRowAtSelection:()=>mL,$deleteTableRow__EXPERIMENTAL:()=>_9,$findCellNode:()=>Sc,$findTableNode:()=>wa,$getElementForTableNode:()=>TL,$getNodeTriplet:()=>De,$getTableAndElementByKey:()=>Hv,$getTableCellNodeFromLexicalNode:()=>c9,$getTableCellNodeRect:()=>Mv,$getTableColumnIndexFromTableCellNode:()=>d9,$getTableNodeFromLexicalNodeOrThrow:()=>Dp,$getTableRowIndexFromTableCellNode:()=>u9,$getTableRowNodeFromTableCellNodeOrThrow:()=>$v,$insertTableColumn:()=>p9,$insertTableColumnAtSelection:()=>pL,$insertTableColumn__EXPERIMENTAL:()=>m9,$insertTableRow:()=>f9,$insertTableRowAtSelection:()=>gL,$insertTableRow__EXPERIMENTAL:()=>g9,$isScrollableTablesActive:()=>Gd,$isTableCellNode:()=>ct,$isTableNode:()=>de,$isTableRowNode:()=>Gt,$isTableSelection:()=>zt,$mergeCells:()=>_L,$removeTableRowAtIndex:()=>h9,$unmergeCell:()=>v9,INSERT_TABLE_COMMAND:()=>dL,TableCellHeaderStates:()=>Yt,TableCellNode:()=>Cr,TableExtension:()=>I9,TableNode:()=>Ar,TableObserver:()=>Lp,TableRowNode:()=>Na,applyTableHandlers:()=>vL,getDOMCellFromTarget:()=>Vd,getTableElement:()=>go,getTableObserverFromTableElement:()=>Lv,registerTableCellUnmergeTransform:()=>wL,registerTablePlugin:()=>kL,registerTableSelectionObserver:()=>NL,setScrollableTablesActive:()=>EL});var Pv=/^(\d+(?:\.\d+)?)px$/,Yt={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1},Cr=class n extends Ue{__colSpan;__rowSpan;__headerState;__width;__backgroundColor;__verticalAlign;static getType(){return"tablecell"}static clone(t){return new n(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:iL,priority:0}),th:t=>({conversion:iL,priority:0})}}static importJSON(t){return Wn().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Yt.NO_STATUS,e=1,i,r){super(r),this.__colSpan=e,this.__rowSpan=1,this.__headerState=t,this.__width=i,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){let e=document.createElement(this.getTag());return this.__width&&(e.style.width=`${this.__width}px`),this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(e.style.backgroundColor=this.__backgroundColor),wv(this.__verticalAlign)&&(e.style.verticalAlign=this.__verticalAlign),It(e,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),e}exportDOM(t){let e=super.exportDOM(t);if(fa(e.element)){let i=e.element;i.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),i.style.border="1px solid black",this.__colSpan>1&&(i.colSpan=this.__colSpan),this.__rowSpan>1&&(i.rowSpan=this.__rowSpan),i.style.width=`${this.getWidth()||75}px`,i.style.verticalAlign=this.getVerticalAlign()||"top",i.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(i.style.backgroundColor="#f2f3f5")}return e}exportJSON(){return{...super.exportJSON(),...wv(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){let e=this.getWritable();return e.__colSpan=t,e}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){let e=this.getWritable();return e.__rowSpan=t,e}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,e=Yt.BOTH){let i=this.getWritable();return i.__headerState=t&e|i.__headerState&~e,i}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){let e=this.getWritable();return e.__width=t,e}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){let e=this.getWritable();return e.__backgroundColor=t,e}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){let e=this.getWritable();return e.__verticalAlign=t||void 0,e}toggleHeaderStyle(t){let e=this.getWritable();return(e.__headerState&t)===t?e.__headerState-=t:e.__headerState+=t,e}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Yt.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}};function wv(n){return n==="middle"||n==="bottom"}function iL(n){let t=n,e=n.nodeName.toLowerCase(),i;Pv.test(t.style.width)&&(i=parseFloat(t.style.width));let r=Wn(e==="th"?Yt.ROW:Yt.NO_STATUS,t.colSpan,i);r.__rowSpan=t.rowSpan;let s=t.style.backgroundColor;s!==""&&(r.__backgroundColor=s);let o=t.style.verticalAlign;wv(o)&&(r.__verticalAlign=o);let a=t.style,l=(a&&a.textDecoration||"").split(" "),c=a.fontWeight==="700"||a.fontWeight==="bold",u=l.includes("line-through"),d=a.fontStyle==="italic",h=l.includes("underline");return{after:f=>{let g=[],m=null,p=()=>{if(m){let b=m.getFirstChild();$t(b)&&m.getChildrenSize()===1&&b.remove()}};for(let b of f)jk(b)||J(b)||$t(b)?(J(b)&&(c&&b.toggleFormat("bold"),u&&b.toggleFormat("strikethrough"),d&&b.toggleFormat("italic"),h&&b.toggleFormat("underline")),m?m.append(b):(m=nt().append(b),g.push(m))):(g.push(b),p(),m=null);return p(),g.length===0&&g.push(nt()),g},node:r}}function Wn(n=Yt.NO_STATUS,t=1,e){return Xe(new Cr(n,t,e))}function ct(n){return n instanceof Cr}var dL=hn("INSERT_TABLE_COMMAND");function lt(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var Na=class n extends Ue{__height;static getType(){return"tablerow"}static clone(t){return new n(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:a9,priority:0})}}static importJSON(t){return ka().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,e){super(e),this.__height=t}exportJSON(){let t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){let e=document.createElement("tr");return this.__height&&(e.style.height=`${this.__height}px`),It(e,t.theme.tableRow),e}extractWithChild(t,e,i){return i==="html"}isShadowRoot(){return!0}setHeight(t){let e=this.getWritable();return e.__height=t,e}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}};function a9(n){let t=n,e;return Pv.test(t.style.height)&&(e=parseFloat(t.style.height)),{after:i=>M0(i,ct),node:ka(e)}}function ka(n){return Xe(new Na(n))}function Gt(n){return n instanceof Na}var Fv=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,l9=Fv&&"documentMode"in document?document.documentMode:null,rL=Fv&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);function hL(n,t,e=!0){let i=Ip();for(let r=0;r<n;r++){let s=ka();for(let o=0;o<t;o++){let a=Yt.NO_STATUS;typeof e=="object"?(r===0&&e.rows&&(a|=Yt.ROW),o===0&&e.columns&&(a|=Yt.COLUMN)):e&&(r===0&&(a|=Yt.ROW),o===0&&(a|=Yt.COLUMN));let l=Wn(a),c=nt();c.append(Ft()),l.append(c),s.append(l)}i.append(s)}return i}function c9(n){let t=pt(n,e=>ct(e));return ct(t)?t:null}function $v(n){let t=pt(n,e=>Gt(e));if(Gt(t))return t;throw new Error("Expected table cell to be inside of table row.")}function Dp(n){let t=pt(n,e=>de(e));if(de(t))return t;throw new Error("Expected table cell to be inside of table.")}function u9(n){let t=$v(n);return Dp(t).getChildren().findIndex(e=>e.is(t))}function d9(n){return $v(n).getChildren().findIndex(t=>t.is(n))}function fL(n,t){let e=Dp(n),{x:i,y:r}=e.getCordsFromCellNode(n,t);return{above:e.getCellNodeFromCords(i,r-1,t),below:e.getCellNodeFromCords(i,r+1,t),left:e.getCellNodeFromCords(i-1,r,t),right:e.getCellNodeFromCords(i+1,r,t)}}function h9(n,t){let e=n.getChildren();if(t>=e.length||t<0)throw new Error("Expected table cell to be inside of table row.");return e[t].remove(),n}function f9(n,t,e=!0,i,r){let s=n.getChildren();if(t>=s.length||t<0)throw new Error("Table row target index out of range");let o=s[t];if(!Gt(o))throw new Error("Row before insertion index does not exist.");for(let a=0;a<i;a++){let l=o.getChildren(),c=l.length,u=ka();for(let d=0;d<c;d++){let h=l[d];ct(h)||lt(12);let{above:f,below:g}=fL(h,r),m=Yt.NO_STATUS,p=f&&f.getWidth()||g&&g.getWidth()||void 0;(f&&f.hasHeaderState(Yt.COLUMN)||g&&g.hasHeaderState(Yt.COLUMN))&&(m|=Yt.COLUMN);let b=Wn(m,1,p);b.append(nt()),u.append(b)}e?o.insertAfter(u):o.insertBefore(u)}return n}Fv&&"InputEvent"in window&&!l9&&new window.InputEvent("input");var Nv=(n,t)=>n===Yt.BOTH||n===t?t:Yt.NO_STATUS;function gL(n=!0){let t=I();P(t)||zt(t)||lt(188);let e=t.anchor.getNode(),i=t.focus.getNode(),[r]=De(e),[s,,o]=De(i),[,a,l]=sn(o,s,r),{startRow:c}=l,{startRow:u}=a;return n?kv(c+r.__rowSpan>u+s.__rowSpan?r:s,!0):kv(u<c?s:r,!1)}var g9=gL;function kv(n,t=!0){let[,,e]=De(n),[i,r]=sn(e,n,n),s=i[0].length,{startRow:o}=r,a=null;if(t){let l=o+n.__rowSpan-1,c=i[l],u=ka();for(let h=0;h<s;h++){let{cell:f,startRow:g}=c[h];if(g+f.__rowSpan-1<=l){let m=c[h].cell.__headerState,p=Nv(m,Yt.COLUMN);u.append(Wn(p).append(nt()))}else f.setRowSpan(f.__rowSpan+1)}let d=e.getChildAtIndex(l);Gt(d)||lt(256),d.insertAfter(u),a=u}else{let l=o,c=i[l],u=ka();for(let h=0;h<s;h++){let{cell:f,startRow:g}=c[h];if(g===l){let m=c[h].cell.__headerState,p=Nv(m,Yt.COLUMN);u.append(Wn(p).append(nt()))}else f.setRowSpan(f.__rowSpan+1)}let d=e.getChildAtIndex(l);Gt(d)||lt(257),d.insertBefore(u),a=u}return a}function p9(n,t,e=!0,i,r){let s=n.getChildren(),o=[];for(let a=0;a<s.length;a++){let l=s[a];if(Gt(l))for(let c=0;c<i;c++){let u=l.getChildren();if(t>=u.length||t<0)throw new Error("Table column target index out of range");let d=u[t];ct(d)||lt(12);let{left:h,right:f}=fL(d,r),g=Yt.NO_STATUS;(h&&h.hasHeaderState(Yt.ROW)||f&&f.hasHeaderState(Yt.ROW))&&(g|=Yt.ROW);let m=Wn(g);m.append(nt()),o.push({newTableCell:m,targetCell:d})}}return o.forEach(({newTableCell:a,targetCell:l})=>{e?l.insertAfter(a):l.insertBefore(a)}),n}function pL(n=!0){let t=I();P(t)||zt(t)||lt(188);let e=t.anchor.getNode(),i=t.focus.getNode(),[r]=De(e),[s,,o]=De(i),[,a,l]=sn(o,s,r),{startColumn:c}=l,{startColumn:u}=a;return n?Ov(c+r.__colSpan>u+s.__colSpan?r:s,!0):Ov(u<c?s:r,!1)}var m9=pL;function Ov(n,t=!0,e=!0){let[,,i]=De(n),[r,s]=sn(i,n,n),o=r.length,{startColumn:a}=s,l=t?a+n.__colSpan-1:a-1,c=i.getFirstChild();Gt(c)||lt(120);let u=null;function d(g=Yt.NO_STATUS){let m=Wn(g).append(nt());return u===null&&(u=m),m}let h=c;t:for(let g=0;g<o;g++){if(g!==0){let v=h.getNextSibling();Gt(v)||lt(121),h=v}let m=r[g],p=m[l<0?0:l].cell.__headerState,b=Nv(p,Yt.ROW);if(l<0){Bv(h,d(b));continue}let{cell:_,startColumn:x,startRow:y}=m[l];if(x+_.__colSpan-1<=l){let v=_,S=y,C=l;for(;S!==g&&v.__rowSpan>1;){if(C-=_.__colSpan,!(C>=0)){h.append(d(b));continue t}{let{cell:A,startRow:E}=m[C];v=A,S=E}}v.insertAfter(d(b))}else _.setColSpan(_.__colSpan+1)}u!==null&&e&&jd(u);let f=i.getColWidths();if(f){let g=[...f],m=l<0?0:l,p=g[m];g.splice(m,0,p),i.setColWidths(g)}return u}function b9(n,t){let e=n.getChildren();for(let i=0;i<e.length;i++){let r=e[i];if(Gt(r)){let s=r.getChildren();if(t>=s.length||t<0)throw new Error("Table column target index out of range");s[t].remove()}}return n}function mL(){let n=I();P(n)||zt(n)||lt(188);let[t,e]=n.isBackward()?[n.focus.getNode(),n.anchor.getNode()]:[n.anchor.getNode(),n.focus.getNode()],[i,,r]=De(t),[s]=De(e),[o,a,l]=sn(r,i,s),{startRow:c}=a,{startRow:u}=l,d=u+s.__rowSpan-1;if(o.length===d-c+1)return void r.remove();let h=o[0].length,f=o[d+1],g=r.getChildAtIndex(d+1);for(let m=d;m>=c;m--){for(let b=h-1;b>=0;b--){let{cell:_,startRow:x,startColumn:y}=o[m][b];if(y===b){if(x<c||x+_.__rowSpan-1>d){let v=Math.max(x,c),S=Math.min(_.__rowSpan+x-1,d),C=v<=S?S-v+1:0;_.setRowSpan(_.__rowSpan-C)}if(x>=c&&x+_.__rowSpan-1>d&&m===d){g===null&&lt(122);let v=null;for(let S=0;S<b;S++){let C=f[S],A=C.cell;C.startRow===m+1&&(v=A),A.__colSpan>1&&(S+=A.__colSpan-1)}v===null?Bv(g,_):v.insertAfter(_)}}}let p=r.getChildAtIndex(m);Gt(p)||lt(206,String(m)),p.remove()}if(f!==void 0){let{cell:m}=f[0];jd(m)}else{let m=o[c-1],{cell:p}=m[0];jd(p)}}var _9=mL;function bL(){let n=I();P(n)||zt(n)||lt(188);let t=n.anchor.getNode(),e=n.focus.getNode(),[i,,r]=De(t),[s]=De(e),[o,a,l]=sn(r,i,s),{startColumn:c}=a,{startRow:u,startColumn:d}=l,h=Math.min(c,d),f=Math.max(c+i.__colSpan-1,d+s.__colSpan-1),g=f-h+1;if(o[0].length===f-h+1)return r.selectPrevious(),void r.remove();let m=o.length;for(let x=0;x<m;x++)for(let y=h;y<=f;y++){let{cell:v,startColumn:S}=o[x][y];if(S<h){if(y===h){let C=h-S;v.setColSpan(v.__colSpan-Math.min(g,v.__colSpan-C))}}else if(S+v.__colSpan-1>f){if(y===f){let C=f-S+1;v.setColSpan(v.__colSpan-C)}}else v.remove()}let p=o[u],b=c>d?p[c+i.__colSpan]:p[d+s.__colSpan];if(b!==void 0){let{cell:x}=b;jd(x)}else{let x=d<c?p[d-1]:p[c-1],{cell:y}=x;jd(y)}let _=r.getColWidths();if(_){let x=[..._];x.splice(h,g),r.setColWidths(x)}}var x9=bL;function jd(n){let t=n.getFirstDescendant();t==null?n.selectStart():t.getParentOrThrow().selectStart()}function Bv(n,t){let e=n.getFirstChild();e!==null?e.insertBefore(t):n.append(t)}function _L(n){if(n.length===0)return null;let t=Dp(n[0]),[e]=gs(t,null,null),i=1/0,r=-1/0,s=1/0,o=-1/0,a=new Set;for(let f of e)for(let g of f){if(!g||!g.cell)continue;let m=g.cell.getKey();if(!a.has(m)&&n.some(p=>p.is(g.cell))){a.add(m);let p=g.startRow,b=g.startColumn,_=g.cell.__rowSpan||1,x=g.cell.__colSpan||1;i=Math.min(i,p),r=Math.max(r,p+_-1),s=Math.min(s,b),o=Math.max(o,b+x-1)}}if(i===1/0||s===1/0)return null;let l=r-i+1,c=o-s+1,u=e[i][s];if(!u.cell)return null;let d=u.cell;d.setColSpan(c),d.setRowSpan(l);let h=new Set([d.getKey()]);for(let f=i;f<=r;f++)for(let g=s;g<=o;g++){let m=e[f][g];if(!m.cell)continue;let p=m.cell,b=p.getKey();h.has(b)||(h.add(b),y9(p)||d.append(...p.getChildren()),p.remove())}return d.getChildrenSize()===0&&d.append(nt()),d}function y9(n){if(n.getChildrenSize()!==1)return!1;let t=n.getFirstChildOrThrow();return!(!We(t)||!t.isEmpty())}function v9(){let n=I();P(n)||zt(n)||lt(188);let t=n.anchor.getNode(),e=pt(t,ct);return ct(e)||lt(148),xL(e)}function xL(n){let[t,e,i]=De(n),r=t.__colSpan,s=t.__rowSpan;if(r===1&&s===1)return;let[o,a]=sn(i,t,t),{startColumn:l,startRow:c}=a,u=t.__headerState&Yt.COLUMN,d=Array.from({length:r},(g,m)=>{let p=u;for(let b=0;p!==0&&b<o.length;b++)p&=o[b][m+l].cell.__headerState;return p}),h=t.__headerState&Yt.ROW,f=Array.from({length:s},(g,m)=>{let p=h;for(let b=0;p!==0&&b<o[0].length;b++)p&=o[m+c][b].cell.__headerState;return p});if(r>1){for(let g=1;g<r;g++)t.insertAfter(Wn(d[g]|f[0]).append(nt()));t.setColSpan(1)}if(s>1){let g;for(let m=1;m<s;m++){let p=c+m,b=o[p];g=(g||e).getNextSibling(),Gt(g)||lt(125);let _=null;for(let x=0;x<l;x++){let y=b[x],v=y.cell;y.startRow===p&&(_=v),v.__colSpan>1&&(x+=v.__colSpan-1)}if(_===null)for(let x=r-1;x>=0;x--)Bv(g,Wn(d[x]|f[m]).append(nt()));else for(let x=r-1;x>=0;x--)_.insertAfter(Wn(d[x]|f[m]).append(nt()))}t.setRowSpan(1)}}function sn(n,t,e){let[i,r,s]=gs(n,t,e);return r===null&&lt(207),s===null&&lt(208),[i,r,s]}function gs(n,t,e){let i=[],r=null,s=null;function o(l){let c=i[l];return c===void 0&&(i[l]=c=[]),c}let a=n.getChildren();for(let l=0;l<a.length;l++){let c=a[l];Gt(c)||lt(209);let u=o(l);for(let d=c.getFirstChild(),h=0;d!=null;d=d.getNextSibling()){for(ct(d)||lt(147);u[h]!==void 0;)h++;let f={cell:d,startColumn:h,startRow:l},{__rowSpan:g,__colSpan:m}=d;for(let p=0;p<g&&!(l+p>=a.length);p++){let b=o(l+p);for(let _=0;_<m;_++)b[h+_]=f}t!==null&&r===null&&t.is(d)&&(r=f),e!==null&&s===null&&e.is(d)&&(s=f)}}return[i,r,s]}function De(n){let t;if(n instanceof Cr)t=n;else if("__type"in n){let r=pt(n,ct);ct(r)||lt(148),t=r}else{let r=pt(n.getNode(),ct);ct(r)||lt(148),t=r}let e=t.getParent();Gt(e)||lt(149);let i=e.getParent();return de(i)||lt(210),[t,e,i]}function Mp(n,t,e){let i,r=Math.min(t.startColumn,e.startColumn),s=Math.min(t.startRow,e.startRow),o=Math.max(t.startColumn+t.cell.__colSpan-1,e.startColumn+e.cell.__colSpan-1),a=Math.max(t.startRow+t.cell.__rowSpan-1,e.startRow+e.cell.__rowSpan-1);do{i=!1;for(let l=0;l<n.length;l++)for(let c=0;c<n[0].length;c++){let u=n[l][c];if(!u)continue;let d=u.startColumn+u.cell.__colSpan-1,h=u.startRow+u.cell.__rowSpan-1,f=u.startColumn<=o&&d>=r,g=u.startRow<=a&&h>=s;if(f&&g){let m=Math.min(r,u.startColumn),p=Math.max(o,d),b=Math.min(s,u.startRow),_=Math.max(a,h);m===r&&p===o&&b===s&&_===a||(r=m,o=p,s=b,a=_,i=!0)}}}while(i);return{maxColumn:o,maxRow:a,minColumn:r,minRow:s}}function Mv(n){let[t,,e]=De(n),i=e.getChildren(),r=i.length,s=i[0].getChildren().length,o=new Array(r);for(let a=0;a<r;a++)o[a]=new Array(s);for(let a=0;a<r;a++){let l=i[a].getChildren(),c=0;for(let u=0;u<l.length;u++){for(;o[a][c];)c++;let d=l[u],h=d.__rowSpan||1,f=d.__colSpan||1;for(let g=0;g<h;g++)for(let m=0;m<f;m++)o[a+g][c+m]=d;if(t===d)return{colSpan:f,columnIndex:c,rowIndex:a,rowSpan:h};c+=f}}return null}function sL(n){let[[t,e,i,r],[s,o,a,l]]=["anchor","focus"].map(c=>{let u=n[c].getNode(),d=pt(u,ct);ct(d)||lt(238,c,u.getKey(),u.getType());let h=d.getParent();Gt(h)||lt(239,c);let f=h.getParent();return de(f)||lt(240,c),[u,d,h,f]});return r.is(l)||lt(241),{anchorCell:e,anchorNode:t,anchorRow:i,anchorTable:r,focusCell:o,focusNode:s,focusRow:a,focusTable:l}}var Rp=class n{tableKey;anchor;focus;_cachedNodes;dirty;constructor(t,e,i){this.anchor=e,this.focus=i,e._selection=this,i._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=t}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){if(this.tableKey==="root"||this.anchor.key==="root"||this.anchor.type!=="element"||this.focus.key==="root"||this.focus.type!=="element")return!1;let t=Qt(this.tableKey),e=Qt(this.anchor.key),i=Qt(this.focus.key);return t!==null&&e!==null&&i!==null}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return zt(t)&&this.tableKey===t.tableKey&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)}set(t,e,i){this.dirty=this.dirty||t!==this.tableKey||e!==this.anchor.key||i!==this.focus.key,this.tableKey=t,this.anchor.key=e,this.focus.key=i,this._cachedNodes=null}clone(){return new n(this.tableKey,Fi(this.anchor.key,this.anchor.offset,this.anchor.type),Fi(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(t){}insertText(){}hasFormat(t){let e=0;this.getNodes().filter(ct).forEach(r=>{let s=r.getFirstChild();We(s)&&(e|=s.getTextFormat())});let i=rO[t];return(e&i)!==0}insertNodes(t){let e=this.focus.getNode();j(e)||lt(151),os(e.select(0,e.getChildrenSize())).insertNodes(t)}getShape(){let{anchorCell:t,focusCell:e}=sL(this),i=Mv(t);i===null&&lt(153);let r=Mv(e);r===null&&lt(155);let s=Math.min(i.columnIndex,r.columnIndex),o=Math.max(i.columnIndex+i.colSpan-1,r.columnIndex+r.colSpan-1),a=Math.min(i.rowIndex,r.rowIndex),l=Math.max(i.rowIndex+i.rowSpan-1,r.rowIndex+r.rowSpan-1);return{fromX:Math.min(s,o),fromY:Math.min(a,l),toX:Math.max(s,o),toY:Math.max(a,l)}}getNodes(){if(!this.isValid())return[];let t=this._cachedNodes;if(t!==null)return t;let{anchorTable:e,anchorCell:i,focusCell:r}=sL(this),s=r.getParents()[1];if(s!==e){if(e.isParentOf(r)){let p=s.getParent();p==null&&lt(159),this.set(this.tableKey,r.getKey(),p.getKey())}else{let p=e.getParent();p==null&&lt(158),this.set(this.tableKey,p.getKey(),r.getKey())}return this.getNodes()}let[o,a,l]=sn(e,i,r),{minColumn:c,maxColumn:u,minRow:d,maxRow:h}=Mp(o,a,l),f=new Map([[e.getKey(),e]]),g=null;for(let p=d;p<=h;p++)for(let b=c;b<=u;b++){let{cell:_}=o[p][b],x=_.getParent();Gt(x)||lt(160),x!==g&&(f.set(x.getKey(),x),g=x),f.has(_.getKey())||S9(_,y=>{f.set(y.getKey(),y)})}let m=Array.from(f.values());return dO()||(this._cachedNodes=m),m}getTextContent(){let t=this.getNodes().filter(i=>ct(i)),e="";for(let i=0;i<t.length;i++){let r=t[i],s=r.__parent,o=(t[i+1]||{}).__parent;e+=r.getTextContent()+(o!==s?`
`:"	")}return e}};function zt(n){return n instanceof Rp}function zv(){let n=Fi("root",0,"element"),t=Fi("root",0,"element");return new Rp("root",n,t)}function yL(n,t,e){n.getKey(),t.getKey(),e.getKey();let i=I(),r=zt(i)?i.clone():zv();return r.set(n.getKey(),t.getKey(),e.getKey()),r}function S9(n,t){let e=[[n]];for(let i=e.at(-1);i!==void 0&&e.length>0;i=e.at(-1)){let r=i.pop();r===void 0?e.pop():t(r)!==!1&&j(r)&&e.push(r.getChildren())}}function Hv(n,t=ua()){let e=Qt(n);de(e)||lt(231,n);let i=go(e,t.getElementByKey(n));return i===null&&lt(232,n),{tableElement:i,tableNode:e}}var Lp=class{focusX;focusY;listenersToRemove;table;isHighlightingCells;anchorX;anchorY;tableNodeKey;anchorCell;focusCell;anchorCellNodeKey;focusCellNodeKey;editor;tableSelection;hasHijackedSelectionStyles;isSelecting;pointerType;shouldCheckSelection;abortController;listenerOptions;nextFocus;constructor(t,e){this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.listenersToRemove=new Set,this.tableNodeKey=e,this.editor=t,this.table={columns:0,domRows:[],rows:0},this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.isSelecting=!1,this.pointerType=null,this.shouldCheckSelection=!1,this.abortController=new AbortController,this.listenerOptions={signal:this.abortController.signal},this.nextFocus=null,this.trackTable()}getTable(){return this.table}removeListeners(){this.abortController.abort("removeListeners"),Array.from(this.listenersToRemove).forEach(t=>t()),this.listenersToRemove.clear()}$lookup(){return Hv(this.tableNodeKey,this.editor)}trackTable(){let t=new MutationObserver(e=>{this.editor.getEditorState().read(()=>{let i=!1;for(let o=0;o<e.length;o++){let a=e[o].target.nodeName;if(a==="TABLE"||a==="TBODY"||a==="THEAD"||a==="TR"){i=!0;break}}if(!i)return;let{tableNode:r,tableElement:s}=this.$lookup();this.table=Cc(r,s)},{editor:this.editor})});this.editor.getEditorState().read(()=>{let{tableNode:e,tableElement:i}=this.$lookup();this.table=Cc(e,i),t.observe(i,{attributes:!0,childList:!0,subtree:!0})},{editor:this.editor})}$clearHighlight(){let t=this.editor;this.isHighlightingCells=!1,this.anchorX=-1,this.anchorY=-1,this.focusX=-1,this.focusY=-1,this.tableSelection=null,this.anchorCellNodeKey=null,this.focusCellNodeKey=null,this.anchorCell=null,this.focusCell=null,this.hasHijackedSelectionStyles=!1,this.$enableHighlightStyle();let{tableNode:e,tableElement:i}=this.$lookup();Np(t,Cc(e,i),null),I()!==null&&(te(null),t.dispatchCommand(gr,void 0))}$enableHighlightStyle(){let t=this.editor,{tableElement:e}=this.$lookup();gn(e,t._config.theme.tableSelection),e.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1}$disableHighlightStyle(){let{tableElement:t}=this.$lookup();It(t,this.editor._config.theme.tableSelection),this.hasHijackedSelectionStyles=!0}$updateTableTableSelection(t){if(t!==null){t.tableKey!==this.tableNodeKey&&lt(233,t.tableKey,this.tableNodeKey);let e=this.editor;this.tableSelection=t,this.isHighlightingCells=!0,this.$disableHighlightStyle(),this.updateDOMSelection(),Np(e,this.table,this.tableSelection)}else this.$clearHighlight()}setShouldCheckSelection(){this.shouldCheckSelection=!0}getAndClearShouldCheckSelection(){return!!this.shouldCheckSelection&&(this.shouldCheckSelection=!1,!0)}setNextFocus(t){this.nextFocus=t}getAndClearNextFocus(){let{nextFocus:t}=this;return t!==null&&(this.nextFocus=null),t}updateDOMSelection(){if(this.anchorCell!==null&&this.focusCell!==null){let t=so(this.editor._window);t&&t.rangeCount>0&&t.removeAllRanges()}}$setFocusCellForSelection(t,e=!1){let i=this.editor,{tableNode:r}=this.$lookup(),s=t.x,o=t.y;if(this.focusCell=t,this.isHighlightingCells||this.anchorX===s&&this.anchorY===o&&!e){if(s===this.focusX&&o===this.focusY)return!1}else this.isHighlightingCells=!0,this.$disableHighlightStyle();if(this.focusX=s,this.focusY=o,this.isHighlightingCells){let a=Dv(r,t.elem);if(this.tableSelection!=null&&this.anchorCellNodeKey!=null&&a!==null)return this.focusCellNodeKey=a.getKey(),this.tableSelection=yL(r,this.$getAnchorTableCellOrThrow(),a),te(this.tableSelection),i.dispatchCommand(gr,void 0),Np(i,this.table,this.tableSelection),!0}return!1}$getAnchorTableCell(){return this.anchorCellNodeKey?Qt(this.anchorCellNodeKey):null}$getAnchorTableCellOrThrow(){let t=this.$getAnchorTableCell();return t===null&&lt(234),t}$getFocusTableCell(){return this.focusCellNodeKey?Qt(this.focusCellNodeKey):null}$getFocusTableCellOrThrow(){let t=this.$getFocusTableCell();return t===null&&lt(235),t}$setAnchorCellForSelection(t){this.isHighlightingCells=!1,this.anchorCell=t,this.anchorX=t.x,this.anchorY=t.y;let{tableNode:e}=this.$lookup(),i=Dv(e,t.elem);if(i!==null){let r=i.getKey();this.tableSelection=this.tableSelection!=null?this.tableSelection.clone():zv(),this.anchorCellNodeKey=r}}$formatCells(t){let e=I();zt(e)||lt(236);let i=cr(),r=i.anchor,s=i.focus,o=e.getNodes().filter(ct);o.length>0||lt(237);let a=o[0].getFirstChild(),l=We(a)?a.getFormatFlags(t,null):null;o.forEach(c=>{r.set(c.getKey(),0,"element"),s.set(c.getKey(),c.getChildrenSize(),"element"),i.formatText(t,l)}),te(e),this.editor.dispatchCommand(gr,void 0)}$clearText(){let{editor:t}=this,e=Qt(this.tableNodeKey);if(!de(e))throw new Error("Expected TableNode.");let i=I();zt(i)||lt(253);let r=i.getNodes().filter(ct),s=e.getFirstChild(),o=e.getLastChild();if(r.length>0&&s!==null&&o!==null&&Gt(s)&&Gt(o)&&r[0]===s.getFirstChild()&&r[r.length-1]===o.getLastChild()){e.selectPrevious();let a=e.getParent();return e.remove(),void(ss(a)&&a.isEmpty()&&t.dispatchCommand(hr,void 0))}r.forEach(a=>{if(j(a)){let l=nt(),c=Ft();l.append(c),a.append(l),a.getChildren().forEach(u=>{u!==l&&u.remove()})}}),Np(t,this.table,null),te(null),t.dispatchCommand(gr,void 0)}},Rv="__lexicalTableSelection";function vc(n){return fa(n)&&n.nodeName==="TABLE"}function go(n,t){if(!t)return t;let e=vc(t)?t:n.getDOMSlot(t).element;return e.nodeName!=="TABLE"&&lt(245,t.nodeName),e}function Wv(n){return n._window}function Kd(n,t){for(let e=t,i=null;e!==null;e=e.getParent()){if(n.is(e))return i;ct(e)&&(i=e)}return null}var C9=[[ei,"down"],[Nn,"up"],[fr,"backward"],[eo,"forward"]],A9=[tc,da,dr],E9=[ls,no];function vL(n,t,e,i){let r=e.getRootElement(),s=Wv(e);r!==null&&s!==null||lt(246);let o=new Lp(e,n.getKey()),a=go(n,t);(function(f,g){Lv(f)!==null&&lt(205),f[Rv]=g})(a,o),o.listenersToRemove.add(()=>function(f,g){Lv(f)===g&&delete f[Rv]}(a,o));let l=f=>{if(o.pointerType=f.pointerType,f.button!==0||!_i(f.target)||!s)return;let g=Vd(f.target);g!==null&&e.update(()=>{let m=rs();if(rL&&f.shiftKey&&Sr(m,n)&&(P(m)||zt(m))){let p=m.anchor.getNode(),b=Kd(n,m.anchor.getNode());b?(o.$setAnchorCellForSelection(Ta(o,b)),o.$setFocusCellForSelection(g),fs(f)):(n.isBefore(p)?n.selectStart():n.selectEnd()).anchor.set(m.anchor.key,m.anchor.offset,m.anchor.type)}else f.pointerType!=="touch"&&o.$setAnchorCellForSelection(g)}),(()=>{if(o.isSelecting)return;let m=()=>{o.isSelecting=!1,s.removeEventListener("pointerup",m),s.removeEventListener("pointermove",p)},p=b=>{if(1&~b.buttons&&o.isSelecting)return o.isSelecting=!1,s.removeEventListener("pointerup",m),void s.removeEventListener("pointermove",p);if(!_i(b.target))return;let _=null,x=!(rL||a.contains(b.target));if(x)_=oL(a,b.target);else for(let y of document.elementsFromPoint(b.clientX,b.clientY))if(_=oL(a,y),_)break;!_||o.focusCell!==null&&_.elem===o.focusCell.elem||(o.setNextFocus({focusCell:_,override:x}),e.dispatchCommand(gr,void 0))};o.isSelecting=!0,s.addEventListener("pointerup",m,o.listenerOptions),s.addEventListener("pointermove",p,o.listenerOptions)})()};a.addEventListener("pointerdown",l,o.listenerOptions),o.listenersToRemove.add(()=>{a.removeEventListener("pointerdown",l)});let c=f=>{f.detail>=3&&_i(f.target)&&Vd(f.target)!==null&&f.preventDefault()};a.addEventListener("mousedown",c,o.listenerOptions),o.listenersToRemove.add(()=>{a.removeEventListener("mousedown",c)});let u=f=>{let g=f.target;f.button===0&&_i(g)&&e.update(()=>{let m=I();zt(m)&&m.tableKey===o.tableNodeKey&&r.contains(g)&&o.$clearHighlight()})};s.addEventListener("pointerdown",u,o.listenerOptions),o.listenersToRemove.add(()=>{s.removeEventListener("pointerdown",u)});for(let[f,g]of C9)o.listenersToRemove.add(e.registerCommand(f,m=>AL(e,m,g,n,o),oe));o.listenersToRemove.add(e.registerCommand(ic,f=>{let g=I();if(zt(g)){let m=Kd(n,g.focus.getNode());if(m!==null)return fs(f),m.selectEnd(),!0}return!1},oe));let d=f=>()=>{let g=I();if(!Sr(g,n))return!1;if(zt(g))return o.$clearText(),!0;if(P(g)){if(!ct(Kd(n,g.anchor.getNode())))return!1;let m=g.anchor.getNode(),p=g.focus.getNode(),b=n.isParentOf(m),_=n.isParentOf(p);if(b&&!_||_&&!b)return o.$clearText(),!0;let x=pt(g.anchor.getNode(),v=>j(v)),y=x&&pt(x,v=>j(v)&&ct(v.getParent()));if(!j(y)||!j(x))return!1;if(f===da&&y.getPreviousSibling()===null)return!0}return!1};for(let f of A9)o.listenersToRemove.add(e.registerCommand(f,d(f),oe));let h=f=>{let g=I();if(!zt(g)&&!P(g))return!1;let m=n.isParentOf(g.anchor.getNode());if(m!==n.isParentOf(g.focus.getNode())){let p=m?"anchor":"focus",b=m?"focus":"anchor",{key:_,offset:x,type:y}=g[b];return n[g[p].isBefore(g[b])?"selectPrevious":"selectNext"]()[b].set(_,x,y),!1}return!!Sr(g,n)&&!!zt(g)&&(f&&(f.preventDefault(),f.stopPropagation()),o.$clearText(),!0)};for(let f of E9)o.listenersToRemove.add(e.registerCommand(f,h,oe));return o.listenersToRemove.add(e.registerCommand(Ql,f=>{let g=I();if(g){if(!zt(g)&&!P(g))return!1;Nd(e,fn(f,ClipboardEvent)?f:null,lR(g));let m=h(f);return P(g)?(g.removeText(),!0):m}return!1},oe)),o.listenersToRemove.add(e.registerCommand(as,f=>{let g=I();if(!Sr(g,n))return!1;if(zt(g))return o.$formatCells(f),!0;if(P(g)){let m=pt(g.anchor.getNode(),p=>ct(p));if(!ct(m))return!1}return!1},oe)),o.listenersToRemove.add(e.registerCommand(Hg,f=>{let g=I();if(!zt(g)||!Sr(g,n))return!1;let m=g.anchor.getNode(),p=g.focus.getNode();if(!ct(m)||!ct(p))return!1;if(function(E,$){if(zt(E)){let L=E.anchor.getNode(),w=E.focus.getNode();if($&&L&&w){let[N]=sn($,L,w);return L.getKey()===N[0][0].cell.getKey()&&w.getKey()===N[N.length-1].at(-1).cell.getKey()}}return!1}(g,n))return n.setFormat(f),!0;let[b,_,x]=sn(n,m,p),y=Math.max(_.startRow+_.cell.__rowSpan-1,x.startRow+x.cell.__rowSpan-1),v=Math.max(_.startColumn+_.cell.__colSpan-1,x.startColumn+x.cell.__colSpan-1),S=Math.min(_.startRow,x.startRow),C=Math.min(_.startColumn,x.startColumn),A=new Set;for(let E=S;E<=y;E++)for(let $=C;$<=v;$++){let L=b[E][$].cell;if(A.has(L))continue;A.add(L),L.setFormat(f);let w=L.getChildren();for(let N=0;N<w.length;N++){let R=w[N];j(R)&&!R.isInline()&&R.setFormat(f)}}return!0},oe)),o.listenersToRemove.add(e.registerCommand(Xl,f=>{let g=I();if(!Sr(g,n))return!1;if(zt(g))return o.$clearHighlight(),!1;if(P(g)){let m=pt(g.anchor.getNode(),p=>ct(p));if(!ct(m))return!1;if(typeof f=="string"){let p=cL(e,g,n);if(p)return lL(p,n,[Ft(f)]),!0}}return!1},oe)),i&&o.listenersToRemove.add(e.registerCommand(bi,f=>{let g=I();if(!P(g)||!g.isCollapsed()||!Sr(g,n))return!1;let m=Sc(g.anchor.getNode());return!(m===null||!n.is(wa(m)))&&(fs(f),function(p,b){let _=b==="next"?"getNextSibling":"getPreviousSibling",x=b==="next"?"getFirstChild":"getLastChild",y=p[_]();if(j(y))return y.selectEnd();let v=pt(p,Gt);v===null&&lt(247);for(let C=v[_]();Gt(C);C=C[_]()){let A=C[x]();if(j(A))return A.selectEnd()}let S=pt(v,de);S===null&&lt(248),b==="next"?S.selectNext():S.selectPrevious()}(m,f.shiftKey?"previous":"next"),!0)},oe)),o.listenersToRemove.add(e.registerCommand(Zk,f=>n.isSelected(),oe)),o.listenersToRemove.add(e.registerCommand(vd,(f,g)=>{if(e!==g)return!1;let{nodes:m,selection:p}=f,b=p.getStartEndPoints(),_=zt(p),x=P(p)&&pt(p.anchor.getNode(),q=>ct(q))!==null&&pt(p.focus.getNode(),q=>ct(q))!==null||_;if(m.length!==1||!de(m[0])||!x||b===null)return!1;let[y,v]=b,[S,C,A]=De(y),E=pt(v.getNode(),q=>ct(q));if(!(ct(S)&&ct(E)&&Gt(C)&&de(A)))return!1;let $=m[0],[L,w,N]=sn(A,S,E),[R]=gs($,null,null),k=L.length,D=k>0?L[0].length:0,F=w.startRow,z=w.startColumn,U=R.length,X=U>0?R[0].length:0;if(_){let q=Mp(L,w,N),vt=q.maxRow-q.minRow+1,kt=q.maxColumn-q.minColumn+1;F=q.minRow,z=q.minColumn,U=Math.min(U,vt),X=Math.min(X,kt)}let G=!1,Q=Math.min(k,F+U)-1,st=Math.min(D,z+X)-1,ut=new Set;for(let q=F;q<=Q;q++)for(let vt=z;vt<=st;vt++){let kt=L[q][vt];ut.has(kt.cell.getKey())||kt.cell.__rowSpan===1&&kt.cell.__colSpan===1||(xL(kt.cell),ut.add(kt.cell.getKey()),G=!0)}let[at]=gs(A.getWritable(),null,null),et=U-k+F;for(let q=0;q<et;q++)kv(at[k-1][0].cell);let bt=X-D+z;for(let q=0;q<bt;q++)Ov(at[0][D-1].cell,!0,!1);[at]=gs(A.getWritable(),null,null);for(let q=F;q<F+U;q++)for(let vt=z;vt<z+X;vt++){let kt=q-F,Un=vt-z,wr=R[kt][Un];if(wr.startRow!==kt||wr.startColumn!==Un)continue;let Ne=wr.cell;if(Ne.__rowSpan!==1||Ne.__colSpan!==1){let je=[],Nr=Math.min(q+Ne.__rowSpan,F+U)-1,pn=Math.min(vt+Ne.__colSpan,z+X)-1;for(let Kn=q;Kn<=Nr;Kn++)for(let jn=vt;jn<=pn;jn++){let po=at[Kn][jn];je.push(po.cell)}_L(je),G=!0}let{cell:ri}=at[q][vt],Ke=ri.getChildren();Ne.getChildren().forEach(je=>{J(je)&&nt().append(je),ri.append(je)}),Ke.forEach(je=>je.remove())}if(_&&G){let[q]=gs(A.getWritable(),null,null);q[w.startRow][w.startColumn].cell.selectEnd()}return!0},oe)),o.listenersToRemove.add(e.registerCommand(gr,()=>{let f=I(),g=rs(),m=o.getAndClearNextFocus();if(m!==null){let{focusCell:p}=m;if(zt(f)&&f.tableKey===o.tableNodeKey)return(p.x!==o.focusX||p.y!==o.focusY)&&(o.$setFocusCellForSelection(p),!0);if(p!==o.anchorCell&&Sr(f,n))return o.$setFocusCellForSelection(p),!0}if(o.getAndClearShouldCheckSelection()&&P(g)&&P(f)&&f.isCollapsed()){let p=f.anchor.getNode(),b=n.getFirstChild(),_=Sc(p);if(_!==null&&Gt(b)){let x=b.getFirstChild();if(ct(x)&&n.is(pt(_,y=>y.is(n)||y.is(x))))return x.selectStart(),!0}}if(P(f)){let{anchor:p,focus:b}=f,_=p.getNode(),x=b.getNode(),y=Sc(_),v=Sc(x),S=!(!y||!n.is(wa(y))),C=!(!v||!n.is(wa(v))),A=S!==C,E=S&&C,$=f.isBackward();if(A){let L=f.clone();if(C){let[w]=sn(n,v,v),N=w[0][0].cell,R=w[w.length-1].at(-1).cell;L.focus.set($?N.getKey():R.getKey(),$?N.getChildrenSize():R.getChildrenSize(),"element")}else if(S){let[w]=sn(n,y,y),N=w[0][0].cell,R=w[w.length-1].at(-1).cell;L.anchor.set($?R.getKey():N.getKey(),$?R.getChildrenSize():0,"element")}te(L),aL(e,o)}else if(E&&(y.is(v)||(o.$setAnchorCellForSelection(Ta(o,y)),o.$setFocusCellForSelection(Ta(o,v),!0)),o.pointerType==="touch"&&o.isSelecting&&f.isCollapsed()&&P(g)&&g.isCollapsed())){let L=Sc(g.anchor.getNode());L&&!L.is(v)&&(o.$setAnchorCellForSelection(Ta(o,L)),o.$setFocusCellForSelection(Ta(o,v),!0),o.pointerType=null)}}else if(f&&zt(f)&&f.is(g)&&f.tableKey===n.getKey()){let p=so(s);if(p&&p.anchorNode&&p.focusNode){let b=Re(p.focusNode),_=b&&!n.isParentOf(b),x=Re(p.anchorNode),y=x&&n.isParentOf(x);if(_&&y&&p.rangeCount>0){let v=$k(p,e);v&&(v.anchor.set(n.getKey(),f.isBackward()?n.getChildrenSize():0,"element"),p.removeAllRanges(),te(v))}}}return f&&!f.is(g)&&(zt(f)||zt(g))&&o.tableSelection&&!o.tableSelection.is(g)?(zt(f)&&f.tableKey===o.tableNodeKey?o.$updateTableTableSelection(f):!zt(f)&&zt(g)&&g.tableKey===o.tableNodeKey&&o.$updateTableTableSelection(null),!1):(o.hasHijackedSelectionStyles&&!n.isSelected()?function(p,b){b.$enableHighlightStyle(),Uv(b.table,_=>{let x=_.elem;_.highlighted=!1,CL(p,_),x.getAttribute("style")||x.removeAttribute("style")})}(e,o):!o.hasHijackedSelectionStyles&&n.isSelected()&&aL(e,o),!1)},oe)),o.listenersToRemove.add(e.registerCommand(hr,()=>{let f=I();if(!P(f)||!f.isCollapsed()||!Sr(f,n))return!1;let g=cL(e,f,n);return!!g&&(lL(g,n),!0)},oe)),o}function Lv(n){return n[Rv]||null}function Vd(n){let t=n;for(;t!=null;){let e=t.nodeName;if(e==="TD"||e==="TH"){let i=t._cell;return i===void 0?null:i}t=t.parentNode}return null}function oL(n,t){if(!n.contains(t))return null;let e=null;for(let i=t;i!=null;i=i.parentNode){if(i===n)return e;let r=i.nodeName;r!=="TD"&&r!=="TH"||(e=i._cell||null)}return null}function Cc(n,t){let e=[],i={columns:0,domRows:e,rows:0},r=go(n,t).querySelector("tr"),s=0,o=0;for(e.length=0;r!=null;){let a=r.nodeName;if(a==="TD"||a==="TH"){let u={elem:r,hasBackgroundColor:r.style.backgroundColor!=="",highlighted:!1,x:s,y:o};r._cell=u;let d=e[o];d===void 0&&(d=e[o]=[]),d[s]=u}else{let u=r.firstChild;if(u!=null){r=u;continue}}let l=r.nextSibling;if(l!=null){s++,r=l;continue}let c=r.parentNode;if(c!=null){let u=c.nextSibling;if(u==null)break;o++,s=0,r=u}}return i.columns=s+1,i.rows=o+1,i}function Np(n,t,e){let i=new Set(e?e.getNodes():[]);Uv(t,(r,s)=>{let o=r.elem;i.has(s)?(r.highlighted=!0,SL(n,r)):(r.highlighted=!1,CL(n,r),o.getAttribute("style")||o.removeAttribute("style"))})}function Uv(n,t){let{domRows:e}=n;for(let i=0;i<e.length;i++){let r=e[i];if(r)for(let s=0;s<r.length;s++){let o=r[s];if(!o)continue;let a=Re(o.elem);a!==null&&t(o,a,{x:s,y:i})}}}function aL(n,t){t.$disableHighlightStyle(),Uv(t.table,e=>{e.highlighted=!0,SL(n,e)})}var T9=(n,t,e,i,r)=>{let s=r==="forward";switch(r){case"backward":case"forward":return e!==(s?n.table.columns-1:0)?Op(t.getCellNodeFromCordsOrThrow(e+(s?1:-1),i,n.table),s):i!==(s?n.table.rows-1:0)?Op(t.getCellNodeFromCordsOrThrow(s?0:n.table.columns-1,i+(s?1:-1),n.table),s):s?t.selectNext():t.selectPrevious(),!0;case"up":return i!==0?Op(t.getCellNodeFromCordsOrThrow(e,i-1,n.table),!1):t.selectPrevious(),!0;case"down":return i!==n.table.rows-1?Op(t.getCellNodeFromCordsOrThrow(e,i+1,n.table),!0):t.selectNext(),!0;default:return!1}};function Tv(n,t){let e,i;if(t.startColumn===n.minColumn)e="minColumn";else{if(t.startColumn+t.cell.__colSpan-1!==n.maxColumn)return null;e="maxColumn"}if(t.startRow===n.minRow)i="minRow";else{if(t.startRow+t.cell.__rowSpan-1!==n.maxRow)return null;i="maxRow"}return[e,i]}function kp([n,t]){return[n==="minColumn"?"maxColumn":"minColumn",t==="minRow"?"maxRow":"minRow"]}function yc(n,t,[e,i]){let r=t[i],s=n[r];s===void 0&&lt(250,i,String(r));let o=t[e],a=s[o];return a===void 0&&lt(250,e,String(o)),a}function w9(n,t,e,i,r){let s=Mp(t,e,i),o=function(S,C){let{minColumn:A,maxColumn:E,minRow:$,maxRow:L}=C,w=1,N=1,R=1,k=1,D=S[$],F=S[L];for(let z=A;z<=E;z++)w=Math.max(w,D[z].cell.__rowSpan),k=Math.max(k,F[z].cell.__rowSpan);for(let z=$;z<=L;z++)N=Math.max(N,S[z][A].cell.__colSpan),R=Math.max(R,S[z][E].cell.__colSpan);return{bottomSpan:k,leftSpan:N,rightSpan:R,topSpan:w}}(t,s),{topSpan:a,leftSpan:l,bottomSpan:c,rightSpan:u}=o,d=function(S,C){let A=Tv(S,C);return A===null&&lt(249,C.cell.getKey()),A}(s,e),[h,f]=kp(d),g=s[h],m=s[f];r==="forward"?g+=h==="maxColumn"?1:l:r==="backward"?g-=h==="minColumn"?1:u:r==="down"?m+=f==="maxRow"?1:a:r==="up"&&(m-=f==="minRow"?1:c);let p=t[m];if(p===void 0)return!1;let b=p[g];if(b===void 0)return!1;let[_,x]=function(S,C,A){let E=Mp(S,C,A),$=Tv(E,C);if($)return[yc(S,E,$),yc(S,E,kp($))];let L=Tv(E,A);if(L)return[yc(S,E,kp(L)),yc(S,E,L)];let w=["minColumn","minRow"];return[yc(S,E,w),yc(S,E,kp(w))]}(t,e,b),y=Ta(n,_.cell),v=Ta(n,x.cell);return n.$setAnchorCellForSelection(y),n.$setFocusCellForSelection(v,!0),!0}function Sr(n,t){if(P(n)||zt(n)){let e=t.isParentOf(n.anchor.getNode()),i=t.isParentOf(n.focus.getNode());return e&&i}return!1}function Op(n,t){t?n.selectStart():n.selectEnd()}function SL(n,t){let e=t.elem,i=n._config.theme;ct(Re(e))||lt(131),It(e,i.tableCellSelected)}function CL(n,t){let e=t.elem;ct(Re(e))||lt(131);let i=n._config.theme;gn(e,i.tableCellSelected)}function Sc(n){let t=pt(n,ct);return ct(t)?t:null}function wa(n){let t=pt(n,de);return de(t)?t:null}function N9(n,t,e,i,r,s,o){let a=qs(e.focus,r?"previous":"next");if(Lg(a))return!1;let l=a;for(let p of hd(a).iterNodeCarets("shadowRoot")){if(!Dg(p)||!j(p.origin))return!1;l=p}let c=l.getParentAtCaret();if(!ct(c))return!1;let u=c,d=function(p){for(let b of hd(p).iterNodeCarets("root")){let{origin:_}=b;if(ct(_)){if(Xs(b))return ti(_,p.direction)}else if(!Gt(_))break}return null}(Qe(u,l.direction)),h=pt(u,de);if(!h||!h.is(s))return!1;let f=n.getElementByKey(u.getKey()),g=Vd(f);if(!f||!g)return!1;let m=TL(n,h);if(o.table=m,d)if(i==="extend"){let p=Vd(n.getElementByKey(d.origin.getKey()));if(!p)return!1;o.$setAnchorCellForSelection(g),o.$setFocusCellForSelection(p,!0)}else{let p=$i(d);Zs(e.anchor,p),Zs(e.focus,p)}else if(i==="extend")o.$setAnchorCellForSelection(g),o.$setFocusCellForSelection(g,!0);else{let p=function(b){let _=fd(b);return Xs(_)?$i(_):b}(Qe(h,a.direction));Zs(e.anchor,p),Zs(e.focus,p)}return fs(t),!0}function AL(n,t,e,i,r){if((e==="up"||e==="down")&&function(o){let a=o.getRootElement();return a?a.hasAttribute("aria-controls")&&a.getAttribute("aria-controls")==="typeahead-menu":!1}(n))return!1;let s=I();if(!Sr(s,i)){if(P(s)){if(e==="backward"){if(s.focus.offset>0)return!1;let o=function(l){for(let c=l,u=l;u!==null;c=u,u=u.getParent())if(j(u)){if(u!==c&&u.getFirstChild()!==c)return null;if(!u.isInline())return u}return null}(s.focus.getNode());if(!o)return!1;let a=o.getPreviousSibling();return!!de(a)&&(fs(t),t.shiftKey?s.focus.set(a.getParentOrThrow().getKey(),a.getIndexWithinParent(),"element"):a.selectEnd(),!0)}if(t.shiftKey&&(e==="up"||e==="down")){let o=s.focus.getNode();if(!s.isCollapsed()&&(e==="up"&&!s.isBackward()||e==="down"&&s.isBackward())){let a=pt(o,h=>de(h));if(ct(a)&&(a=pt(a,de)),a!==i||!a)return!1;let l=e==="down"?a.getNextSibling():a.getPreviousSibling();if(!l)return!1;let c=0;e==="up"&&j(l)&&(c=l.getChildrenSize());let u=l;e==="up"&&j(l)&&(u=l.getLastChild()||l,c=J(u)?u.getTextContentSize():0);let d=s.clone();return d.focus.set(u.getKey(),c,J(u)?"text":"element"),te(d),fs(t),!0}if(Le(o)){let a=e==="up"?s.getNodes()[s.getNodes().length-1]:s.getNodes()[0];if(a&&Kd(i,a)!==null){let l=i.getFirstDescendant(),c=i.getLastDescendant();if(!l||!c)return!1;let[u]=De(l),[d]=De(c),h=i.getCordsFromCellNode(u,r.table),f=i.getCordsFromCellNode(d,r.table),g=i.getDOMCellFromCordsOrThrow(h.x,h.y,r.table),m=i.getDOMCellFromCordsOrThrow(f.x,f.y,r.table);return r.$setAnchorCellForSelection(g),r.$setFocusCellForSelection(m,!0),!0}return!1}{let a=pt(o,c=>j(c)&&!c.isInline());if(ct(a)&&(a=pt(a,de)),!a)return!1;let l=e==="down"?a.getNextSibling():a.getPreviousSibling();if(de(l)&&r.tableNodeKey===l.getKey()){let c=l.getFirstDescendant(),u=l.getLastDescendant();if(!c||!u)return!1;let[d]=De(c),[h]=De(u),f=s.clone();return f.focus.set((e==="up"?d:h).getKey(),e==="up"?0:h.getChildrenSize(),"element"),fs(t),te(f),!0}}}}return e==="down"&&Gd(n)&&r.setShouldCheckSelection(),!1}if(P(s)){if(e==="backward"||e==="forward")return N9(n,t,s,t.shiftKey?"extend":"move",e==="backward",i,r);if(s.isCollapsed()){let{anchor:o,focus:a}=s,l=pt(o.getNode(),ct),c=pt(a.getNode(),ct);if(!ct(l)||!l.is(c))return!1;let u=wa(l);if(u!==i&&u!=null){let b=go(u,n.getElementByKey(u.getKey()));if(b!=null)return r.table=Cc(u,b),AL(n,t,e,u,r)}let d=n.getElementByKey(l.__key),h=n.getElementByKey(o.key);if(h==null||d==null)return!1;let f;if(o.type==="element")f=h.getBoundingClientRect();else{let b=so(Wv(n));if(b===null||b.rangeCount===0)return!1;f=b.getRangeAt(0).getBoundingClientRect()}let g=e==="up"?l.getFirstChild():l.getLastChild();if(g==null)return!1;let m=n.getElementByKey(g.__key);if(m==null)return!1;let p=m.getBoundingClientRect();if(e==="up"?p.top>f.top-f.height:f.bottom+f.height>p.bottom){fs(t);let b=i.getCordsFromCellNode(l,r.table);if(!t.shiftKey)return T9(r,i,b.x,b.y,e);{let _=i.getDOMCellFromCordsOrThrow(b.x,b.y,r.table);r.$setAnchorCellForSelection(_),r.$setFocusCellForSelection(_,!0)}return!0}}}else if(zt(s)){let{anchor:o,focus:a}=s,l=pt(o.getNode(),ct),c=pt(a.getNode(),ct),[u]=s.getNodes();de(u)||lt(251);let d=go(u,n.getElementByKey(u.getKey()));if(!ct(l)||!ct(c)||!de(u)||d==null)return!1;r.$updateTableTableSelection(s);let h=Cc(u,d),f=i.getCordsFromCellNode(l,h),g=i.getDOMCellFromCordsOrThrow(f.x,f.y,h);if(r.$setAnchorCellForSelection(g),fs(t),t.shiftKey){let[m,p,b]=sn(i,l,c);return w9(r,m,p,b,e)}return c.selectEnd(),!0}return!1}function fs(n){n.preventDefault(),n.stopImmediatePropagation(),n.stopPropagation()}function lL(n,t,e){let i=nt();n==="first"?t.insertBefore(i):t.insertAfter(i),i.append(...e||[]),i.selectEnd()}function cL(n,t,e){let i=e.getParent();if(!i)return;let r=so(Wv(n));if(!r)return;let s=r.anchorNode,o=n.getElementByKey(i.getKey()),a=go(e,n.getElementByKey(e.getKey()));if(!s||!o||!a||!o.contains(s)||a.contains(s))return;let l=pt(t.anchor.getNode(),_=>ct(_));if(!l)return;let c=pt(l,_=>de(_));if(!de(c)||!c.is(e))return;let[u,d]=sn(e,l,l),h=u[0][0],f=u[u.length-1][u[0].length-1],{startRow:g,startColumn:m}=d,p=g===h.startRow&&m===h.startColumn,b=g===f.startRow&&m===f.startColumn;return p?"first":b?"last":void 0}function Ta(n,t){let{tableNode:e}=n.$lookup(),i=e.getCordsFromCellNode(t,n.table);return e.getDOMCellFromCordsOrThrow(i.x,i.y,n.table)}function Dv(n,t,e){return Kd(n,Re(t,e))}function uL(n,t,e){if(!t.theme.tableAlignment)return;let i=[],r=[];for(let s of["center","right"]){let o=t.theme.tableAlignment[s];o&&(s===e?r:i).push(o)}gn(n,...i),It(n,...r)}var Iv=new WeakSet;function Gd(n=ua()){return Iv.has(n)}function EL(n,t){t?Iv.add(n):Iv.delete(n)}var Ar=class n extends Ue{__rowStriping;__frozenColumnCount;__frozenRowCount;__colWidths;static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){let e=this.getWritable();return e.__colWidths=t,e}static clone(t){return new n(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:k9,priority:1})}}static importJSON(t){return Ip().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0,this.__colWidths=void 0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,e,i){return i==="html"}getDOMSlot(t){let e=vc(t)?t:t.querySelector("table");return vc(e)||lt(229),super.getDOMSlot(t).withElement(e).withAfter(e.querySelector("colgroup"))}createDOM(t,e){let i=document.createElement("table");this.__style&&(i.style.cssText=this.__style);let r=document.createElement("colgroup");if(i.appendChild(r),mO(r),It(i,t.theme.table),this.updateTableElement(null,i,t),Gd(e)){let s=document.createElement("div"),o=t.theme.tableScrollableWrapper;return o?It(s,o):s.style.cssText="overflow-x: auto;",s.appendChild(i),this.updateTableWrapper(null,s,i,t),s}return i}updateTableWrapper(t,e,i,r){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(s,o,a,l){l>0?(It(s,a.theme.tableFrozenColumn),o.setAttribute("data-lexical-frozen-column","true")):(gn(s,a.theme.tableFrozenColumn),o.removeAttribute("data-lexical-frozen-column"))}(e,i,r,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(s,o,a,l){l>0?(It(s,a.theme.tableFrozenRow),o.setAttribute("data-lexical-frozen-row","true")):(gn(s,a.theme.tableFrozenRow),o.removeAttribute("data-lexical-frozen-row"))}(e,i,r,this.__frozenRowCount)}updateTableElement(t,e,i){this.__style!==(t?t.__style:"")&&(e.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(r,s,o){o?(It(r,s.theme.tableRowStriping),r.setAttribute("data-lexical-row-striping","true")):(gn(r,s.theme.tableRowStriping),r.removeAttribute("data-lexical-row-striping"))}(e,i,this.__rowStriping),function(r,s,o,a){let l=r.querySelector("colgroup");if(!l)return;let c=[];for(let u=0;u<o;u++){let d=document.createElement("col"),h=a&&a[u];h&&(d.style.width=`${h}px`),c.push(d)}l.replaceChildren(...c)}(e,0,this.getColumnCount(),this.getColWidths()),uL(e,i,this.getFormatType())}updateDOM(t,e,i){let r=this.getDOMSlot(e).element;return e===r===Gd()||(we(s=e)&&s.nodeName==="DIV"&&this.updateTableWrapper(t,e,r,i),this.updateTableElement(t,r,i),!1);var s}exportDOM(t){let e=super.exportDOM(t),{element:i}=e;return{after:r=>{if(e.after&&(r=e.after(r)),!vc(r)&&we(r)&&(r=r.querySelector("table")),!vc(r))return null;uL(r,t._config,this.getFormatType());let[s]=gs(this,null,null),o=new Map;for(let u of s)for(let d of u){let h=d.cell.getKey();o.has(h)||o.set(h,{colSpan:d.cell.getColSpan(),startColumn:d.startColumn})}let a=new Set;for(let u of r.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){let d=u.getAttribute("data-temporary-table-cell-lexical-key");if(d){let h=o.get(d);if(u.removeAttribute("data-temporary-table-cell-lexical-key"),h){o.delete(d);for(let f=0;f<h.colSpan;f++)a.add(f+h.startColumn)}}}let l=r.querySelector(":scope > colgroup");if(l){let u=Array.from(r.querySelectorAll(":scope > colgroup > col")).filter((d,h)=>a.has(h));l.replaceChildren(...u)}let c=r.querySelectorAll(":scope > tr");if(c.length>0){let u=document.createElement("tbody");for(let d of c)u.appendChild(d);r.append(u)}return r},element:!vc(i)&&we(i)?i.querySelector("table"):i}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,e){let{rows:i,domRows:r}=e;for(let s=0;s<i;s++){let o=r[s];if(o!=null)for(let a=0;a<o.length;a++){let l=o[a];if(l==null)continue;let{elem:c}=l,u=Dv(this,c);if(u!==null&&t.is(u))return{x:a,y:s}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,e,i){let{domRows:r}=i,s=r[e];if(s==null)return null;let o=s[t<s.length?t:s.length-1];return o??null}getDOMCellFromCordsOrThrow(t,e,i){let r=this.getDOMCellFromCords(t,e,i);if(!r)throw new Error("Cell not found at cords.");return r}getCellNodeFromCords(t,e,i){let r=this.getDOMCellFromCords(t,e,i);if(r==null)return null;let s=Re(r.elem);return ct(s)?s:null}getCellNodeFromCordsOrThrow(t,e,i){let r=this.getCellNodeFromCords(t,e,i);if(!r)throw new Error("Node at cords not TableCellNode.");return r}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){let e=this.getWritable();return e.__rowStriping=t,e}setFrozenColumns(t){let e=this.getWritable();return e.__frozenColumnCount=t,e}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){let e=this.getWritable();return e.__frozenRowCount=t,e}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){let t=this.getFirstChild();if(!t)return 0;let e=0;return t.getChildren().forEach(i=>{ct(i)&&(e+=i.getColSpan())}),e}};function TL(n,t){let e=n.getElementByKey(t.getKey());return e===null&&lt(230),Cc(t,e)}function k9(n){let t=Ip();n.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),n.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),n.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);let e=n.querySelector(":scope > colgroup");if(e){let i=[];for(let r of e.querySelectorAll(":scope > col")){let s=r.style.width||"";if(!Pv.test(s)&&(s=r.getAttribute("width")||"",!/^\d+$/.test(s))){i=void 0;break}i.push(parseFloat(s))}i&&t.setColWidths(i)}return{after:i=>M0(i,Gt),node:t}}function Ip(){return Xe(new Ar)}function de(n){return n instanceof Ar}function O9({rows:n,columns:t,includeHeaders:e}){let i=I()||rs();if(!i||!P(i)||wa(i.anchor.getNode()))return!1;let r=hL(Number(n),Number(t),e);XO(r);let s=r.getFirstDescendant();return J(s)&&s.select(),!0}function M9(n){Gt(n.getParent())?n.isEmpty()&&n.append(nt()):n.remove()}function R9(n){de(n.getParent())?R0(n,ct):n.remove()}function L9(n){R0(n,Gt);let[t]=gs(n,null,null),e=t.reduce((r,s)=>Math.max(r,s.length),0),i=n.getChildren();for(let r=0;r<t.length;++r){let s=i[r];if(!s)continue;Gt(s)||lt(254,s.constructor.name,s.getType());let o=t[r].reduce((a,l)=>l?1+a:a,0);if(o!==e)for(let a=o;a<e;++a){let l=Wn();l.append(nt()),s.append(l)}}}function D9(n){if(n.detail<3||!_i(n.target))return!1;let t=Re(n.target);if(t===null)return!1;let e=pt(t,i=>j(i)&&!i.isInline());return e===null?!1:!!ct(e.getParent())&&(e.select(0),!0)}function wL(n){return n.registerNodeTransform(Cr,t=>{if(t.getColSpan()>1||t.getRowSpan()>1){let[,,e]=De(t),[i]=sn(e,t,t),r=i.length,s=i[0].length,o=e.getFirstChild();Gt(o)||lt(175);let a=[];for(let l=0;l<r;l++){l!==0&&(o=o.getNextSibling(),Gt(o)||lt(175));let c=null;for(let u=0;u<s;u++){let d=i[l][u],h=d.cell;if(d.startRow===l&&d.startColumn===u)c=h,a.push(h);else if(h.getColSpan()>1||h.getRowSpan()>1){ct(h)||lt(176);let f=Wn(h.__headerState);c!==null?c.insertAfter(f):JO(o,f)}}}for(let l of a)l.setColSpan(1),l.setRowSpan(1)}})}function NL(n,t=!0){let e=new Map,i=(s,o,a)=>{let l=go(s,a),c=vL(s,l,n,t);e.set(o,[c,l])},r=n.registerMutationListener(Ar,s=>{n.getEditorState().read(()=>{for(let[o,a]of s){let l=e.get(o);if(a==="created"||a==="updated"){let{tableNode:c,tableElement:u}=Hv(o);l===void 0?i(c,o,u):u!==l[1]&&(l[0].removeListeners(),e.delete(o),i(c,o,u))}else a==="destroyed"&&l!==void 0&&(l[0].removeListeners(),e.delete(o))}},{editor:n})},{skipInitialization:!1});return()=>{r();for(let[,[s]]of e)s.removeListeners()}}function kL(n){return n.hasNodes([Ar])||lt(255),le(n.registerCommand(dL,O9,it),n.registerCommand(vd,({nodes:t,selection:e},i)=>n!==i||!P(e)?!1:wa(e.anchor.getNode())!==null&&t.some(de),it),n.registerCommand(Jl,D9,it),n.registerNodeTransform(Ar,L9),n.registerNodeTransform(Na,R9),n.registerNodeTransform(Cr,M9))}var I9=Mt({build:(n,t,e)=>Hi(t),config:en({hasCellBackgroundColor:!0,hasCellMerge:!0,hasHorizontalScroll:!0,hasTabHandler:!0}),name:"@lexical/table/Table",nodes:[Ar,Na,Cr],register(n,t,e){let i=e.getOutput();return le(Mn(()=>{let r=i.hasHorizontalScroll.value;Gd(n)!==r&&(EL(n,r),n.registerNodeTransform(Ar,()=>{})())}),kL(n),Mn(()=>NL(n,i.hasTabHandler.value)),Mn(()=>i.hasCellMerge.value?void 0:wL(n)),Mn(()=>i.hasCellBackgroundColor.value?void 0:n.registerNodeTransform(Cr,r=>{r.getBackgroundColor()!==null&&r.setBackgroundColor(null)})))}});var ht=Kv,tY=ht.$computeTableMap,eY=ht.$computeTableMapSkipCellCheck,nY=ht.$createTableCellNode,iY=ht.$createTableNode,rY=ht.$createTableNodeWithDimensions,sY=ht.$createTableRowNode,oY=ht.$createTableSelection,aY=ht.$createTableSelectionFrom,lY=ht.$deleteTableColumn,OL=ht.$deleteTableColumnAtSelection,cY=ht.$deleteTableColumn__EXPERIMENTAL,ML=ht.$deleteTableRowAtSelection,uY=ht.$deleteTableRow__EXPERIMENTAL,jv=ht.$findCellNode,Vv=ht.$findTableNode,RL=ht.$getElementForTableNode,dY=ht.$getNodeTriplet,hY=ht.$getTableAndElementByKey,qd=ht.$getTableCellNodeFromLexicalNode,fY=ht.$getTableCellNodeRect,LL=ht.$getTableColumnIndexFromTableCellNode,gY=ht.$getTableNodeFromLexicalNodeOrThrow,DL=ht.$getTableRowIndexFromTableCellNode,pY=ht.$getTableRowNodeFromTableCellNodeOrThrow,mY=ht.$insertTableColumn,Gv=ht.$insertTableColumnAtSelection,bY=ht.$insertTableColumn__EXPERIMENTAL,_Y=ht.$insertTableRow,qv=ht.$insertTableRowAtSelection,xY=ht.$insertTableRow__EXPERIMENTAL,yY=ht.$isScrollableTablesActive,vY=ht.$isTableCellNode,SY=ht.$isTableNode,CY=ht.$isTableRowNode,AY=ht.$isTableSelection,EY=ht.$mergeCells,TY=ht.$removeTableRowAtIndex,wY=ht.$unmergeCell,IL=ht.INSERT_TABLE_COMMAND,Er=ht.TableCellHeaderStates,Ac=ht.TableCellNode,NY=ht.TableExtension,Pp=ht.TableNode,kY=ht.TableObserver,PL=ht.TableRowNode,OY=ht.applyTableHandlers,MY=ht.getDOMCellFromTarget,RY=ht.getTableElement,LY=ht.getTableObserverFromTableElement,DY=ht.registerTableCellUnmergeTransform,FL=ht.registerTablePlugin,$L=ht.registerTableSelectionObserver,BL=ht.setScrollableTablesActive;var P9=So(Du(),1);function yt(n,t,e=""){let i=document.createElement(n);for(let[r,s]of Object.entries(t||{}))r in i?i[r]=s:s!=null&&i.setAttribute(r,s);return e&&(i.innerHTML=e),i}function Ec(n){return new DOMParser().parseFromString(n,"text/html")}function zL(n,t,e){let i=e?e.split(".").pop().toLowerCase():"unknown";return yt("figure",{className:`attachment attachment--${t?"preview":"file"} attachment--${i}`,"data-content-type":n})}function HL(n){return n.startsWith("image/")&&!n.includes("svg")}function Tc(n,t,e){let i=new CustomEvent(t,{detail:e,bubbles:!0});n.dispatchEvent(i)}function Oa(n,t,e=null,i=!1){return n.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e,cancelable:i}))}function Fp(n){let t=Math.random().toString(36).slice(2,10);return`${n}-${t}`}var Yv={};an(Yv,{PlainTextExtension:()=>U9,registerPlainText:()=>KL});var Ma=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,F9=Ma&&"documentMode"in document?document.documentMode:null,$9=Ma&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),B9=!(!Ma||!("InputEvent"in window)||F9)&&"getTargetRanges"in new window.InputEvent("input"),z9=Ma&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),WL=Ma&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,H9=Ma&&/^(?=.*Chrome).*/i.test(navigator.userAgent),W9=Ma&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&$9&&!H9;function UL(n,t){t.update(()=>{if(n!==null){let e=fn(n,KeyboardEvent)?null:n.clipboardData,i=I();if(i!==null&&!i.isCollapsed()&&e!=null){n.preventDefault();let r=cR(t);r!==null&&e.setData("text/html",r),e.setData("text/plain",i.getTextContent())}}})}function KL(n){return le(n.registerCommand(dr,t=>{let e=I();return!!P(e)&&(e.deleteCharacter(t),!0)},it),n.registerCommand(tc,t=>{let e=I();return!!P(e)&&(e.deleteWord(t),!0)},it),n.registerCommand(da,t=>{let e=I();return!!P(e)&&(e.deleteLine(t),!0)},it),n.registerCommand(Xl,t=>{let e=I();if(!P(e))return!1;if(typeof t=="string")e.insertText(t);else{let i=t.dataTransfer;if(i!=null)nv(i,e);else{let r=t.data;r&&e.insertText(r)}}return!0},it),n.registerCommand(Kg,()=>{let t=I();return!!P(t)&&(t.removeText(),!0)},it),n.registerCommand(nc,t=>{let e=I();return!!P(e)&&(e.insertLineBreak(t),!0)},it),n.registerCommand(hr,()=>{let t=I();return!!P(t)&&(t.insertLineBreak(),!0)},it),n.registerCommand(fr,t=>{let e=I();if(!P(e))return!1;let i=t,r=i.shiftKey;return!!oc(e,!0)&&(i.preventDefault(),sc(e,r,!0),!0)},it),n.registerCommand(eo,t=>{let e=I();if(!P(e))return!1;let i=t,r=i.shiftKey;return!!oc(e,!1)&&(i.preventDefault(),sc(e,r,!1),!0)},it),n.registerCommand(ls,t=>{let e=I();return!!P(e)&&(!WL||navigator.language!=="ko-KR")&&(t.preventDefault(),n.dispatchCommand(dr,!0))},it),n.registerCommand(no,t=>{let e=I();return!!P(e)&&(t.preventDefault(),n.dispatchCommand(dr,!1))},it),n.registerCommand(cs,t=>{let e=I();if(!P(e))return!1;if(t!==null){if((WL||z9||W9)&&B9)return!1;t.preventDefault()}return n.dispatchCommand(nc,!1)},it),n.registerCommand(jg,()=>(Yl(),!0),it),n.registerCommand(Zl,t=>{let e=I();return!!P(e)&&(UL(t,n),!0)},it),n.registerCommand(Ql,t=>{let e=I();return!!P(e)&&(function(i,r){UL(i,r),r.update(()=>{let s=I();P(s)&&s.removeText()})}(t,n),!0)},it),n.registerCommand(io,t=>{let e=I();return!!P(e)&&(function(i,r){i.preventDefault(),r.update(()=>{let s=I(),o=fn(i,ClipboardEvent)?i.clipboardData:null;o!=null&&P(s)&&nv(o,s)},{tag:ro})}(t,n),!0)},it),n.registerCommand(zg,t=>{let e=I();return!!P(e)&&(t.preventDefault(),!0)},it),n.registerCommand(Bg,t=>{let e=I();return!!P(e)&&(t.preventDefault(),!0)},it))}var U9=Mt({conflictsWith:["@lexical/rich-text"],dependencies:[pp],name:"@lexical/plain-text",register:KL});var jL=Yv,WY=jL.PlainTextExtension,VL=jL.registerPlainText;var nS={};an(nS,{$convertFromMarkdownString:()=>n7,$convertToMarkdownString:()=>i7,BOLD_ITALIC_STAR:()=>hD,BOLD_ITALIC_UNDERSCORE:()=>fD,BOLD_STAR:()=>gD,BOLD_UNDERSCORE:()=>pD,CHECK_LIST:()=>t7,CODE:()=>aD,ELEMENT_TRANSFORMERS:()=>yD,HEADING:()=>sD,HIGHLIGHT:()=>dD,INLINE_CODE:()=>uD,ITALIC_STAR:()=>bD,ITALIC_UNDERSCORE:()=>_D,LINK:()=>xD,MULTILINE_ELEMENT_TRANSFORMERS:()=>vD,ORDERED_LIST:()=>cD,QUOTE:()=>oD,STRIKETHROUGH:()=>mD,TEXT_FORMAT_TRANSFORMERS:()=>SD,TEXT_MATCH_TRANSFORMERS:()=>CD,TRANSFORMERS:()=>Wp,UNORDERED_LIST:()=>lD,registerMarkdownShortcuts:()=>e7});function Jv(n,t){let e={};for(let i of n){let r=t(i);r&&(e[r]?e[r].push(i):e[r]=[i])}return e}function tS(n){let t=Jv(n,e=>e.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}var Bp=/[!-/:-@[-`{-~\s]/,K9=/^\s{0,3}$/;function Xv(n){if(!We(n))return!1;let t=n.getFirstChild();return t==null||n.getChildrenSize()===1&&J(t)&&K9.test(t.getTextContent())}function j9(n,t,e,i){for(let r of t){if(!r.export)continue;let s=r.export(n,o=>zp(o,e,i));if(s!=null)return s}return j(n)?zp(n,e,i):ur(n)?n.getTextContent():null}function zp(n,t,e,i,r){let s=[],o=n.getChildren();i||(i=[]),r||(r=[]);t:for(let a of o){for(let l of e){if(!l.export)continue;let c=l.export(a,u=>zp(u,t,e,i,[...r,...i]),(u,d)=>GL(u,d,t,i,r));if(c!=null){s.push(c);continue t}}$t(a)?s.push(`
`):J(a)?s.push(GL(a,a.getTextContent(),t,i,r)):j(a)?s.push(zp(a,t,e,i,r)):ur(a)&&s.push(a.getTextContent())}return s.join("")}function GL(n,t,e,i,r){let s=n.getFormat()===0?t:function(h){return h.replace(/^\s+|\s+$/g,f=>[...f].map(g=>"&#"+g.codePointAt(0)+";").join(""))}(t);n.hasFormat("code")||(s=s.replace(/([*_`~\\])/g,"\\$1"));let o="",a="",l="",c=qL(n,!0),u=qL(n,!1),d=new Set;for(let h of e){let f=h.format[0],g=h.tag;$p(n,f)&&!d.has(f)&&(d.add(f),$p(c,f)&&i.find(m=>m.tag===g)||(i.push({format:f,tag:g}),o+=g))}for(let h=0;h<i.length;h++){let f=$p(n,i[h].format),g=$p(u,i[h].format);if(f&&g)continue;let m=[...i];for(;m.length>h;){let p=m.pop();r&&p&&r.find(b=>b.tag===p.tag)||(p&&typeof p.tag=="string"&&(f?g||(l+=p.tag):a+=p.tag),i.pop())}break}return s=o+s+l,a+s}function qL(n,t){let e=t?n.getPreviousSibling():n.getNextSibling();if(!e){let i=n.getParentOrThrow();i.isInline()&&(e=t?i.getPreviousSibling():i.getNextSibling())}for(;e;){if(j(e)){if(!e.isInline())break;let i=t?e.getLastDescendant():e.getFirstDescendant();if(J(i))return i;e=t?e.getPreviousSibling():e.getNextSibling()}if(J(e))return e;if(!j(e))return null}return null}function $p(n,t){return J(n)&&n.hasFormat(t)}function V9(n,t){let e=function(r,s){let o=r.match(s.openTagsRegExp);if(o==null)return null;for(let a of o){let l=a.replace(/^\s/,""),c=s.fullMatchRegExpByTag[l];if(c==null)continue;let u=r.match(c),d=s.transformersByTag[l];if(u!=null&&d!=null){if(d.intraword!==!1)return u;let{index:h=0}=u,f=r[h-1],g=r[h+u[0].length];if((!f||Bp.test(f))&&(!g||Bp.test(g)))return u}}return null}(n.getTextContent(),t);if(!e)return null;let i=e.index||0;return{endIndex:i+e[0].length,match:e,startIndex:i,transformer:t.transformersByTag[e[1]]}}function Ra(n){return J(n)&&!n.hasFormat("code")}function La(n,t,e){let i=V9(n,t),r=function(o,a){let l=o,c,u,d,h;for(let f of a){if(!f.replace||!f.importRegExp)continue;let g=l.getTextContent().match(f.importRegExp);if(!g)continue;let m=g.index||0,p=f.getEndIndex?f.getEndIndex(l,g):m+g[0].length;p!==!1&&(c===void 0||u===void 0||m<c&&(p>u||p<=c))&&(c=m,u=p,d=f,h=g)}return c===void 0||u===void 0||d===void 0||h===void 0?null:{endIndex:u,match:h,startIndex:c,transformer:d}}(n,e);if(i&&r&&(i.startIndex<=r.startIndex&&i.endIndex>=r.endIndex||r.startIndex>i.endIndex?r=null:i=null),i){let o=function(a,l,c,u,d){let h=a.getTextContent(),f,g,m;if(d[0]===h?f=a:l===0?[f,g]=a.splitText(c):[m,f,g]=a.splitText(l,c),f.setTextContent(d[2]),u)for(let p of u.format)f.hasFormat(p)||f.toggleFormat(p);return{nodeAfter:g,nodeBefore:m,transformedNode:f}}(n,i.startIndex,i.endIndex,i.transformer,i.match);Ra(o.nodeAfter)&&La(o.nodeAfter,t,e),Ra(o.nodeBefore)&&La(o.nodeBefore,t,e),Ra(o.transformedNode)&&La(o.transformedNode,t,e)}else if(r){let o=function(a,l,c,u,d){let h,f,g;return l===0?[h,f]=a.splitText(c):[g,h,f]=a.splitText(l,c),u.replace?{nodeAfter:f,nodeBefore:g,transformedNode:u.replace(h,d)||void 0}:null}(n,r.startIndex,r.endIndex,r.transformer,r.match);if(!o)return;Ra(o.nodeAfter)&&La(o.nodeAfter,t,e),Ra(o.nodeBefore)&&La(o.nodeBefore,t,e),Ra(o.transformedNode)&&La(o.transformedNode,t,e)}let s=n.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(o,a)=>String.fromCodePoint(a));n.setTextContent(s)}function G9(n,t=!1){let e=tS(n),i=function(r){let s={},o={},a=[],l="(?<![\\\\])";for(let c of r){let{tag:u}=c;s[u]=c;let d=u.replace(/(\*|\^|\+)/g,"\\$1");a.push(d),u.length===1?o[u]=u==="`"?new RegExp("(?<![\\\\`])(`)((?:\\\\`|[^`])+?)(`)(?!`)"):new RegExp(`(?<![\\\\${d}])(${d})((\\\\${d})?.*?[^${d}\\s](\\\\${d})?)((?<!\\\\)|(?<=\\\\\\\\))(${d})(?![\\\\${d}])`):o[u]=new RegExp(`(?<!\\\\)(${d})((\\\\${d})?.*?[^\\s](\\\\${d})?)((?<!\\\\)|(?<=\\\\\\\\))(${d})(?!\\\\)`)}return{fullMatchRegExpByTag:o,openTagsRegExp:new RegExp(`${l}(${a.join("|")})`,"g"),transformersByTag:s}}(e.textFormat);return(r,s)=>{let o=r.split(`
`),a=o.length,l=s||ue();l.clear();for(let u=0;u<a;u++){let d=o[u],[h,f]=q9(o,u,e.multilineElement,l);h?u=f:Y9(d,l,e.element,i,e.textMatch,t)}let c=l.getChildren();for(let u of c)!t&&Xv(u)&&l.getChildrenSize()>1&&u.remove();I()!==null&&l.selectStart()}}function q9(n,t,e,i){for(let r of e){let{handleImportAfterStartMatch:s,regExpEnd:o,regExpStart:a,replace:l}=r,c=n[t].match(a);if(!c)continue;if(s){let g=s({lines:n,rootNode:i,startLineIndex:t,startMatch:c,transformer:r});if(g===null)continue;if(g)return g}let u=typeof o=="object"&&"regExp"in o?o.regExp:o,d=o&&typeof o=="object"&&"optional"in o?o.optional:!o,h=t,f=n.length;for(;h<f;){let g=u?n[h].match(u):null;if(!g&&(!d||d&&h<f-1)){h++;continue}if(g&&t===h&&g.index===c.index){h++;continue}let m=[];if(g&&t===h)m.push(n[t].slice(c[0].length,-g[0].length));else for(let p=t;p<=h;p++)if(p===t){let b=n[p].slice(c[0].length);m.push(b)}else if(p===h&&g){let b=n[p].slice(0,-g[0].length);m.push(b)}else m.push(n[p]);if(l(i,null,c,g,m,!0)!==!1)return[!0,h];break}}return[!1,t]}function Y9(n,t,e,i,r,s){let o=Ft(n),a=nt();a.append(o),t.append(a);for(let{regExp:l,replace:c}of e){let u=n.match(l);if(u&&(o.setTextContent(n.slice(u[0].length)),c(a,[o],u,!0)!==!1))break}if(La(o,i,r),a.isAttached()&&n.length>0){let l=a.getPreviousSibling();if(!s&&(We(l)||Wi(l)||nn(l))){let c=l;if(nn(l)){let u=l.getLastDescendant();c=u==null?null:pt(u,br)}c!=null&&c.getTextContentSize()>0&&(c.splice(c.getChildrenSize(),0,[Ze(),...a.getChildren()]),a.remove())}}}function J9(n,...t){let e=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",n);for(let r of t)i.append("v",r);throw e.search=i.toString(),Error(`Minified Lexical error #${n}; visit ${e.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}var QL=/^(\s*)(\d{1,})\.\s/,tD=/^(\s*)[-*+]\s/,eD=/^(\s*)(?:[-*+]\s)?\s?(\[(\s|x)?\])\s/i,Zv=/^(#{1,6})\s/,nD=/^>\s/,iD=/^[ \t]*```([\w-]+)?/,Qv=/[ \t]*```$/,X9=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,Z9=/^(?:\|)(.+)(?:\|)\s?$/,Q9=/^(\| ?:?-*:? ?)+\|\s?$/,YL=/^<[a-z_][\w-]*(?:\s[^<>]*)?\/?>/i,JL=/^<\/[a-z_][\w-]*\s*>/i,XL=n=>new RegExp(`(?:${n.source})$`,n.flags),Yd=qg("mdListMarker",{parse:n=>typeof n=="string"&&/^[-*+]$/.test(n)?n:"-"}),rD=n=>(t,e,i,r)=>{let s=n(i);s.append(...e),t.replace(s),r||s.select(0,0)},eS=n=>(t,e,i,r)=>{let s=t.getPreviousSibling(),o=t.getNextSibling(),a=KM(n==="check"?i[3]==="x":void 0),l=i[0].trim()[0],c=n!=="bullet"&&n!=="check"||l!==Yd.parse(l)?void 0:l;if(nn(o)&&o.getListType()===n){c&&Qs(o,Yd,c);let d=o.getFirstChild();d!==null?d.insertBefore(a):o.append(a),t.remove()}else if(nn(s)&&s.getListType()===n)c&&Qs(s,Yd,c),s.append(a),t.remove();else{let d=hp(n,n==="number"?Number(i[2]):void 0);c&&Qs(d,Yd,c),d.append(a),t.replace(d)}a.append(...e),r||a.select(0,0);let u=function(d){let h=d.match(/\t/g),f=d.match(/ /g),g=0;return h&&(g+=h.length),f&&(g+=Math.floor(f.length/4)),g}(i[1]);u&&a.setIndent(u)},Hp=(n,t,e)=>{let i=[],r=n.getChildren(),s=0;for(let o of r)if(br(o)){if(o.getChildrenSize()===1){let d=o.getFirstChild();if(nn(d)){i.push(Hp(d,t,e+1));continue}}let a=" ".repeat(4*e),l=n.getListType(),c=Gl(n,Yd),u=l==="number"?`${n.getStart()+s}. `:l==="check"?`${c} [${o.getChecked()?"x":" "}] `:c+" ";i.push(a+u+t(o)),s++}return i.join(`
`)},sD={dependencies:[mp],export:(n,t)=>{if(!Md(n))return null;let e=Number(n.getTag().slice(1));return"#".repeat(e)+" "+t(n)},regExp:Zv,replace:rD(n=>{let t="h"+n[1].length;return Od(t)}),type:"element"},oD={dependencies:[bp],export:(n,t)=>{if(!Wi(n))return null;let e=t(n).split(`
`),i=[];for(let r of e)i.push("> "+r);return i.join(`
`)},regExp:nD,replace:(n,t,e,i)=>{if(i){let s=n.getPreviousSibling();if(Wi(s))return s.splice(s.getChildrenSize(),0,[Ze(),...t]),void n.remove()}let r=_c();r.append(...t),n.replace(r),i||r.select(0,0)},type:"element"},aD={dependencies:[Ca],export:n=>{if(!hs(n))return null;let t=n.getTextContent();return"```"+(n.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Qv},regExpStart:iD,replace:(n,t,e,i,r,s)=>{let o,a;if(!t&&r){if(r.length===1)i?(o=Bd(),a=e[1]+r[0]):(o=Bd(e[1]),a=r[0].startsWith(" ")?r[0].slice(1):r[0]);else{if(o=Bd(e[1]),r[0].trim().length===0)for(;r.length>0&&!r[0].length;)r.shift();else r[0]=r[0].startsWith(" ")?r[0].slice(1):r[0];for(;r.length>0&&!r[r.length-1].length;)r.pop();a=r.join(`
`)}let l=Ft(a);o.append(l),n.append(o)}else t&&rD(l=>Bd(l?l[1]:void 0))(n,t,e,s)},type:"multiline-element"},lD={dependencies:[xa,hc],export:(n,t)=>nn(n)?Hp(n,t,0):null,regExp:tD,replace:eS("bullet"),type:"element"},t7={dependencies:[xa,hc],export:(n,t)=>nn(n)?Hp(n,t,0):null,regExp:eD,replace:eS("check"),type:"element"},cD={dependencies:[xa,hc],export:(n,t)=>nn(n)?Hp(n,t,0):null,regExp:QL,replace:eS("number"),type:"element"},uD={format:["code"],tag:"`",type:"text-format"},dD={format:["highlight"],tag:"==",type:"text-format"},hD={format:["bold","italic"],tag:"***",type:"text-format"},fD={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},gD={format:["bold"],tag:"**",type:"text-format"},pD={format:["bold"],intraword:!1,tag:"__",type:"text-format"},mD={format:["strikethrough"],tag:"~~",type:"text-format"},bD={format:["italic"],tag:"*",type:"text-format"},_D={format:["italic"],intraword:!1,tag:"_",type:"text-format"},xD={dependencies:[wp],export:(n,t,e)=>{if(!Wd(n)||eL(n))return null;let i=n.getTitle(),r=t(n);return i?`[${r}](${n.getURL()} "${i}")`:`[${r}](${n.getURL()})`},importRegExp:/(?:\[(.+?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.+?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(n,t)=>{let[,e,i,r]=t,s=Tp(i,{title:r}),o=e.split("[").length-1,a=e.split("]").length-1,l=e,c="";if(o<a)return;if(o>a){let d=e.split("[");c="["+d[0],l=d.slice(1).join("[")}let u=Ft(l);return u.setFormat(n.getFormat()),s.append(u),n.replace(s),c&&s.insertBefore(Ft(c)),u},trigger:")",type:"text-match"},yD=[sD,oD,lD,cD],vD=[aD],SD=[uD,hD,fD,gD,pD,dD,bD,_D,mD],CD=[xD],Wp=[...yD,...vD,...SD,...CD];function ZL(n,t,e){let i=e.length;for(let r=t;r>=i;r--){let s=r-i;if(AD(n,s,e,0,i)&&n[s+i]!==" ")return s}return-1}function AD(n,t,e,i,r){for(let s=0;s<r;s++)if(n[t+s]!==e[i+s])return!1;return!0}function e7(n,t=Wp){let e=tS(t),i=Jv(e.textFormat,({tag:o})=>o[o.length-1]),r=Jv(e.textMatch,({trigger:o})=>o);for(let o of t){let a=o.type;if(a==="element"||a==="text-match"||a==="multiline-element"){let l=o.dependencies;for(let c of l)n.hasNode(c)||J9(173,c.getType())}}let s=(o,a,l)=>{(function(c,u,d,h){let f=c.getParent();if(!Le(f)||c.getFirstChild()!==u)return!1;let g=u.getTextContent();if(g[d-1]!==" ")return!1;for(let{regExp:m,replace:p}of h){let b=g.match(m);if(b&&b[0].length===(b[0].endsWith(" ")?d:d-1)){let _=u.getNextSiblings(),[x,y]=u.splitText(d);if(p(c,y?[y,..._]:_,b,!1)!==!1)return x.remove(),!0}}return!1})(o,a,l,e.element)||function(c,u,d,h){let f=c.getParent();if(!Le(f)||c.getFirstChild()!==u)return!1;let g=u.getTextContent();if(g[d-1]!==" ")return!1;for(let{regExpStart:m,replace:p,regExpEnd:b}of h){if(b&&!("optional"in b)||b&&"optional"in b&&!b.optional)continue;let _=g.match(m);if(_&&_[0].length===(_[0].endsWith(" ")?d:d-1)){let x=u.getNextSiblings(),[y,v]=u.splitText(d);if(p(c,v?[v,...x]:x,_,null,null,!1)!==!1)return y.remove(),!0}}return!1}(o,a,l,e.multilineElement)||function(c,u,d){let h=c.getTextContent(),f=d[h[u-1]];if(f==null)return!1;u<h.length&&(h=h.slice(0,u));for(let g of f){if(!g.replace||!g.regExp)continue;let m=h.match(g.regExp);if(m===null)continue;let p=m.index||0,b=p+m[0].length,_;return p===0?[_]=c.splitText(b):[,_]=c.splitText(p,b),_.selectNext(0,0),g.replace(_,m),!0}return!1}(a,l,r)||function(c,u,d){let h=c.getTextContent(),f=u-1,g=h[f],m=d[g];if(!m)return!1;for(let p of m){let{tag:b}=p,_=b.length,x=f-_+1;if(_>1&&!AD(h,x,b,0,_)||h[x-1]===" ")continue;let y=h[f+1];if(p.intraword===!1&&y&&!Bp.test(y))continue;let v=c,S=v,C=ZL(h,x,b),A=S;for(;C<0&&(A=A.getPreviousSibling())&&!$t(A);)if(J(A)){if(A.hasFormat("code"))continue;let F=A.getTextContent();S=A,C=ZL(F,F.length,b)}if(C<0||S===v&&C+_===x)continue;let E=S.getTextContent();if(C>0&&E[C-1]===g)continue;let $=E[C-1];if(p.intraword===!1&&$&&!Bp.test($))continue;let L=v.getTextContent(),w=L.slice(0,x)+L.slice(f+1);v.setTextContent(w);let N=S===v?w:E;S.setTextContent(N.slice(0,C)+N.slice(C+_));let R=I(),k=cr();te(k);let D=f-_*(S===v?2:1)+1;k.anchor.set(S.__key,C,"text"),k.focus.set(v.__key,D,"text");for(let F of p.format)k.hasFormat(F)||k.formatText(F);k.anchor.set(k.focus.key,k.focus.offset,k.focus.type);for(let F of p.format)k.hasFormat(F)&&k.toggleFormat(F);return P(R)&&(k.format=R.format),!0}}(a,l,i)};return n.registerUpdateListener(({tags:o,dirtyLeaves:a,editorState:l,prevEditorState:c})=>{if(o.has(Jk)||o.has(ec)||n.isComposing())return;let u=l.read(I),d=c.read(I);if(!P(d)||!P(u)||!u.isCollapsed()||u.is(d))return;let h=u.anchor.key,f=u.anchor.offset,g=l._nodeMap.get(h);!J(g)||!a.has(h)||f!==1&&f>d.anchor.offset+1||n.update(()=>{if(!Ra(g))return;let m=g.getParent();m===null||hs(m)||s(m,g,u.anchor.offset)})})}function n7(n,t=Wp,e,i=!1,r=!1){let s=i?n:function(o,a=!1){let l=o.split(`
`),c=!1,u=[];for(let d=0;d<l.length;d++){let h=l[d].trimEnd(),f=u[u.length-1];X9.test(h)?u.push(h):iD.test(h)||Qv.test(h)?(c=!c,u.push(h)):c||h===""||f===""||!f||Zv.test(f)||Zv.test(h)||nD.test(h)||QL.test(h)||tD.test(h)||eD.test(h)||Z9.test(h)||Q9.test(h)||!a||YL.test(h)||JL.test(h)||XL(JL).test(f)||XL(YL).test(f)||Qv.test(f)?u.push(h):u[u.length-1]=f+" "+h.trimStart()}return u.join(`
`)}(n,r);return G9(t,i)(s,e)}function i7(n=Wp,t,e=!1){return function(r,s=!1){let o=tS(r),a=[...o.multilineElement,...o.element],l=!s,c=o.textFormat.filter(u=>u.format.length===1).sort((u,d)=>Number(u.format.includes("code"))-Number(d.format.includes("code")));return u=>{let d=[],h=(u||ue()).getChildren();for(let f=0;f<h.length;f++){let g=h[f],m=j9(g,a,c,o.textMatch);m!=null&&d.push(l&&f>0&&!Xv(g)&&!Xv(h[f-1])?`
`.concat(m):m)}return d.join(`
`)}}(n,e)(t)}var he=nS,JY=he.$convertFromMarkdownString,XY=he.$convertToMarkdownString,ZY=he.BOLD_ITALIC_STAR,QY=he.BOLD_ITALIC_UNDERSCORE,tJ=he.BOLD_STAR,eJ=he.BOLD_UNDERSCORE,nJ=he.CHECK_LIST,iJ=he.CODE,rJ=he.ELEMENT_TRANSFORMERS,sJ=he.HEADING,oJ=he.HIGHLIGHT,aJ=he.INLINE_CODE,lJ=he.ITALIC_STAR,cJ=he.ITALIC_UNDERSCORE,uJ=he.LINK,dJ=he.MULTILINE_ELEMENT_TRANSFORMERS,hJ=he.ORDERED_LIST,fJ=he.QUOTE,gJ=he.STRIKETHROUGH,pJ=he.TEXT_FORMAT_TRANSFORMERS,mJ=he.TEXT_MATCH_TRANSFORMERS,ED=he.TRANSFORMERS,bJ=he.UNORDERED_LIST,TD=he.registerMarkdownShortcuts;var iS={};an(iS,{HistoryExtension:()=>Up,SharedHistoryExtension:()=>o7,createEmptyHistoryState:()=>kD,registerHistory:()=>ND});function r7(n,t,e,i,r){if(n===null||e.size===0&&i.size===0&&!r)return 0;let s=t._selection,o=n._selection;if(r)return 1;if(!(P(s)&&P(o)&&o.isCollapsed()&&s.isCollapsed()))return 0;let a=function(b,_,x){let y=b._nodeMap,v=[];for(let S of _){let C=y.get(S);C!==void 0&&v.push(C)}for(let[S,C]of x){if(!C)continue;let A=y.get(S);A===void 0||ss(A)||v.push(A)}return v}(t,e,i);if(a.length===0)return 0;if(a.length>1){let b=t._nodeMap,_=b.get(s.anchor.key),x=b.get(o.anchor.key);return _&&x&&!n._nodeMap.has(_.__key)&&J(_)&&_.__text.length===1&&s.anchor.offset===1?2:0}let l=a[0],c=n._nodeMap.get(l.__key);if(!J(c)||!J(l)||c.__mode!==l.__mode)return 0;let u=c.__text,d=l.__text;if(u===d)return 0;let h=s.anchor,f=o.anchor;if(h.key!==f.key||h.type!=="text")return 0;let g=h.offset,m=f.offset,p=d.length-u.length;return p===1&&m===g-1?2:p===-1&&m===g+1?3:p===-1&&m===g?4:0}function s7(n,t){let e=Date.now(),i=0;return(r,s,o,a,l,c)=>{let u=Date.now();if(c.has(ec))return i=0,e=u,2;let d=r7(r,s,a,l,n.isComposing()),h=(()=>{let f=o===null||o.editor===n,g=c.has(Qk);if(!g&&f&&c.has(ha))return 0;if(r===null)return 1;let m=s._selection;if(!(a.size>0||l.size>0))return m!==null?0:2;let p=typeof t=="number"?t:t.peek();return g===!1&&d!==0&&d===i&&u<e+p&&f||a.size===1&&function(b,_,x){let y=_._nodeMap.get(b),v=x._nodeMap.get(b),S=_._selection,C=x._selection;return!(P(S)&&P(C)&&S.anchor.type==="element"&&S.focus.type==="element"&&C.anchor.type==="text"&&C.focus.type==="text"||!J(y)||!J(v)||y.__parent!==v.__parent)&&JSON.stringify(_.read(()=>y.exportJSON()))===JSON.stringify(x.read(()=>v.exportJSON()))}(Array.from(a)[0],r,s)?0:1})();return e=u,i=d,h}}function wD(n){n.undoStack=[],n.redoStack=[],n.current=null}function ND(n,t,e){let i=s7(n,e);return le(n.registerCommand(Vg,()=>(function(s,o){let a=o.redoStack,l=o.undoStack;if(l.length!==0){let c=o.current,u=l.pop();c!==null&&(a.push(c),s.dispatchCommand(bd,!0)),l.length===0&&s.dispatchCommand(_d,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:ec})}}(n,t),!0),it),n.registerCommand(Ug,()=>(function(s,o){let a=o.redoStack,l=o.undoStack;if(a.length!==0){let c=o.current;c!==null&&(l.push(c),s.dispatchCommand(_d,!0));let u=a.pop();a.length===0&&s.dispatchCommand(bd,!1),o.current=u||null,u&&u.editor.setEditorState(u.editorState,{tag:ec})}}(n,t),!0),it),n.registerCommand(Pg,()=>(wD(t),!1),it),n.registerCommand(Fg,()=>(wD(t),n.dispatchCommand(bd,!1),n.dispatchCommand(_d,!1),!0),it),n.registerUpdateListener(({editorState:s,prevEditorState:o,dirtyLeaves:a,dirtyElements:l,tags:c})=>{let u=t.current,d=t.redoStack,h=t.undoStack,f=u===null?null:u.editorState;if(u!==null&&s===f)return;let g=i(o,s,u,a,l,c);if(g===1)d.length!==0&&(t.redoStack=[],n.dispatchCommand(bd,!1)),u!==null&&(h.push({...u}),n.dispatchCommand(_d,!0));else if(g===2)return;t.current={editor:n,editorState:s}}))}function kD(){return{current:null,redoStack:[],undoStack:[]}}var Up=Mt({build:(n,{delay:t,createInitialHistoryState:e,disabled:i})=>Hi({delay:t,disabled:i,historyState:e(n)}),config:en({createInitialHistoryState:kD,delay:300,disabled:typeof window>"u"}),name:"@lexical/history/History",register:(n,t,e)=>{let i=e.getOutput();return Mn(()=>i.disabled.value?void 0:ND(n,i.historyState.value,i.delay))}}),o7=Mt({dependencies:[Gg(Up,{createInitialHistoryState:()=>{throw new Error("SharedHistory did not inherit parent history")},disabled:!0})],name:"@lexical/history/SharedHistory",register(n,t,e){let{output:i}=e.getDependency(Up),r=function(o){return o?vM(o,Up.name):null}(n._parentEditor);if(!r)return()=>{};let s=r.output;return Mn(()=>xM(()=>{i.delay.value=s.delay.value,i.historyState.value=s.historyState.value,i.disabled.value=s.disabled.value}))}});var Kp=iS,SJ=Kp.HistoryExtension,CJ=Kp.SharedHistoryExtension,OD=Kp.createEmptyHistoryState,MD=Kp.registerHistory;function aS(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ia=aS();function $D(n){Ia=n}var Qd={exec:()=>null};function Pt(n,t=""){let e=typeof n=="string"?n:n.source,i={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Rn.caret,"$1"),e=e.replace(r,o),i},getRegex:()=>new RegExp(e,t)};return i}var a7=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Rn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},l7=/^(?:[ \t]*(?:\n|$))+/,c7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,u7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,th=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,d7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,lS=/(?:[*+-]|\d{1,9}[.)])/,BD=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,zD=Pt(BD).replace(/bull/g,lS).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),h7=Pt(BD).replace(/bull/g,lS).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),cS=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,f7=/^[^\n]+/,uS=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,g7=Pt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",uS).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),p7=Pt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lS).getRegex(),Yp="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dS=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,m7=Pt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dS).replace("tag",Yp).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),HD=Pt(cS).replace("hr",th).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yp).getRegex(),b7=Pt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",HD).getRegex(),hS={blockquote:b7,code:c7,def:g7,fences:u7,heading:d7,hr:th,html:m7,lheading:zD,list:p7,newline:l7,paragraph:HD,table:Qd,text:f7},RD=Pt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",th).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yp).getRegex(),_7={...hS,lheading:h7,table:RD,paragraph:Pt(cS).replace("hr",th).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",RD).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yp).getRegex()},x7={...hS,html:Pt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dS).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Qd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Pt(cS).replace("hr",th).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zD).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},y7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,v7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,WD=/^( {2,}|\\)\n(?!\s*$)/,S7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Jp=/[\p{P}\p{S}]/u,fS=/[\s\p{P}\p{S}]/u,UD=/[^\s\p{P}\p{S}]/u,C7=Pt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,fS).getRegex(),KD=/(?!~)[\p{P}\p{S}]/u,A7=/(?!~)[\s\p{P}\p{S}]/u,E7=/(?:[^\s\p{P}\p{S}]|~)/u,T7=Pt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",a7?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),jD=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,w7=Pt(jD,"u").replace(/punct/g,Jp).getRegex(),N7=Pt(jD,"u").replace(/punct/g,KD).getRegex(),VD="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",k7=Pt(VD,"gu").replace(/notPunctSpace/g,UD).replace(/punctSpace/g,fS).replace(/punct/g,Jp).getRegex(),O7=Pt(VD,"gu").replace(/notPunctSpace/g,E7).replace(/punctSpace/g,A7).replace(/punct/g,KD).getRegex(),M7=Pt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,UD).replace(/punctSpace/g,fS).replace(/punct/g,Jp).getRegex(),R7=Pt(/\\(punct)/,"gu").replace(/punct/g,Jp).getRegex(),L7=Pt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),D7=Pt(dS).replace("(?:-->|$)","-->").getRegex(),I7=Pt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",D7).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Vp=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,P7=Pt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Vp).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),GD=Pt(/^!?\[(label)\]\[(ref)\]/).replace("label",Vp).replace("ref",uS).getRegex(),qD=Pt(/^!?\[(ref)\](?:\[\])?/).replace("ref",uS).getRegex(),F7=Pt("reflink|nolink(?!\\()","g").replace("reflink",GD).replace("nolink",qD).getRegex(),LD=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,gS={_backpedal:Qd,anyPunctuation:R7,autolink:L7,blockSkip:T7,br:WD,code:v7,del:Qd,emStrongLDelim:w7,emStrongRDelimAst:k7,emStrongRDelimUnd:M7,escape:y7,link:P7,nolink:qD,punctuation:C7,reflink:GD,reflinkSearch:F7,tag:I7,text:S7,url:Qd},$7={...gS,link:Pt(/^!?\[(label)\]\((.*?)\)/).replace("label",Vp).getRegex(),reflink:Pt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Vp).getRegex()},rS={...gS,emStrongRDelimAst:O7,emStrongLDelim:N7,url:Pt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",LD).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Pt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",LD).getRegex()},B7={...rS,br:Pt(WD).replace("{2,}","*").getRegex(),text:Pt(rS.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},jp={normal:hS,gfm:_7,pedantic:x7},Jd={normal:gS,gfm:rS,breaks:B7,pedantic:$7},z7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},DD=n=>z7[n];function Tr(n,t){if(t){if(Rn.escapeTest.test(n))return n.replace(Rn.escapeReplace,DD)}else if(Rn.escapeTestNoEncode.test(n))return n.replace(Rn.escapeReplaceNoEncode,DD);return n}function ID(n){try{n=encodeURI(n).replace(Rn.percentDecode,"%")}catch{return null}return n}function PD(n,t){let e=n.replace(Rn.findPipe,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=e.split(Rn.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Rn.slashPipe,"|");return i}function Xd(n,t,e){let i=n.length;if(i===0)return"";let r=0;for(;r<i;){let s=n.charAt(i-r-1);if(s===t&&!e)r++;else if(s!==t&&e)r++;else break}return n.slice(0,i-r)}function H7(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===t[0])e++;else if(n[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function FD(n,t,e,i,r){let s=t.href,o=t.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:e,href:s,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function W7(n,t,e){let i=n.match(e.other.indentCodeCompensation);if(i===null)return t;let r=i[1];return t.split(`
`).map(s=>{let o=s.match(e.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var Gp=class{options;rules;lexer;constructor(n){this.options=n||Ia}space(n){let t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){let t=this.rules.block.code.exec(n);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Xd(e,`
`)}}}fences(n){let t=this.rules.block.fences.exec(n);if(t){let e=t[0],i=W7(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(n){let t=this.rules.block.heading.exec(n);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=Xd(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(n){let t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:Xd(t[0],`
`)}}blockquote(n){let t=this.rules.block.blockquote.exec(n);if(t){let e=Xd(t[0],`
`).split(`
`),i="",r="",s=[];for(;e.length>0;){let o=!1,a=[],l;for(l=0;l<e.length;l++)if(this.rules.other.blockquoteStart.test(e[l]))a.push(e[l]),o=!0;else if(!o)a.push(e[l]);else break;e=e.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,r=r?`${r}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,e.length===0)break;let h=s.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let f=h,g=f.raw+`
`+e.join(`
`),m=this.blockquote(g);s[s.length-1]=m,i=i.substring(0,i.length-f.raw.length)+m.raw,r=r.substring(0,r.length-f.text.length)+m.text;break}else if(h?.type==="list"){let f=h,g=f.raw+`
`+e.join(`
`),m=this.list(g);s[s.length-1]=m,i=i.substring(0,i.length-h.raw.length)+m.raw,r=r.substring(0,r.length-f.raw.length)+m.raw,e=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:r}}}list(n){let t=this.rules.block.list.exec(n);if(t){let e=t[1].trim(),i=e.length>1,r={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let s=this.rules.other.listItemRegex(e),o=!1;for(;n;){let l=!1,c="",u="";if(!(t=s.exec(n))||this.rules.block.hr.test(n))break;c=t[0],n=n.substring(c.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),h=n.split(`
`,1)[0],f=!d.trim(),g=0;if(this.options.pedantic?(g=2,u=d.trimStart()):f?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=d.slice(g),g+=t[1].length),f&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,n=n.substring(h.length+1),l=!0),!l){let b=this.rules.other.nextBulletRegex(g),_=this.rules.other.hrRegex(g),x=this.rules.other.fencesBeginRegex(g),y=this.rules.other.headingBeginRegex(g),v=this.rules.other.htmlBeginRegex(g);for(;n;){let S=n.split(`
`,1)[0],C;if(h=S,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),C=h):C=h.replace(this.rules.other.tabCharGlobal,"    "),x.test(h)||y.test(h)||v.test(h)||b.test(h)||_.test(h))break;if(C.search(this.rules.other.nonSpaceChar)>=g||!h.trim())u+=`
`+C.slice(g);else{if(f||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(d)||y.test(d)||_.test(d))break;u+=`
`+h}!f&&!h.trim()&&(f=!0),c+=S+`
`,n=n.substring(S.length+1),d=C.slice(g)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let m=null,p;this.options.gfm&&(m=this.rules.other.listIsTask.exec(u),m&&(p=m[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:c,task:!!m,checked:p,loose:!1,text:u,tokens:[]}),r.raw+=c}let a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){let c=r.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));r.loose=u}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(n){let t=this.rules.block.html.exec(n);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(n){let t=this.rules.block.def.exec(n);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:r}}}table(n){let t=this.rules.block.table.exec(n);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=PD(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<e.length;o++)s.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:s.align[o]});for(let o of r)s.rows.push(PD(o,s.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:s.align[l]})));return s}}lheading(n){let t=this.rules.block.lheading.exec(n);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(n){let t=this.rules.block.paragraph.exec(n);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(n){let t=this.rules.block.text.exec(n);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(n){let t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(n){let t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(n){let t=this.rules.inline.link.exec(n);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let s=Xd(e.slice(0,-1),"\\");if((e.length-s.length)%2===0)return}else{let s=H7(t[2],"()");if(s===-2)return;if(s>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],r=s[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),FD(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(n,t){let e;if((e=this.rules.inline.reflink.exec(n))||(e=this.rules.inline.nolink.exec(n))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){let s=e[0].charAt(0);return{type:"text",raw:s,text:s}}return FD(e,r,e[0],this.lexer,this.rules)}}emStrong(n,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(n);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...i[0]].length-1,s,o,a=r,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*n.length+r);(i=c.exec(t))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(o=[...s].length,i[3]||i[4]){a+=o;continue}else if((i[5]||i[6])&&r%3&&!((r+o)%3)){l+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+l);let u=[...i[0]][0].length,d=n.slice(0,r+i.index+u+o);if(Math.min(r,o)%2){let f=d.slice(1,-1);return{type:"em",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}let h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(n){let t=this.rules.inline.code.exec(n);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(n){let t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n){let t=this.rules.inline.del.exec(n);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(n){let t=this.rules.inline.autolink.exec(n);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(n){let t;if(t=this.rules.inline.url.exec(n)){let e,i;if(t[2]==="@")e=t[0],i="mailto:"+e;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);e=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(n){let t=this.rules.inline.text.exec(n);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Ki=class sS{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ia,this.options.tokenizer=this.options.tokenizer||new Gp,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Rn,block:jp.normal,inline:Jd.normal};this.options.pedantic?(e.block=jp.pedantic,e.inline=Jd.pedantic):this.options.gfm&&(e.block=jp.gfm,this.options.breaks?e.inline=Jd.breaks:e.inline=Jd.gfm),this.tokenizer.rules=e}static get rules(){return{block:jp,inline:Jd}}static lex(t,e){return new sS(e).lex(t)}static lexInline(t,e){return new sS(e).inlineTokens(t)}lex(t){t=t.replace(Rn.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(Rn.tabCharGlobal,"    ").replace(Rn.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let o=e.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let s=t;if(this.options.extensions?.startBlock){let o=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let o=e.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r),i=s.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)s=r[2]?r[2].length:0,i=i.slice(0,r.index+s)+"["+"a".repeat(r[0].length-s-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let o=!1,a="";for(;t;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},t,e))?(t=t.substring(l.raw.length),e.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let u=e.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):e.push(l);continue}if(l=this.tokenizer.emStrong(t,i,a)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),e.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),e.push(l);continue}let c=t;if(this.options.extensions?.startInline){let u=1/0,d=t.slice(1),h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(c=t.substring(0,u+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let u=e.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):e.push(l);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}},qp=class{options;parser;constructor(n){this.options=n||Ia}space(n){return""}code({text:n,lang:t,escaped:e}){let i=(t||"").match(Rn.notSpaceStart)?.[0],r=n.replace(Rn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Tr(i)+'">'+(e?r:Tr(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:Tr(r,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:t}){return`<h${t}>${this.parser.parseInline(n)}</h${t}>
`}hr(n){return`<hr>
`}list(n){let t=n.ordered,e=n.start,i="";for(let o=0;o<n.items.length;o++){let a=n.items[o];i+=this.listitem(a)}let r=t?"ol":"ul",s=t&&e!==1?' start="'+e+'"':"";return"<"+r+s+`>
`+i+"</"+r+`>
`}listitem(n){let t="";if(n.task){let e=this.checkbox({checked:!!n.checked});n.loose?n.tokens[0]?.type==="paragraph"?(n.tokens[0].text=e+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=e+" "+Tr(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:e+" ",text:e+" ",escaped:!0}):t+=e+" "}return t+=this.parser.parse(n.tokens,!!n.loose),`<li>${t}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let t="",e="";for(let r=0;r<n.header.length;r++)e+=this.tablecell(n.header[r]);t+=this.tablerow({text:e});let i="";for(let r=0;r<n.rows.length;r++){let s=n.rows[r];e="";for(let o=0;o<s.length;o++)e+=this.tablecell(s[o]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let t=this.parser.parseInline(n.tokens),e=n.header?"th":"td";return(n.align?`<${e} align="${n.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${Tr(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:t,tokens:e}){let i=this.parser.parseInline(e),r=ID(n);if(r===null)return i;n=r;let s='<a href="'+n+'"';return t&&(s+=' title="'+Tr(t)+'"'),s+=">"+i+"</a>",s}image({href:n,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let r=ID(n);if(r===null)return Tr(e);n=r;let s=`<img src="${n}" alt="${e}"`;return t&&(s+=` title="${Tr(t)}"`),s+=">",s}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:Tr(n.text)}},pS=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},ji=class oS{options;renderer;textRenderer;constructor(t){this.options=t||Ia,this.options.renderer=this.options.renderer||new qp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new pS}static parse(t,e){return new oS(e).parse(t)}static parseInline(t,e){return new oS(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){i+=l||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;r+1<t.length&&t[r+1].type==="text";)a=t[++r],l+=`
`+this.renderer.text(a);e?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):i+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,e=this.renderer){let i="";for(let r=0;r<t.length;r++){let s=t[r];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}let o=s;switch(o.type){case"escape":{i+=e.text(o);break}case"html":{i+=e.html(o);break}case"link":{i+=e.link(o);break}case"image":{i+=e.image(o);break}case"strong":{i+=e.strong(o);break}case"em":{i+=e.em(o);break}case"codespan":{i+=e.codespan(o);break}case"br":{i+=e.br(o);break}case"del":{i+=e.del(o);break}case"text":{i+=e.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},Zd=class{options;block;constructor(n){this.options=n||Ia}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Ki.lex:Ki.lexInline}provideParser(){return this.block?ji.parse:ji.parseInline}},U7=class{defaults=aS();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ji;Renderer=qp;TextRenderer=pS;Lexer=Ki;Tokenizer=Gp;Hooks=Zd;constructor(...n){this.use(...n)}walkTokens(n,t){let e=[];for(let i of n)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let r=i;for(let s of r.header)e=e.concat(this.walkTokens(s.tokens,t));for(let s of r.rows)for(let o of s)e=e.concat(this.walkTokens(o.tokens,t));break}case"list":{let r=i;e=e.concat(this.walkTokens(r.items,t));break}default:{let r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{let o=r[s].flat(1/0);e=e.concat(this.walkTokens(o,t))}):r.tokens&&(e=e.concat(this.walkTokens(r.tokens,t)))}}return e}use(...n){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let s=t.renderers[r.name];s?t.renderers[r.name]=function(...o){let a=r.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[r.level];s?s.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),e.renderer){let r=this.defaults.renderer||new qp(this.defaults);for(let s in e.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,a=e.renderer[o],l=r[o];r[o]=(...c)=>{let u=a.apply(r,c);return u===!1&&(u=l.apply(r,c)),u||""}}i.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new Gp(this.defaults);for(let s in e.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,a=e.tokenizer[o],l=r[o];r[o]=(...c)=>{let u=a.apply(r,c);return u===!1&&(u=l.apply(r,c)),u}}i.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new Zd;for(let s in e.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,a=e.hooks[o],l=r[o];Zd.passThroughHooks.has(s)?r[o]=c=>{if(this.defaults.async&&Zd.passThroughHooksRespectAsync.has(s))return(async()=>{let d=await a.call(r,c);return l.call(r,d)})();let u=a.call(r,c);return l.call(r,u)}:r[o]=(...c)=>{if(this.defaults.async)return(async()=>{let d=await a.apply(r,c);return d===!1&&(d=await l.apply(r,c)),d})();let u=a.apply(r,c);return u===!1&&(u=l.apply(r,c)),u}}i.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,s=e.walkTokens;i.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),r&&(a=a.concat(r.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,t){return Ki.lex(n,t??this.defaults)}parser(n,t){return ji.parse(n,t??this.defaults)}parseMarkdown(n){return(t,e)=>{let i={...e},r={...this.defaults,...i},s=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=n),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(t):t,a=await(r.hooks?await r.hooks.provideLexer():n?Ki.lex:Ki.lexInline)(o,r),l=r.hooks?await r.hooks.processAllTokens(a):a;r.walkTokens&&await Promise.all(this.walkTokens(l,r.walkTokens));let c=await(r.hooks?await r.hooks.provideParser():n?ji.parse:ji.parseInline)(l,r);return r.hooks?await r.hooks.postprocess(c):c})().catch(s);try{r.hooks&&(t=r.hooks.preprocess(t));let o=(r.hooks?r.hooks.provideLexer():n?Ki.lex:Ki.lexInline)(t,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let a=(r.hooks?r.hooks.provideParser():n?ji.parse:ji.parseInline)(o,r);return r.hooks&&(a=r.hooks.postprocess(a)),a}catch(o){return s(o)}}}onError(n,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let i="<p>An error occurred:</p><pre>"+Tr(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},Da=new U7;function Kt(n,t){return Da.parse(n,t)}Kt.options=Kt.setOptions=function(n){return Da.setOptions(n),Kt.defaults=Da.defaults,$D(Kt.defaults),Kt};Kt.getDefaults=aS;Kt.defaults=Ia;Kt.use=function(...n){return Da.use(...n),Kt.defaults=Da.defaults,$D(Kt.defaults),Kt};Kt.walkTokens=function(n,t){return Da.walkTokens(n,t)};Kt.parseInline=Da.parseInline;Kt.Parser=ji;Kt.parser=ji.parse;Kt.Renderer=qp;Kt.TextRenderer=pS;Kt.Lexer=Ki;Kt.lexer=Ki.lex;Kt.Tokenizer=Gp;Kt.Hooks=Zd;Kt.parse=Kt;var EJ=Kt.options,TJ=Kt.setOptions,wJ=Kt.use,NJ=Kt.walkTokens,kJ=Kt.parseInline;var OJ=ji.parse,MJ=Ki.lex;window.Prism=window.Prism||{};window.Prism.manual=!0;function gI(n,t){let e={...n,...t};for(let[i,r]of Object.entries(t))r8(n[i],r)&&(e[i]=gI(n[i],r));return e}function r8(...n){return n.every(t=>t&&t.constructor==Object)}var ih=class{#t={};constructor(...t){this.merge(...t)}merge(...t){return this.#t=t.reduce(gI,this.#t)}get(t){return t.split(".").reduce((i,r)=>i[r],this.#t)}};function sI(n,t){return[...Array(1+t-n).keys()].map(e=>e+n)}var oI=new ih({attachmentTagName:"action-text-attachment",attachmentContentTypeNamespace:"actiontext",authenticatedUploads:!1,extensions:[]}),aI=new ih({default:{attachments:!0,markdown:!0,multiLine:!0,richText:!0,toolbar:!0,highlight:{buttons:{color:sI(1,9).map(n=>`var(--highlight-${n})`),"background-color":sI(1,9).map(n=>`var(--highlight-bg-${n})`)},permit:{color:[],"background-color":[]}}}}),Vi={global:oI,presets:aI,configure({global:n,...t}){n&&oI.merge(n),aI.merge(t)}},s8=["a","b","blockquote","br","code","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","li","mark","ol","p","pre","q","s","strong","ul","table","tbody","tr","th","td"],o8=["alt","caption","class","content","content-type","contenteditable","data-direct-upload-id","data-sgid","filename","filesize","height","href","presentation","previewable","sgid","src","style","title","url","width"],a8=["color","background-color"];function l8(n,t){if(t.attrName==="style"&&t.attrValue){let e={...ga(t.attrValue)},i={};for(let r in e)a8.includes(r)&&(i[r]=e[r]);Object.keys(i).length?t.attrValue=tp(i):t.keepAttr=!1}}Yf.addHook("uponSanitizeAttribute",l8);Yf.addHook("uponSanitizeElement",(n,t)=>{(t.tagName==="strong"||t.tagName==="em")&&n.removeAttribute("class")});function c8(){return{ALLOWED_TAGS:s8.concat(Vi.global.get("attachmentTagName")),ALLOWED_ATTR:o8,ADD_URI_SAFE_ATTR:["caption","filename"],SAFE_FOR_XML:!1}}function cm(){return document.head.querySelector("meta[name=csp-nonce]")?.content}function pI(n){let t=n;for(;t!==null;){if(br(t))return t;t=t.getParent()}return null}function CS(n){let t=n;for(;t;){if(nn(t))return t.getListType();t=t.getParent()}return null}function u8(n){return n.ctrlKey||n.metaKey||n.altKey||n.key.length>1&&n.key!=="Enter"&&n.key!=="Space"?!1:n.key.length===1}function eh(n,...t){return mI(kn,n,(e,i)=>({...e,forChild:(r,s)=>{let a=(e?.forChild??(l=>l))(r,s);if(J(a))return a=t.reduce((l,c)=>c(l,i)??l,a),a}}))}function mI(n,t,e=i=>i){return i=>{let r=n.importDOM()?.[t]?.(i);if(!r)return null;let s=r.conversion(i);return s&&(e(s,i)??s)}}function d8(n){return P(n)?n.isCollapsed()?bI(n.style):n.hasFormat("highlight"):!1}function bI(n){let t=typeof n=="string"?ga(n):n;return!!(t.color||t["background-color"])}var em=class{constructor(t,e=[]){this._property=t,this._allowedValues=e,this._canonicalValues=this.#t}applyCanonicalization(t){let e={...ga(t)};return e[this._property]=this.getCanonicalAllowedValue(e[this._property]),e[this._property]||delete e[this._property],tp(e)}getCanonicalAllowedValue(t){return this._canonicalValues[t]||=this.#e(t)}get#t(){return this._allowedValues.reduce((t,e)=>({...t,[e]:e}),{})}#e(t){let e=this.#r.indexOf(t);return e||=this.#r.indexOf(lI(this._property,t)),e===-1?null:this._allowedValues[e]}get#r(){return this._computedAllowedValues||=this._allowedValues.map(t=>lI(this._property,t))}};function lI(n,t){let e=`${n}: ${t};`,i=document.body.appendChild(yt("span",{style:"display: none;"+e})),r=window.getComputedStyle(i).getPropertyValue(n);return i.remove(),r}function _I(n,t){let e=document.activeElement;n.includes(e)&&new AS(n,t.key).selectNext(e)&&t.preventDefault()}var AS=class{constructor(t,e){this.elements=t,this.key=e}selectNext(t){let e=this.#t(t);if(e){let i=this.elements.filter(r=>r!==e);return this.#a(i),this.#n(e),!0}return!1}#t(t){switch(this.key){case"ArrowRight":case"ArrowDown":return this.#s(t);case"ArrowLeft":case"ArrowUp":return this.#o(t);case"Home":return this.#e();case"End":return this.#r()}}#e(t=this.elements){return t.find(vS)}#r(t=this.elements){return t.findLast(vS)}#s(t){let e=this.elements.slice(this.#i(t)+1);return this.#e(e)}#o(t){let e=this.elements.slice(0,this.#i(t));return this.#r(e)}#i(t){return this.elements.indexOf(t)}#n(t){vS(t)&&(t.tabIndex=0,t.focus())}#a(t){t.forEach(e=>e.tabIndex=-1)}};function vS(n){return n&&!n.disabled&&n.checkVisibility()}var nm=class extends HTMLElement{static observedAttributes=["connected"];constructor(){super(),this.internals=this.attachInternals(),this.internals.role="toolbar",this.#e()}connectedCallback(){requestAnimationFrame(()=>this.#M()),this.setAttribute("role","toolbar"),this.#r()}disconnectedCallback(){this.#s(),this.#l(),this.#h()}attributeChangedCallback(t,e,i){t==="connected"&&this.isConnected&&e!=null&&e!==i&&requestAnimationFrame(()=>this.#t())}setEditor(t){this.editorElement=t,this.editor=t.editor,this.#o(),this.#c(),this.#y(),this.#D(),this.#x(),this.#A(),this.#M(),this.#_(),this.resolveEditorPromise(t),this.toggleAttribute("connected",!0)}async getEditorElement(){return this.editorElement||await this.editorPromise}#t(){this.disconnectedCallback(),this.connectedCallback()}#e(){this.editorPromise=new Promise(t=>{this.resolveEditorPromise=t})}#r(){this.resizeObserver=new ResizeObserver(()=>this.#M()),this.resizeObserver.observe(this)}#s(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}#o(){this.addEventListener("click",this.#i.bind(this))}#i(t){this.#n(t,"[data-command]",this.#a.bind(this))}#n(t,e,i){let r=t.target.closest(e);r&&i(t,r)}#a(t,{dataset:{command:e,payload:i}}){let r=t instanceof PointerEvent&&t.pointerId===-1;this.editor.update(()=>{this.editor.dispatchCommand(e,i)},{tag:r?f0:void 0})}#c(){this.editorElement.addEventListener("keydown",this.#u)}#l(){this.editorElement?.removeEventListener("keydown",this.#u)}#u=t=>{this.querySelectorAll("[data-hotkey]").forEach(i=>{i.dataset.hotkey.toLowerCase().split(/\s+/).includes(this.#b(t))&&(t.preventDefault(),t.stopPropagation(),i.click())})};#b(t){let e=t.key.toLowerCase();return[...[t.ctrlKey?"ctrl":null,t.metaKey?"cmd":null,t.altKey?"alt":null,t.shiftKey?"shift":null].filter(Boolean),e].join("+")}#_(){this.editorElement.addEventListener("lexxy:focus",this.#p),this.editorElement.addEventListener("lexxy:blur",this.#d),this.addEventListener("keydown",this.#f)}#h(){this.editorElement.removeEventListener("lexxy:focus",this.#p),this.editorElement.removeEventListener("lexxy:blur",this.#d),this.removeEventListener("keydown",this.#f)}#p=()=>{this.#P[0].tabIndex=0};#d=()=>{this.#y(),this.#N()};#f=t=>{_I(this.#P,t)};#y(){this.#P.forEach(t=>{t.tabIndex=-1})}#x(){this.editor.registerCommand(gr,()=>(this.#N(),this.#k(),!1),oe)}#A(){this.editor.registerUpdateListener(()=>{this.#m()})}#m(){this.editor.getEditorState().read(()=>{let t=this.editorElement.historyState;t&&(this.#C("undo",t.undoStack.length===0),this.#C("redo",t.redoStack.length===0))})}#k(){let t=I();if(!P(t))return;let e=t.anchor.getNode();if(!e.getParent())return;let i=e.getTopLevelElementOrThrow(),r=t.hasFormat("bold"),s=t.hasFormat("italic"),o=t.hasFormat("strikethrough"),a=d8(t),l=this.#O(e),c=Wi(i),u=Md(i),d=hs(i)||t.hasFormat("code"),h=this.#v(e),f=CS(e),g=qd(e)!==null;this.#g("bold",r),this.#g("italic",s),this.#g("strikethrough",o),this.#g("highlight",a),this.#g("link",l),this.#g("quote",c),this.#g("heading",u),this.#g("code",d),this.#g("unordered-list",h&&f==="bullet"),this.#g("ordered-list",h&&f==="number"),this.#g("table",g),this.#m()}#v(t){let e=t;for(;e;){if(nn(e)||br(e))return!0;e=e.getParent()}return!1}#O(t){let e=t;for(;e;){if(Wd(e))return!0;e=e.getParent()}return!1}#g(t,e){let i=this.querySelector(`[name="${t}"]`);i&&i.setAttribute("aria-pressed",e.toString())}#C(t,e){let i=this.querySelector(`[name="${t}"]`);i&&(i.disabled=e,i.setAttribute("aria-disabled",e.toString()))}#w(){return this.scrollWidth-this.#S.clientWidth>this.clientWidth+1}#M=()=>{this.#F(),this.#R(),this.#S.style.display=this.#T.children.length?"block":"none",this.#S.setAttribute("nonce",cm());let t=this.#T.children.length>0;this.toggleAttribute("overflowing",t),this.#T.toggleAttribute("disabled",!t)};#R(){let t=this.#$.reverse(),e=!1;for(let i of t)if(this.#w())this.#T.prepend(i),e=!0;else{e&&this.#T.prepend(i);break}}#F(){let t=Array.from(this.#T.children);t.sort((e,i)=>this.#E(i)-this.#E(e)),t.forEach(e=>{let i=this.querySelector(`[data-position="${this.#E(e)+1}"]`)??this.#S;this.insertBefore(e,i)})}#E(t){return parseInt(t.dataset.position??"999")}#D(){this.#z.forEach((t,e)=>{t.dataset.position===void 0&&(t.dataset.position=e)})}#N(){this.#I.forEach(t=>{t.open=!1})}get#I(){return this.querySelectorAll("details")}get#S(){return this.querySelector(".lexxy-editor__toolbar-overflow")}get#T(){return this.querySelector(".lexxy-editor__toolbar-overflow-menu")}get#$(){return Array.from(this.querySelectorAll(":scope > button"))}get#P(){return Array.from(this.querySelectorAll(":scope button, :scope > details > summary"))}get#z(){return Array.from(this.querySelectorAll(":scope > *:not(.lexxy-editor__toolbar-overflow)"))}static get defaultTemplate(){return`
      <button class="lexxy-editor__toolbar-button" type="button" name="bold" data-command="bold" title="Bold">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 22V2h8.183c1.764 0 3.174.435 4.228 1.304 1.055.87 1.582 2.076 1.582 3.62 0 .8-.148 1.503-.445 2.109a3.94 3.94 0 01-1.194 1.465 4.866 4.866 0 01-1.726.806v.176c.786.078 1.51.312 2.172.703a4.293 4.293 0 011.596 1.627c.403.693.604 1.543.604 2.549 0 1.192-.292 2.207-.877 3.048-.585.84-1.39 1.484-2.416 1.934-1.026.44-2.206.659-3.538.659H5zM8.854 4.974v5.348h2.56c.873 0 1.582-.107 2.129-.322.556-.215.963-.523 1.222-.923.269-.41.403-.904.403-1.48 0-.82-.254-1.46-.762-1.92-.499-.468-1.204-.703-2.115-.703H8.854zm0 8.103v5.949h2.877c1.534 0 2.636-.245 3.307-.733.671-.498 1.007-1.221 1.007-2.168 0-.635-.134-1.178-.403-1.627-.268-.459-.666-.81-1.193-1.055-.518-.244-1.156-.366-1.913-.366H8.854z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="italic" data-command="italic" title="Italic">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.1 4h-1.5l-3.2 16h1.5l-.4 2h-7l.4-2h1.5l3.2-16h-1.5l.4-2h7l-.4 2z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="strikethrough" data-command="strikethrough" title="Strikethrough">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.70588 16.1591C4.81459 19.7901 7.48035 22 11.6668 22C15.9854 22 18.724 19.6296 18.724 15.8779C18.724 15.5007 18.6993 15.1427 18.6474 14.8066H14.3721C14.8637 15.2085 15.0799 15.7037 15.0799 16.3471C15.0799 17.7668 13.7532 18.7984 11.8113 18.7984C9.88053 18.7984 8.38582 17.7531 8.21659 16.1591H4.70588ZM5.23953 9.31962H9.88794C9.10723 8.88889 8.75888 8.33882 8.75888 7.57339C8.75888 6.13992 9.96576 5.18793 11.7631 5.18793C13.5852 5.18793 14.8761 6.1797 14.9959 7.81344H18.4102C18.3485 4.31824 15.8038 2 11.752 2C7.867 2 5.09129 4.35802 5.09129 7.92044C5.09129 8.41838 5.14071 8.88477 5.23953 9.31962ZM2.23529 10.6914C1.90767 10.6914 1.59347 10.8359 1.36181 11.0931C1.13015 11.3504 1 11.6993 1 12.0631C1 12.4269 1.13015 12.7758 1.36181 13.0331C1.59347 13.2903 1.90767 13.4348 2.23529 13.4348H20.7647C21.0923 13.4348 21.4065 13.2903 21.6382 13.0331C21.8699 12.7758 22 12.4269 22 12.0631C22 11.6993 21.8699 11.3504 21.6382 11.0931C21.4065 10.8359 21.0923 10.6914 20.7647 10.6914H2.23529Z"/>
        </svg>
      </button>

      <details class="lexxy-editor__toolbar-dropdown" name="lexxy-dropdown">
        <summary class="lexxy-editor__toolbar-button" name="highlight" title="Color highlight">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.65422 0.711575C7.1856 0.242951 6.42579 0.242951 5.95717 0.711575C5.48853 1.18021 5.48853 1.94 5.95717 2.40864L8.70864 5.16011L2.85422 11.0145C1.44834 12.4204 1.44833 14.6998 2.85422 16.1057L7.86011 21.1115C9.26599 22.5174 11.5454 22.5174 12.9513 21.1115L19.6542 14.4087C20.1228 13.94 20.1228 13.1802 19.6542 12.7115L11.8544 4.91171L11.2542 4.31158L7.65422 0.711575ZM4.55127 12.7115L10.4057 6.85716L17.1087 13.56H4.19981C4.19981 13.253 4.31696 12.9459 4.55127 12.7115ZM23.6057 20.76C23.6057 22.0856 22.5311 23.16 21.2057 23.16C19.8802 23.16 18.8057 22.0856 18.8057 20.76C18.8057 19.5408 19.8212 18.5339 20.918 17.4462C21.0135 17.3516 21.1096 17.2563 21.2057 17.16C21.3018 17.2563 21.398 17.3516 21.4935 17.4462C22.5903 18.5339 23.6057 19.5408 23.6057 20.76Z"/></svg>
        </summary>
        <lexxy-highlight-dropdown class="lexxy-editor__toolbar-dropdown-content">
          <div class="lexxy-highlight-colors"></div>
          <button data-command="removeHighlight" class="lexxy-editor__toolbar-button lexxy-editor__toolbar-dropdown-reset">Remove all coloring</button>
        </lexxy-highlight-dropdown>
      </details>

      <details class="lexxy-editor__toolbar-dropdown" name="lexxy-dropdown">
        <summary class="lexxy-editor__toolbar-button" name="link" title="Link" data-hotkey="cmd+k ctrl+k">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.111 9.546a1.5 1.5 0 012.121 0 5.5 5.5 0 010 7.778l-2.828 2.828a5.5 5.5 0 01-7.778 0 5.498 5.498 0 010-7.777l2.828-2.83a1.5 1.5 0 01.355-.262 6.52 6.52 0 00.351 3.799l-1.413 1.414a2.499 2.499 0 000 3.535 2.499 2.499 0 003.535 0l2.83-2.828a2.5 2.5 0 000-3.536 1.5 1.5 0 010-2.121z"/><path d="M12.111 3.89a5.5 5.5 0 117.778 7.777l-2.828 2.829a1.496 1.496 0 01-.355.262 6.522 6.522 0 00-.351-3.8l1.413-1.412a2.5 2.5 0 10-3.536-3.535l-2.828 2.828a2.5 2.5 0 000 3.536 1.5 1.5 0 01-2.122 2.12 5.5 5.5 0 010-7.777l2.83-2.829z"/></svg>
        </summary>
        <lexxy-link-dropdown class="lexxy-editor__toolbar-dropdown-content">
          <form method="dialog">
            <input type="url" placeholder="Enter a URL\u2026" class="input">
            <div class="lexxy-editor__toolbar-dropdown-actions">
              <button type="submit" class="lexxy-editor__toolbar-button" value="link">Link</button>
              <button type="button" class="lexxy-editor__toolbar-button" value="unlink">Unlink</button>
            </div>
          </form>
        </lexxy-link-dropdown>
      </details>

      <button class="lexxy-editor__toolbar-button" type="button" name="quote" data-command="insertQuoteBlock" title="Quote">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 5C8.985 5 11 7.09 11 9.667c0 2.694-.962 5.005-2.187 6.644-.613.82-1.3 1.481-1.978 1.943-.668.454-1.375.746-2.022.746a.563.563 0 01-.52-.36.602.602 0 01.067-.57l.055-.066.009-.009.041-.048a4.25 4.25 0 00.168-.21c.143-.188.336-.47.53-.84a6.743 6.743 0 00.75-2.605C3.705 13.994 2 12.038 2 9.667 2 7.089 4.015 5 6.5 5zM17.5 5C19.985 5 22 7.09 22 9.667c0 2.694-.962 5.005-2.187 6.644-.613.82-1.3 1.481-1.978 1.943-.668.454-1.375.746-2.023.746a.563.563 0 01-.52-.36.602.602 0 01.068-.57l.055-.066.009-.009.041-.048c.039-.045.097-.115.168-.21a6.16 6.16 0 00.53-.84 6.745 6.745 0 00.75-2.605C14.705 13.994 13 12.038 13 9.667 13 7.089 15.015 5 17.5 5z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="heading" data-command="rotateHeadingFormat" title="Heading">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.322 5.315H9.64V22H5.684V5.315H0v-3.31h15.322v3.31z"/><path d="M23.957 11.79H19.92V22h-3.402V11.79H12.48V9.137h11.477v2.653z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="code" data-command="insertCodeBlock" title="Code">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10.121 6l-6 6 6 6-2.12 2.121-7.061-7.06a1.5 1.5 0 010-2.121L8 3.879 10.121 6zM23.06 10.94a1.5 1.5 0 010 2.12L16 20.121 13.88 18l6-6-6-6L16 3.879l7.06 7.06z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="unordered-list" data-command="insertUnorderedList" title="Bullet list">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5 5a2 2 0 11-4 0 2 2 0 014 0zM5 12a2 2 0 11-4 0 2 2 0 014 0zM5 19a2 2 0 11-4 0 2 2 0 014 0zM7 5.25C7 4.56 7.56 4 8.25 4h13.5a1.25 1.25 0 110 2.5H8.25C7.56 6.5 7 5.94 7 5.25zM7 12.25c0-.69.56-1.25 1.25-1.25h13.5a1.25 1.25 0 110 2.5H8.25c-.69 0-1.25-.56-1.25-1.25zM7 19.25c0-.69.56-1.25 1.25-1.25h13.5a1.25 1.25 0 110 2.5H8.25c-.69 0-1.25-.56-1.25-1.25z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="ordered-list" data-command="insertOrderedList" title="Numbered list">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.25C7 4.56 7.56 4 8.25 4h13.5a1.25 1.25 0 110 2.5H8.25C7.56 6.5 7 5.94 7 5.25zM7 12.25c0-.69.56-1.25 1.25-1.25h13.5a1.25 1.25 0 110 2.5H8.25c-.69 0-1.25-.56-1.25-1.25zM7 19.25c0-.69.56-1.25 1.25-1.25h13.5a1.25 1.25 0 110 2.5H8.25c-.69 0-1.25-.56-1.25-1.25zM4.438 8H3.39V3.684H3.34c-.133.093-.267.188-.402.285l-.407.289a129.5 129.5 0 00-.402.285v-.969l.633-.453c.21-.15.42-.302.629-.453h1.046V8zM2.672 11.258h-1v-.051c0-.206.036-.405.11-.598.075-.195.188-.37.34-.527.15-.156.339-.281.566-.375.229-.094.498-.14.808-.14.367 0 .688.065.961.195s.484.308.633.535c.15.224.226.478.226.762 0 .244-.046.463-.14.656-.091.19-.209.368-.352.535-.14.164-.289.332-.445.504L3.168 14.09v.05h2.238V15H1.723v-.656l1.949-2.102c.096-.101.19-.207.281-.316.091-.112.167-.232.227-.36a.953.953 0 00.09-.41.712.712 0 00-.387-.648.845.845 0 00-.41-.098.81.81 0 00-.43.11.75.75 0 00-.277.293.824.824 0 00-.094.386V11.258zM2.852 19.66v-.812h.562a.917.917 0 00.43-.098.742.742 0 00.293-.266.673.673 0 00.101-.379.654.654 0 00-.234-.523.87.87 0 00-.59-.2.987.987 0 00-.336.055.837.837 0 00-.258.149.712.712 0 00-.172.215.66.66 0 00-.066.25h-.98c.007-.209.053-.403.136-.582.084-.18.203-.336.36-.469.156-.135.346-.24.57-.316.227-.076.486-.115.777-.118a2.33 2.33 0 01.965.176c.271.12.48.285.63.496.15.209.227.448.23.719a1.11 1.11 0 01-.16.637 1.28 1.28 0 01-.825.586v.054c.162.016.33.07.504.164.177.094.328.232.453.415.125.18.189.411.192.695a1.37 1.37 0 01-.157.676c-.104.197-.25.365-.437.503-.188.136-.404.24-.649.313-.242.07-.5.105-.777.105-.401 0-.743-.067-1.027-.203a1.608 1.608 0 01-.649-.547 1.46 1.46 0 01-.238-.75h.969c.01.128.057.243.14.344a.885.885 0 00.332.238c.141.058.3.088.477.09.195 0 .366-.034.512-.101a.798.798 0 00.336-.29.744.744 0 00.117-.425.74.74 0 00-.446-.695 1.082 1.082 0 00-.496-.106h-.59z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="upload" data-command="uploadAttachments" title="Upload file">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16 8a2 2 0 110 4 2 2 0 010-4z""/><path d="M22 2a1 1 0 011 1v18a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h20zM3 18.714L9 11l5.25 6.75L17 15l4 4V4H3v14.714z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="table" data-command="insertTable" title="Insert a table">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.2041 2.01074C21.2128 2.113 22 2.96435 22 4V20L21.9893 20.2041C21.8938 21.1457 21.1457 21.8938 20.2041 21.9893L20 22H4C2.96435 22 2.113 21.2128 2.01074 20.2041L2 20V4C2 2.89543 2.89543 2 4 2H20L20.2041 2.01074ZM4 13V20H11V13H4ZM13 13V20H20V13H13ZM4 11H11V4H4V11ZM13 11H20V4H13V11Z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="divider" data-command="insertHorizontalDivider" title="Insert a divider">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 12C0 11.4477 0.447715 11 1 11H23C23.5523 11 24 11.4477 24 12C24 12.5523 23.5523 13 23 13H1C0.447716 13 0 12.5523 0 12Z"/><path d="M4 5C4 3.89543 4.89543 3 6 3H18C19.1046 3 20 3.89543 20 5C20 6.10457 19.1046 7 18 7H6C4.89543 7 4 6.10457 4 5Z"/><path d="M4 19C4 17.8954 4.89543 17 6 17H18C19.1046 17 20 17.8954 20 19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19Z"/></svg>
      </button>
 
      <div class="lexxy-editor__toolbar-spacer" role="separator"></div>
 
      <button class="lexxy-editor__toolbar-button" type="button" name="undo" data-command="undo" title="Undo">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.64648 8.26531C7.93911 6.56386 10.7827 5.77629 13.624 6.05535C16.4655 6.33452 19.1018 7.66079 21.0195 9.77605C22.5839 11.5016 23.5799 13.6516 23.8936 15.9352C24.0115 16.7939 23.2974 17.4997 22.4307 17.4997C21.5641 17.4997 20.8766 16.7915 20.7148 15.9401C20.4295 14.4379 19.7348 13.0321 18.6943 11.8844C17.3 10.3464 15.3835 9.38139 13.3174 9.17839C11.2514 8.97546 9.18359 9.54856 7.5166 10.7858C6.38259 11.6275 5.48981 12.7361 4.90723 13.9997H8.5C9.3283 13.9997 9.99979 14.6714 10 15.4997C10 16.3281 9.32843 16.9997 8.5 16.9997H1.5C0.671573 16.9997 0 16.3281 0 15.4997V8.49968C0.000213656 7.67144 0.671705 6.99968 1.5 6.99968C2.3283 6.99968 2.99979 7.67144 3 8.49968V11.0212C3.7166 9.9704 4.60793 9.03613 5.64648 8.26531Z"/></svg>
      </button>

      <button class="lexxy-editor__toolbar-button" type="button" name="redo" data-command="redo" title="Redo">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.2599 8.26531C15.9672 6.56386 13.1237 5.77629 10.2823 6.05535C7.4408 6.33452 4.80455 7.66079 2.88681 9.77605C1.32245 11.5016 0.326407 13.6516 0.0127834 15.9352C-0.105117 16.7939 0.608975 17.4997 1.47567 17.4997C2.34228 17.4997 3.02969 16.7915 3.19149 15.9401C3.47682 14.4379 4.17156 13.0321 5.212 11.8844C6.60637 10.3464 8.52287 9.38139 10.589 9.17839C12.655 8.97546 14.7227 9.54856 16.3897 10.7858C17.5237 11.6275 18.4165 12.7361 18.9991 13.9997H15.4063C14.578 13.9997 13.9066 14.6714 13.9063 15.4997C13.9063 16.3281 14.5779 16.9997 15.4063 16.9997H22.4063C23.2348 16.9997 23.9063 16.3281 23.9063 15.4997V8.49968C23.9061 7.67144 23.2346 6.99968 22.4063 6.99968C21.578 6.99968 20.9066 7.67144 20.9063 8.49968V11.0212C20.1897 9.9704 19.2984 9.03613 18.2599 8.26531Z"/></svg>
      </button>

      <details class="lexxy-editor__toolbar-dropdown lexxy-editor__toolbar-overflow" name="lexxy-dropdown">
        <summary class="lexxy-editor__toolbar-button" aria-label="Show more toolbar buttons">\u2022\u2022\u2022</summary>
        <div class="lexxy-editor__toolbar-dropdown-content lexxy-editor__toolbar-overflow-menu" aria-label="More toolbar buttons"></div>
      </details>
    `}};customElements.define("lexxy-toolbar",nm);var Pa={text:{bold:"lexxy-content__bold",italic:"lexxy-content__italic",strikethrough:"lexxy-content__strikethrough",underline:"lexxy-content__underline",highlight:"lexxy-content__highlight"},tableCellHeader:"lexxy-content__table-cell--header",tableCellSelected:"lexxy-content__table-cell--selected",tableSelection:"lexxy-content__table--selection",tableScrollableWrapper:"lexxy-content__table-wrapper",tableCellHighlight:"lexxy-content__table-cell--highlight",tableCellFocus:"lexxy-content__table-cell--focus",list:{nested:{listitem:"lexxy-nested-listitem"}},codeHighlight:{addition:"code-token__selector",atrule:"code-token__attr",attr:"code-token__attr","attr-name":"code-token__attr","attr-value":"code-token__selector",boolean:"code-token__property",bold:"code-token__variable",builtin:"code-token__selector",cdata:"code-token__comment",char:"code-token__selector",class:"code-token__function","class-name":"code-token__function",color:"code-token__property",comment:"code-token__comment",constant:"code-token__property",coord:"code-token__comment",decorator:"code-token__function",deleted:"code-token__operator",deletion:"code-token__operator",directive:"code-token__attr","directive-hash":"code-token__property",doctype:"code-token__comment",entity:"code-token__operator",function:"code-token__function",hexcode:"code-token__property",important:"code-token__function",inserted:"code-token__selector",italic:"code-token__comment",keyword:"code-token__attr",line:"code-token__selector",namespace:"code-token__variable",number:"code-token__property",macro:"code-token__function",operator:"code-token__operator",parameter:"code-token__variable",prolog:"code-token__comment",property:"code-token__property",punctuation:"code-token__punctuation","raw-string":"code-token__operator",regex:"code-token__variable",script:"code-token__function",selector:"code-token__selector",string:"code-token__selector",style:"code-token__function",symbol:"code-token__property",tag:"code-token__property",title:"code-token__function","type-definition":"code-token__function",url:"code-token__operator",variable:"code-token__variable"}};function xI(n){if(n===0)return"0 B";let t=["B","KB","MB","GB","TB","PB"],e=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,e)).toFixed(2)} ${t[e]}`}var wc=class n extends zn{static getType(){return"action_text_attachment"}static clone(t){return new n({...t},t.__key)}static importJSON(t){return new n({...t})}static importDOM(){return{[this.TAG_NAME]:()=>({conversion:t=>({node:new n({sgid:t.getAttribute("sgid"),src:t.getAttribute("url"),previewable:t.getAttribute("previewable"),altText:t.getAttribute("alt"),caption:t.getAttribute("caption"),contentType:t.getAttribute("content-type"),fileName:t.getAttribute("filename"),fileSize:t.getAttribute("filesize"),width:t.getAttribute("width"),height:t.getAttribute("height")})}),priority:1}),img:()=>({conversion:t=>({node:new n({src:t.getAttribute("src"),caption:t.getAttribute("alt")||"",contentType:"image/*",width:t.getAttribute("width"),height:t.getAttribute("height")})}),priority:1}),video:()=>({conversion:t=>{let e=t.getAttribute("src")||t.querySelector("source")?.src,i=e?.split("/")?.pop(),r=t.querySelector("source")?.getAttribute("content-type")||"video/*";return{node:new n({src:e,fileName:i,contentType:r})}},priority:1})}}static get TAG_NAME(){return Vi.global.get("attachmentTagName")}constructor({tagName:t,sgid:e,src:i,previewable:r,altText:s,caption:o,contentType:a,fileName:l,fileSize:c,width:u,height:d},h){super(h),this.tagName=t||n.TAG_NAME,this.sgid=e,this.src=i,this.previewable=r,this.altText=s||"",this.caption=o||"",this.contentType=a||"",this.fileName=l||"",this.fileSize=c,this.width=u,this.height=d}createDOM(){let t=this.createAttachmentFigure();return t.addEventListener("click",()=>{this.#i(t)}),this.isPreviewableAttachment?(t.appendChild(this.#e()),t.appendChild(this.#n())):(t.appendChild(this.#s()),t.appendChild(this.#o())),t}updateDOM(){return!0}getTextContent(){return`[${this.caption||this.fileName}]

`}isInline(){return!1}exportDOM(){return{element:yt(this.tagName,{sgid:this.sgid,previewable:this.previewable||null,url:this.src,alt:this.altText,caption:this.caption,"content-type":this.contentType,filename:this.fileName,filesize:this.fileSize,width:this.width,height:this.height,presentation:"gallery"})}}exportJSON(){return{type:"action_text_attachment",version:1,tagName:this.tagName,sgid:this.sgid,src:this.src,previewable:this.previewable,altText:this.altText,caption:this.caption,contentType:this.contentType,fileName:this.fileName,fileSize:this.fileSize,width:this.width,height:this.height}}decorate(){return null}createAttachmentFigure(){return zL(this.contentType,this.isPreviewableAttachment,this.fileName)}get#t(){return HL(this.contentType)}get isPreviewableAttachment(){return this.#t||this.previewable}#e(){return yt("img",{src:this.src,alt:this.altText,...this.#r})}get#r(){return this.width&&this.height?{width:this.width,height:this.height}:{}}#s(){let t=this.fileName?this.fileName.split(".").pop().toLowerCase():"unknown";return yt("span",{className:"attachment__icon",textContent:`${t}`})}#o(){let t=yt("figcaption",{className:"attachment__caption"}),e=yt("strong",{className:"attachment__name",textContent:this.caption||this.fileName});if(t.appendChild(e),this.fileSize){let i=yt("span",{className:"attachment__size",textContent:xI(this.fileSize)});t.appendChild(i)}return t}#i(t){Tc(t,"lexxy:internal:select-node",{key:this.getKey()})}#n(){let t=yt("figcaption",{className:"attachment__caption"}),e=yt("textarea",{value:this.caption,placeholder:this.fileName,rows:"1"});return e.addEventListener("focusin",()=>e.placeholder="Add caption..."),e.addEventListener("blur",this.#a.bind(this)),e.addEventListener("keydown",this.#l.bind(this)),t.appendChild(e),t}#a(t){let e=t.target;e.placeholder=this.fileName,this.#c(e)}#c(t){Tc(t,"lexxy:internal:invalidate-node",{key:this.getKey(),values:{caption:t.value}})}#l(t){t.key==="Enter"&&(this.#c(t.target),Tc(t.target,"lexxy:internal:move-to-next-line"),t.preventDefault()),t.stopPropagation()}};async function h8(n,t){return new Promise(e=>{let i=new FileReader;t.addEventListener("load",()=>{e(t)}),i.onload=r=>{t.src=r.target.result||null},i.readAsDataURL(n)})}var im=class n extends wc{static getType(){return"action_text_attachment_upload"}static clone(t){return new n({...t},t.__key)}static importJSON(t){return new n({...t})}static importDOM(){return null}constructor(t,e){let{file:i,uploadUrl:r,blobUrlTemplate:s,editor:o,progress:a}=t;super({...t,contentType:i.type},e),this.file=i,this.uploadUrl=r,this.blobUrlTemplate=s,this.src=null,this.editor=o,this.progress=a||0}createDOM(){let t=this.createAttachmentFigure();this.isPreviewableAttachment?t.appendChild(this.#t()):t.appendChild(this.#e()),t.appendChild(this.#s());let e=yt("progress",{value:this.progress,max:100});return t.appendChild(e),this.#o(t).then(()=>this.#i(e,t)),t}exportDOM(){let t=document.createElement("img");return this.src&&(t.src=this.src),{element:t}}exportJSON(){return{type:"action_text_attachment_upload",version:1,progress:this.progress,uploadUrl:this.uploadUrl,blobUrlTemplate:this.blobUrlTemplate,...super.exportJSON()}}#t(){return yt("img")}#e(){let t=this.#r();return yt("span",{className:"attachment__icon",textContent:t})}#r(){return this.file.name.split(".").pop().toLowerCase()}#s(){let t=yt("figcaption",{className:"attachment__caption"}),e=yt("span",{className:"attachment__name",textContent:this.file.name||""}),i=yt("span",{className:"attachment__size",textContent:xI(this.file.size)});return t.appendChild(e),t.appendChild(i),t}#o(t){let e=t.querySelector("img");return e?h8(this.file,e):Promise.resolve()}async#i(t,e){let{DirectUpload:i}=await Promise.resolve().then(()=>(rI(),iI)),r=Vi.global.get("authenticatedUploads"),s=new i(this.file,this.uploadUrl,this);s.delegate={directUploadWillCreateBlobWithXHR:o=>{r&&(o.withCredentials=!0)},directUploadWillStoreFileWithXHR:o=>{r&&(o.withCredentials=!0),o.upload.addEventListener("progress",a=>{this.editor.update(()=>{t.value=Math.round(a.loaded/a.total*100)})})}},s.create((o,a)=>{o?this.#n(e):this.#c(a,e).then(()=>{this.#a(e,a)})})}#n(t){t.innerHTML="",t.classList.add("attachment--error"),t.appendChild(yt("div",{innerText:`Error uploading ${this.file?.name??"image"}`}))}async#a(t,e){this.editor.update(()=>{let i=t.querySelector("img"),r=this.blobUrlTemplate.replace(":signed_id",e.signed_id).replace(":filename",encodeURIComponent(e.filename)),s=Qt(this.getKey());s&&s.replace(new wc({tagName:this.tagName,sgid:e.attachable_sgid,src:e.previewable?e.url:r,altText:e.filename,contentType:e.content_type,fileName:e.filename,fileSize:e.byte_size,width:i?.naturalWidth,previewable:e.previewable,height:i?.naturalHeight}))},{tag:ha})}async#c(t,e){return t.previewable?new Promise(i=>{this.editor.update(()=>{let r=this.#t();r.addEventListener("load",()=>{i()}),r.src=t.url,e.insertBefore(r,e.firstChild)})}):Promise.resolve()}},rm=class n extends zn{static getType(){return"horizontal_divider"}static clone(t){return new n(t.__key)}static importJSON(t){return new n}static importDOM(){return{hr:t=>({conversion:()=>({node:new n}),priority:1})}}constructor(t){super(t)}createDOM(){let t=yt("figure",{className:"horizontal-divider"}),e=yt("hr");return t.addEventListener("click",i=>{Tc(t,"lexxy:internal:select-node",{key:this.getKey()})}),t.appendChild(e),t}updateDOM(){return!0}getTextContent(){return`\u2504

`}isInline(){return!1}exportDOM(){return{element:yt("hr")}}exportJSON(){return{type:"horizontal_divider",version:1}}decorate(){return null}},f8=["bold","italic","strikethrough","link","unlink","toggleHighlight","removeHighlight","rotateHeadingFormat","insertUnorderedList","insertOrderedList","insertQuoteBlock","insertCodeBlock","insertHorizontalDivider","uploadAttachments","insertTable","undo","redo"],ES=class n{static configureFor(t){new n(t)}constructor(t){this.editorElement=t,this.editor=t.editor,this.selection=t.selection,this.contents=t.contents,this.clipboard=t.clipboard,this.highlighter=t.highlighter,this.#t(),this.#r(),this.#s()}dispatchPaste(t){return this.clipboard.paste(t)}dispatchBold(){this.editor.dispatchCommand(as,"bold")}dispatchItalic(){this.editor.dispatchCommand(as,"italic")}dispatchStrikethrough(){this.editor.dispatchCommand(as,"strikethrough")}dispatchToggleHighlight(t){this.highlighter.toggle(t)}dispatchRemoveHighlight(){this.highlighter.remove()}dispatchLink(t){this.editor.update(()=>{let e=I();if(P(e))if(e.isCollapsed()){let i=tL(t),r=Ft(t);i.append(r),e.insertNodes([i])}else Ud(t)})}dispatchUnlink(){this.#b(null)}dispatchInsertUnorderedList(){let t=I();if(!t)return;let e=t.anchor.getNode();this.selection.isInsideList&&e&&CS(e)==="bullet"?this.contents.unwrapSelectedListItems():this.editor.dispatchCommand(GM,void 0)}dispatchInsertOrderedList(){let t=I();if(!t)return;let e=t.anchor.getNode();this.selection.isInsideList&&e&&CS(e)==="number"?this.contents.unwrapSelectedListItems():this.editor.dispatchCommand(VM,void 0)}dispatchInsertQuoteBlock(){this.contents.toggleNodeWrappingAllSelectedNodes(t=>Wi(t),()=>_c())}dispatchInsertCodeBlock(){this.editor.update(()=>{this.selection.hasSelectedWordsInSingleLine?this.editor.dispatchCommand(as,"code"):this.contents.toggleNodeWrappingAllSelectedLines(t=>hs(t),()=>new Ca("plain"))})}dispatchInsertHorizontalDivider(){this.contents.insertAtCursorEnsuringLineBelow(new rm),this.editor.focus()}dispatchRotateHeadingFormat(){this.editor.update(()=>{let t=I();if(!P(t))return;if(Le(t.anchor.getNode())){t.insertNodes([Od("h2")]);return}let e=t.anchor.getNode().getTopLevelElementOrThrow(),i="h2";if(Md(e)){let r=e.getTag();r==="h2"?i="h3":r==="h3"?i="h4":r==="h4"?i=null:i="h2"}i?this.contents.insertNodeWrappingEachSelectedLine(()=>Od(i)):this.contents.removeFormattingFromSelectedLines()})}dispatchUploadAttachments(){let t=yt("input",{type:"file",multiple:!0,style:"display: none;",onchange:({target:e})=>{let i=Array.from(e.files);if(i.length)for(let r of i)this.contents.uploadFile(r)}});this.editorElement.appendChild(t),t.click(),setTimeout(()=>t.remove(),1e3)}dispatchInsertTable(){this.editor.dispatchCommand(IL,{rows:3,columns:3,includeHeaders:!0})}dispatchUndo(){this.editor.dispatchCommand(Vg,void 0)}dispatchRedo(){this.editor.dispatchCommand(Ug,void 0)}#t(){for(let t of f8){let e=`dispatch${g8(t)}`;this.#e(t,0,this[e].bind(this))}this.#e(io,wt,this.dispatchPaste.bind(this))}#e(t,e,i){this.editor.registerCommand(t,i,e)}#r(){this.editor.registerCommand(bi,this.#c.bind(this),Bi)}#s(){this.editorElement.supportsAttachments&&(this.dragCounter=0,this.editor.getRootElement().addEventListener("dragover",this.#n.bind(this)),this.editor.getRootElement().addEventListener("drop",this.#a.bind(this)),this.editor.getRootElement().addEventListener("dragenter",this.#o.bind(this)),this.editor.getRootElement().addEventListener("dragleave",this.#i.bind(this)))}#o(t){this.dragCounter++,this.dragCounter===1&&this.editor.getRootElement().classList.add("lexxy-editor--drag-over")}#i(t){this.dragCounter--,this.dragCounter===0&&this.editor.getRootElement().classList.remove("lexxy-editor--drag-over")}#n(t){t.preventDefault()}#a(t){t.preventDefault(),this.dragCounter=0,this.editor.getRootElement().classList.remove("lexxy-editor--drag-over");let e=t.dataTransfer;if(!e)return;let i=Array.from(e.files);if(i.length){for(let r of i)this.contents.uploadFile(r);this.editor.focus()}}#c(t){return this.selection.isInsideList?this.#l(t):this.selection.isInsideCodeBlock?this.#u():!1}#l(t){if(t.shiftKey&&!this.selection.isIndentedList)return!1;t.preventDefault();let e=t.shiftKey?ni:wn;return this.editor.dispatchCommand(e)}#u(){let t=I();return P(t)&&t.isCollapsed()}#b(t){this.editor.update(()=>{t===null?Ud(null):Ud(t)})}};function g8(n){return n.charAt(0).toUpperCase()+n.slice(1)}function p8(n,t){let e;return(...i)=>(clearTimeout(e),new Promise((r,s)=>{e=setTimeout(async()=>{try{let o=await n(...i);r(o)}catch(o){s(o)}},t)}))}function ps(){return new Promise(requestAnimationFrame)}var TS=class{constructor(t){this.editorElement=t,this.editorContentElement=t.editorContentElement,this.editor=this.editorElement.editor,this.previouslySelectedKeys=new Set,this.#s(),this.#r(),this.#o(),this.#a()}set current(t){this.editor.update(()=>{this.#c()})}get hasNodeSelection(){let t=!1;return this.editor.getEditorState().read(()=>{let e=I();t=e!==null&&be(e)}),t}get cursorPosition(){let t={x:0,y:0};return this.editor.getEditorState().read(()=>{let e=this.#C();if(!e)return;let i=this.#w(e);i&&(t=this.#D(i,e))}),t}placeCursorAtTheEnd(){this.editor.update(()=>{let t=ue(),e=t.getLastDescendant();e&&J(e)?e.selectEnd():t.selectEnd()})}selectedNodeWithOffset(){let t=I();if(!t)return{node:null,offset:0};if(P(t))return{node:t.anchor.getNode(),offset:t.anchor.offset};if(be(t)){let[e]=t.getNodes();return{node:e,offset:0}}return{node:null,offset:0}}preservingSelection(t){let e=null;this.editor.getEditorState().read(()=>{let i=I();i&&P(i)&&(e={anchor:{key:i.anchor.key,offset:i.anchor.offset},focus:{key:i.focus.key,offset:i.focus.offset}})}),t(),e&&this.editor.update(()=>{let i=I();i&&P(i)&&(i.anchor.set(e.anchor.key,e.anchor.offset,"text"),i.focus.set(e.focus.key,e.focus.offset,"text"))})}get hasSelectedWordsInSingleLine(){let t=I();if(!P(t)||t.isCollapsed())return!1;let e=t.anchor.getNode(),i=t.focus.getNode();if(e.getTopLevelElement()!==i.getTopLevelElement()||!e.getTopLevelElement())return!1;let s=t.getNodes();for(let o of s)if($t(o))return!1;return!0}get isInsideList(){let t=I();if(!P(t))return!1;let e=t.anchor.getNode();return pI(e)!==null}get isIndentedList(){let t=I();if(!P(t))return!1;let e=t.getNodes();for(let i of e){let r=ac(i,xa);if(r&&jM(r)>1)return!0}return!1}get isInsideCodeBlock(){let t=I();if(!P(t))return!1;let e=t.anchor.getNode();return ac(e,Ca)!==null}get isTableCellSelected(){let t=I();if(!P(t))return!1;let e=t.anchor.getNode();return ac(e,Ac)!==null}get nodeAfterCursor(){let{anchorNode:t,offset:e}=this.#S();return t?J(t)?this.#T(t,e):j(t)?this.#P(t,e):this.#L(t):null}get topLevelNodeAfterCursor(){let{anchorNode:t,offset:e}=this.#S();return t?J(t)?this.#$(t):j(t)?this.#P(t,e):this.#L(t):null}get nodeBeforeCursor(){let{anchorNode:t,offset:e}=this.#S();return t?J(t)?this.#z(t,e):j(t)?this.#B(t,e):this.#H(t):null}get topLevelNodeBeforeCursor(){let{anchorNode:t,offset:e}=this.#S();return t?J(t)?this.#W(t):j(t)?this.#B(t,e):this.#H(t):null}get#t(){return this.editorElement.contents}get#e(){if(this.currentlySelectedKeys)return this.currentlySelectedKeys;this.currentlySelectedKeys=new Set;let t=I();if(t&&be(t))for(let e of t.getNodes())this.currentlySelectedKeys.add(e.getKey());return this.currentlySelectedKeys}#r(){this.editor.registerCommand(fr,this.#b.bind(this),wt),this.editor.registerCommand(eo,this.#_.bind(this),wt),this.editor.registerCommand(Nn,this.#h.bind(this),wt),this.editor.registerCommand(ei,this.#p.bind(this),wt),this.editor.registerCommand(no,this.#O.bind(this),wt),this.editor.registerCommand(ls,this.#g.bind(this),wt),this.editor.registerCommand(gr,()=>{this.current=I()},wt)}#s(){this.editor.getRootElement().addEventListener("lexxy:internal:select-node",async t=>{await ps();let{key:e}=t.detail;this.editor.update(()=>{let i=Qt(e);if(i){let r=dd();r.add(i.getKey()),te(r)}this.editor.focus()})}),this.editor.getRootElement().addEventListener("lexxy:internal:move-to-next-line",t=>{this.#f()})}#o(){this.editor.getRootElement().addEventListener("keydown",t=>{u8(t)&&this.editor.update(()=>{let e=I();if(P(e)&&e.isCollapsed()){let i=e.anchor.getNode(),r=e.anchor.offset,s=this.#i(i,r),o=this.#n(i,r);if(s instanceof zn&&!s.isInline()){t.preventDefault(),this.#t.createParagraphAfterNode(s,t.key);return}else if(o instanceof zn&&!o.isInline()){t.preventDefault(),this.#t.createParagraphBeforeNode(o,t.key);return}}})},!0)}#i(t,e){return J(t)&&e===0?t.getPreviousSibling():j(t)&&e>0?t.getChildAtIndex(e-1):null}#n(t,e){return J(t)&&e===t.getTextContentSize()?t.getNextSibling():j(t)?t.getChildAtIndex(e):null}#a(){this.editorContentElement.addEventListener("keydown",t=>{if(t.key==="ArrowUp"){let e=this.editor.getRootElement().querySelector("[data-lexical-cursor]");if(e){let i=e.previousElementSibling;for(;i&&i.hasAttribute("data-lexical-cursor");)i=i.previousElementSibling;i||t.preventDefault()}}if(t.key==="ArrowDown"){let e=this.editor.getRootElement().querySelector("[data-lexical-cursor]");if(e){let i=e.nextElementSibling;for(;i&&i.hasAttribute("data-lexical-cursor");)i=i.nextElementSibling;i||t.preventDefault()}}},!0)}#c(){this.#l(),this.#u(),this.previouslySelectedKeys=this.#e,this.currentlySelectedKeys=null}#l(){for(let t of this.previouslySelectedKeys)if(!this.#e.has(t)){let e=this.editor.getElementByKey(t);e&&e.classList.remove("node--selected")}}#u(){for(let t of this.#e)if(!this.previouslySelectedKeys.has(t)){let e=this.editor.getElementByKey(t);e&&e.classList.add("node--selected")}}async#b(){this.hasNodeSelection?await this.#d(t=>t.selectPrevious()):this.#v(this.nodeBeforeCursor)}async#_(){this.hasNodeSelection?await this.#d(t=>t.selectNext(0,0)):this.#v(this.nodeAfterCursor)}async#h(){this.hasNodeSelection?await this.#d(t=>t.selectPrevious()):this.#v(this.topLevelNodeBeforeCursor)}async#p(){this.hasNodeSelection?await this.#d(t=>t.selectNext(0,0)):this.#v(this.topLevelNodeAfterCursor)}async#d(t){await ps(),this.hasNodeSelection&&this.editor.update(()=>{t(I().getNodes()[0]),this.editor.focus()})}async#f(){this.editor.update(()=>{let t=this.#y();t&&this.#m(t)})}#y(){let t=I();return t?be(t)?this.#x(t):P(t)?this.#A(t):null:null}#x(t){let e=t.getNodes();return e.length>0?e[0].getTopLevelElement():null}#A(t){return t.anchor.getNode().getTopLevelElement()}#m(t){let e=t.getNextSibling();e?e.selectStart():this.#k()}#k(){let t=ue(),e=nt();t.append(e),e.selectStart()}#v(t){!t||!(t instanceof zn)||this.editor.update(()=>{let e=dd();e.add(t.getKey()),te(e)})}#O(){let t=this.nodeAfterCursor;return t instanceof zn?(this.#v(t),!0):(this.#t.deleteSelectedNodes(),!1)}#g(){let t=this.nodeBeforeCursor;return t instanceof zn?(this.#v(t),!0):(this.#t.deleteSelectedNodes(),!1)}#C(){let t=I();if(!t||!t.isCollapsed())return null;let e=window.getSelection();return!e||e.rangeCount===0?null:e.getRangeAt(0)}#w(t){let e=t.getBoundingClientRect();if(this.#M(e)){let i=this.#R(t);e=i.getBoundingClientRect(),this.#E(i),i.remove()}return e}#M(t){return t.width===0&&t.height===0||t.top===0&&t.left===0}#R(t){let e=this.#F();return t.insertNode(e),e}#F(){let t=document.createElement("span");return t.textContent="\u200B",t.style.display="inline-block",t.style.width="1px",t.style.height="1em",t.style.lineHeight="normal",t.setAttribute("nonce",cm()),t}#E(t){let e=window.getSelection();e.removeAllRanges();let i=document.createRange();i.setStartAfter(t),i.collapse(!0),e.addRange(i)}#D(t,e){let i=this.editor.getRootElement().getBoundingClientRect(),r=t.left-i.left,s=t.top-i.top,o=this.#N(e);return isNaN(o)||(s+=o),{x:r,y:s,fontSize:o}}#N(t){let i=window.getSelection().anchorNode,r=this.#I(i);if(r instanceof HTMLElement){let s=window.getComputedStyle(r);return parseFloat(s.fontSize)}return 0}#I(t){return t?.nodeType===Node.TEXT_NODE?t.parentElement:t}#S(){let t=I();if(!P(t)||!t.isCollapsed())return{anchorNode:null,offset:0};let{anchor:e}=t;return{anchorNode:e.getNode(),offset:e.offset}}#T(t,e){return e===t.getTextContentSize()?this.#$(t):null}#$(t){if(t.getNextSibling()instanceof zn)return t.getNextSibling();let e=t.getParent();return e?e.getNextSibling():null}#P(t,e){return e<t.getChildrenSize()?t.getChildAtIndex(e):this.#L(t)}#z(t,e){return e===0?this.#W(t):null}#W(t){return t.getPreviousSibling()instanceof zn?t.getPreviousSibling():t.getParent().getPreviousSibling()}#B(t,e){return e>0?t.getChildAtIndex(e-1):this.#H(t)}#L(t){let e=t;for(;e&&e.getNextSibling()==null;)e=e.getParent();return e?e.getNextSibling():null}#H(t){let e=t;for(;e&&e.getPreviousSibling()==null;)e=e.getParent();return e?e.getPreviousSibling():null}};function m8(n){return Yf.sanitize(n,c8())}function b8(n){return n.replace(/([A-Z])/g,(t,e)=>`-${e.toLowerCase()}`)}function cI(n){try{return new URL(n),!0}catch{return!1}}function uI(n){return n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function _8(n,t){return uI(n).includes(uI(t))}function dI(n){return n.charAt(0).toUpperCase()+n.slice(1)}var wS=class{#t;#e;constructor(t){this.#t=t,this.#e=new ih(Vi.presets.get("default"),Vi.presets.get(t.preset),this.#r)}get(t){return this.#e.get(t)}get#r(){let t={};for(let e of this.#s){let i=b8(e);this.#t.hasAttribute(i)&&(t[e]=this.#o(i))}return t}get#s(){return Object.keys(Vi.presets.get("default"))}#o(t){let e=this.#t.getAttribute(t);try{return JSON.parse(e)}catch{return e}}},rh=class n extends zn{static getType(){return"custom_action_text_attachment"}static clone(t){return new n({...t},t.__key)}static importJSON(t){return new n({...t})}static importDOM(){return{[this.TAG_NAME]:t=>t.getAttribute("content")?{conversion:e=>{let i=[],r=e.previousSibling;return r&&r.nodeType===Node.TEXT_NODE&&/\s$/.test(r.textContent)&&i.push(Ft(" ")),i.push(new n({sgid:e.getAttribute("sgid"),innerHtml:JSON.parse(e.getAttribute("content")),contentType:e.getAttribute("content-type")})),i.push(Ft(" ")),{node:i}},priority:2}:null}}static get TAG_NAME(){return Vi.global.get("attachmentTagName")}constructor({tagName:t,sgid:e,contentType:i,innerHtml:r},s){super(s);let o=Vi.global.get("attachmentContentTypeNamespace");this.tagName=t||n.TAG_NAME,this.sgid=e,this.contentType=i||`application/vnd.${o}.unknown`,this.innerHtml=r}createDOM(){let t=yt(this.tagName,{"content-type":this.contentType,"data-lexxy-decorator":!0});return t.addEventListener("click",e=>{Tc(t,"lexxy:internal:select-node",{key:this.getKey()})}),t.insertAdjacentHTML("beforeend",this.innerHtml),t}updateDOM(){return!0}getTextContent(){return this.createDOM().textContent.trim()||`[${this.contentType}]`}isInline(){return!0}exportDOM(){return{element:yt(this.tagName,{sgid:this.sgid,content:JSON.stringify(this.innerHtml),"content-type":this.contentType})}}exportJSON(){return{type:"custom_action_text_attachment",version:1,tagName:this.tagName,sgid:this.sgid,contentType:this.contentType,innerHtml:this.innerHtml}}decorate(){return null}},NS=class{constructor(t){this.editorElement=t,this.editor=t.editor}monitor(){this.editor.registerCommand(cs,t=>this.#t(t),oe)}#t(t){let e=I();if(!P(e))return!1;let i=e.anchor.getNode();return this.#s(i)?this.#e(t,i)||this.#r(t,i):!1}#e(t,e){return this.#o(e)||this.#i(e)?(t.preventDefault(),this.#c(e),!0):!1}#r(t,e){return this.#l(e)?(t.preventDefault(),this.#b(e),!0):!1}#s(t){let e=t;for(;e;){if(Wi(e))return!0;e=e.getParent()}return!1}#o(t){let e=this.#a(t);return e?this.#n(e):!1}#i(t){let e=this.#u(t);if(!e||!this.#n(e))return!1;let i=e.getParent();return i&&br(i)}#n(t){if(t.getTextContent().trim()!=="")return!1;let e=t.getChildren();return e.length===0?!0:e.every(i=>$t(i)?!0:this.#n(i))}#a(t){let e=t;for(;e;){if(br(e))return e;e=e.getParent()}return null}#c(t){let e=this.#a(t);if(!e)return;let i=e.getParent();if(!i||!nn(i))return;let r=i.getParent();if(r&&Wi(r)){let l=this.#h(e).filter(c=>!this.#n(c));if(l.length>0){this.#p(r,i,e,l);return}}let o=nt();i.insertAfter(o),e.remove(),o.selectStart()}#l(t){let e=this.#u(t);if(!e||!this.#n(e))return!1;let i=e.getParent();return i&&Wi(i)}#u(t){let e=t;for(;e;){if(We(e))return e;e=e.getParent()}return null}#b(t){let e=this.#u(t);if(!e)return;let i=e.getParent();if(!i||!Wi(i))return;let s=this.#_(e).filter(o=>!this.#n(o));if(s.length>0)this.#y(i,e,s);else{let o=nt();i.insertAfter(o),e.remove(),o.selectStart()}}#_(t){let e=[],i=t.getNextSibling();for(;i;)e.push(i),i=i.getNextSibling();return e}#h(t){let e=[],i=t.getNextSibling();for(;i;)br(i)&&e.push(i),i=i.getNextSibling();return e}#p(t,e,i,r){let o=this.#_(e).filter(u=>!this.#n(u)),a=nt();t.insertAfter(a);let l=hp(e.getListType()),c=_c();a.insertAfter(c),c.append(l),r.forEach(u=>{l.append(u)}),o.forEach(u=>{c.append(u)}),i.remove(),this.#d(e),this.#f(c),e.getChildrenSize()===0?(e.remove(),t.getChildrenSize()===0&&t.remove()):this.#f(t),a.selectStart()}#d(t){let e=t.getChildren();for(let i=e.length-1;i>=0;i--){let r=e[i];if(br(r)&&this.#n(r))r.remove();else break}}#f(t){let e=t.getChildren();for(let i=e.length-1;i>=0;i--){let r=e[i];if(this.#n(r))r.remove();else break}}#y(t,e,i){let r=nt();t.insertAfter(r);let s=_c();r.insertAfter(s),i.forEach(o=>{s.append(o)}),e.remove(),this.#f(t),this.#f(s),r.selectStart()}},kS=class{constructor(t){this.editorElement=t,this.editor=t.editor,new NS(t).monitor()}insertHtml(t,{tag:e}={}){this.editor.update(()=>{let i=I();if(!P(i))return;let r=ya(this.editor,Ec(t));i.insertNodes(r)},{tag:e})}insertAtCursor(t){this.editor.update(()=>{let e=I(),i=e?.getNodes();P(e)?Js([t]):be(e)&&i&&i.length>0?i[i.length-1].insertAfter(t):ue().append(t)})}insertAtCursorEnsuringLineBelow(t){this.insertAtCursor(t),this.#e(t)}insertNodeWrappingEachSelectedLine(t){this.editor.update(()=>{let e=I();if(!P(e))return;e.extract().forEach(r=>{if(!r.getParent())return;let o=r.getTopLevelElementOrThrow(),a=t();a.append(...o.getChildren()),o.replace(a)})})}toggleNodeWrappingAllSelectedLines(t,e){this.editor.update(()=>{let i=I();if(!P(i))return;let r=i.anchor.getNode().getTopLevelElementOrThrow();t(r)?this.removeFormattingFromSelectedLines():this.#a(e)})}toggleNodeWrappingAllSelectedNodes(t,e){this.editor.update(()=>{let i=I();if(!P(i))return;let r=i.anchor.getNode().getTopLevelElement();r&&t(r)?this.#r(r):this.#s(e)})}removeFormattingFromSelectedLines(){this.editor.update(()=>{let t=I();if(!P(t))return;let e=t.anchor.getNode().getTopLevelElementOrThrow(),i=nt();i.append(...e.getChildren()),e.replace(i)})}hasSelectedText(){let t=!1;return this.editor.read(()=>{let e=I();t=P(e)&&!e.isCollapsed()}),t}unwrapSelectedListItems(){this.editor.update(()=>{let t=I();if(!P(t))return;let{listItems:e,parentLists:i}=this.#A(t);if(e.size>0){let r=this.#m(e);this.#g(i),this.#C(r)}})}createLink(t){let e=null;return this.editor.update(()=>{let i=Ft(t),r=Tp(t);r.append(i);let s=I();P(s)&&(s.insertNodes([r]),e=r.getKey())}),e}createLinkWithSelectedText(t){this.hasSelectedText()&&this.editor.update(()=>{Ud(t)})}textBackUntil(t){let e="";return this.editor.getEditorState().read(()=>{let i=I();if(!i||!i.isCollapsed())return;let r=i.anchor,s=r.getNode();if(!J(s))return;let o=s.getTextContent(),a=r.offset,l=o.slice(0,a),c=l.lastIndexOf(t);c!==-1&&(e=l.slice(c+t.length))}),e}containsTextBackUntil(t){let e=!1;return this.editor.getEditorState().read(()=>{let i=I();if(!i||!i.isCollapsed())return;let r=i.anchor,s=r.getNode();if(!J(s))return;let o=s.getTextContent(),a=r.offset;e=o.slice(0,a).includes(t)}),e}replaceTextBackUntil(t,e){e=Array.isArray(e)?e:[e],this.editor.update(()=>{let{anchorNode:i,offset:r}=this.#M();if(!i)return;let s=this.#R(i,r,t);s!==-1&&this.#F(i,r,s,e)})}createParagraphAfterNode(t,e){let i=nt();t.insertAfter(i),i.selectStart(),e&&(i.append(Ft(e)),i.select(1,1))}createParagraphBeforeNode(t,e){let i=nt();t.insertBefore(i),i.selectStart(),e&&(i.append(Ft(e)),i.select(1,1))}uploadFile(t){if(!this.editorElement.supportsAttachments){console.warn("This editor does not supports attachments (it's configured with [attachments=false])");return}if(!this.#S(t))return;let e=this.editorElement.directUploadUrl,i=this.editorElement.blobUrlTemplate;this.editor.update(()=>{let r=new im({file:t,uploadUrl:e,blobUrlTemplate:i,editor:this.editor});this.insertAtCursor(r)},{tag:ha})}async deleteSelectedNodes(){let t=null;this.editor.update(()=>{if(this.#t.hasNodeSelection){let e=I().getNodes();if(e.length===0)return;t=this.#y(e),this.#f(e)}}),await ps(),this.editor.update(()=>{this.#x(t),this.editor.focus()})}replaceNodeWithHTML(t,e,i={}){this.editor.update(()=>{let r=Qt(t);if(!r)return;let s=I(),o=!1;if(P(s)){let l=s.getNodes();o=l.includes(r)||l.some(c=>c.getParent()===r),o&&te(null)}let a=i.attachment?this.#N(e,i.attachment):this.#I(e);r.replace(a),o&&a.selectEnd()})}insertHTMLBelowNode(t,e,i={}){this.editor.update(()=>{let r=Qt(t);if(!r)return;let s=r.getTopLevelElement()||r,o=i.attachment?this.#N(e,i.attachment):this.#I(e);s.insertAfter(o)})}get#t(){return this.editorElement.selection}#e(t){this.editor.update(()=>{if(!t.getNextSibling()){let i=nt();t.insertAfter(i),i.selectStart()}})}#r(t){let e=t.getChildren();e.length==0?t.insertBefore(nt()):e.forEach(i=>{if(J(i)&&i.getTextContent().trim()!==""){let r=nt();r.append(i),t.insertBefore(r)}else $t(i)||t.insertBefore(i)}),t.remove()}#s(t){this.editor.update(()=>{let e=I();if(!P(e))return;let i=e.extract();if(i.length===0)return;let r=new Set;i.forEach(a=>{let l=a.getTopLevelElementOrThrow();r.add(l)});let s=this.#o(Array.from(r));if(s.length===0){this.#n(),this.insertAtCursor(t());return}let o=t();s[0].insertBefore(o),s.forEach(a=>{o.append(a)})})}#o(t){let e=t.length-1;for(;e>=0;){let i=t[e];if(!We(i)||!this.#i(i))break;e--}return t.slice(0,e+1)}#i(t){if(t.getTextContent().trim()!=="")return!1;let e=t.getChildren();return e.length===0||e.every(i=>$t(i))}#n(){let t=ue();if(t.getChildrenSize()===1){let e=t.getFirstChild();e&&We(e)&&this.#i(e)&&e.remove()}}#a(t){this.editor.update(()=>{let e=I();P(e)&&(e.isCollapsed()?this.#c(e,t):this.#l(e,t))})}#c(t,e){let r=t.anchor.getNode().getTopLevelElementOrThrow();if(r.getTextContent()){let s=e();s.append(...r.getChildren()),r.replace(s)}else Js([e()])}#l(t,e){let i=this.#u(t);if(i.length===0)return;let{lineSet:r,nodesToDelete:s}=this.#_(i);if(r.size===0)return;let o=this.#h(e,r);this.#p(t,o),this.#d(s)}#u(t){let i=t.extract().map(r=>this.#b(r)).filter(Boolean);return te(null),i}#b(t){return We(t)?t:J(t)&&t.getParent()&&We(t.getParent())?t.getParent():null}#_(t){let e=new Set,i=new Set;return t.forEach(r=>{let s=r.getTextContent();s&&s.split(`
`).forEach(o=>{o.trim()&&e.add(o)}),i.add(r)}),{lineSet:e,nodesToDelete:i}}#h(t,e){let i=t(),r=Array.from(e);return r.forEach((s,o)=>{i.append(Ft(s)),o<r.length-1&&i.append(Ze())}),i}#p(t,e){let r=t.anchor.getNode().getParent();r&&r.replace(e)}#d(t){t.forEach(e=>e.remove())}#f(t){t.forEach(e=>{let i=e.getParent();if(!j(i))return;let s=i.getChildren().indexOf(e);s>=0&&i.splice(s,1,[])})}#y(t){let e=t[0],i=t[t.length-1];return e?.getPreviousSibling()||i?.getNextSibling()}#x(t){let e=ue();if(e.getChildrenSize()===0){let i=nt();e.append(i),i.selectStart()}else t&&(J(t)||We(t)?t.selectEnd():t.selectNext(0,0))}#A(t){let e=t.getNodes(),i=new Set,r=new Set;for(let s of e){let o=pI(s);if(o){i.add(o);let a=o.getParent();a&&nn(a)&&r.add(a)}}return{listItems:i,parentLists:r}}#m(t){let e=[];for(let i of t){let r=this.#k(i);r&&e.push(r)}return e}#k(t){let e=t.getParent();if(!e||!nn(e))return null;let i=nt(),r=this.#v(t,i);return t.insertAfter(i),this.#O(i,r),t.remove(),i}#v(t,e){let i=[];return t.getChildren().forEach(r=>{nn(r)?i.push(r):e.append(r)}),i}#O(t,e){e.forEach(i=>{t.insertAfter(i)})}#g(t){for(let e of t)nn(e)&&e.getChildrenSize()===0&&e.remove()}#C(t){if(t.length===0)return;let e=t[0],i=t[t.length-1];t.length===1?e.selectEnd():this.#w(e,i)}#w(t,e){t.selectStart();let i=I();i&&P(i)&&(i.anchor.set(t.getKey(),0,"element"),i.focus.set(e.getKey(),e.getChildrenSize(),"element"))}#M(){let t=I();if(!t||!t.isCollapsed())return{anchorNode:null,offset:0};let e=t.anchor,i=e.getNode();return J(i)?{anchorNode:i,offset:e.offset}:{anchorNode:null,offset:0}}#R(t,e,i){return t.getTextContent().slice(0,e).lastIndexOf(i)}#F(t,e,i,r){let s=t.getTextContent(),o=s.slice(0,i),a=s.slice(e),l=Ft(o),c=Ft(a||" ");t.replace(l),this.#E(l,r).insertAfter(c),this.#D(c.getParentOrThrow());let d=a?0:1;c.select(d,d)}#E(t,e){let i=t;for(let r of e)i.insertAfter(r),i=r;return i}#D(t){if(We(t)&&this.editorElement.supportsMultiLine){let e=t.getChildren(),i=e[e.length-1],r=e[e.length-2];J(i)&&i.getTextContent()===""&&r&&!J(r)&&t.append(Ze())}}#N(t,e={}){let i=typeof e=="object"?e:{};return new rh({sgid:i.sgid||null,contentType:"text/html",innerHtml:t})}#I(t){return ya(this.editor,Ec(t))[0]||nt()}#S(t){return Oa(this.editorElement,"lexxy:file-accept",{file:t},!0)}},OS=class{constructor(t){this.editorElement=t,this.editor=t.editor,this.contents=t.contents}paste(t){let e=t.clipboardData;if(!e)return!1;if(this.#t(e)&&!this.#s())return this.#o(e),t.preventDefault(),!0;this.#c(e)}#t(t){return this.#e(t)||this.#r(t)}#e(t){let e=Array.from(t.types);return e.length===1&&e[0]==="text/plain"}#r(t){let e=Array.from(t.types);return e.length===2&&e.includes("text/uri-list")&&e.includes("text/plain")}#s(){let t=!1;return this.editor.getEditorState().read(()=>{let e=I();if(!P(e))return;let i=e.anchor.getNode();for(;i;){if(hs(i)){t=!0;return}i=i.getParent()}}),t}#o(t){t.items[0].getAsString(i=>{if(cI(i)&&this.contents.hasSelectedText())this.contents.createLinkWithSelectedText(i);else if(cI(i)){let r=this.contents.createLink(i);this.#i(r,{url:i})}else this.editorElement.supportsMarkdown?this.#n(i):this.#a(t)})}#i(t,e){let i={replaceLinkWith:(r,s)=>this.contents.replaceNodeWithHTML(t,r,s),insertBelowLink:(r,s)=>this.contents.insertHTMLBelowNode(t,r,s)};Oa(this.editorElement,"lexxy:insert-link",{...e,...i})}#n(t){let e=Kt(t);this.contents.insertHtml(e,{tag:[ro]})}#a(t){this.editor.update(()=>{let e=I();wd(t,e,this.editor)},{tag:ro})}#c(t){!this.editorElement.supportsAttachments||t.getData("text/html")||this.#l(()=>{for(let i of t.items){let r=i.getAsFile();r&&this.contents.uploadFile(r)}})}async#l(t){let e=window.scrollY,i=window.scrollX;t(),await ps(),window.scrollTo(i,e),this.editor.focus()}},MS=class{constructor(t){this.lexxyElement=t,this.enabledExtensions=this.#e()}get lexicalExtensions(){return this.enabledExtensions.map(t=>t.lexicalExtension).filter(Boolean)}initializeToolbars(){this.#t&&this.enabledExtensions.forEach(t=>t.initializeToobar(this.#t))}get#t(){return this.lexxyElement.toolbar}#e(){return Vi.global.get("extensions").map(e=>new e(this.lexxyElement)).filter(e=>e.enabled)}},yI=hn(),vI=qg("hasPastedStyles",{parse:n=>n||!1}),x8=Mt({dependencies:[_R],name:"lexxy/highlight",config:{color:{buttons:[],permit:[]},"background-color":{buttons:[],permit:[]}},html:{import:{mark:y8}},register(n,t){let e=v8(t);n.registerCommand(yI,S8,Bi),n.registerNodeTransform(kn,A8),n.registerNodeTransform(kn,i=>E8(i,e))}});function nh(n,t){let e={color:t.style?.color,"background-color":t.style?.backgroundColor};Uk(ro)&&SI(n);let i=tp(e);if(i.length)return n.setStyle(n.getStyle()+i)}function y8(){return{conversion:eh("mark",nh),priority:1}}function v8(n){return[new em("color",[...n.buttons.color,...n.permit.color]),new em("background-color",[...n.buttons["background-color"],...n.permit["background-color"]])]}function S8(n){let t=I();if(!P(t))return;let e={};for(let i in n){let r=Zg(t,i);e[i]=C8(r,n[i])}OO(t,e)}function C8(n,t){return n===t?null:t}function A8(n){bI(n.getStyle())!==n.hasFormat("highlight")&&n.toggleFormat("highlight")}function E8(n,t=[]){if(T8(n)){SI(n,!1);let e=t.reduce((i,r)=>r.applyCanonicalization(i),n.getStyle());n.setStyle(e)}}function SI(n,t=!0){Qs(n,vI,t)}function T8(n){return Gl(n,vI)}var RS=class{constructor(t){this.editorElement=t}get editor(){return this.editorElement.editor}get lexicalExtension(){return[x8,this.editorElement.config.get("highlight")]}toggle(t){this.editor.dispatchCommand(yI,t)}remove(){this.toggle({color:null,"background-color":null})}},CI="language",w8=Mt({name:"lexxy/trix-content",html:{import:{em:n=>SS(n,{conversion:eh("i",nh),priority:1}),span:n=>SS(n,{conversion:eh("mark",nh),priority:1}),strong:n=>SS(n,{conversion:eh("b",nh),priority:1}),del:()=>({conversion:eh("s",N8,nh),priority:1}),pre:n=>k8(n,{conversion:mI(Ca,"pre",O8),priority:1})}}});function SS(n,t){return n.style.color!==""||n.style.backgroundColor!==""?t:null}function N8(n){return n.hasFormat("strikethrough")||n.toggleFormat("strikethrough"),n}function k8(n,t){return n.hasAttribute(CI)?t:null}function O8(n,t){let e=yv(t.getAttribute(CI));n.node.setLanguage(e)}var sm=class n extends Pp{static clone(t){return new n(t.__key)}exportDOM(t){let e=super.exportDOM(t);return{...e,after:i=>{if(e.after){i=e.after(i);let r=i.cloneNode(!0);return yt("figure",{className:"lexxy-content__table-wrapper"},r.outerHTML)}return i}}}},M8=Mt({name:"lexxy/tables",nodes:[sm,{replace:Pp,with:()=>new sm},Ac,PL],register(n){FL(n),$L(n,!0),BL(n,!0),n.registerNodeTransform(Ac,t=>{t.getBackgroundColor()===null&&t.setBackgroundColor("")}),n.registerNodeTransform(Ac,t=>{let e=t.getHeaderStyles();if(e!==Er.ROW)return;let i=t.getParent(),r=i?.getParent();if(!r)return;let s=r.getChildren(),o=i.getChildren().indexOf(t),l=i.getChildren().every(d=>d.getHeaderStyles()!==Er.NO_STATUS),c=s.every(d=>{let h=d.getChildren()[o];return h&&h.getHeaderStyles()!==Er.NO_STATUS}),u=Er.NO_STATUS;l&&(u|=Er.ROW),c&&(u|=Er.COLUMN),u!==e&&t.setHeaderStyles(u,Er.BOTH)}),n.registerCommand("insertTableRowAfter",()=>{qv(!0)},Bi),n.registerCommand("insertTableRowBefore",()=>{qv(!1)},Bi),n.registerCommand("insertTableColumnAfter",()=>{Gv(!0)},Bi),n.registerCommand("insertTableColumnBefore",()=>{Gv(!1)},Bi),n.registerCommand("deleteTableRow",()=>{ML()},Bi),n.registerCommand("deleteTableColumn",()=>{OL()},Bi),n.registerCommand("deleteTable",()=>{let t=I();if(!P(t))return!1;Vv(t.anchor.getNode())?.remove()},Bi)}}),LS=class n extends HTMLElement{static formAssociated=!0;static debug=!1;static commands=["bold","italic","strikethrough"];static observedAttributes=["connected","required"];#t="";#e=document.createElement("textarea");constructor(){super(),this.internals=this.attachInternals(),this.internals.role="presentation"}connectedCallback(){this.id??=Fp("lexxy-editor"),this.config=new wS(this),this.extensions=new MS(this),this.highlighter=new RS(this),this.editor=this.#o(),this.contents=new kS(this),this.selection=new TS(this),this.clipboard=new OS(this),ES.configureFor(this),this.#s(),requestAnimationFrame(()=>Oa(this,"lexxy:initialize")),this.toggleAttribute("connected",!0),this.#R(),this.valueBeforeDisconnect=null}disconnectedCallback(){this.valueBeforeDisconnect=this.value,this.#$()}attributeChangedCallback(t,e,i){t==="connected"&&this.isConnected&&e!=null&&e!==i&&requestAnimationFrame(()=>this.#P()),t==="required"&&this.isConnected&&(this.#e.required=this.hasAttribute("required"),this.#T())}formResetCallback(){this.value=this.#t,this.editor.dispatchCommand(Fg,void 0)}toString(){return this.cachedStringValue||this.editor?.getEditorState().read(()=>{this.cachedStringValue=ue().getTextContent()}),this.cachedStringValue}get form(){return this.internals.form}get name(){return this.getAttribute("name")}get toolbarElement(){return this.#N?(this.toolbar=this.toolbar||this.#D(),this.toolbar):null}get directUploadUrl(){return this.dataset.directUploadUrl}get blobUrlTemplate(){return this.dataset.blobUrlTemplate}get isEmpty(){return["<p><br></p>","<p></p>",""].includes(this.value.trim())}get isBlank(){return this.isEmpty||this.toString().match(/^\s*$/g)!==null}get hasOpenPrompt(){return this.querySelector(".lexxy-prompt-menu.lexxy-prompt-menu--visible")!==null}get preset(){return this.getAttribute("preset")||"default"}get supportsAttachments(){return this.config.get("attachments")}get supportsMarkdown(){return this.supportsRichText&&this.config.get("markdown")}get supportsMultiLine(){return this.config.get("multiLine")&&!this.isSingleLineMode}get supportsRichText(){return this.config.get("richText")}get isSingleLineMode(){return this.hasAttribute("single-line")}get contentTabIndex(){return parseInt(this.editorContentElement?.getAttribute("tabindex")??"0")}focus(){this.editor.focus(()=>this.#M())}get value(){return this.cachedValue||this.editor?.getEditorState().read(()=>{this.cachedValue=m8(fp(this.editor,null))}),this.cachedValue}set value(t){this.editor.update(()=>{Ik(f0);let e=ue();e.clear(),e.append(...this.#r(t)),e.selectEnd(),this.#S(),requestAnimationFrame(()=>this.editor?.update(()=>{}))})}#r(t){t||(t="<p></p>");let e=ya(this.editor,Ec(`<div>${t}</div>`));return e.length===0?[nt()]:e.map(i=>{if(i.getType()==="paragraph"&&i.getChildrenSize()===1){let r=i.getFirstChild();if(r instanceof zn&&!r.isInline())return r}return i})}#s(){this.#p(),this.#x(),this.#k(),this.#v(),this.#O(),this.#F(),this.#E(),this.#b(),this.#_()}#o(){this.editorContentElement||=this.#a();let t=yM({name:"lexxy/core",namespace:"Lexxy",theme:Pa,nodes:this.#n},...this.#i);return t.setRootElement(this.editorContentElement),t}get#i(){let t=[],e=[this.highlighter.lexicalExtension,w8,M8];return this.supportsRichText&&t.push(...e),t.push(...this.extensions.lexicalExtensions),t}get#n(){let t=[rh];return this.supportsRichText&&t.push(bp,mp,xa,hc,Ca,UR,wp,nL,rm),this.supportsAttachments&&t.push(wc,im),t}#a(){let t=yt("div",{classList:"lexxy-editor__content",contenteditable:!0,role:"textbox","aria-multiline":!0,"aria-label":this.#c,placeholder:this.getAttribute("placeholder")});return t.id=`${this.id}-content`,this.#l.forEach(e=>t.setAttribute(e.name,e.value)),this.appendChild(t),this.getAttribute("tabindex")?(t.setAttribute("tabindex",this.getAttribute("tabindex")),this.removeAttribute("tabindex")):t.setAttribute("tabindex",0),t}get#c(){return Array.from(this.internals.labels).map(t=>t.textContent).join(" ")}get#l(){return Array.from(this.attributes).filter(t=>t.name.startsWith("aria-"))}set#u(t){let e=this.#u!==void 0&&this.#u!==this.value;this.internals.setFormValue(t),this._internalFormValue=t,this.#e.value=this.isEmpty?"":t,e&&Oa(this,"lexxy:change")}get#u(){return this._internalFormValue}#b(){let t=this.valueBeforeDisconnect||this.getAttribute("value")||"<p></p>";this.value=this.#t=t}#_(){document.addEventListener("turbo:before-cache",this.#h)}#h=t=>{this.#$()};#p(){this.#f(this.editor.registerUpdateListener(({editorState:t})=>{this.#d(),this.#u=this.value,this.#S(),this.#T()}))}#d(){this.cachedValue=null,this.cachedStringValue=null}#f(t){this.unregisterHandlers=this.unregisterHandlers||[],this.unregisterHandlers.push(t)}#y(){this.unregisterHandlers?.forEach(t=>{t()}),this.unregisterHandlers=null}#x(){this.supportsRichText?(xR(this.editor),qM(this.editor),this.#A(),this.#m(),this.supportsMarkdown&&TD(this.editor,ED)):VL(this.editor),this.historyState=OD(),MD(this.editor,this.historyState,20)}#A(){this.tableTools=yt("lexxy-table-tools"),this.append(this.tableTools)}#m(){KR(this.editor),this.codeLanguagePicker=yt("lexxy-code-language-picker"),this.append(this.codeLanguagePicker)}#k(){this.editor.getRootElement().addEventListener("lexxy:internal:invalidate-node",t=>{let{key:e,values:i}=t.detail;this.editor.update(()=>{let r=Qt(e);if(r instanceof wc){let s=r.getWritable();Object.assign(s,i)}})})}#v(){this.editor.registerCommand(cs,t=>t.ctrlKey||t.metaKey||!this.supportsMultiLine?(t.preventDefault(),!0):!1,Bi)}#O(){this.addEventListener("focusin",this.#g),this.addEventListener("focusout",this.#C)}#g(t){this.#w(t.target)&&!this.currentlyFocused&&(Oa(this,"lexxy:focus"),this.currentlyFocused=!0)}#C(t){this.#w(t.relatedTarget)||(Oa(this,"lexxy:blur"),this.currentlyFocused=!1)}#w(t){return this.contains(t)||this.toolbarElement?.contains(t)}#M(){this.isEmpty&&this.selection.placeCursorAtTheEnd()}#R(){document.querySelector(":focus")||this.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===this&&this.focus()}#F(){n.debug&&this.#f(this.editor.registerUpdateListener(({editorState:t})=>{t.read(()=>{console.debug("HTML: ",this.value,"String:",this.toString()),console.debug("empty",this.isEmpty,"blank",this.isBlank)})}))}#E(){this.#N&&this.toolbarElement.setEditor(this)}#D(){let t=this.config.get("toolbar");return t&&t!==!0?document.getElementById(t):this.#I()}get#N(){return this.supportsRichText&&this.config.get("toolbar")}#I(){let t=yt("lexxy-toolbar");return t.innerHTML=nm.defaultTemplate,t.setAttribute("data-attachments",this.supportsAttachments),this.prepend(t),t}#S(){this.classList.toggle("lexxy-editor--empty",this.isEmpty)}#T(){this.#e.validity.valid?this.internals.setValidity({}):this.internals.setValidity(this.#e.validity,this.#e.validationMessage,this.editorContentElement)}#$(){this.#y(),this.editorContentElement&&(this.editorContentElement.remove(),this.editorContentElement=null),this.contents=null,this.editor=null,this.toolbar&&(this.getAttribute("toolbar")||this.toolbar.remove(),this.toolbar=null),this.codeLanguagePicker&&(this.codeLanguagePicker.remove(),this.codeLanguagePicker=null),this.tableHandler&&(this.tableHandler.remove(),this.tableHandler=null),this.selection=null,document.removeEventListener("turbo:before-cache",this.#h)}#P(){this.disconnectedCallback(),this.valueBeforeDisconnect=null,this.connectedCallback()}};customElements.define("lexxy-editor",LS);var om=class extends HTMLElement{connectedCallback(){this.container=this.closest("details"),this.container.addEventListener("toggle",this.#e.bind(this)),this.container.addEventListener("keydown",this.#s.bind(this)),this.#t(this.initialize.bind(this))}disconnectedCallback(){this.container.removeEventListener("keydown",this.#s.bind(this))}get toolbar(){return this.closest("lexxy-toolbar")}get editorElement(){return this.toolbar.editorElement}get editor(){return this.toolbar.editor}initialize(){}close(){this.editor.focus(),this.container.open=!1}async#t(t){await this.toolbar.editorConnected,t()}#e(){this.container.open&&this.#r()}async#r(){this.#i[0].focus(),this.#o()}#s(t){t.key==="Escape"&&(t.stopPropagation(),this.close())}async#o(){await ps(),this.#n.forEach((t,e)=>{t.setAttribute("tabindex",e===0?0:"-1")})}get#i(){return Array.from(this.querySelectorAll("button, input"))}get#n(){return Array.from(this.querySelectorAll("button"))}},DS=class extends om{connectedCallback(){super.connectedCallback(),this.input=this.querySelector("input"),this.#t()}#t(){this.container.addEventListener("toggle",this.#e.bind(this)),this.addEventListener("submit",this.#r.bind(this)),this.querySelector("[value='unlink']").addEventListener("click",this.#s.bind(this))}#e({newState:t}){this.input.value=this.#o,this.input.required=t==="open"}#r(t){let e=t.submitter?.value;this.editor.dispatchCommand(e,this.input.value),this.close()}#s(){this.editor.dispatchCommand("unlink"),this.close()}get#o(){let t="";return this.editor.getEditorState().read(()=>{let e=I();if(!P(e))return;let i=e.getNodes()[0];for(;i&&i.getParent();){if(Wd(i)){t=i.getURL();break}i=i.getParent()}}),t}};customElements.define("lexxy-link-dropdown",DS);var hI="button.lexxy-highlight-button",fI="[data-command='removeHighlight']",tm=Symbol("no_style"),IS=class extends om{connectedCallback(){super.connectedCallback(),this.#t()}initialize(){this.#r(),this.#e()}#t(){this.container.addEventListener("toggle",this.#i.bind(this))}#e(){this.#u.forEach(t=>t.addEventListener("click",this.#n.bind(this))),this.querySelector(fI).addEventListener("click",this.#a.bind(this))}#r(){let t=this.editorElement.config.get("highlight.buttons");this.#s("color",t.color),this.#s("background-color",t["background-color"]);let e=Math.max(t.color.length,t["background-color"].length);this.style.setProperty("--max-colors",e)}#s(t,e){e.forEach((i,r)=>{this.#l.appendChild(this.#o(t,i,r))})}#o(t,e,i){let r=document.createElement("button");return r.dataset.style=t,r.style.setProperty(t,e),r.dataset.value=e,r.classList.add("lexxy-editor__toolbar-button","lexxy-highlight-button"),r.name=t+"-"+i,r}#i({newState:t}){t==="open"&&this.editor.getEditorState().read(()=>{this.#c(I())})}#n(t){t.preventDefault();let e=t.target.closest(hI);if(!e)return;let i=e.dataset.style,r=e.dataset.value;this.editor.dispatchCommand("toggleHighlight",{[i]:r}),this.close()}#a(t){t.preventDefault(),this.editor.dispatchCommand("removeHighlight"),this.close()}#c(t){if(!P(t))return;let e=Zg(t,"color",tm),i=Zg(t,"background-color",tm);this.#u.forEach(s=>{let o=s.dataset.value===e||s.dataset.value===i;s.setAttribute("aria-pressed",o)});let r=e!==tm||i!==tm;this.querySelector(fI).disabled=!r}get#l(){return this.querySelector(".lexxy-highlight-colors")}get#u(){return Array.from(this.querySelectorAll(hI))}};customElements.define("lexxy-highlight-dropdown",IS);var PS=class{constructor(t){this.editor=t.editor,this.contents=t.contents,this.selection=t.selection,this.currentTableNodeKey=null,this.currentCellKey=null,this.#y()}destroy(){this.currentTableNodeKey=null,this.currentCellKey=null,this.#x()}get currentCell(){return this.currentCellKey?this.editor.getEditorState().read(()=>{let t=Qt(this.currentCellKey);return t instanceof Ac?t:null}):null}get currentTableNode(){return this.currentTableNodeKey?this.editor.getEditorState().read(()=>{let t=Qt(this.currentTableNodeKey);return t instanceof Pp?t:null}):null}get currentRowCells(){let t=this.currentRowIndex,e=this.tableRows;return e?this.editor.getEditorState().read(()=>e[t]?.getChildren()??null)??null:null}get currentRowIndex(){let t=this.currentCell;return t?this.editor.getEditorState().read(()=>DL(t))??0:0}get currentColumnCells(){let t=this.currentColumnIndex,e=this.tableRows;return e?this.editor.getEditorState().read(()=>e.map(i=>i.getChildAtIndex(t)))??null:null}get currentColumnIndex(){let t=this.currentCell;return t?this.editor.getEditorState().read(()=>LL(t))??0:0}get tableRows(){return this.editor.getEditorState().read(()=>this.currentTableNode?.getChildren())??null}updateSelectedTable(){let t=null,e=null;this.editor.getEditorState().read(()=>{let i=I();if(!i||!this.selection.isTableCellSelected)return;let r=i.getNodes()[0];t=jv(r),e=Vv(r)}),this.currentCellKey=t?.getKey()??null,this.currentTableNodeKey=e?.getKey()??null}executeTableCommand(t,e=null){if(t.action==="delete"&&t.childType==="table"){this.#r();return}if(t.action==="toggle"){this.#e(t);return}this.#t(t,e)}#t(t,e=null){this.#s(),this.editor.dispatchCommand(this.#o(t)),this.#a(t,e)}#e(t){let e=t.childType,i=null,r=null;e==="row"?(i=this.currentRowCells,r=Er.ROW):e==="column"&&(i=this.currentColumnCells,r=Er.COLUMN),!(!i||i.length===0)&&this.editor.update(()=>{let s=qd(i[0]);if(!s)return;let a=s.getHeaderStyles()^r;i.forEach(l=>{this.#i(l,a,r)})})}#r(){this.#s(),this.editor.dispatchCommand("deleteTable")}#s(){this.editor.update(()=>{let t=I();if(!t)return;let e=t.getNodes()[0];jv(e)?.selectEnd()})}#o(t){let{action:e,childType:i,direction:r}=t,s=dI(i),o=e=="insert"?dI(r):"";return`${e}Table${s}${o}`}#i(t,e,i){qd(t)?.setHeaderStyles(e,i)}async#n(t,e){if(await ps(),!this.currentTableNode)return;let i=this.tableRows;if(!i)return;let r=i[t];r&&this.editor.update(()=>{qd(r.getChildAtIndex(e))?.selectEnd()})}#a(t,e=null){let{childType:i,direction:r}=t,s=this.currentRowIndex,o=e!==null?e:this.currentColumnIndex,a=t.action==="delete"?-1:0,l=r==="after"?1:a;i==="row"?s+=l:i==="column"&&(o+=l),this.#n(s,o)}#c(){let t=this.tableRows;if(!t)return;let e=t.at(this.currentRowIndex+1);e&&this.editor.update(()=>{e.getChildAtIndex(this.currentColumnIndex)?.selectEnd()})}#l(){let t=this.currentCell;t&&this.editor.update(()=>{t.selectPrevious()})}#u(){this.executeTableCommand({action:"insert",childType:"row",direction:"after"},0)}#b(){this.executeTableCommand({action:"delete",childType:"row"},-1)}#_(){let t=this.currentTableNode;this.executeTableCommand({action:"delete",childType:"row"}),this.editor.update(()=>{let e=t?.getNextSibling();if(We(e))e.selectStart();else{let i=nt();this.currentTableNode.insertAfter(i),i.selectStart()}})}#h(){if(!this.currentTableNode)return!1;let t=this.currentCell;return t?t.getTextContent().trim()==="":!1}#p(){if(!this.currentTableNode)return!1;let t=this.tableRows;return t?t.length===this.currentRowIndex+1:!1}#d(){if(!this.currentTableNode)return!1;let t=this.currentRowCells;return t?t.every(e=>e.getTextContent().trim()===""):!1}#f(){if(!this.currentTableNode)return!1;let t=this.currentRowCells;return t?t.indexOf(this.currentCell)===0:!1}#y(){this.unregisterBackspaceKeyHandler=this.editor.registerCommand(ls,t=>this.#A(t),oe),this.unregisterEnterKeyHandler=this.editor.registerCommand(cs,t=>this.#m(t),oe)}#x(){this.unregisterBackspaceKeyHandler?.(),this.unregisterEnterKeyHandler?.(),this.unregisterBackspaceKeyHandler=null,this.unregisterEnterKeyHandler=null}#A(t){return this.currentTableNode?this.#d()&&this.#f()?(t.preventDefault(),this.#b(),!0):this.#h()&&!this.#f()?(t.preventDefault(),this.#l(),!0):!1:!1}#m(t){return t.ctrlKey||t.metaKey||t.shiftKey||!this.currentTableNode||this.selection.isInsideList||this.selection.isInsideCodeBlock?!1:(t.preventDefault(),this.#p()&&this.#d()?this.#_():this.#p()?this.#u():this.#c(),!0)}},R8={"insert-row-before":`<svg  viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.86804e-07 15C8.29055e-07 15.8284 0.671574 16.5 1.5 16.5H15L15.1533 16.4922C15.8593 16.4205 16.4205 15.8593 16.4922 15.1533L16.5 15V4.5L16.4922 4.34668C16.4154 3.59028 15.7767 3 15 3H13.5L13.5 4.5H15V9H1.5L1.5 4.5L3 4.5V3H1.5C0.671574 3 1.20956e-06 3.67157 1.24577e-06 4.5L7.86804e-07 15ZM15 10.5V15H1.5L1.5 10.5H15Z"/>
    <path d="M4.5 4.5H7.5V7.5H9V4.5H12L12 3L9 3V6.55671e-08L7.5 0V3L4.5 3V4.5Z"/>
    </svg>`,"insert-row-after":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.86804e-07 13.5C7.50592e-07 14.3284 0.671574 15 1.5 15H3V13.5H1.5L1.5 9L15 9V13.5H13.5V15H15C15.7767 15 16.4154 14.4097 16.4922 13.6533L16.5 13.5V3L16.4922 2.84668C16.4205 2.14069 15.8593 1.57949 15.1533 1.50781L15 1.5L1.5 1.5C0.671574 1.5 1.28803e-06 2.17157 1.24577e-06 3L7.86804e-07 13.5ZM15 3V7.5L1.5 7.5L1.5 3L15 3Z"/>
    <path d="M7.5 15V18H9V15H12V13.5H9V10.5H7.5V13.5H4.5V15H7.5Z"/>
    </svg>`,"delete-row":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path d="M16.4922 12.1533C16.4154 12.9097 15.7767 13.5 15 13.5L12 13.5V12H15V6L1.5 6L1.5 12H4.5V13.5H1.5C0.723337 13.5 0.0846104 12.9097 0.00781328 12.1533L7.86804e-07 12L1.04907e-06 6C1.17362e-06 5.22334 0.590278 4.58461 1.34668 4.50781L1.5 4.5L15 4.5C15.8284 4.5 16.5 5.17157 16.5 6V12L16.4922 12.1533Z"/>
    <path d="M10.3711 15.9316L8.25 13.8096L6.12793 15.9316L5.06738 14.8711L7.18945 12.75L5.06738 10.6289L6.12793 9.56836L8.25 11.6895L10.3711 9.56836L11.4316 10.6289L9.31055 12.75L11.4316 14.8711L10.3711 15.9316Z"/>
    </svg>`,"toggle-row":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M0.00781328 13.6533C0.0846108 14.4097 0.723337 15 1.5 15L15 15L15.1533 14.9922C15.8593 14.9205 16.4205 14.3593 16.4922 13.6533L16.5 13.5V4.5L16.4922 4.34668C16.4205 3.64069 15.8593 3.07949 15.1533 3.00781L15 3L1.5 3C0.671574 3 1.24863e-06 3.67157 1.18021e-06 4.5L7.86804e-07 13.5L0.00781328 13.6533ZM15 9V13.5L1.5 13.5L1.5 9L15 9Z"/>
    </svg>`,"insert-column-before":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 0C3.67157 0 3 0.671573 3 1.5V3H4.5V1.5H9V15H4.5V13.5H3V15C3 15.7767 3.59028 16.4154 4.34668 16.4922L4.5 16.5H15L15.1533 16.4922C15.8593 16.4205 16.4205 15.8593 16.4922 15.1533L16.5 15V1.5C16.5 0.671573 15.8284 6.03989e-09 15 0H4.5ZM15 15H10.5V1.5H15V15Z"/>
    <path d="M3 7.5H0V9H3V12H4.5V9H7.5V7.5H4.5V4.5H3V7.5Z"/>
    </svg>`,"insert-column-after":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 0C14.3284 0 15 0.671573 15 1.5V3H13.5V1.5H9V15H13.5V13.5H15V15C15 15.7767 14.4097 16.4154 13.6533 16.4922L13.5 16.5H3L2.84668 16.4922C2.14069 16.4205 1.57949 15.8593 1.50781 15.1533L1.5 15V1.5C1.5 0.671573 2.17157 6.03989e-09 3 0H13.5ZM3 15H7.5V1.5H3V15Z"/>
    <path d="M15 7.5H18V9H15V12H13.5V9H10.5V7.5H13.5V4.5H15V7.5Z"/>
    </svg>`,"delete-column":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.1533 0.0078125C12.9097 0.0846097 13.5 0.723336 13.5 1.5V4.5H12V1.5H6V15H12V12H13.5V15C13.5 15.7767 12.9097 16.4154 12.1533 16.4922L12 16.5H6C5.22334 16.5 4.58461 15.9097 4.50781 15.1533L4.5 15V1.5C4.5 0.671573 5.17157 2.41596e-08 6 0H12L12.1533 0.0078125Z"/>
    <path d="M15.9316 6.12891L13.8105 8.24902L15.9326 10.3711L14.8711 11.4316L12.75 9.31055L10.6289 11.4316L9.56738 10.3711L11.6885 8.24902L9.56836 6.12891L10.6289 5.06836L12.75 7.18848L14.8711 5.06836L15.9316 6.12891Z"/>
    </svg>`,"toggle-column":`<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.6533 17.9922C14.4097 17.9154 15 17.2767 15 16.5L15 3L14.9922 2.84668C14.9205 2.14069 14.3593 1.57949 13.6533 1.50781L13.5 1.5L4.5 1.5L4.34668 1.50781C3.59028 1.58461 3 2.22334 3 3L3 16.5C3 17.2767 3.59028 17.9154 4.34668 17.9922L4.5 18L13.5 18L13.6533 17.9922ZM9 3L13.5 3L13.5 16.5L9 16.5L9 3Z" />
    </svg>`,"delete-table":`<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M18.2129 19.2305C18.0925 20.7933 16.7892 22 15.2217 22H7.77832C6.21084 22 4.90753 20.7933 4.78711 19.2305L4 9H19L18.2129 19.2305Z"/><path d="M13 2C14.1046 2 15 2.89543 15 4H19C19.5523 4 20 4.44772 20 5V6C20 6.55228 19.5523 7 19 7H4C3.44772 7 3 6.55228 3 6V5C3 4.44772 3.44772 4 4 4H8C8 2.89543 8.89543 2 10 2H13Z"/>
    </svg>`},FS=class extends HTMLElement{connectedCallback(){this.tableController=new PS(this.#e),this.#s(),this.#f(),this.#u()}disconnectedCallback(){this.#b(),this.unregisterUpdateListener?.(),this.unregisterUpdateListener=null,this.removeEventListener("keydown",this.#h),this.tableController?.destroy(),this.tableController=null}get#t(){return this.#e.editor}get#e(){return this.closest("lexxy-editor")}get#r(){return Array.from(this.querySelectorAll("button, details > summary"))}#s(){this.appendChild(this.#i()),this.appendChild(this.#n()),this.appendChild(this.#c()),this.addEventListener("keydown",this.#h)}#o(t,e,i){let r=yt("div",{className:`lexxy-table-control lexxy-table-control--${t}`}),s=this.#l(`Add ${t}`,{action:"insert",childType:t,direction:"after"},"+"),o=this.#l(`Remove ${t}`,{action:"delete",childType:t},"\u2212"),a=yt("details",{className:"lexxy-table-control__more-menu"});a.setAttribute("name","lexxy-dropdown"),a.tabIndex=-1;let l=yt("summary",{},`_ ${t}s`);return e(l),a.appendChild(l),a.appendChild(i),r.appendChild(o),r.appendChild(a),r.appendChild(s),r}#i(){return this.#o("row",t=>{this.rowCount=t},this.#a("row"))}#n(){return this.#o("column",t=>{this.columnCount=t},this.#a("column"))}#a(t){let e=yt("div",{className:"lexxy-table-control__more-menu-details"}),i=this.#l(`Add ${t} before`,{action:"insert",childType:t,direction:"before"}),r=this.#l(`Add ${t} after`,{action:"insert",childType:t,direction:"after"}),s=this.#l(`Toggle ${t} style`,{action:"toggle",childType:t}),o=this.#l(`Remove ${t}`,{action:"delete",childType:t});return e.appendChild(i),e.appendChild(r),e.appendChild(s),e.appendChild(o),e}#c(){let t=yt("div",{className:"lexxy-table-control"}),e=this.#l("Delete this table?",{action:"delete",childType:"table"});return e.classList.add("lexxy-table-control__button--delete-table"),t.appendChild(e),this.deleteContainer=t,t}#l(t,e={},i=this.#w(e)){let r=yt("button",{className:"lexxy-table-control__button","aria-label":t,type:"button"});return r.tabIndex=-1,r.innerHTML=`${i} <span>${t}</span>`,r.dataset.action=e.action,r.dataset.childType=e.childType,r.dataset.direction=e.direction,r.addEventListener("click",()=>this.#y(e)),r.addEventListener("mouseover",()=>this.#d()),r.addEventListener("focus",()=>this.#d()),r.addEventListener("mouseout",()=>this.#d()),r}#u(){this.unregisterKeyboardShortcuts=this.#t.registerCommand(tO,this.#_,oe)}#b(){this.unregisterKeyboardShortcuts?.(),this.unregisterKeyboardShortcuts=null}#_=t=>{(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.key==="F10"&&this.querySelector("button, [tabindex]:not([tabindex='-1'])")?.focus()};#h=t=>{t.key==="Escape"?this.#p():_I(this.#r,t)};#p(){let t=this.tableController.currentCell;t&&(this.#t.update(()=>{t.select(),this.#t.focus()}),this.#m())}async#d(){await ps(),this.#C();let t=this.querySelector("button:hover, button:focus");if(!t)return;let e={action:t.dataset.action,childType:t.dataset.childType,direction:t.dataset.direction},i=null;switch(e.childType){case"row":i=this.tableController.currentRowCells;break;case"column":i=this.tableController.currentColumnCells;break;case"table":i=this.tableController.tableRows;break}i&&i.forEach(r=>{let s=this.#t.getElementByKey(r.getKey());s&&(s.classList.toggle(Pa.tableCellHighlight,!0),Object.assign(s.dataset,e))})}#f(){this.unregisterUpdateListener=this.#t.registerUpdateListener(()=>{this.tableController.updateSelectedTable(),this.tableController.currentTableNode?this.#x():this.#A()})}#y(t){this.tableController.executeTableCommand(t),this.#m()}#x(){this.style.display="flex",this.#m()}#A(){this.style.display="none",this.#C()}#m(){this.#v(),this.#O(),this.#k(),this.#d()}#k(){this.querySelector("details[open]")?.removeAttribute("open")}#v(){let t=this.tableController.currentTableNode;if(!t)return;let e=this.#t.getElementByKey(t.getKey());if(!e)return;let i=e.getBoundingClientRect(),r=this.#e.getBoundingClientRect(),s=i.top-r.top,o=(i.left+i.right)/2-r.left;this.style.top=`${s}px`,this.style.left=`${o}px`}#O(){let t=this.tableController.currentTableNode;if(!t)return;let e=RL(this.#t,t);if(!e)return;let i=e.rows,r=e.columns;this.rowCount.textContent=`${i} row${i===1?"":"s"}`,this.columnCount.textContent=`${r} column${r===1?"":"s"}`}#g(){let t=this.tableController.currentCell;if(!t)return;let e=this.#t.getElementByKey(t.getKey());e&&e.classList.add(Pa.tableCellFocus)}#C(){this.#e.querySelectorAll(`.${Pa.tableCellFocus}`)?.forEach(t=>{t.classList.remove(Pa.tableCellFocus)}),this.#e.querySelectorAll(`.${Pa.tableCellHighlight}`)?.forEach(t=>{t.classList.remove(Pa.tableCellHighlight),t.removeAttribute("data-action"),t.removeAttribute("data-child-type"),t.removeAttribute("data-direction")}),this.#g()}#w(t){let{action:e,childType:i}=t,r=e=="insert"?t.direction:null,s=[e,i,r].filter(Boolean).join("-");return R8[s]}};customElements.define("lexxy-table-tools",FS);var am=class{async buildListItems(t=""){return Promise.resolve([])}promptItemFor(t){return null}buildListItemElementFor(t){let i=t.querySelector("template[type='menu']").content.cloneNode(!0),r=yt("li",{role:"option",id:Fp("prompt-item"),tabindex:"0"});return r.classList.add("lexxy-prompt-menu__item"),r.appendChild(i),r}async loadPromptItemsFromUrl(t){try{let i=await(await fetch(t)).text(),r=Ec(i).querySelectorAll("lexxy-prompt-item");return Promise.resolve(Array.from(r))}catch(e){return Promise.reject(e)}}},lm=class extends am{async buildListItems(t=""){let e=await this.fetchPromptItems();return this.#t(e,t)}async fetchPromptItems(t){return Promise.resolve([])}promptItemFor(t){return this.promptItemByListItem.get(t)}#t(t,e){let i=[];return this.promptItemByListItem=new WeakMap,t.forEach(r=>{let s=r.getAttribute("search");if(!e||_8(s,e)){let o=this.buildListItemElementFor(r);this.promptItemByListItem.set(o,r),i.push(o)}}),i}},$S=class extends lm{constructor(t){super(),this.inlinePromptItemElements=Array.from(t)}async fetchPromptItems(){return Promise.resolve(this.inlinePromptItemElements)}},BS=class extends lm{constructor(t){super(),this.url=t,this.fetchPromptItems()}async fetchPromptItems(){return this.promptItems??=await this.loadPromptItemsFromUrl(this.url),Promise.resolve(this.promptItems)}},L8=200,zS=class extends am{constructor(t){super(),this.baseURL=t,this.loadAndFilterListItems=p8(this.fetchFilteredListItems.bind(this),L8)}async buildListItems(t=""){return await this.loadAndFilterListItems(t)}promptItemFor(t){return this.promptItemByListItem.get(t)}async fetchFilteredListItems(t){let e=await this.loadPromptItemsFromUrl(this.#t(t));return this.#e(e)}#t(t){let e=new URL(this.baseURL,window.location.origin);return e.searchParams.append("filter",t),e.toString()}#e(t){let e=[];this.promptItemByListItem=new WeakMap;for(let i of t){let r=this.buildListItemElementFor(i);this.promptItemByListItem.set(r,i),e.push(r)}return e}},D8="Nothing found",HS=class extends HTMLElement{constructor(){super(),this.keyListeners=[]}static observedAttributes=["connected"];connectedCallback(){this.source=this.#e(),this.#r(),this.toggleAttribute("connected",!0)}disconnectedCallback(){this.source=null,this.popoverElement=null}attributeChangedCallback(t,e,i){t==="connected"&&this.isConnected&&e!=null&&e!==i&&requestAnimationFrame(()=>this.#K())}get name(){return this.getAttribute("name")}get trigger(){return this.getAttribute("trigger")}get supportsSpaceInSearches(){return this.hasAttribute("supports-space-in-searches")}get open(){return this.popoverElement?.classList?.contains("lexxy-prompt-menu--visible")}get closed(){return!this.open}get#t(){return!this.supportsSpaceInSearches}#e(){let t=this.getAttribute("src");return t?this.hasAttribute("remote-filtering")?new zS(t):new BS(t):new $S(this.querySelectorAll("lexxy-prompt-item"))}#r(){let t=this.#i.registerUpdateListener(({editorState:e})=>{e.read(()=>{let{node:i,offset:r}=this.#a.selectedNodeWithOffset();if(i&&J(i)){let s=i.getTextContent(),o=this.trigger.length;if(r>=o&&s.slice(r-o,r)===this.trigger){let l=r===o,c=r>o?s[r-o-1]:null;(l||(c===" "||c===`
`))&&(t(),this.#c())}}})})}#s(){this.cursorPositionListener=this.#i.registerUpdateListener(()=>{this.closed||this.#i.read(()=>{let{node:t,offset:e}=this.#a.selectedNodeWithOffset();if(t)if(J(t)&&e>0){let s=t.getTextContent().slice(0,e).lastIndexOf(this.trigger),o=s+this.trigger.length-1;(s===-1||e<=o)&&this.#x()}else this.#x()})})}#o(){this.cursorPositionListener&&(this.cursorPositionListener(),this.cursorPositionListener=null)}get#i(){return this.#n.editor}get#n(){return this.closest("lexxy-editor")}get#a(){return this.#n.selection}async#c(){this.popoverElement??=await this.#H(),this.#y(),await this.#m(),this.popoverElement.classList.toggle("lexxy-prompt-menu--visible",!0),this.#_(),this.#n.addEventListener("keydown",this.#C),this.#n.addEventListener("lexxy:change",this.#m),this.#l(),this.#s()}#l(){this.keyListeners.push(this.#i.registerCommand(cs,this.#E.bind(this),oe)),this.keyListeners.push(this.#i.registerCommand(bi,this.#E.bind(this),oe)),this.#t&&this.keyListeners.push(this.#i.registerCommand(rc,this.#E.bind(this),oe)),this.keyListeners.push(this.#i.registerCommand(Nn,this.#u.bind(this),oe)),this.keyListeners.push(this.#i.registerCommand(ei,this.#b.bind(this),oe))}#u(t){return this.#M(),t.preventDefault(),!0}#b(t){return this.#w(),t.preventDefault(),!0}#_(){let t=this.#h[0];t&&this.#p(t)}get#h(){return Array.from(this.popoverElement.querySelectorAll(".lexxy-prompt-menu__item"))}#p(t){this.#d(),t.toggleAttribute("aria-selected",!0),t.scrollIntoView({block:"nearest",behavior:"smooth"}),t.focus(),this.#a.preservingSelection(()=>{this.#n.focus()}),this.#L.setAttribute("aria-controls",this.popoverElement.id),this.#L.setAttribute("aria-activedescendant",t.id),this.#L.setAttribute("aria-haspopup","listbox")}#d(){this.#h.forEach(t=>{t.toggleAttribute("aria-selected",!1)}),this.#L.removeAttribute("aria-controls"),this.#L.removeAttribute("aria-activedescendant"),this.#L.removeAttribute("aria-haspopup")}#f(){let{x:t,y:e,fontSize:i}=this.#a.cursorPosition,r=this.#n.getBoundingClientRect(),o=this.#L.getBoundingClientRect().top-r.top;this.popoverElement.hasAttribute("data-anchored")||(this.popoverElement.style.left=`${t}px`,this.popoverElement.toggleAttribute("data-anchored",!0)),this.popoverElement.style.top=`${e+o}px`,this.popoverElement.style.bottom="auto";let a=this.popoverElement.getBoundingClientRect();(a.bottom>window.innerHeight||this.popoverElement.hasAttribute("data-clipped-at-bottom"))&&(this.popoverElement.style.top=`${e+o-a.height-i}px`,this.popoverElement.style.bottom="auto",this.popoverElement.toggleAttribute("data-clipped-at-bottom",!0))}#y(){this.popoverElement.removeAttribute("data-clipped-at-bottom"),this.popoverElement.removeAttribute("data-anchored")}async#x(){this.#d(),this.popoverElement.classList.toggle("lexxy-prompt-menu--visible",!1),this.#n.removeEventListener("lexxy:change",this.#m),this.#n.removeEventListener("keydown",this.#C),this.#A(),this.#o(),await ps(),this.#r()}#A(){this.keyListeners.forEach(t=>t()),this.keyListeners=[]}#m=async()=>{if(this.initialPrompt){this.initialPrompt=!1;return}this.#B.containsTextBackUntil(this.trigger)?(await this.#k(),await ps(),this.#f()):this.#x()};async#k(){let t=this.#B.textBackUntil(this.trigger),e=await this.source.buildListItems(t);this.popoverElement.innerHTML="",e.length>0?this.#v(e):this.#O(),this.#_()}#v(t){this.popoverElement.classList.remove("lexxy-prompt-menu--empty"),this.popoverElement.append(...t)}#O(){this.popoverElement.classList.add("lexxy-prompt-menu--empty");let t=yt("li",{innerHTML:this.#g});t.classList.add("lexxy-prompt-menu__item--empty"),this.popoverElement.append(t)}get#g(){return this.getAttribute("empty-results")||D8}#C=t=>{t.key==="Escape"&&(this.#x(),this.#n.focus(),t.stopPropagation())};#w(){let t=this.#R+1;t<this.#h.length&&this.#p(this.#h[t])}#M(){let t=this.#R-1;t>=0&&this.#p(this.#h[t])}get#R(){return this.#h.findIndex(t=>t.hasAttribute("aria-selected"))}get#F(){return this.#h[this.#R]}#E(t){return t.preventDefault(),t.stopPropagation(),this.#D(),!0}#D(){this.#N(),this.#x(),this.#n.focus()}#N(){let t=this.source.promptItemFor(this.#F);if(!t)return;let e=Array.from(t.querySelectorAll("template[type='editor']")),i=`${this.trigger}${this.#B.textBackUntil(this.trigger)}`;this.hasAttribute("insert-editable-text")?this.#I(e,i):this.#T(e,i,t.getAttribute("sgid"))}#I(t,e){this.#i.update(()=>{let i=t.flatMap(r=>this.#S(r));this.#B.replaceTextBackUntil(e,i)})}#S(t){return ya(this.#i,Ec(`${t.innerHTML}`))}#T(t,e,i=null){this.#i.update(()=>{let s=this.#$(t,i).flatMap(o=>[o,this.#P()]).slice(0,-1);this.#B.replaceTextBackUntil(e,s)})}#$(t,e=null){return t.map(i=>this.#W(i.innerHTML,i.getAttribute("content-type")||this.#z,i.getAttribute("sgid")||e))}#P(){return Ft(" ")}get#z(){return`application/vnd.${Vi.global.get("attachmentContentTypeNamespace")}.${this.name}`}#W(t,e,i){return new rh({sgid:i,contentType:e,innerHtml:t})}get#B(){return this.#n.contents}get#L(){return this.#n.editorContentElement}async#H(){let t=yt("ul",{role:"listbox",id:Fp("prompt-popover")});return t.classList.add("lexxy-prompt-menu"),t.style.position="absolute",t.setAttribute("nonce",cm()),t.append(...await this.source.buildListItems()),t.addEventListener("click",this.#U),this.#n.appendChild(t),t}#U=t=>{let e=t.target.closest(".lexxy-prompt-menu__item");e&&(this.#p(e),this.#D())};#K(){this.disconnectedCallback(),this.connectedCallback()}};customElements.define("lexxy-prompt",HS);var WS=class extends HTMLElement{connectedCallback(){this.editorElement=this.closest("lexxy-editor"),this.editor=this.editorElement.editor,this.#t(),this.#o()}#t(){this.languagePickerElement=this.#e(),this.languagePickerElement.addEventListener("change",()=>{this.#s(this.languagePickerElement.value)}),this.languagePickerElement.setAttribute("nonce",cm()),this.appendChild(this.languagePickerElement)}#e(){let t=yt("select",{className:"lexxy-code-language-picker","aria-label":"Pick a language\u2026",name:"lexxy-code-language"});for(let[e,i]of Object.entries(this.#r)){let r=document.createElement("option");r.value=e,r.textContent=i,t.appendChild(r)}return t}get#r(){let t={...WR};t.ruby||(t.ruby="Ruby"),t.php||(t.php="PHP"),t.go||(t.go="Go"),t.bash||(t.bash="Bash"),t.json||(t.json="JSON"),t.diff||(t.diff="Diff");let e=Object.entries(t).sort(([,s],[,o])=>s.localeCompare(o)),i=e.findIndex(([s])=>s==="plain"),r=e.splice(i,1)[0];return Object.fromEntries([r,...e])}#s(t){this.editor.update(()=>{let e=this.#i();e&&e.setLanguage(t)})}#o(){this.editor.registerUpdateListener(()=>{this.editor.getEditorState().read(()=>{let t=this.#i();t?this.#n(t):this.#u()})})}#i(){let t=I();if(!P(t))return null;let e=t.anchor.getNode(),i=e.getParent();return hs(e)?e:hs(i)?i:null}#n(t){let e=t.getLanguage();this.#a(e),this.#l(),this.#c(t)}#a(t){if(this.languagePickerElement&&t){let e=yv(t);this.languagePickerElement.value=e}}#c(t){let e=this.editor.getElementByKey(t.getKey());if(!e)return;let i=e.getBoundingClientRect(),r=this.editorElement.getBoundingClientRect(),s=i.top-r.top,o=r.right-i.right;this.style.top=`${s}px`,this.style.right=`${o}px`}#l(){this.hidden=!1}#u(){this.hidden=!0}};customElements.define("lexxy-code-language-picker",WS);var dX=Vi.configure;window.dayjs=AI.default;window.debug=US.default;window.Alpine=n_;window.ChartJs=z1;window.LesliChart=EI.default;n_.start();US.default.info("Ruby on Rails SaaS Development Framework","Lesli");})();
/*
Lesli

Copyright (c) 2025, Lesli Technologies, S. A.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see http://www.gnu.org/licenses/.

Lesli  Ruby on Rails SaaS Development Framework.

Made with  by LesliTech
Building a better future, one line of code at a time.

@contact  hello@lesli.tech
@website  https://www.lesli.tech
@license  GPLv3 http://www.gnu.org/licenses/gpl-3.0.en.html

//  ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~
//  
*/
/*! Bundled license information:

lesli-js/src/debug/utils.js:
lesli-js/debug/browser.js:
  (*
  Lesli
  
  Copyright (c) 2021, Lesli Technologies, S. A.
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
  
  Lesli JS - JavaScript utilities for JavaScript applications
  
  Powered by LesliTech
  Building a better future, one line of code at a time.
  
  @contact  <hello@lesli.tech>
  @website  <https://lesli.tech>
  @license  GPLv3 http://www.gnu.org/licenses/gpl-3.0.en.html
  
  //  ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~
  //  
  *)

lesli-js/src/debug/browser.js:
  (*
  Lesli
  
  Copyright (c) 2020, Lesli Technologies, S. A.
  
  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with this program. If not, see <http://www.gnu.org/licenses/>.
  
  Lesli JS - JavaScript utilities for JavaScript applications
  
  Powered by LesliTech
  Building a better future, one line of code at a time.
  
  @contact  <hello@lesli.tech>
  @website  <https://lesli.tech>
  @license  GPLv3 http://www.gnu.org/licenses/gpl-3.0.en.html
  
  //  ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~     ~~
  //  
  *)

prismjs/prism.js:
  (**
   * Prism: Lightweight, robust, elegant syntax highlighting
   *
   * @license MIT <https://opensource.org/licenses/MIT>
   * @author Lea Verou <https://lea.verou.me>
   * @namespace
   * @public
   *)

trix/dist/trix.esm.min.js:
  (*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
chart.js/dist/chart.js:
  (*!
   * Chart.js v4.5.1
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE *)
*/
